!function(){function t(){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,i){var a=e(t,n);if(a){var o=Object.getOwnPropertyDescriptor(a,n);return o.get?o.get.call(arguments.length<3?t:i):o.value}}).apply(this,arguments)}function e(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var a=s(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}}function o(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"6I+0":function(t,e,n){t.exports=n.p+"1-es5.6ba087ea9114620cc5e3.worker.js"},C9RU:function(e,i,o){"use strict";o.r(i),o.d(i,"SchoolModule",function(){return wi});var c=o("ofXK"),u=o("tk/3"),f=o("3Pt+"),h=o("tyNb"),m=o("hctd"),g=o("pKmL"),p=o("fXoL"),b=o("Bd3B"),v=o("fKvJ"),y=o("voYn"),x=o("bgvp"),k=o("dPmG");function w(t,e){return{name:"addition",operator:{name:"plus",notation:"+"},first:{name:"augend",value:t},second:{name:"addend",value:e},result:{name:"sum",value:t+e}}}function C(t){var e=Object(k.k)(0,t+1),n=Object(k.k)(0,t+1);return e+n>t?e>n?w(e-n,n):w(e,n-e):w(e,n)}function M(t,e){return{name:"subtraction",operator:{name:"minus",notation:"-"},first:{name:"minuend",value:t},second:{name:"subtrahend",value:e},result:{name:"difference",value:t-e}}}function _(t){var e=Object(k.k)(0,t+1),n=Object(k.k)(0,t+1);return e>n?M(e,n):M(n,e)}function O(t,e){var n,i,a=Object(k.k)(1,t+1),o=Object(k.k)(1,Math.min(t,Math.floor(e/a))+1);return{name:"division",operator:{name:"divide",notation:":"},first:{name:"dividend",value:n=o*a},second:{name:"divisor",value:i=Math.random()<.5?o:a},result:{name:"quotient",value:n/i}}}function P(t,e){return{name:"multiplication",operator:{name:"multiply",notation:"\xb7"},first:{name:"multiplier",value:t},second:{name:"multiplicand",value:e},result:{name:"product",value:t*e}}}function T(t,e){var n=Object(k.k)(1,t+1),i=Object(k.k)(1,Math.min(t,Math.floor(e/n))+1);return Math.random()<.5?P(i,n):P(n,i)}function I(t,e){return"first"===e?"? ".concat(t.operator.notation," ").concat(t.second.value," = ").concat(t.result.value):"second"===e?"".concat(t.first.value," ").concat(t.operator.notation," ? = ").concat(t.result.value):"result"===e?"".concat(t.first.value," ").concat(t.operator.notation," ").concat(t.second.value," = ?"):"".concat(t.first.value," ").concat(t.operator.notation," ").concat(t.second.value," = ").concat(t.result.value)}var S=o("0IaG"),U=o("bTqV"),z=[[["","appContentSvg",""]],"*"],B=["[appContentSvg]","*"];function A(t,e){return"translate(".concat(24*t,"px, ").concat(24*e,"px)")}var q,N=((q=function(){function t(){l(this,t),this.rowNum=41,this.colNum=34}return d(t,[{key:"width",get:function(){return 24*this.colNum}},{key:"height",get:function(){return 24*this.rowNum}},{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||q)},q.\u0275cmp=p.Ib({type:q,selectors:[["app-squared-paper"]],inputs:{rowNum:"rowNum",colNum:"colNum"},ngContentSelectors:B,decls:11,vars:6,consts:[[1,"squared-paper"],[1,"squared-paper-bg"],["id","patternSquaredPaper","x","0","y","0","width","24","height","24","patternUnits","userSpaceOnUse"],["fill","none","stroke","#00f","stroke-width",".25","d","M0 0h24v24H0z"],["width","100%","height","100%","fill","url(#patternSquaredPaper)"],["transform","scale(24)"],[1,"squared-paper-fg"]],template:function(t,e){1&t&&(p.kc(z),p.Ub(0,"div",0),p.Ub(1,"div",1),p.ec(),p.Ub(2,"svg"),p.Ub(3,"defs"),p.Ub(4,"pattern",2),p.Pb(5,"path",3),p.Tb(),p.Tb(),p.Pb(6,"rect",4),p.Ub(7,"g",5),p.jc(8),p.Tb(),p.Tb(),p.Tb(),p.dc(),p.Ub(9,"div",6),p.jc(10,1),p.Tb(),p.Tb()),2&t&&(p.wc("width",e.width,"px")("height",e.height,"px"),p.Cb(2),p.Db("width",e.width)("height",e.height))},styles:[".squared-paper[_ngcontent-%COMP%]{position:relative;background-color:#f5f5f5;font-family:Fira Mono,monospace;font-weight:500;font-size:20px;line-height:24px}.squared-paper-bg[_ngcontent-%COMP%]{width:100%;height:100%}.squared-paper-fg[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0}.squared-paper-col-3[_ngcontent-%COMP%], .squared-paper-col-12[_ngcontent-%COMP%], .squared-paper-col-15[_ngcontent-%COMP%], .squared-paper-col-30[_ngcontent-%COMP%]{display:inline-block}.squared-paper-col-3[_ngcontent-%COMP%]{width:72px}.squared-paper-col-12[_ngcontent-%COMP%]{width:288px}.squared-paper-col-15[_ngcontent-%COMP%]{width:360px}.squared-paper-col-30[_ngcontent-%COMP%]{width:720px}"]}),q);function j(t,e){if(1&t){var n=p.Vb();p.ec(),p.dc(),p.Ub(0,"div",14),p.bc("click",function(){return p.sc(n),p.fc().setAnimation("simple-addition-animate-augend")}),p.Bc(1),p.Tb()}if(2&t){var i=p.fc();p.wc("transform",i.augendTransform),p.Cb(1),p.Cc(i.augendText)}}function V(t,e){if(1&t){var n=p.Vb();p.ec(),p.dc(),p.Ub(0,"div",15),p.bc("click",function(){return p.sc(n),p.fc().setAnimation("simple-addition-animate-addend")}),p.Bc(1),p.Tb()}if(2&t){var i=p.fc();p.wc("transform",i.addendTransform),p.Cb(1),p.Cc(i.addendText)}}function D(t,e){if(1&t){var n=p.Vb();p.ec(),p.dc(),p.Ub(0,"div",16),p.bc("click",function(){return p.sc(n),p.fc().setAnimation("simple-addition-animate-sum")}),p.Bc(1),p.Tb()}if(2&t){var i=p.fc();p.wc("transform",i.sumTransform),p.Cb(1),p.Dc("",i.sumText," ")}}function L(t,e){if(1&t){var n=p.Vb();p.ec(),p.dc(),p.Ub(0,"div",17),p.bc("click",function(){return p.sc(n),p.fc().setAnimation("simple-addition-animate-sum-ones")}),p.Bc(1,"\u0435\u0434\u0438\u043d\u0438\u0446\u044b "),p.Tb()}if(2&t){var i=p.fc();p.wc("transform",i.sumOnesTransform)}}function F(t,e){if(1&t){var n=p.Vb();p.ec(),p.dc(),p.Ub(0,"div",17),p.bc("click",function(){return p.sc(n),p.fc().setAnimation("simple-addition-animate-sum-tens")}),p.Bc(1,"\u0434\u0435\u0441\u044f\u0442\u043a\u0438 "),p.Tb()}if(2&t){var i=p.fc();p.wc("transform",i.sumTensTransform)}}function R(t,e){return"translate(".concat(24*(2+t),"px, ").concat(24*(2+e),"px)")}function E(t){var e=+t;return isNaN(e)?0:e}var W,G=((W=function(){function t(){l(this,t),this.augend=0,this.addend=0,this.hiddenTerm=-1,this.rowNum=4,this.animationName="",this.reset()}return d(t,[{key:"ngOnChanges",value:function(t){this.update()}},{key:"ngOnInit",value:function(){}},{key:"setAnimation",value:function(t){this.animationName=t?t===this.animationName?t+" simple-addition-animation-restart":t:""}},{key:"reset",value:function(){this.augendPath=this.addendPath=this.sumPath=this.sumTensPath=this.sumOnesPath="M0 0z",this.rowNum=4,this.augendTransform=this.addendTransform=this.sumTransform=this.sumOnesTransform=this.sumTensTransform=""}},{key:"update",value:function(){this.reset();var t=E(this.augend),e=E(this.addend),n=t+e,i=t%10,a=e%10,o=n%10,s=Math.floor(t/10),r=Math.floor(e/10),c=Math.floor(n/10);if(t>0){var l=i,u=s;u>0?(this.augendPath=l>0?"M0 0h10v".concat(u,"h").concat(l-10,"v1h").concat(-l,"z"):"M0 0h10v".concat(u,"h-10z"),this.augendTransform=R(5,(l>5?0:-.5)+u/2)):(this.augendPath="M0 0h".concat(l,"v1h").concat(-l,"v-1z"),this.augendTransform=R(l/2,0))}if(e>0){var d=Math.min(e,10-i),f=(e-d)%10,h=Math.floor((e-d)/10);if(this.addendPath="M".concat(i," ").concat(s,"h").concat(d,"v").concat(h+1),h>0)this.addendTransform=R(5,s+(h+(d>5?0:1)+(f>5?1:0))/2);else{var m=d+f-10;if(m>=2)this.addendTransform=R(f-m/2,s+.5);else if(d>f)this.addendTransform=R(i+d/2,s);else{var g=Math.max(f/2,f-1);this.addendTransform=R(g,s+1)}}this.addendPath+=f>0?"h".concat(f-10,"v1h").concat(-f,"v").concat(-h-1,"h").concat(10-d,"z"):h>0?"h-10v".concat(-h,"h").concat(10-d,"z"):"h".concat(-d,"z")}if(n>0){var p=c;if(this.sumTransform=R(p<10?11:10,p+1),p>0){this.rowNum+=p;var b=(p-2)/2;this.sumTensPath="M10 0a.5 .5 0 0 1 .5 .5v".concat(b,"a.5 .5 0 0 0 .5 .5a.5 .5 0 0 0 -.5 .5v").concat(b,"a.5 .5 0 0 1 -.5 .5m1 ").concat(-1-b,"h.5v").concat(b+2,"m-.1 -.4l.1 .4 .1 -.4"),this.sumTensTransform=R(11.5,Math.floor(b))}var v=o;if(v>0){this.rowNum+=3;var y=(v-2)/2;this.sumOnesPath="M0 ".concat(p+1,"a.5 .5 0 0 0 .5 .5h").concat(y,"a.5 .5 0 0 1 .5 .5a.5 .5 0 0 1 .5 -.5h").concat(y,"a.5 .5 0 0 0 .5 -.5m").concat(-1-y," 1v.5h").concat(13.5+y-v,"v-.5m-.1 .4l.1 -.4 .1 .4"),this.sumOnesTransform=R(y,p+3)}this.sumPath=p>0?v>0?"M0 0h10v".concat(p,"h").concat(v-10,"v1h").concat(-v,"z"):"M0 0h10v".concat(p,"h-10z"):"M0 0h".concat(v,"v1h").concat(-v,"v-1z")}this.augendText=0===this.hiddenTerm?"?":(10*s+i).toString(),this.addendText=1===this.hiddenTerm?"?":(10*r+a).toString(),this.sumText=2===this.hiddenTerm?"?":(10*c+o).toString()}}]),t}()).\u0275fac=function(t){return new(t||W)},W.\u0275cmp=p.Ib({type:W,selectors:[["app-simple-addition"]],inputs:{augend:"augend",addend:"addend",hiddenTerm:"hiddenTerm"},features:[p.Ab],decls:15,vars:12,consts:[["colNum","18",3,"rowNum"],["appContentSvg","",3,"ngClass"],["transform","translate(2 2)"],["stroke-width","0.1"],["id","augendPath","fill","#00f1","stroke","#008e"],["id","addendPath","fill","#f001","stroke","#800e"],["id","sumPath","fill","none","stroke","#080e","stroke-width","0.2","stroke-dasharray","40","stroke-dashoffset","40"],["fill","none","stroke","#444b","stroke-width","0.1"],["id","sumTensPath"],["id","sumOnesPath"],["class","simple-addition-box simple-addition-augend",3,"transform","click",4,"ngIf"],["class","simple-addition-box simple-addition-addend",3,"transform","click",4,"ngIf"],["class","simple-addition-box simple-addition-sum",3,"transform","click",4,"ngIf"],["class","simple-addition-box simple-addition-info",3,"transform","click",4,"ngIf"],[1,"simple-addition-box","simple-addition-augend",3,"click"],[1,"simple-addition-box","simple-addition-addend",3,"click"],[1,"simple-addition-box","simple-addition-sum",3,"click"],[1,"simple-addition-box","simple-addition-info",3,"click"]],template:function(t,e){1&t&&(p.Ub(0,"app-squared-paper",0),p.ec(),p.Ub(1,"svg",1),p.Ub(2,"g",2),p.Ub(3,"g",3),p.Pb(4,"path",4),p.Pb(5,"path",5),p.Tb(),p.Pb(6,"path",6),p.Ub(7,"g",7),p.Pb(8,"path",8),p.Pb(9,"path",9),p.Tb(),p.Tb(),p.Tb(),p.zc(10,j,2,3,"div",10),p.zc(11,V,2,3,"div",11),p.zc(12,D,2,3,"div",12),p.zc(13,L,2,2,"div",13),p.zc(14,F,2,2,"div",13),p.Tb()),2&t&&(p.lc("rowNum",e.rowNum),p.Cb(1),p.lc("ngClass",e.animationName),p.Cb(3),p.Db("d",e.augendPath),p.Cb(1),p.Db("d",e.addendPath),p.Cb(1),p.Db("d",e.sumPath),p.Cb(2),p.Db("d",e.sumTensPath),p.Cb(1),p.Db("d",e.sumOnesPath),p.Cb(1),p.lc("ngIf",e.augendTransform),p.Cb(1),p.lc("ngIf",e.addendTransform),p.Cb(1),p.lc("ngIf",e.sumTransform),p.Cb(1),p.lc("ngIf",e.sumOnesTransform),p.Cb(1),p.lc("ngIf",e.sumTensTransform))},directives:[N,c.j,c.l],styles:[".simple-addition-box[_ngcontent-%COMP%]{position:absolute;left:-12px;top:0;background-color:#2222;border-radius:12px;min-width:24px;text-align:center;cursor:pointer;transition:box-shadow .3s ease-in-out}.simple-addition-box[_ngcontent-%COMP%]:hover{box-shadow:2px 2px 4px #0008}.simple-addition-augend[_ngcontent-%COMP%]{color:#008e;background-color:#0082}.simple-addition-addend[_ngcontent-%COMP%]{color:#800e;background-color:#8002}.simple-addition-sum[_ngcontent-%COMP%]{min-width:48px;color:#222e;background-color:#2222;letter-spacing:12px;padding-left:12px;left:-6px;text-align:right}.simple-addition-info[_ngcontent-%COMP%]{padding-left:6px;padding-right:6px}@-webkit-keyframes animationTerm{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@keyframes animationTerm{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@-webkit-keyframes animationTermRestart{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@keyframes animationTermRestart{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}.simple-addition-animate-addend[_ngcontent-%COMP%]   #addendPath[_ngcontent-%COMP%], .simple-addition-animate-augend[_ngcontent-%COMP%]   #augendPath[_ngcontent-%COMP%], .simple-addition-animate-sum[_ngcontent-%COMP%]   #sumPath[_ngcontent-%COMP%], .simple-addition-animate-sum-ones[_ngcontent-%COMP%]   #sumOnesPath[_ngcontent-%COMP%], .simple-addition-animate-sum-tens[_ngcontent-%COMP%]   #sumTensPath[_ngcontent-%COMP%]{-webkit-animation:animationTerm 4s linear 1;animation:animationTerm 4s linear 1}.simple-addition-animate-addend.simple-addition-animation-restart[_ngcontent-%COMP%]   #addendPath[_ngcontent-%COMP%], .simple-addition-animate-augend.simple-addition-animation-restart[_ngcontent-%COMP%]   #augendPath[_ngcontent-%COMP%], .simple-addition-animate-sum-ones.simple-addition-animation-restart[_ngcontent-%COMP%]   #sumOnesPath[_ngcontent-%COMP%], .simple-addition-animate-sum-tens.simple-addition-animation-restart[_ngcontent-%COMP%]   #sumTensPath[_ngcontent-%COMP%], .simple-addition-animate-sum.simple-addition-animation-restart[_ngcontent-%COMP%]   #sumPath[_ngcontent-%COMP%]{-webkit-animation-name:animationTermRestart;animation-name:animationTermRestart}"]}),W);function Y(t,e){if(1&t){var n=p.Vb();p.ec(),p.dc(),p.Ub(0,"div",9),p.bc("click",function(){return p.sc(n),p.fc().setAnimation("simple-multiplication-animate-multiplier")}),p.Bc(1),p.Tb()}if(2&t){var i=p.fc();p.wc("transform",i.multiplierTransform),p.Cb(1),p.Dc(" ",i.multiplierText,"")}}function H(t,e){if(1&t){var n=p.Vb();p.ec(),p.dc(),p.Ub(0,"div",10),p.bc("click",function(){return p.sc(n),p.fc().setAnimation("simple-multiplication-animate-multiplicand")}),p.Bc(1),p.Tb()}if(2&t){var i=p.fc();p.wc("transform",i.multiplicandTransform),p.Cb(1),p.Dc(" ",i.multiplicandText,"")}}function $(t,e){if(1&t){var n=p.Vb();p.ec(),p.dc(),p.Ub(0,"div",11),p.bc("click",function(){return p.sc(n),p.fc().setAnimation("simple-multiplication-animate-product")}),p.Bc(1),p.Tb()}if(2&t){var i=p.fc();p.wc("transform",i.productTransform),p.Cb(1),p.Dc("",i.productText," ")}}function X(t,e){return A(t+2,e+2)}function K(t){var e=+t;return isNaN(e)?0:e}var Q,J=((Q=function(){function t(){l(this,t),this.multiplier=0,this.multiplicand=0,this.hiddenTerm=-1,this.colNum=4,this.rowNum=4,this.animationName="",this.clear()}return d(t,[{key:"setAnimation",value:function(t){this.animationName=t?t===this.animationName?t+" simple-multiplication-animation-restart":t:""}},{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(t){this.clear();var e=K(this.multiplier),n=K(this.multiplicand),i=e*n;i>0&&(this.productPath="M0 0h".concat(e,"v").concat(n,"h").concat(-e,"z"),this.productText=2===this.hiddenTerm?"?":""+i,this.productTransform=X(e/2,n/2),this.multiplierPath="M0 ".concat(n,"a.5 .5 0 0 0 .5 .5h").concat(e/2-1,"a.5 .5 0 0 1 .5 .5a.5 .5 0 0 1 .5 -.5h").concat(e/2-1,"a.5 .5 0 0 0 .5 -.5"),this.multiplierText=0===this.hiddenTerm?"?":""+e,this.multiplierTransform=X(e/2,n+1.5),this.multiplicandPath="M".concat(e," 0a.5 .5 0 0 1 .5 .5v").concat(n/2-1,"a.5 .5 0 0 0 .5 .5a.5 .5 0 0 0 -.5 .5v").concat(n/2-1,"a.5 .5 0 0 1 -.5 .5"),this.multiplicandText=1===this.hiddenTerm?"?":""+n,this.multiplicandTransform=X(e+1.5,n/2),this.colNum+=e+1,this.rowNum+=n+1)}},{key:"clear",value:function(){this.multiplierPath=this.multiplicandPath=this.productPath="M0 0z",this.multiplierText=this.multiplierTransform=this.multiplicandText=this.multiplicandTransform=this.productText=this.productTransform=void 0,this.colNum=4,this.rowNum=4}}]),t}()).\u0275fac=function(t){return new(t||Q)},Q.\u0275cmp=p.Ib({type:Q,selectors:[["app-simple-multiplication"]],inputs:{multiplier:"multiplier",multiplicand:"multiplicand",hiddenTerm:"hiddenTerm"},features:[p.Ab],decls:9,vars:9,consts:[[3,"rowNum","colNum"],["appContentSvg","",3,"ngClass"],["transform","translate(2 2)"],["id","productPath","fill","#0f04","stroke","#444e","stroke-width","0.1"],["id","multiplierPath","fill","none","stroke","#444e","stroke-width","0.1"],["id","multiplicandPath","fill","none","stroke","#444e","stroke-width","0.1"],["class","simple-multiplication-box simple-multiplication-multiplier",3,"transform","click",4,"ngIf"],["class","simple-multiplication-box simple-multiplication-multiplicand",3,"transform","click",4,"ngIf"],["class","simple-multiplication-box simple-multiplication-product",3,"transform","click",4,"ngIf"],[1,"simple-multiplication-box","simple-multiplication-multiplier",3,"click"],[1,"simple-multiplication-box","simple-multiplication-multiplicand",3,"click"],[1,"simple-multiplication-box","simple-multiplication-product",3,"click"]],template:function(t,e){1&t&&(p.Ub(0,"app-squared-paper",0),p.ec(),p.Ub(1,"svg",1),p.Ub(2,"g",2),p.Pb(3,"path",3),p.Pb(4,"path",4),p.Pb(5,"path",5),p.Tb(),p.Tb(),p.zc(6,Y,2,3,"div",6),p.zc(7,H,2,3,"div",7),p.zc(8,$,2,3,"div",8),p.Tb()),2&t&&(p.lc("rowNum",e.rowNum)("colNum",e.colNum),p.Cb(1),p.lc("ngClass",e.animationName),p.Cb(2),p.Db("d",e.productPath),p.Cb(1),p.Db("d",e.multiplierPath),p.Cb(1),p.Db("d",e.multiplicandPath),p.Cb(1),p.lc("ngIf",e.multiplierText),p.Cb(1),p.lc("ngIf",e.multiplicandText),p.Cb(1),p.lc("ngIf",e.productText))},directives:[N,c.j,c.l],styles:[".simple-multiplication-box[_ngcontent-%COMP%]{position:absolute;left:-12px;top:-12px;background-color:#2222;border-radius:12px;min-width:24px;text-align:center;cursor:pointer;transition:box-shadow .3s ease-in-out}.simple-multiplication-box[_ngcontent-%COMP%]:hover{box-shadow:2px 2px 4px #0008}.simple-multiplication-product[_ngcontent-%COMP%]{color:#444e;background-color:#2222}.simple-multiplication-multiplier[_ngcontent-%COMP%]{color:#808e;background-color:#8082}.simple-multiplication-multiplicand[_ngcontent-%COMP%]{color:#d13e;background-color:#d132}@-webkit-keyframes animationTerm{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@keyframes animationTerm{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@-webkit-keyframes animationTermRestart{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@keyframes animationTermRestart{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}.simple-multiplication-animate-multiplicand[_ngcontent-%COMP%]   #multiplicandPath[_ngcontent-%COMP%], .simple-multiplication-animate-multiplier[_ngcontent-%COMP%]   #multiplierPath[_ngcontent-%COMP%], .simple-multiplication-animate-product[_ngcontent-%COMP%]   #productPath[_ngcontent-%COMP%]{-webkit-animation:animationTerm 4s linear 1;animation:animationTerm 4s linear 1}.simple-multiplication-animate-multiplicand.simple-multiplication-animation-restart[_ngcontent-%COMP%]   #multiplicandPath[_ngcontent-%COMP%], .simple-multiplication-animate-multiplier.simple-multiplication-animation-restart[_ngcontent-%COMP%]   #multiplierPath[_ngcontent-%COMP%], .simple-multiplication-animate-product.simple-multiplication-animation-restart[_ngcontent-%COMP%]   #productPath[_ngcontent-%COMP%]{-webkit-animation-name:animationTermRestart;animation-name:animationTermRestart}"]}),Q);function Z(t,e){if(1&t&&p.Pb(0,"app-simple-addition",5),2&t){var n=p.fc();p.lc("augend",n.firstTermValue)("addend",n.secondTermValue)("hiddenTerm",n.hiddenTerm)}}function tt(t,e){if(1&t&&p.Pb(0,"app-simple-multiplication",6),2&t){var n=p.fc();p.lc("multiplier",n.firstTermValue)("multiplicand",n.secondTermValue)("hiddenTerm",n.hiddenTerm)}}var et,nt=((et=function(){function t(e){l(this,t),this.item=e,this.title="",this.content="",this.contentType=null,this.firstTermValue=0,this.secondTermValue=0,this.hiddenTerm=-1}return d(t,[{key:"ngOnInit",value:function(){var t=this.item.inputIndex,e=this.item.expression;if(this.title=I(e,t),"addition"===e.name){this.firstTermValue=e.first.value,this.secondTermValue=e.second.value,this.content=function(t,e){return"first"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043f\u0435\u0440\u0432\u043e\u0435 \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0438\u0437 \u0441\u0443\u043c\u043c\u044b \u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0432\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u043e\u0435.":"second"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0432\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0438\u0437 \u0441\u0443\u043c\u043c\u044b \u0432\u044b\u0447\u0435\u0441\u0442\u044c \u043f\u0435\u0440\u0432\u043e\u0435 \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u043e\u0435.":"result"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0441\u0443\u043c\u043c\u0443 (?), \u043d\u0430\u0434\u043e \u0441\u043b\u043e\u0436\u0438\u0442\u044c \u043f\u0435\u0440\u0432\u043e\u0435 \u0438 \u0432\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u044b\u0435.":"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0441\u0443\u043c\u043c\u0443 (".concat(t.result.value,"), \u043d\u0430\u0434\u043e \u0441\u043b\u043e\u0436\u0438\u0442\u044c \u043f\u0435\u0440\u0432\u043e\u0435 (").concat(t.first.value,") \u0438 \u0432\u0442\u043e\u0440\u043e\u0435 (").concat(t.second.value,") \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u044b\u0435.")}(e,t),this.contentType="addition";var n=function(t,e){var n=t.first,i=t.second,a=t.result,o=i.value===a.value,s=n.value===a.value;return o&&s?"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u043e\u043b\u044c \u043d\u0435 \u043f\u0440\u0438\u0431\u0430\u0432\u043b\u044f\u0439, \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f!":o&&"first"===e||s&&"second"===e?"\u041a\u0430\u043a\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u0438\u0431\u0430\u0432\u0438\u0442\u044c \u043a \u0447\u0438\u0441\u043b\u0443 ".concat(a.value," \u0447\u0442\u043e\u0431\u044b \u043e\u043d\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c?"):o&&"first"!==e?"\u0415\u0441\u043b\u0438 \u043a \u043d\u0443\u043b\u044e \u043f\u0440\u0438\u0431\u0430\u0432\u0438\u0442\u044c \u0447\u0438\u0441\u043b\u043e, \u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f \u0442\u043e \u0436\u0435 \u0441\u0430\u043c\u043e\u0435 \u0447\u0438\u0441\u043b\u043e.":s&&"second"!==e?"\u0415\u0441\u043b\u0438 \u043a \u043b\u044e\u0431\u043e\u043c\u0443 \u0447\u0438\u0441\u043b\u0443 \u043f\u0440\u0438\u0431\u0430\u0432\u0438\u0442\u044c 0 \u0442\u043e \u044d\u0442\u043e \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e, \u0447\u0442\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043a \u043d\u0435\u043c\u0443 \u043d\u0435 \u043f\u0440\u0438\u0431\u0430\u0432\u0438\u0442\u044c!":null}(e,t);n?(this.content=n,this.hiddenTerm=-1):this.hiddenTerm="first"===t?0:"second"===t?1:2}else if("subtraction"===e.name){this.firstTermValue=e.result.value,this.secondTermValue=e.second.value,this.contentType="addition",this.content=function(t,e){return"first"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u043c\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0441\u043b\u043e\u0436\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c \u0438 \u0432\u044b\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0435.":"second"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0432\u044b\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0438\u0437 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u043c\u043e\u0433\u043e \u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c.":"result"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c (?), \u043d\u0430\u0434\u043e \u0438\u0437 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u043c\u043e\u0433\u043e \u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0432\u044b\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0435.":"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c (".concat(t.result.value,"), \u043d\u0430\u0434\u043e \u0438\u0437 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u043c\u043e\u0433\u043e (").concat(t.first.value,") \u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0432\u044b\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0435 (").concat(t.second.value,").")}(e,t);var i=function(t,e){var n=t.first,i=t.second,a=t.result;return n.value===i.value?0===n.value?"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u043e\u043b\u044c \u043d\u0435 \u043e\u0442\u043d\u0438\u043c\u0430\u0439, \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f!":"\u0420\u0430\u0437\u043d\u043e\u0441\u0442\u044c \u0434\u0432\u0443\u0445 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0445 \u0447\u0438\u0441\u0435\u043b \u0432\u0441\u0435\u0433\u0434\u0430 \u0440\u0430\u0432\u043d\u0430 \u043d\u0443\u043b\u044e.":0===i.value?"second"===e?"\u041a\u0430\u043a\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043d\u0443\u0436\u043d\u043e \u043e\u0442\u043d\u044f\u0442\u044c \u043e\u0442 \u0447\u0438\u0441\u043b\u0430 ".concat(a.value," \u0447\u0442\u043e\u0431\u044b \u043e\u043d\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c?"):"\u041f\u0440\u0438 \u0432\u044b\u0447\u0438\u0442\u0430\u043d\u0438\u0438 \u043d\u0443\u043b\u044f \u0438\u0437 \u043b\u044e\u0431\u043e\u0433\u043e \u0447\u0438\u0441\u043b\u0430 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f \u044d\u0442\u043e \u0441\u0430\u043c\u043e\u0435 \u0447\u0438\u0441\u043b\u043e!":null}(e,t);i?(this.content=i,this.hiddenTerm=-1):this.hiddenTerm="first"===t?2:"second"===t?1:0}else"multiplication"===e.name?(this.firstTermValue=e.first.value,this.secondTermValue=e.second.value,this.contentType="multiplication",this.content=function(t,e){return"first"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043f\u0435\u0440\u0432\u044b\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (?), \u043d\u0430\u0434\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 (".concat(t.result.value,") \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (").concat(t.second.value,")."):"second"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0432\u0442\u043e\u0440\u043e\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (?), \u043d\u0430\u0434\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 (".concat(t.result.value,") \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u044b\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (").concat(t.first.value,")."):"result"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0447\u0438\u0441\u0435\u043b (?), \u043d\u0430\u0434\u043e \u043f\u0435\u0440\u0432\u044b\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (".concat(t.first.value,") \u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (").concat(t.second.value,")."):"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0447\u0438\u0441\u0435\u043b, \u043d\u0430\u0434\u043e \u043f\u0435\u0440\u0432\u044b\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c \u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c."}(e,t),this.hiddenTerm="first"===t?0:"second"===t?1:2):"division"===e.name&&(this.firstTermValue=e.result.value,this.secondTermValue=e.second.value,this.contentType="multiplication",this.content=function(t,e){return"first"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0434\u0435\u043b\u0438\u043c\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0447\u0430\u0441\u0442\u043d\u043e\u0435 (".concat(t.result.value,") \u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u043d\u0430 \u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c (").concat(t.second.value,")."):"second"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c (?), \u043d\u0430\u0434\u043e \u0434\u0435\u043b\u0438\u043c\u043e\u0435 (".concat(t.first.value,") \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u0447\u0430\u0441\u0442\u043d\u043e\u0435 (").concat(t.result.value,")."):"result"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0447\u0430\u0441\u0442\u043d\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0434\u0435\u043b\u0438\u043c\u043e\u0435 (".concat(t.first.value,") \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c (").concat(t.second.value,")."):"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0447\u0430\u0441\u0442\u043d\u043e\u0435, \u043d\u0430\u0434\u043e \u0434\u0435\u043b\u0438\u043c\u043e\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c."}(e,t),this.hiddenTerm="first"===t?2:"second"===t?1:0)}}]),t}()).\u0275fac=function(t){return new(t||et)(p.Ob(S.a))},et.\u0275cmp=p.Ib({type:et,selectors:[["app-math-expression-dialog"]],decls:10,vars:4,consts:[["mat-dialog-title",""],[3,"augend","addend","hiddenTerm",4,"ngIf"],[3,"multiplier","multiplicand","hiddenTerm",4,"ngIf"],["align","end"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""],[3,"augend","addend","hiddenTerm"],[3,"multiplier","multiplicand","hiddenTerm"]],template:function(t,e){1&t&&(p.Ub(0,"h2",0),p.Bc(1),p.Tb(),p.Ub(2,"mat-dialog-content"),p.Ub(3,"p"),p.Bc(4),p.Tb(),p.zc(5,Z,1,3,"app-simple-addition",1),p.zc(6,tt,1,3,"app-simple-multiplication",2),p.Tb(),p.Ub(7,"mat-dialog-actions",3),p.Ub(8,"button",4),p.Bc(9,"\u041f\u043e\u043d\u044f\u0442\u043d\u043e!"),p.Tb(),p.Tb()),2&t&&(p.Cb(1),p.Cc(e.title),p.Cb(3),p.Cc(e.content),p.Cb(1),p.lc("ngIf",e.hiddenTerm>=0&&"addition"===e.contentType),p.Cb(1),p.lc("ngIf",e.hiddenTerm>=0&&"multiplication"===e.contentType))},directives:[S.h,S.e,c.l,S.c,U.a,S.d,G,J],styles:[""]}),et),it=o("NFeN"),at=o("jhN1");function ot(t,e){if(1&t){var n=p.Vb();p.Ub(0,"button",1),p.bc("click",function(){p.sc(n);var t=e.index;return p.fc().selectionChange.emit(t)}),p.Bc(1),p.Tb()}if(2&t){var i=e.$implicit;p.Cb(1),p.Cc(i)}}var st,rt=((st=function(){function t(){l(this,t),this.buttonNames=[],this.selectionChange=new p.n}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||st)},st.\u0275cmp=p.Ib({type:st,selectors:[["app-numpad"]],inputs:{buttonNames:"buttonNames"},outputs:{selectionChange:"selectionChange"},decls:1,vars:1,consts:[["type","button","mat-button","",3,"click",4,"ngFor","ngForOf"],["type","button","mat-button","",3,"click"]],template:function(t,e){1&t&&p.zc(0,ot,2,1,"button",0),2&t&&p.lc("ngForOf",e.buttonNames)},directives:[c.k,U.a],styles:[".mat-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]{color:inherit}"]}),st),ct=["itemInputs"];function lt(t,e){1&t&&(p.Ub(0,"span",14),p.Bc(1,"\u2714"),p.Tb())}function ut(t,e){if(1&t){var n=p.Vb();p.Ub(0,"label",15),p.bc("click",function(){p.sc(n);var t=p.fc().index;return p.fc().noteRequest.emit(t)}),p.Bc(1,"\u2217"),p.Tb()}}function dt(t,e){if(1&t&&(p.Sb(0),p.Ub(1,"span",17),p.Bc(2),p.Tb(),p.Ub(3,"span",19),p.Bc(4,"="),p.Tb(),p.Rb()),2&t){var n=p.fc(2).$implicit;p.Cb(1),p.lc("title",n.expression.second.name),p.Cb(1),p.Cc(n.expression.second.value)}}function ft(t,e){if(1&t&&(p.Ub(0,"label",16),p.Ub(1,"span",17),p.Bc(2),p.Tb(),p.Ub(3,"span",17),p.Bc(4),p.Tb(),p.zc(5,dt,5,2,"ng-container",18),p.Tb()),2&t){var n=p.fc().$implicit;p.lc("for",n.inputName),p.Cb(1),p.lc("title",n.expression.first.name),p.Cb(1),p.Cc(n.expression.first.value),p.Cb(1),p.lc("title",n.expression.operator.name),p.Cb(1),p.Cc(n.expression.operator.notation),p.Cb(1),p.lc("ngIf","second"!==n.inputIndex)}}function ht(t,e){if(1&t&&(p.Sb(0),p.Ub(1,"span",17),p.Bc(2),p.Tb(),p.Ub(3,"span",17),p.Bc(4),p.Tb(),p.Rb()),2&t){var n=p.fc(2).$implicit;p.Cb(1),p.lc("title",n.expression.operator.name),p.Cb(1),p.Cc(n.expression.operator.notation),p.Cb(1),p.lc("title",n.expression.second.name),p.Cb(1),p.Cc(n.expression.second.value)}}function mt(t,e){if(1&t&&(p.Ub(0,"label",16),p.zc(1,ht,5,4,"ng-container",18),p.Ub(2,"span",19),p.Bc(3,"="),p.Tb(),p.Ub(4,"span",17),p.Bc(5),p.Tb(),p.Tb()),2&t){var n=p.fc().$implicit;p.lc("for",n.inputName),p.Cb(1),p.lc("ngIf","second"!==n.inputIndex),p.Cb(3),p.lc("title",n.expression.result.name),p.Cb(1),p.Cc(n.expression.result.value)}}function gt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",4),p.Ub(1,"div",5),p.Ub(2,"span",6),p.zc(3,lt,2,0,"span",7),p.zc(4,ut,2,0,"label",8),p.Tb(),p.Tb(),p.Ub(5,"div",9),p.Ub(6,"div",10),p.zc(7,ft,6,6,"label",11),p.Ub(8,"input",12,13),p.bc("ngModelChange",function(t){p.sc(n);var i=e.$implicit,a=e.index,o=p.fc();return i.inputValue=t,o.itemChange.emit(a)})("keyup.Enter",function(){p.sc(n);var t=e.index;return p.fc().onInputEnter(t)})("focus",function(t){p.sc(n);var i=e.index,a=p.fc(),o=p.qc(1);return a.onInputFocus(t,o,i)}),p.Tb(),p.zc(10,mt,6,4,"label",11),p.Tb(),p.Tb(),p.Tb()}if(2&t){var i=e.$implicit,a=p.fc();p.Cb(3),p.lc("ngIf",i.isChecked&&i.isValid),p.Cb(1),p.lc("ngIf",i.hasNote),p.Cb(3),p.lc("ngIf","first"!==i.inputIndex),p.Cb(1),p.Gb("invalid",i.isChecked&&!i.isValid),p.lc("id",i.inputName)("name",i.inputName)("readonly",!a.active||i.isReadonly)("ngModel",i.inputValue),p.Db("maxlength",i.inputLength),p.Cb(2),p.lc("ngIf","result"!==i.inputIndex)}}function pt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",23),p.Ub(1,"app-numpad",24),p.bc("selectionChange",function(t){return p.sc(n),p.fc(2).onInputNext(t)}),p.Tb(),p.Tb()}if(2&t){var i=p.fc(2);p.Cb(1),p.lc("buttonNames",i.buttons)}}function bt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",20),p.Ub(1,"div",21),p.bc("click",function(){p.sc(n);var t=p.fc();return t.showKeyboard=!t.showKeyboard}),p.Ub(2,"mat-icon"),p.Bc(3),p.Tb(),p.Tb(),p.zc(4,pt,2,1,"div",22),p.Tb()}if(2&t){var i=p.fc();p.wc("transform",i.keyboardTransform),p.Cb(3),p.Cc(i.toggleKeyboardIcon),p.Cb(1),p.lc("ngIf",i.showKeyboard)}}var vt,yt,xt=((yt=function(){function t(){l(this,t),this.active=!0,this.itemChange=new p.n,this.noteRequest=new p.n,this.buttons=["1","2","3","4","5","6","7","8","9","0","\u2190","OK"],this.showKeyboard=!1,this.keyboardTransform="",this.inputIndex=-1}return d(t,[{key:"toggleKeyboardIcon",get:function(){return this.showKeyboard?"keyboard_hide":"keyboard"}},{key:"ngAfterViewInit",value:function(){this.nextItemRequestFocus(0)}},{key:"ngOnChanges",value:function(t){var e=this,n=t.items;n&&(this.keyboardTransform="",this.inputIndex=-1,n.firstChange||setTimeout(function(){e.nextItemRequestFocus(0)},100))}},{key:"ngOnInit",value:function(){}},{key:"onInputEnter",value:function(t){if(t>=0&&t<this.items.length){var e=this.items[t].inputValue;if(e&&!isNaN(+e))return this.nextItemRequestFocus(t+1)}return!0}},{key:"onInputFocus",value:function(t,e,n){this.inputIndex=n;var i=t.target;if(e&&i){var a=e.getBoundingClientRect(),o=i.getBoundingClientRect();this.keyboardTransform="translate(".concat(o.left-a.left,"px, ").concat(o.bottom-a.top,"px)")}}},{key:"onInputNext",value:function(t){var e=this.buttons[t];if(isNaN(+e))"\u2190"===e?this.onInputBack():"OK"===e&&(this.showKeyboard=this.onInputEnter(this.inputIndex));else if(this.inputIndex>=0&&this.inputIndex<this.items.length){var n=this.items[this.inputIndex];(!n.isReadonly||n.inputValue.length<n.inputLength)&&(n.inputValue=n.inputValue+e,this.itemChange.emit(this.inputIndex))}}},{key:"onInputBack",value:function(){if(this.inputIndex>=0&&this.inputIndex<this.items.length){var t=this.items[this.inputIndex],e=t.inputValue.length;!t.isReadonly&&e>0&&(t.inputValue=t.inputValue.substring(0,e-1),this.itemChange.emit(this.inputIndex))}}},{key:"nextItemRequestFocus",value:function(t){for(var e=this.inputList.toArray(),n=e.length,i=function(i){var a=e[(t+i)%n].nativeElement;if(a&&!a.value)return{v:(setTimeout(function(){a.focus()}),!0)}},a=0;a<n;a++){var o=i(a);if("object"==typeof o)return o.v}return!1}}]),t}()).\u0275fac=function(t){return new(t||yt)},yt.\u0275cmp=p.Ib({type:yt,selectors:[["app-math-input-group"]],viewQuery:function(t,e){var n;1&t&&p.Gc(ct,1),2&t&&p.pc(n=p.cc())&&(e.inputList=n)},inputs:{active:"active",items:"items"},outputs:{itemChange:"itemChange",noteRequest:"noteRequest"},features:[p.Ab],decls:4,vars:2,consts:[[1,"math-input-group"],["main",""],["class","math-input-group-item",4,"ngFor","ngForOf"],["class","math-input-group-keyboard",3,"transform",4,"ngIf"],[1,"math-input-group-item"],[1,"math-input-group-col-20"],[1,"math-input-group-item-pref"],["class","math-input-group-mark",4,"ngIf"],["class","math-input-group-note",3,"click",4,"ngIf"],[1,"math-input-group-col-80"],[1,"math-input-group-item-main"],[3,"for",4,"ngIf"],["type","text","placeholder","?","autocomplete","off",3,"id","name","readonly","ngModel","ngModelChange","keyup.Enter","focus"],["itemInputs",""],[1,"math-input-group-mark"],[1,"math-input-group-note",3,"click"],[3,"for"],[3,"title"],[4,"ngIf"],["title","equals"],[1,"math-input-group-keyboard"],[1,"math-input-group-keyboard-icon",3,"click"],["class","math-input-group-keyboard-dial",4,"ngIf"],[1,"math-input-group-keyboard-dial"],[3,"buttonNames","selectionChange"]],template:function(t,e){1&t&&(p.Ub(0,"div",0,1),p.zc(2,gt,11,11,"div",2),p.zc(3,bt,5,4,"div",3),p.Tb()),2&t&&(p.Cb(2),p.lc("ngForOf",e.items),p.Cb(1),p.lc("ngIf",e.active&&e.keyboardTransform))},directives:[c.k,c.l,f.b,f.e,f.i,f.l,it.a,rt],styles:['.math-input-group[_ngcontent-%COMP%]{position:relative;margin-right:96px}.math-input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font:inherit;letter-spacing:inherit;border:none;background-color:transparent;margin-left:-6px;margin-right:6px;padding:0 0 0 6px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="1"][_ngcontent-%COMP%]{width:18px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="2"][_ngcontent-%COMP%]{width:42px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="3"][_ngcontent-%COMP%]{width:66px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="4"][_ngcontent-%COMP%]{width:90px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="5"][_ngcontent-%COMP%]{width:114px}.math-input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{letter-spacing:normal;outline:thin dashed #00f;background-color:#fed}.math-input-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{-webkit-text-decoration:solid red line-through;text-decoration:solid red line-through}.math-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}.math-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{text-shadow:1px 1px 2px #cba}.math-input-group[_ngcontent-%COMP%]   .math-input-group-item[_ngcontent-%COMP%]{display:inline-block;width:50%;margin-bottom:24px}.math-input-group[_ngcontent-%COMP%]   .math-input-group-col-20[_ngcontent-%COMP%]{display:inline-block;width:20%}.math-input-group[_ngcontent-%COMP%]   .math-input-group-col-80[_ngcontent-%COMP%]{display:inline-block;width:80%}.math-input-group[_ngcontent-%COMP%]   .math-input-group-mark[_ngcontent-%COMP%]{color:red}.math-input-group[_ngcontent-%COMP%]   .math-input-group-note[_ngcontent-%COMP%]{color:#008}.math-input-group[_ngcontent-%COMP%]   .math-input-group-item-pref[_ngcontent-%COMP%]{margin-left:24px}.math-input-group[_ngcontent-%COMP%]   .math-input-group-item-main[_ngcontent-%COMP%], .math-input-group[_ngcontent-%COMP%]   .math-input-group-item-pref[_ngcontent-%COMP%]{letter-spacing:12px;padding-left:6px}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard[_ngcontent-%COMP%]{pointer-events:none;position:absolute;top:0;left:0;transition:transform .6s ease-in-out}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard-icon[_ngcontent-%COMP%]{pointer-events:auto;cursor:pointer;height:24px;color:#bbf;transition:color .6s ease-in-out}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard-icon[_ngcontent-%COMP%]:hover{color:#008}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard-dial[_ngcontent-%COMP%]{pointer-events:auto;position:relative;border:1px solid #bbf;border-radius:4px;padding:2px;top:-24px;left:24px;width:192px;color:#008;background-color:#ddf;box-shadow:2px 2px 4px #888}']}),yt),kt=((vt=function(){function t(e){l(this,t),this._ref=e}return d(t,[{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){var e,n=null===(e=t._ref)||void 0===e?void 0:e.nativeElement;n&&n.focus()})}}]),t}()).\u0275fac=function(t){return new(t||vt)(p.Ob(p.l))},vt.\u0275dir=p.Jb({type:vt,selectors:[["","appFocus",""]]}),vt),wt=o("STbY"),Ct=["menuButton"];function Mt(t,e){if(1&t&&(p.Ub(0,"button",14),p.Ub(1,"mat-icon"),p.Bc(2,"face"),p.Tb(),p.Tb()),2&t){var n=p.fc();p.lc("disabled",!("active"===n.primeStatus&&n.canPrimeSubmit))}}function _t(t,e){if(1&t){var n=p.Vb();p.Ub(0,"mat-icon",15),p.bc("click",function(){p.sc(n);var t=p.fc();return t.victoryAnimation=!t.victoryAnimation}),p.Tb()}if(2&t){var i=p.fc();p.Gb("animate",i.victoryAnimation),p.lc("ngClass",i.victoryClass)}}function Ot(t,e){if(1&t){var n=p.Vb();p.Sb(0),p.Ub(1,"button",16,17),p.Ub(3,"mat-icon"),p.Bc(4,"face"),p.Tb(),p.Tb(),p.Ub(5,"mat-menu",18,19),p.Ub(7,"button",20),p.bc("click",function(){return p.sc(n),p.fc().onRefresh()}),p.Ub(8,"mat-icon",21),p.Bc(9,"refresh"),p.Tb(),p.Ub(10,"span"),p.Bc(11),p.Tb(),p.Tb(),p.Tb(),p.Rb()}if(2&t){var i=p.qc(6),a=p.fc();p.Cb(1),p.lc("matMenuTriggerFor",i),p.Cb(10),p.Cc(a.refreshButtonLabel)}}function Pt(t,e){if(1&t&&(p.Ub(0,"span",22),p.Bc(1),p.Tb()),2&t){var n=p.fc();p.Cb(1),p.Cc(n.scoreMessage)}}function Tt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"form",5,23),p.bc("ngSubmit",function(){p.sc(n);var t=p.qc(1);return p.fc().onExtraSubmit(t)}),p.Ub(2,"div",7),p.Bc(3),p.Tb(),p.Ub(4,"app-math-input-group",24),p.bc("itemChange",function(t){return p.sc(n),p.fc().onExtraItemChange(t)})("noteRequest",function(t){return p.sc(n),p.fc().requestNoteFor(t)}),p.Tb(),p.Ub(5,"div",9),p.Ub(6,"button",25),p.Ub(7,"mat-icon"),p.Bc(8,"child_care"),p.Tb(),p.Tb(),p.Ub(9,"label"),p.Bc(10),p.Tb(),p.Tb(),p.Tb()}if(2&t){var i=p.fc();p.Cb(3),p.Cc(i.extraMessage),p.Cb(1),p.lc("items",i.extraItems)("active","active"===i.extraStatus),p.Cb(2),p.lc("disabled","active"!==i.extraStatus),p.Cb(3),p.Db("for","done"===i.extraStatus?"onPrimeSubmitButton":"onExtraSubmitButton"),p.Cb(1),p.Cc(i.extraSubmitLabel)}}function It(t){return t.replace(/[^0-9]/g,"")}var St,Ut=["first","second","result"],zt="[School.Math.Grade-3.Mental-math]",Bt=((St=function(){function t(e,n,i,a){l(this,t),this._dialog=a,this.primeMessage="\u041d\u0430\u0439\u0434\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f.",this.extraMessage="\u0420\u0430\u0431\u043e\u0442\u0430 \u043d\u0430\u0434 \u043e\u0448\u0438\u0431\u043a\u0430\u043c\u0438:",this.canPrimeSubmit=!1,this.scoreMessage="",this.score=0,this.autoplay=new v.a,this.todayVictories=0,this.victoryAnimation=!1,this.expressionTypes=["a","s","m","d"],n.addSvgIcon("icon_sun",i.bypassSecurityTrustResourceUrl("assets/school/sun.svg"));var o=null==e?void 0:e.snapshot.queryParams.mode;if(o){var s=o.match(/([asmdASMD][0-9]*)/g);(null==s?void 0:s.length)>0&&(this.expressionTypes=s)}}return d(t,[{key:"init",value:function(){this.autoplay.stop(),this.canPrimeSubmit=!1,this.score=0,this.scoreMessage="",this.primeStatus="active",this.primeItems=[],this.extraStatus=void 0,this.extraItems=void 0;for(var t=0;t<100&&this.primeItems.length<10;t++){var e=Object(b.d)(this.expressionTypes),n=+e.substring(1);switch(n=n?Math.max(Math.min(n,100),10):100,e[0]){case"a":this._addPrimeItem(C(n));break;case"s":this._addPrimeItem(_(n));break;case"m":this._addPrimeItem(T(10,n));break;case"d":this._addPrimeItem(O(10,n));break;case"A":this._addPrimeItem(C(n),"result");break;case"S":this._addPrimeItem(_(n),"result");break;case"M":this._addPrimeItem(T(10,n),"result");break;case"D":this._addPrimeItem(O(10,n),"result")}}}},{key:"ngOnInit",value:function(){this.init();var t=localStorage.getItem(zt);if(t){var e=JSON.parse(t);if(e){var n=e[Object(x.a)("YYYY-MM-DD")];"number"==typeof n&&n>this.todayVictories&&(this.todayVictories=n,this.victoryClass="step"+Math.min(5,this.todayVictories))}}}},{key:"ngOnDestroy",value:function(){this.autoplay.stop()}},{key:"onRefresh",value:function(){this.init()}},{key:"getPrimeSubmitStatus",value:function(){if("active"!==this.primeStatus)return!1;var t,e=r(this.primeItems);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!n.inputValue||isNaN(+n.inputValue))return!1}}catch(i){e.e(i)}finally{e.f()}return!0}},{key:"primeSubmitLabel",get:function(){switch(this.primeStatus){case"active":return this.canPrimeSubmit?"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043c?":"?";case"validation":return"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c...";case"done":return"\u041e\u0446\u0435\u043d\u043a\u0430: "}}},{key:"extraSubmitLabel",get:function(){switch(this.extraStatus){case"active":return"?";case"validation":return"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u044e...";case"done":return"!"}}},{key:"refreshButtonLabel",get:function(){return this.score>=1?"\u0415\u0449\u0451 \u0440\u0430\u0437?":"\u041f\u0435\u0440\u0435\u0438\u0433\u0440\u0430\u0442\u044c!"}},{key:"getScore",value:function(){var t,e=0,n=r(this.primeItems);try{for(n.s();!(t=n.n()).done;)t.value.isValid&&e++}catch(i){n.e(i)}finally{n.f()}return e/this.primeItems.length}},{key:"onPrimeChecked",value:function(){this.primeStatus="done",this.victoryAnimation=!1,this.scoreMessage="",this.score=this.getScore()}},{key:"onPrimeEnded",value:function(){var t,e,n,i=this.primeItems.filter(function(t){return!t.isValid}).map(function(t){return Object.assign(Object.assign({},t),{isChecked:!1,inputValue:"",inputName:t.inputName+"Extra",hasNote:!0})});if(i.length>0)this.extraItems=i,this.extraStatus="active";else{this.todayVictories++,this.victoryClass="step"+Math.min(5,this.todayVictories),this.victoryAnimation=!0;try{var a=Object(x.a)("YYYY-MM-DD");localStorage.setItem(zt,JSON.stringify((t={},e=a,n=this.todayVictories,e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t)))}catch(o){console.warn("localStorage error:",o)}}}},{key:"onExtraSubmit",value:function(t){var e=this;this.extraStatus="validation";var n=this.extraItems,i=0;this.autoplay.timeout=200,this.autoplay.play(function(){for(;i<n.length;){var t=n[i++];if(!t.isChecked&&t.inputValue){t.expression[t.inputIndex].value===+t.inputValue?(t.isValid=t.isChecked=t.isReadonly=!0,t.hasNote=!1):t.inputValue="";break}}return!(i>=n.length&&(n.find(function(t){return!t.isChecked})?e.extraStatus="active":(e.extraStatus="done",e.requestMenuButtonFocus()),1))})}},{key:"onPrimeSubmit",value:function(t){var e=this;if(this.getPrimeSubmitStatus()){this.primeStatus="validation";var n=this.primeItems,i=0;this.autoplay.timeout=250,this.autoplay.play(function(){if(i<n.length){var t=n[i++];t.isChecked=!0,t.isValid=t.expression[t.inputIndex].value===+t.inputValue}if(i>=n.length){e.onPrimeChecked();var a=1===(o=e.score)?"5+ "+Object(b.d)(["","\u0417\u0434\u043e\u0440\u043e\u0432\u043e!","\u041f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u043e!","\u041e\u0442\u043b\u0438\u0447\u043d\u043e!","\u041c\u043e\u043b\u043e\u0434\u0435\u0446!","\u0423\u043c\u043d\u0438\u0446\u0430!","\u0423\u043c\u043d\u0438\u0447\u043a\u0430!!!","\u0425\u0432\u0430\u043b\u044e!","\u0411\u0440\u0430\u0432\u043e!","\u0422\u0430\u043b\u0430\u043d\u0442!","\u041f\u0440\u0435\u0432\u043e\u0441\u0445\u043e\u0434\u043d\u043e!","\u0422\u0430\u043a \u0434\u0435\u0440\u0436\u0430\u0442\u044c!","\u0417\u0430\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e!","\u0427\u0443\u0434\u0435\u0441\u043d\u043e!"]):o>=.98?"5+":o>.9?"5":o>.8?"5-":o>.7?"4":o>.6?"4-":o>.5?"3":o>.4?"3-":o>.3?"2":o>=.2?"2-":"1 "+Object(b.d)(["","","","","\u041f\u043b\u043e\u0445\u043e.","\u041e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u0435\u043b\u044c\u043d\u043e.","\u0423\u0436\u0430\u0441\u043d\u043e.","\u0423\u0436\u0430\u0441!","\u0411\u0435\u0437\u043e\u0431\u0440\u0430\u0437\u043d\u043e!","\u041e\u0439 \u043a\u0430\u043a \u043f\u043b\u043e\u0445\u043e!","\u041d\u0435\u043a\u0440\u0430\u0441\u0438\u0432\u043e.","\u042f \u0432 \u0448\u043e\u043a\u0435!","\u0416\u0443\u0442\u044c!","\u0412\u0437\u0433\u043b\u044f\u043d\u0438 \u043a\u0430\u043a \u043d\u0435\u0445\u043e\u0440\u043e\u0448\u043e."]);return e.autoplay.timeout=100,e.autoplay.play(function(){var t=Object(y.a)(e.scoreMessage,a);return e.scoreMessage=t.length<a.length?a.substring(0,t.length+1):a,e.scoreMessage!==a||(e.onPrimeEnded(),!1)}),!1}var o;return!0})}else console.warn("Cannot submit:",t.value)}},{key:"onPrimeItemChange",value:function(t){var e=this,n=this.primeItems[t];if(n){var i=It(n.inputValue).substring(0,n.inputLength);i!==n.inputValue?(this.canPrimeSubmit=!1,setTimeout(function(){n.inputValue=i,e.canPrimeSubmit=e.getPrimeSubmitStatus()},100)):this.canPrimeSubmit=this.getPrimeSubmitStatus()}}},{key:"onExtraItemChange",value:function(t){var e=this.extraItems[t];if(e){var n=It(e.inputValue).substring(0,e.inputLength);n!==e.inputValue&&setTimeout(function(){e.inputValue=n},100)}}},{key:"requestMenuButtonFocus",value:function(){var t=this;setTimeout(function(){var e,n=null===(e=t.menuButtonRef)||void 0===e?void 0:e.nativeElement;n&&n.focus()})}},{key:"requestNoteFor",value:function(t){var e=this.extraItems[t];e&&this._dialog.open(nt,{data:Object.assign({},e)})}},{key:"_addPrimeItem",value:function(t,e){var n=I(t);if(!this.primeItems.find(function(t){return I(t.expression)===n})){var i="mathExpression"+this.primeItems.length,a=e||Object(b.d)(Ut),o=t[a].value.toString().length;this.primeItems.push({inputName:i,inputValue:"",inputIndex:a,inputLength:o,expression:t})}}}]),t}()).\u0275fac=function(t){return new(t||St)(p.Ob(h.a),p.Ob(it.c),p.Ob(at.b),p.Ob(S.b))},St.\u0275cmp=p.Ib({type:St,selectors:[["app-mental-math"]],viewQuery:function(t,e){var n;1&t&&p.Gc(Ct,1,p.l),2&t&&p.pc(n=p.cc())&&(e.menuButtonRef=n.first)},decls:18,vars:9,consts:[["formPrimeSubmitButton",""],["appContentSvg",""],["x1","30","x2","30","y1","0","y2","41","stroke-width","0.1","stroke","#f00","fill","none"],[2,"position","absolute","right","0","top","0"],["class","mental-math-trophy","svgIcon","icon_sun",3,"ngClass","animate","click",4,"ngIf"],[3,"ngSubmit"],["formPrime","ngForm"],[1,"mental-math-topic"],[3,"items","active","itemChange"],[1,"mental-math-submit"],[4,"ngIf","ngIfElse"],["for","onPrimeSubmitButton"],["class","mental-math-teacher",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["id","onPrimeSubmitButton","mat-icon-button","","color","primary","aria-label","submission button","type","submit",3,"disabled"],["svgIcon","icon_sun",1,"mental-math-trophy",3,"ngClass","click"],["id","onPrimeSubmitButton","mat-icon-button","","color","warn","aria-label","refresh button","type","button","appFocus","",3,"matMenuTriggerFor"],["menuButton",""],["yPosition","above"],["menu","matMenu"],["mat-menu-item","","type","button",3,"click"],["color","primary"],[1,"mental-math-teacher"],["formExtra","ngForm"],[3,"items","active","itemChange","noteRequest"],["id","onExtraSubmitButton","mat-icon-button","","color","primary","aria-label","submission button","type","submit",3,"disabled"]],template:function(t,e){if(1&t){var n=p.Vb();p.zc(0,Mt,3,1,"ng-template",null,0,p.Ac),p.Ub(2,"app-squared-paper"),p.ec(),p.Ub(3,"svg",1),p.Pb(4,"line",2),p.Tb(),p.dc(),p.Ub(5,"div",3),p.zc(6,_t,1,3,"mat-icon",4),p.Tb(),p.Ub(7,"form",5,6),p.bc("ngSubmit",function(){p.sc(n);var t=p.qc(8);return e.onPrimeSubmit(t)}),p.Ub(9,"div",7),p.Bc(10),p.Tb(),p.Ub(11,"app-math-input-group",8),p.bc("itemChange",function(t){return e.onPrimeItemChange(t)}),p.Tb(),p.Ub(12,"div",9),p.zc(13,Ot,12,2,"ng-container",10),p.Ub(14,"label",11),p.Bc(15),p.Tb(),p.zc(16,Pt,2,1,"span",12),p.Tb(),p.Tb(),p.zc(17,Tt,11,6,"form",13),p.Tb()}if(2&t){var i=p.qc(1);p.Cb(6),p.lc("ngIf",e.todayVictories>0),p.Cb(4),p.Cc(e.primeMessage),p.Cb(1),p.lc("items",e.primeItems)("active","active"===e.primeStatus),p.Cb(2),p.lc("ngIf","done"===e.primeStatus)("ngIfElse",i),p.Cb(2),p.Cc(e.primeSubmitLabel),p.Cb(1),p.lc("ngIf","done"===e.primeStatus),p.Cb(1),p.lc("ngIf",e.extraItems)}},directives:[N,c.l,f.q,f.j,f.k,xt,U.a,it.a,c.j,kt,wt.d,wt.a,wt.b],styles:[".mental-math-submit[_ngcontent-%COMP%]{height:72px}.mental-math-submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:4px}.mental-math-submit[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;vertical-align:top;margin-left:6px}.mental-math-submit[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{text-shadow:1px 1px 2px #cba}.mental-math-topic[_ngcontent-%COMP%]{margin:24px 96px 24px 0;padding-left:6px;text-indent:48px}.mental-math-trophy[_ngcontent-%COMP%]{display:block;width:96px;height:96px}.mental-math-teacher[_ngcontent-%COMP%]{font-family:Pacifico,cursive;font-weight:400;font-size:32px;color:red;letter-spacing:normal;vertical-align:top}"]}),St),At=o("keE2"),qt=o("SeXe"),Nt=["very easy","easy","norm","hard","very hard"],jt={crosswordDifficulty:0,crosswordMaxHeight:24,crosswordMaxWidth:24},Vt={crosswordDifficulty:Nt.length-1,crosswordMaxHeight:72,crosswordMaxWidth:72};function Dt(t,e){return Math.round((t+e)/2)}var Lt,Ft,Rt={crosswordDataTreeState:"",crosswordDifficulty:Dt(jt.crosswordDifficulty,Vt.crosswordDifficulty),crosswordMaxHeight:Dt(jt.crosswordMaxHeight,Vt.crosswordMaxHeight),crosswordMaxWidth:Dt(jt.crosswordMaxWidth,Vt.crosswordMaxWidth),sidenavModeSide:!0,sidenavClosed:!1},Et=((Lt=function(e){n(o,e);var i=a(o);function o(){var t;return l(this,o),(t=i.call(this,Rt)).loadLocal("[crossword.settings]",Rt),t}return d(o,[{key:"restoreDefaults",value:function(){this.set(Rt)}},{key:"set",value:function(t){var e=this._set(t);return e&&this.saveLocal("[crossword.settings]"),e}},{key:"_validate",value:function(e){for(var n=0,i=Object.keys(jt);n<i.length;n++){var a=i[n],r=e[a];e[a]="number"==typeof r&&!isNaN(r)&&isFinite(r)?Math.max(jt[a],Math.min(Vt[a],r)):Rt[a]}return t(s(o.prototype),"_validate",this).call(this,e)}}]),o}(qt.a)).\u0275fac=function(t){return new(t||Lt)},Lt.\u0275prov=p.Kb({token:Lt,factory:Lt.\u0275fac}),Lt),Wt=d(function t(){var e=this;l(this,t),this.lastFrameTime=0,this.animation=function(t,n){var i=n.canvas,a=i.width,o=i.height;if(e.lastFrameTime){var s=Math.min(t-e.lastFrameTime,50)/1e3;e.update(s,a,o)}n.save(),e.clear(n,a,o),e.draw(n,a,o),n.restore(),e.lastFrameTime=t}}),Gt=((Ft=function(){function t(e,n){l(this,t),this.spawn(e,n)}return d(t,[{key:"spawn",value:function(e,n){this.hue=t.nextHue,t.nextHue=(t.nextHue+1)%360,this.radius=this.radius0=Object(k.k)(6,20),this.age=-3*Object(k.b)(.8,0,.2,1,Math.random()),this.ttl=4+6*Math.random(),this.x=e/2,this.y=n;var i=Math.atan2(e/2,n)*Math.random(),a=Math.min(e,n)/10*(1+1.75*Math.random());this.vy=-a*Math.cos(i)-20,this.vx=a*Math.sin(i),Math.random()<.5&&(this.vx=-this.vx),this.x+=this.vx,this.fx=0,this.fy=0}},{key:"update",value:function(t,e){if(this.age+=t,this.age>=0&&this.age<this.ttl){var n=this.age/this.ttl;if(this.radius=Math.max(1,(1-Object(k.b)(.14,.68,.76,.94,n))*this.radius0),this.x+=this.vx*t,this.y+=this.vy*t,this.vx+=this.fx*t,this.vy+=this.fy*t,this.fx=0,this.fy=0,e){var i=.5*(e.x-this.x),a=.5*(e.y-this.y);i*this.vx+a*this.vy<0&&(i*=Math.abs(i),a*=Math.abs(a)),this.fx+=i,this.fy+=a}else this.fy+=10;var o=-.0025;this.fx+=o*this.vx*Math.abs(this.vx),this.fy+=o*this.vy*Math.abs(this.vy)}}}]),t}()).nextHue=200,Ft),Yt=function(t){n(i,t);var e=a(i);function i(){var t;return l(this,i),(t=e.apply(this,arguments)).particleCount=200,t.particleChance=.98765,t.particles=[],t.nextBurstDelta=3,t}return d(i,[{key:"clear",value:function(t,e,n){t.globalCompositeOperation="source-over",t.fillStyle=this.lastFrameTime>0?"rgba(0, 0, 0, 0.08)":"#222",t.fillRect(0,0,e,n)}},{key:"draw",value:function(t,e,n){t.globalCompositeOperation="lighter";var i,a=r(this.particles);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.age>=0&&o.age<o.ttl&&(t.fillStyle="hsla(".concat(o.hue,", 80%, 40%, 1)"),t.beginPath(),t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.fill(),t.closePath())}}catch(s){a.e(s)}finally{a.f()}}},{key:"spawnParticles",value:function(t,e,n){var i,a=r(this.particles);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.age>o.ttl&&(t>0&&o.spawn(e,n),--t<=0))return}}catch(s){a.e(s)}finally{a.f()}for(;t-- >0&&this.particles.length<this.particleCount;)this.particles.push(new Gt(e,n))}},{key:"update",value:function(t,e,n){this.particles.length>this.particleCount&&(this.particles.length=this.particleCount);var i,a=this.particleCount-this.particles.length,o=r(this.particles);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.update(t,this.mouse),s.age>s.ttl&&a++}}catch(u){o.e(u)}finally{o.f()}if(this.nextBurstDelta-=t,a>0)if(this.nextBurstDelta<=0){var c=Math.min(50,Math.max(Math.floor(this.particleCount/3),1)),l=Math.min(a,c);this.spawnParticles(Object(k.k)(1+Math.floor(l/2),1+l),e,n),this.nextBurstDelta=3+5*Math.random()}else a>this.particleCount/2&&Math.random()>this.particleChance&&this.spawnParticles(1,e,n)}}]),i}(Wt),Ht=function(){function t(e,n){l(this,t),this.x=e,this.y=n,this.x0=this.x,this.y0=this.y,this.angle=2*Math.PI*Math.random()}return d(t,[{key:"update",value:function(t,e,n){this.x0=this.x,this.y0=this.y,n&&(this.angle=Math.atan2(n.x-this.x,n.y-this.y)),this.angle+=.11*Math.PI*(Math.random()-.5);var i=t*(e+.25*e*(Math.random()-.5));this.x+=i*Math.sin(this.angle),this.y+=i*Math.cos(this.angle)}},{key:"cage",value:function(t,e,n,i){this.x<t?(this.angle=Math.PI*(.05+.9*Math.random()),this.x=t):this.x>n?(this.angle=Math.PI*(1.05+.9*Math.random()),this.x=n):this.y<e?(this.angle=Math.PI*(.9*Math.random()-.45),this.y=e):this.y>i&&(this.angle=Math.PI*(.9*Math.random()-.45),this.y=i)}}]),t}(),$t=function(t){n(i,t);var e=a(i);function i(){var t;return l(this,i),(t=e.apply(this,arguments)).particleCount=250,t.particles=[],t.hue=Math.floor(360*Math.random()),t.speed=100,t}return d(i,[{key:"clear",value:function(t,e,n){t.globalCompositeOperation="source-over",t.fillStyle=this.lastFrameTime>0?"rgba(0, 0, 0, .035)":"#222",t.fillRect(0,0,e,n)}},{key:"draw",value:function(t,e,n){t.globalCompositeOperation="lighter",t.shadowBlur=5,t.shadowColor="hsl(".concat(this.hue,",100%,62%)"),t.strokeStyle="hsl(".concat(this.hue,",100%,50%)"),t.lineWidth=1,t.beginPath();var i,a=r(this.particles);try{for(a.s();!(i=a.n()).done;){var o=i.value;t.moveTo(o.x0,o.y0),t.lineTo(o.x,o.y)}}catch(s){a.e(s)}finally{a.f()}t.stroke(),t.closePath()}},{key:"update",value:function(t,e,n){++this.hue>=360&&(this.hue=0),this.particles.length<this.particleCount?this.particles.push(this.spawn(e,n)):this.particles.length>this.particleCount&&(this.particles.length=this.particleCount);var i,a=r(this.particles);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.update(t,this.speed,this.mouse),this.loose||o.cage(0,0,e,n)}}catch(s){a.e(s)}finally{a.f()}}},{key:"spawn",value:function(t,e){var n=Math.random()<.5?0:t;return new Ht(n,e)}}]),i}(Wt),Xt=function(){function t(e,n){l(this,t),this.attractor=new Gt(e,n),this.lines=new $t,this.lines.loose=!0,this.lines.spawn=function(t,e){return new Ht(t/2,e)},this.reset(e,n)}return d(t,[{key:"reset",value:function(t,e){this.attractor.spawn(t,e),this.lines.mouse=void 0,this.lines.particles.length=0,this.lines.particleCount=Object(k.k)(20,30),this.speed=Object(k.k)(800,1600)}},{key:"update",value:function(t,e,n,i){var a=this.attractor;a.age<a.ttl&&a.update(t,i),a.age>a.ttl?this.reset(e,n):(a.ttl-a.age>.25?(this.lines.speed=Math.max(this.speed/this.attractor.radius,500),this.lines.mouse=a):(this.lines.mouse=i,this.lines.speed=this.speed),this.lines.update(t,e,n))}}]),t}(),Kt=function(t){n(i,t);var e=a(i);function i(){var t;return l(this,i),(t=e.apply(this,arguments)).particleCount=5,t.particles=[],t}return d(i,[{key:"clear",value:function(t,e,n){t.globalCompositeOperation="source-over",t.fillStyle=this.lastFrameTime>0?"rgba(0, 0, 0, .035)":"#222",t.fillRect(0,0,e,n)}},{key:"draw",value:function(t,e,n){var i,a=r(this.particles);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.attractor.age>=0&&o.lines.draw(t,e,n)}}catch(s){a.e(s)}finally{a.f()}}},{key:"update",value:function(t,e,n){this.particles.length<this.particleCount?this.particles.push(new Xt(e,n)):this.particles.length>this.particleCount&&(this.particles.length=this.particleCount);var i,a=r(this.particles);try{for(a.s();!(i=a.n()).done;){i.value.update(t,e,n,this.mouse)}}catch(o){a.e(o)}finally{a.f()}}}]),i}(Wt),Qt=["\u0411\u0440\u0430\u0432\u043e!","\u0412\u043e\u0442 \u0438 \u043d\u0430 \u043c\u043e\u0435\u0439 \u0443\u043b\u0438\u0446\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a!","\u0412\u044b\u0441\u0448\u0438\u0439 \u043a\u043b\u0430\u0441\u0441!.. \u0417\u0434\u043e\u0440\u043e\u0432\u043e!","\u0412\u044b\u0448\u0435 \u0432\u0441\u044f\u043a\u0438\u0445 \u043f\u043e\u0445\u0432\u0430\u043b!","\u0414\u0438\u0432\u043e \u0434\u0438\u0432\u043d\u043e\u0435!","\u0417\u0430\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e!","\u0417\u0434\u043e\u0440\u043e\u0432\u043e!","\u041a\u043e\u043f\u0435\u0435\u0447\u043a\u0430 \u0432 \u043a\u043e\u043f\u0435\u0435\u0447\u043a\u0443!","\u041c\u043e\u043b\u043e\u0434\u0435\u0446!","\u041d\u0435 \u0432 \u0431\u0440\u043e\u0432\u044c, \u0430 \u0432 \u0433\u043b\u0430\u0437!","\u041d\u0435 \u0436\u0438\u0437\u043d\u044c, \u0430 \u043c\u0430\u043b\u0438\u043d\u0430!","\u041d\u0435\u0436\u0434\u0430\u043d\u043d\u043e-\u043d\u0435\u0433\u0430\u0434\u0430\u043d\u043d\u043e...","\u041d\u0435\u0442 \u0441\u043b\u043e\u0432!","\u041d\u0438 \u0432 \u0441\u043a\u0430\u0437\u043a\u0435 \u0441\u043a\u0430\u0437\u0430\u0442\u044c, \u043d\u0438 \u043f\u0435\u0440\u043e\u043c \u043e\u043f\u0438\u0441\u0430\u0442\u044c...","\u041e\u0442\u043b\u0438\u0447\u043d\u043e!","\u041e\u0447\u0435\u043d\u044c \u0445\u043e\u0440\u043e\u0448\u043e!","\u041f\u0440\u0435\u0432\u043e\u0441\u0445\u043e\u0434\u043d\u043e!","\u041f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u043e!","\u0421\u0432\u0435\u0440\u0448\u0438\u043b\u043e\u0441\u044c! \u041d\u0435 \u0432\u0435\u0440\u044e \u0433\u043b\u0430\u0437\u0430\u043c \u0441\u0432\u043e\u0438\u043c!","\u0421\u0434\u0435\u043b\u0430\u043d\u043e \u043d\u0430 \u0441\u043e\u0432\u0435\u0441\u0442\u044c!","\u0421\u0438\u043b\u044c\u043d\u043e!","\u0422\u0430\u043a \u0434\u0435\u0440\u0436\u0430\u0442\u044c!","\u0422\u0430\u043b\u0430\u043d\u0442!","\u0422\u0430\u043b\u0430\u0301\u043d\u0442\u0438\u0449\u0435!","\u0422\u043e\u043b\u043a\u043e\u0432\u043e!","\u0423\u043c\u043d\u0438\u0446\u0430!","\u0423\u043c\u043d\u0438\u0447\u043a\u0430!!!","\u0425\u0432\u0430\u043b\u044e!","\u0427\u0443\u0434\u0435\u0441\u0430 \u0434\u0430 \u0438 \u0442\u043e\u043b\u044c\u043a\u043e!","\u0427\u0443\u0434\u0435\u0441\u043d\u043e!","\u0427\u0443\u0434\u043e!","\u042d\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0447\u0443\u0434\u043e!"],Jt=["\u0414\u0443\u043c\u0430\u044e, \u043c\u043e\u0433\u043b\u043e \u0431\u044b\u0442\u044c \u043b\u0443\u0447\u0448\u0435.","\u041c\u043e\u0433\u043b\u043e \u0431\u044b\u0442\u044c \u043b\u0443\u0447\u0448\u0435.","\u041d\u0435\u043f\u043b\u043e\u0445\u0430\u044f \u043f\u043e\u043f\u044b\u0442\u043a\u0430, \u043d\u043e...","\u041d\u0435\u043f\u043b\u043e\u0445\u043e.","\u0425\u043e\u0440\u043e\u0448\u043e, \u043d\u043e..."],Zt=["\u041d\u0430 \u0442\u0440\u043e\u0435\u0447\u043a\u0443.","\u041d\u0435 \u0430\u0445\u0442\u0438!","\u041d\u0435 \u0434\u043e \u0441\u043c\u0435\u0445\u0443.","\u041d\u0435 \u0441\u043e\u0432\u0441\u0435\u043c \u0442\u043e, \u0447\u0442\u043e \u0445\u043e\u0442\u0435\u043b\u043e\u0441\u044c \u0431\u044b...","\u041d\u0438\u0436\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e.","\u041e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0436\u0435\u043b\u0430\u0442\u044c \u043b\u0443\u0447\u0448\u0435\u0433\u043e.","\u0421 \u0433\u043e\u0440\u0435\u043c \u043f\u043e\u043f\u043e\u043b\u0430\u043c...","\u0421\u0435\u0440\u0435\u0434\u0438\u043d\u043a\u0430 \u043d\u0430 \u043f\u043e\u043b\u043e\u0432\u0438\u043d\u043a\u0443.","\u0421\u0440\u0435\u0434\u043d\u0435.","\u0427\u0435\u0441\u0442\u043d\u043e \u0433\u043e\u0432\u043e\u0440\u044f, \u043d\u0435 \u043e\u0447\u0435\u043d\u044c.","\u0427\u0442\u043e-\u0442\u043e \u043d\u0435 \u043e\u0447\u0435\u043d\u044c."],te=["\u0410 \u0432\u043e\u0442 \u044d\u0442\u043e \u043d\u0438\u043a\u0443\u0434\u0430 \u043d\u0435 \u0433\u043e\u0434\u0438\u0442\u0441\u044f.","\u041a\u0443\u0440\u0430\u043c \u043d\u0430 \u0441\u043c\u0435\u0445!","\u041d\u0435\u0442, \u044d\u0442\u043e \u043d\u0438\u043a\u0443\u0434\u0430 \u043d\u0435 \u0433\u043e\u0434\u0438\u0442\u0441\u044f.","\u041d\u0443, \u044d\u0442\u043e \u043d\u0438\u043a\u0443\u0434\u0430 \u043d\u0435 \u0433\u043e\u0434\u0438\u0442\u0441\u044f.","\u041e\u0431\u0438\u0434\u043d\u043e.","\u041f\u043b\u043e\u0445\u043e.","\u0422\u0430\u043a \u0434\u0435\u043b\u043e \u043d\u0435 \u043f\u043e\u0439\u0434\u0451\u0442!"],ee=["\u0413\u043b\u0430\u0437\u0430 \u0431\u044b \u043c\u043e\u0438 \u043d\u0435 \u0433\u043b\u044f\u0434\u0435\u043b\u0438!","\u041a\u0443\u0440\u0430\u043c \u043d\u0430 \u0441\u043c\u0435\u0445!","\u041d\u0438\u0436\u0435 \u0432\u0441\u044f\u043a\u043e\u0439 \u043a\u0440\u0438\u0442\u0438\u043a\u0438!","\u041d\u0443 \u043e\u0447\u0435\u043d\u044c \u043f\u043b\u043e\u0445\u043e.","\u041e\u0447\u0435\u043d\u044c \u043f\u043b\u043e\u0445\u043e.","\u041f\u043b\u043e\u0445\u043e! \u041f\u043b\u043e\u0445\u043e! \u041f\u043b\u043e\u0445\u043e!","\u0421\u043a\u0432\u0435\u0440\u043d\u043e!","\u0425\u0432\u0430\u0442\u0438\u0442, \u044d\u0442\u043e \u043d\u0438\u043a\u0443\u0434\u0430 \u043d\u0435 \u0433\u043e\u0434\u0438\u0442\u0441\u044f!","\u042d\u0442\u043e\u0433\u043e \u0435\u0449\u0451 \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u043b\u043e."],ne=["\u0411\u0435\u0434\u0430, \u0434\u0430 \u0438 \u0442\u043e\u043b\u044c\u043a\u043e!","\u0411\u0435\u0437\u043e\u0431\u0440\u0430\u0437\u043d\u043e!","\u0412\u0437\u0433\u043b\u044f\u043d\u0438 \u043a\u0430\u043a \u043f\u043b\u043e\u0445\u043e.","\u0414\u0430\u043b\u044c\u0448\u0435 \u0435\u0445\u0430\u0442\u044c \u043d\u0435\u043a\u0443\u0434\u0430!","\u0414\u0435\u043b\u043e \u0434\u0440\u044f\u043d\u044c!","\u0416\u0443\u0442\u044c!","\u041d\u0435\u043a\u0440\u0430\u0441\u0438\u0432\u043e.","\u041d\u043e\u0441\u0438\u043c \u0432\u043e\u0434\u0443 \u0440\u0435\u0448\u0435\u0442\u043e\u043c!","\u041e\u0439 \u043a\u0430\u043a \u043f\u043b\u043e\u0445\u043e!","\u041e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u0435\u043b\u044c\u043d\u043e.","\u0421\u043e\u0432\u0441\u0435\u043c \u043f\u043b\u043e\u0445\u043e, \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0432\u044b\u0445\u043e\u0434\u0438\u0442.","\u0423\u0436\u0430\u0441!","\u0423\u0436\u0430\u0441\u043d\u043e.","\u042f \u0432 \u0448\u043e\u043a\u0435!"],ie=["\u0412\u0435\u043b\u0438\u043a\u043e\u043b\u0435\u043f\u043d\u043e!","\u0412\u044b\u0448\u0435 \u0432\u0441\u044f\u043a\u0438\u0445 \u043f\u043e\u0445\u0432\u0430\u043b!","\u0413\u0440\u0430\u043d\u0434\u0438\u043e\u0437\u043d\u043e!","\u0415\u0449\u0435 \u043b\u0443\u0447\u0448\u0435, \u0447\u0435\u043c \u043f\u0440\u0435\u0436\u0434\u0435!","\u0417\u0434\u043e\u0440\u043e\u0432\u043e!","\u0418\u043c\u0435\u043d\u043d\u043e \u044d\u0442\u043e\u0433\u043e \u043c\u044b \u0434\u0430\u0432\u043d\u043e \u0436\u0434\u0430\u043b\u0438!","\u041a\u0430\u043a \u0432 \u0441\u043a\u0430\u0437\u043a\u0435!","\u041a\u043b\u0430\u0441\u0441\u043d\u043e!","\u041a\u0440\u0430\u0441\u043e\u0442\u0430!","\u041c\u043e\u0438 \u043f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f!","\u041d\u0430\u0443\u0447\u0438 \u043c\u0435\u043d\u044f \u0434\u0435\u043b\u0430\u0442\u044c \u0442\u0430\u043a \u0436\u0435!","\u041d\u0435\u0437\u0430\u0431\u044b\u0432\u0430\u0435\u043c\u043e!","\u041d\u0435\u043f\u043e\u0434\u0440\u0430\u0436\u0430\u0435\u043c\u043e!","\u041d\u0435\u0441\u0440\u0430\u0432\u043d\u0435\u043d\u043d\u043e!","\u041e\u0442\u043b\u0438\u0447\u043d\u043e!","\u041e\u0447\u0435\u043d\u044c \u043f\u0440\u0438\u044f\u0442\u043d\u043e \u043e\u0431\u0449\u0430\u0442\u044c\u0441\u044f \u0441 \u0442\u0430\u043a\u0438\u043c \u0443\u043c\u043d\u044b\u043c \u0440\u0435\u0431\u0451\u043d\u043a\u043e\u043c.","\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u044e!","\u041f\u043e\u0440\u0430\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e!","\u041f\u043e\u0442\u0440\u044f\u0441\u0430\u044e\u0449\u0435!","\u041f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u043e!","\u041f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u043e\u0435 \u043d\u0430\u0447\u0430\u043b\u043e!","\u0420\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u0442\u043e\u0431\u043e\u0439 \u043f\u0440\u043e\u0441\u0442\u043e \u0440\u0430\u0434\u043e\u0441\u0442\u044c!","\u0421 \u043a\u0430\u0436\u0434\u044b\u043c \u0434\u043d\u0435\u043c \u0443 \u0442\u0435\u0431\u044f \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f \u0432\u0441\u0451 \u043b\u0443\u0447\u0448\u0435!","\u0422\u0430\u043a \u0434\u0435\u0440\u0436\u0430\u0442\u044c!","\u0422\u0430\u043b\u0430\u043d\u0442\u043b\u0438\u0432\u043e!","\u0422\u0432\u043e\u0439 \u043c\u043e\u0437\u0433 \u043f\u043e\u0440\u0430\u0431\u043e\u0442\u0430\u043b \u043d\u0430 \u0441\u043b\u0430\u0432\u0443.","\u0422\u044b \u043d\u0430 \u0432\u0435\u0440\u043d\u043e\u043c \u043f\u0443\u0442\u0438!","\u0422\u044b \u043f\u0440\u043e\u0441\u0442\u043e \u0447\u0443\u0434\u043e!","\u0423 \u0442\u0435\u0431\u044f \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c!","\u0423\u0434\u0438\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e!","\u0423\u0445!!!","\u0424\u0430\u043d\u0442\u0430\u0441\u0442\u0438\u043a\u0430!","\u042d\u0442\u043e \u0437\u0430\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e!","\u042d\u0442\u043e \u043a\u0430\u043a \u0440\u0430\u0437 \u0442\u043e, \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e!","\u042d\u0442\u043e \u0442\u0440\u043e\u0433\u0430\u0435\u0442 \u043c\u0435\u043d\u044f \u0434\u043e \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0434\u0443\u0448\u0438!","\u042f \u0432\u0435\u0440\u044e \u0432 \u0442\u0435\u0431\u044f.","\u042f \u0433\u043e\u0440\u0436\u0443\u0441\u044c \u0442\u0435\u043c, \u0447\u0442\u043e \u0442\u0435\u0431\u0435 \u044d\u0442\u043e \u0443\u0434\u0430\u043b\u043e\u0441\u044c!","\u042f \u0437\u043d\u0430\u043b\u0430, \u0447\u0442\u043e \u0442\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u044d\u0442\u043e.","\u042f \u0442\u043e\u0431\u043e\u0439 \u0433\u043e\u0440\u0436\u0443\u0441\u044c!"],ae=["\u0411\u0435\u0437 \u043e\u0448\u0438\u0431\u043e\u043a!","\u0412 \u044d\u0442\u043e\u0442 \u0440\u0430\u0437 \u0431\u0435\u0437 \u043e\u0448\u0438\u0431\u043e\u043a!","\u0412\u0441\u0451 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u043e\u0448\u0438\u0431\u043e\u043a \u043d\u0435\u0442!","\u041d\u0438 \u043e\u0434\u043d\u043e\u0439 \u043e\u0448\u0438\u0431\u043a\u0438!","\u041e\u0448\u0438\u0431\u043e\u043a \u043d\u0435\u0442!"],oe=["\u0410\u0445!","\u0412\u043e\u0442 \u044d\u0442\u043e \u0434\u0430!","\u0417\u0434\u043e\u0440\u043e\u0432\u043e.","\u041a\u043b\u0430\u0441\u0441!","\u041a\u043e\u043c\u0430\u0440 \u043d\u043e\u0441\u0430 \u043d\u0435 \u043f\u043e\u0434\u0442\u043e\u0447\u0438\u0442!","\u041c\u043d\u0435 \u0434\u0430\u0436\u0435 \u043d\u0435 \u0432\u0435\u0440\u0438\u0442\u0441\u044f.","\u041d\u0430\u043a\u043e\u043d\u0435\u0446-\u0442\u043e!","\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c!","\u0423\u0440\u0430!","\u0423\u0445 \u0442\u044b!","\u0427\u0443\u0434\u0435\u0441\u043d\u043e!","\\\ud83d\ude0d/"],se=["\u0412\u0441\u0435\u0433\u043e \u043b\u0438\u0448\u044c \u043e\u0434\u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.","\u0412\u0441\u0435\u0433\u043e \u043e\u0434\u043d\u0430 \u043e\u0448\u0438\u0431\u043e\u0447\u043a\u0430!","\u0415\u0441\u0442\u044c \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043e\u0447\u043a\u0430...","\u041d\u0430\u0434\u043e \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0434\u043d\u0443 \u043e\u0448\u0438\u0431\u043a\u0443.","\u041d\u043e \u0435\u0441\u0442\u044c \u043e\u0448\u0438\u0431\u043a\u0430.","\u041d\u0443, \u0441 \u043a\u0435\u043c \u043d\u0435 \u0431\u044b\u0432\u0430\u0435\u0442... \u041e\u0434\u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.","\u041e\u0434\u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.","\u041e\u0448\u0438\u0431\u043a\u0430.","\u041f\u0440\u043e\u0441\u0442\u043e \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430, \u0438 \u0432\u0441\u0451.","\u0422\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!","\u0423 \u043d\u0430\u0441 \u0432\u044b\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043e\u0447\u043a\u0430!"],re=["\u041e\u0434\u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0430?","\u0412\u0441\u0435\u0433\u043e \u043e\u0434\u043d\u0430!","\u0422\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u0430!","\u042f \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u044e!","\u042f... \u044f \u0435\u0451 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u044e!"],ce=["\u042f \u0432\u0441\u0451 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u044e.","\u042f \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u044e!","\u042f... \u044f \u0432\u0441\u0451 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u044e!"],le=["$ \u043e\u0448\u0438\u0431\u043a\u0438.","\u0423 \u0442\u0435\u0431\u044f $ \u043e\u0448\u0438\u0431\u043a\u0438.","\u0426\u0435\u043b\u044b\u0445 $ \u043e\u0448\u0438\u0431\u043a\u0438."],ue=["\u041c\u043d\u043e\u0433\u043e \u043e\u0448\u0438\u0431\u043e\u043a!","\u041e\u0447\u0435\u043d\u044c \u043c\u043d\u043e\u0433\u043e \u043e\u0448\u0438\u0431\u043e\u043a!","\u041e\u0448\u0438\u0431\u043a\u0438, \u043e\u0448\u0438\u0431\u043a\u0438, \u043a\u0440\u0443\u0433\u043e\u043c \u043e\u0434\u043d\u0438 \u043e\u0448\u0438\u0431\u043a\u0438."],de=["\u0413\u0440\u0430\u043c\u043e\u0442\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c:","\u0414\u0430\u0432\u0430\u0439 \u0432\u043c\u0435\u0441\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u043c:","\u0417\u0430\u043f\u043e\u043c\u043d\u0438 \u0438 \u043f\u0438\u0448\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e:","\u0417\u0430\u043f\u043e\u043c\u043d\u0438:","\u041c\u044b \u043f\u0438\u0448\u0435\u043c:","\u041d\u0430\u0434\u043e \u0437\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c:","\u041f\u0438\u0448\u0435\u043c \u0433\u0440\u0430\u043c\u043e\u0442\u043d\u043e:","\u041f\u043e\u0432\u0442\u043e\u0440\u044f\u0439 \u0437\u0430 \u043c\u043d\u043e\u0439:","\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c:","\u0421\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u0438\u0441\u0430\u0442\u044c:"],fe=["\u0415\u0449\u0451 \u0440\u0430\u0437 \u043f\u043e\u0432\u0442\u043e\u0440\u0438 \u0438 \u0445\u043e\u0440\u043e\u0448\u0435\u043d\u044c\u043a\u043e \u0437\u0430\u043f\u043e\u043c\u043d\u0438.","\u0417\u0430\u043f\u043e\u043c\u043d\u0438 \u044d\u0442\u0438 \u0441\u043b\u043e\u0432\u0430.","\u0417\u0430\u043f\u043e\u043c\u043d\u0438 \u044d\u0442\u043e \u0445\u043e\u0440\u043e\u0448\u0435\u043d\u044c\u043a\u043e.","\u0417\u0430\u043f\u043e\u043c\u043d\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u0443\u0442\u0430\u0439.","\u0417\u0430\u043f\u043e\u043c\u043d\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438 \u043d\u0435 \u0437\u0430\u0431\u044b\u0432\u0430\u0439 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0438\u043a\u043e\u0433\u0434\u0430!","\u0417\u0430\u043f\u043e\u043c\u043d\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430.","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043c\u043d\u0438 \u0438 \u043d\u0435 \u0434\u0435\u043b\u0430\u0439 \u0442\u0430\u043a\u0438\u0445 \u043e\u0448\u0438\u0431\u043e\u043a!","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043c\u043d\u0438!","\u0421\u0442\u0430\u0440\u0430\u0439\u0441\u044f \u043d\u0430 \u0441\u043e\u0432\u0435\u0441\u0442\u044c! \u0412\u043e\u0434\u0430 \u043a\u0430\u043c\u0435\u043d\u044c \u0442\u043e\u0447\u0438\u0442.","\u0421\u0442\u0430\u0440\u0430\u0439\u0441\u044f! \u0411\u0435\u0437 \u0442\u0440\u0443\u0434\u0430 \u043d\u0435 \u0432\u044b\u043b\u043e\u0432\u0438\u0448\u044c \u0438 \u0440\u044b\u0431\u043a\u0443 \u0438\u0437 \u043f\u0440\u0443\u0434\u0430.","\u0422\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0441\u0451, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043c\u043d\u0438."];function he(t){var e,n=0,i=r(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.realAnswer!==a.userAnswer&&n++}}catch(o){i.e(o)}finally{i.f()}return n}var me,ge=function(){function t(){l(this,t),this.items=[],this.selection=0}return d(t,[{key:"currentItem",get:function(){return this.items[this.selection]}},{key:"next",value:function(){this.selection=Math.min(this.selection+1,this.items.length)}},{key:"prev",value:function(){this.selection=Math.max(this.selection-1,0)}},{key:"addTeacher",value:function(t){this.items.push({who:"teacher",message:t})}},{key:"addStudent",value:function(t){this.items.push({who:"student",message:t})}},{key:"onStart",value:function(t){}},{key:"onProgress",value:function(t){}},{key:"onEnd",value:function(t){var e,n=he(t),i=t.length;this.addTeacher(1==(e=(i-n)/i)?Object(b.d)(Qt):e>.9?Object(b.d)(Jt):e>.8?Object(b.d)(Zt):e>.7?Object(b.d)(te):e>.6?Object(b.d)(ee):Object(b.d)(ne)),0===n?(this.addTeacher(Object(b.d)(ae)),this.addTeacher(Object(b.d)(ie)),this.addStudent(Object(b.d)(oe))):1===n?(this.addTeacher(Object(b.d)(se)),this.addStudent(Object(b.d)(re))):n>=2&&n<=4?(this.addTeacher(Object(b.d)(le).replace("$",""+n)),this.addStudent(Object(b.d)(ce))):(this.addTeacher(Object(b.d)(ue)),this.addStudent(Object(b.d)(ce))),n>0&&this.markErrors(t)}},{key:"markErrors",value:function(t){this.addTeacher(Object(b.d)(de));var e,n=r(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.userAnswer!==i.realAnswer&&(this.addTeacher("<mark>".concat(i.realAnswer,"</mark>")),this.addStudent("<strong>".concat(i.realAnswer,"</strong>")))}}catch(a){n.e(a)}finally{n.f()}this.addTeacher(Object(b.d)(fe))}}]),t}(),pe={dances:[{src:"kitten-dance.webp",frames:[{left:116,right:270,top:560,bottom:588,width:180},{left:600,right:710,top:560,bottom:588,width:180},{left:180,right:284,top:530,bottom:568,width:150},{left:618,right:720,top:530,bottom:568,width:150},{left:226,right:330,top:512,bottom:540,width:110},{left:622,right:750,top:512,bottom:540,width:110},{left:212,right:738,top:418,width:100}]},{src:"rabbit-dance.webp",frames:[{left:100,right:280,top:554,bottom:582,width:200},{left:580,right:676,top:554,bottom:582,width:200},{left:200,right:280,top:530,bottom:568,width:160},{left:618,right:712,top:530,bottom:568,width:160},{left:218,right:338,top:500,bottom:520,width:140},{left:584,right:724,top:500,bottom:528,width:140},{left:210,right:710,top:403,width:120}]},{src:"doggy-dance.webp",frames:[{left:230,right:730,top:420,width:100},{left:224,right:320,top:510,bottom:554,width:120},{left:620,right:754,top:510,bottom:554,width:120},{left:200,right:292,top:554,bottom:578,width:140},{left:620,right:736,top:554,bottom:578,width:140},{left:180,right:290,top:580,bottom:610,width:160},{left:610,right:712,top:580,bottom:610,width:160}]}],jumps:[{src:"kitten-jump.webp",frames:[{left:870,top:117,width:58},{left:966,top:464,width:52},{left:60,right:68,top:22,width:72},{left:900,top:450,width:60},{left:108,top:230,width:100},{left:846,right:954,top:0,width:68},{left:228,right:742,top:400,width:80},{left:0,right:862,top:550,width:160}]},{src:"doggy-jump.webp",frames:[{left:870,top:117,width:58},{left:966,top:464,width:52},{left:130,right:136,top:17,width:80},{left:900,top:450,width:60},{left:108,top:230,width:100},{left:846,right:954,top:0,width:68},{left:228,right:742,top:400,width:80},{left:0,right:862,top:550,width:160}]},{src:"rabbit-jump.webp",frames:[{left:870,top:114,width:58},{left:970,top:460,width:48},{left:138,right:142,top:10,width:72},{left:898,top:435,width:60},{left:108,top:230,width:84},{left:846,right:964,top:0,width:58},{left:228,right:742,top:382,width:80},{left:0,right:862,top:510,width:160}]}],looks:[{src:"foxy-look.webp",frames:[{left:846,top:0,width:64},{left:228,top:394,width:80},{left:0,top:530,bottom:556,width:100},{left:0,top:560,bottom:586,width:120}]},{src:"tortoise-look.webp",frames:[{left:690,top:398,width:140},{left:690,top:556,width:200}]},{src:"rabbit-sneeze.webp",frames:[{left:676,top:388,width:150},{left:692,top:540,bottom:584,width:180},{left:904,top:0,width:120}]}],booms:[{src:"boom-1.webp",frames:[{left:0,right:588,top:0,bottom:588,width:588}]}]},be="assets/school/missing-letters/",ve=["snare-flute","sneaky-xylophone","silly-baritone","swell-trombone","gramophone-1"],ye=((me=function(){function t(e,n){var i=this;l(this,t),this._ref=e,this._zone=n,this._frameRequestId=0,this._frameCallback=function(t){p.A.assertNotInAngularZone(),i._frameRequestId=0,!i.pauseAnimation&&i.animationCallback&&(i.animationCallback(t,i._context2D),i._requestAnimationFrame())}}return d(t,[{key:"ngAfterViewInit",value:function(){var t,e=null===(t=this._ref)||void 0===t?void 0:t.nativeElement;e&&"function"==typeof e.getContext&&(this._context2D=e.getContext("2d"),this._startAnimation())}},{key:"ngOnDestroy",value:function(){this._stopAnimation()}},{key:"ngOnChanges",value:function(){this.pauseAnimation?this._stopAnimation():this._startAnimation()}},{key:"_requestAnimationFrame",value:function(){this._frameRequestId=requestAnimationFrame(this._frameCallback)}},{key:"_startAnimation",value:function(){var t=this;this._context2D&&!this.pauseAnimation&&this._zone.runOutsideAngular(function(){t._frameRequestId||t._requestAnimationFrame()})}},{key:"_stopAnimation",value:function(){this._frameRequestId&&(cancelAnimationFrame(this._frameRequestId),this._frameRequestId=0)}}]),t}()).\u0275fac=function(t){return new(t||me)(p.Ob(p.l),p.Ob(p.A))},me.\u0275dir=p.Jb({type:me,selectors:[["","appCanvasAnimation",""]],inputs:{animationCallback:"animationCallback",pauseAnimation:"pauseAnimation"},features:[p.Ab]}),me);function xe(t,e){if(1&t&&(p.Ub(0,"span",2),p.Ub(1,"span",3),p.Bc(2),p.Tb(),p.Ub(3,"span",4),p.Bc(4),p.Tb(),p.Tb()),2&t){var n=p.fc();p.Cb(2),p.Cc(n.prefix),p.Cb(1),p.Gb("simple-diff-insert",!n.remove),p.Cb(1),p.Cc(n.insert)}}var ke,we=((ke=function(){function t(){l(this,t),this.clear()}return d(t,[{key:"clear",value:function(){this.prefix=this.suffix=this.remove=this.insert=""}},{key:"ngOnChanges",value:function(){this.clear();var t=this.pastValue||"",e=this.nextValue||"";if(t===e)this.prefix=t;else{var n=Object(y.a)(t,e),i=n.length,a=Object(y.b)(t,e,i),o=a.length;this.prefix=n,this.suffix=a,this.remove=t.substring(i,t.length-o),this.insert=e.substring(i,e.length-o).replace(/\s+/g,"\xa0")}}}]),t}()).\u0275fac=function(t){return new(t||ke)},ke.\u0275cmp=p.Ib({type:ke,selectors:[["app-simple-diff"]],inputs:{pastValue:"pastValue",nextValue:"nextValue",hideChange:"hideChange"},features:[p.Ab],decls:6,vars:6,consts:[[1,"simple-diff-frame"],["class","simple-diff-block",4,"ngIf"],[1,"simple-diff-block"],[2,"visibility","hidden"],[2,"display","inline-block"]],template:function(t,e){1&t&&(p.Ub(0,"span",0),p.zc(1,xe,5,4,"span",1),p.Bc(2),p.Ub(3,"span"),p.Bc(4),p.Tb(),p.Bc(5),p.Tb()),2&t&&(p.Cb(1),p.lc("ngIf",e.insert&&!e.hideChange),p.Cb(1),p.Dc(" ",e.prefix,""),p.Cb(1),p.Gb("simple-diff-error",!e.hideChange),p.Cb(1),p.Cc(e.remove),p.Cb(1),p.Dc("",e.suffix,"\n"))},directives:[c.l],styles:['@charset "UTF-8";@-webkit-keyframes keyframes-fade-in{0%{opacity:0}to{opacity:1}}@keyframes keyframes-fade-in{0%{opacity:0}to{opacity:1}}@-webkit-keyframes keyframes-error-in{0%{-webkit-text-decoration-color:#ff000000;text-decoration-color:#ff000000}99%{-webkit-text-decoration-color:#ff000000;text-decoration-color:#ff000000}to{-webkit-text-decoration-color:red;text-decoration-color:red}}@keyframes keyframes-error-in{0%{-webkit-text-decoration-color:#ff000000;text-decoration-color:#ff000000}99%{-webkit-text-decoration-color:#ff000000;text-decoration-color:#ff000000}to{-webkit-text-decoration-color:red;text-decoration-color:red}}span.simple-diff-frame[_ngcontent-%COMP%]{display:inline-block;position:relative}span.simple-diff-frame[_ngcontent-%COMP%]   span.simple-diff-insert[_ngcontent-%COMP%]{position:relative;left:-.35em;top:0}span.simple-diff-frame[_ngcontent-%COMP%]   span.simple-diff-insert[_ngcontent-%COMP%]:after{content:"\u2713";position:absolute;left:.05em;top:.44em}span.simple-diff-frame[_ngcontent-%COMP%]   span.simple-diff-error[_ngcontent-%COMP%]{-webkit-animation:keyframes-error-in 1s ease 0s 1 normal backwards;animation:keyframes-error-in 1s ease 0s 1 normal backwards;-webkit-text-decoration:red solid line-through;text-decoration:red solid line-through}span.simple-diff-frame[_ngcontent-%COMP%]   span.simple-diff-block[_ngcontent-%COMP%]{display:inline-block;position:absolute;left:0;top:-.85em;width:-webkit-max-content;width:-moz-max-content;width:max-content;color:red;-webkit-animation:keyframes-fade-in 1s ease 1s 1 normal backwards;animation:keyframes-fade-in 1s ease 1s 1 normal backwards}']}),ke),Ce=["imageRef"];function Me(t,e){if(1&t&&p.Pb(0,"canvas",17),2&t){var n=p.fc(),i=p.qc(4);p.wc("left",i.offsetLeft,"px")("top",i.offsetTop,"px"),p.lc("animationCallback",n.sfx.animation)("width",i.offsetWidth)("height",i.offsetHeight)}}function _e(t,e){if(1&t&&p.Pb(0,"app-simple-diff",18),2&t){var n=e.$implicit;p.lc("pastValue",n.userAnswer)("nextValue",n.realAnswer)}}function Oe(t,e){if(1&t&&(p.Ub(0,"span"),p.Ub(1,"span"),p.Bc(2),p.Tb(),p.Ub(3,"span",19),p.Bc(4),p.Tb(),p.Ub(5,"span"),p.Bc(6),p.Tb(),p.Tb()),2&t){var n=p.fc();p.Gb("missing-letters-input",!n.isAnswered),p.Cb(2),p.Cc(n.quizPrefix),p.Cb(2),p.Cc(n.quizUserAnswer),p.Cb(2),p.Cc(n.quizSuffix)}}function Pe(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",20),p.bc("click",function(){return p.sc(n),p.fc().onAudioClick()}),p.Tb()}if(2&t){var i=p.fc();p.Gb("active",i.isAudioPlaying)}}function Te(t,e){if(1&t){var n=p.Vb();p.Ub(0,"button",21),p.bc("click",function(){return p.sc(n),p.fc().onStart()}),p.Bc(1,"START"),p.Tb()}}function Ie(t,e){if(1&t){var n=p.Vb();p.Ub(0,"button",23),p.bc("click",function(){p.sc(n);var t=e.$implicit,i=p.fc(2),a=p.qc(4);return i.onAnswer(t,a)}),p.Bc(1),p.Tb()}if(2&t){var i=e.$implicit,a=p.fc(2);p.lc("disabled",a.isAnswered),p.Cb(1),p.Cc(i||"_")}}function Se(t,e){if(1&t&&(p.Sb(0),p.zc(1,Ie,2,2,"button",22),p.Rb()),2&t){var n=p.fc();p.Cb(1),p.lc("ngForOf",n.questions)("ngForTrackBy",n.trackByIndex)}}function Ue(t,e){if(1&t){var n=p.Vb();p.Ub(0,"button",21),p.bc("click",function(){return p.sc(n),p.fc().onRestart()}),p.Bc(1,"RESTART"),p.Tb()}}function ze(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",24),p.bc("click",function(){return p.sc(n),p.fc().chatBot.next()}),p.Ub(1,"div"),p.Pb(2,"div",25),p.Tb(),p.Tb()}if(2&t){var i=e.ngIf;p.Cb(1),p.Eb("teacher"===i.who?"missing-letters-teacher":"missing-letters-student"),p.Cb(1),p.lc("innerHTML",i.message,p.tc)}}var Be,Ae=((Be=function(){function t(e,n){l(this,t),this._http=e,this._route=n,this.imageStyles={display:"none"},this.quizes=[],this.answers=[],this.quizPrefix="",this.quizSuffix="",this.quizUserAnswer="",this.quizRealAnswer="",this.questions=[],this.chatBot=new ge,this.audio=new Audio,this.audioPlaybackRate=1,this.isAudioEnabled=!0,this.isAudioPlaying=!1,this.state="loading",this.fontSize=24,this.fontSizeMin=12,this.fontSizeMax=40}return d(t,[{key:"isVictory",get:function(){return"done"===this.state&&0===he(this.answers)}},{key:"ngOnInit",value:function(){var t=this;this.audio.onended=function(){return t.isAudioPlaying=!1},this.audio.onerror=function(){return t.isAudioPlaying=!1},this.audio.onplay=function(){return t.isAudioPlaying=!0};var e=(this._route.snapshot.queryParams.game||"").replace(/[^a-z\-_\.0-9]+/gim,"");e&&this._http.get(be+e+".json").subscribe(function(e){t.gameData=e,t.state="ready"})}},{key:"onStart",value:function(){this.sfx=void 0,this.answers=[],this.quizes=Object.keys(this.gameData),this.state="active",this.nextQuiz()}},{key:"onRestart",value:function(){this.onStart()}},{key:"nextQuiz",value:function(){var t=this.quizes;if(t.length>0){var e=Math.floor(Math.random()*t.length),n=t[e];return this.setQuiz(n),t.splice(e,1),this.setAudio(this.gameData[n]),!0}if(this.state="done",this.chatBot.onEnd(this.answers),0===he(this.answers)){var i=Math.random();if(i<.3)this.sfx=new Yt;else if(i<.7){var a=new $t;a.speed=Object(k.k)(100,600),a.particleCount=Object(k.k)(25,350),this.sfx=a}else{var o=new Kt;o.particleCount=Object(k.k)(3,10),this.sfx=o}}return!1}},{key:"setQuiz",value:function(t){for(var e=/\([^)]+\)|./g,n=[],i=0;;){var a=e.exec(t);if(!a)break;var o=a[0];if(o.length>1){var s=o.substring(1,o.length-1).split("|");n.push({value:s[0],questions:s}),i++}else 1===o.length&&n.push({value:o})}if(i>1){var c,l=Math.floor(Math.random()*i),u=r(n);try{for(u.s();!(c=u.n()).done;){var d=c.value;d.questions&&--i!==l&&(d.questions=null)}}catch(p){u.e(p)}finally{u.f()}}for(var f="",h=0,m=n;h<m.length;h++){var g=m[h];g.questions?(this.quizPrefix=f,f="",this.quizRealAnswer=g.questions[0],this.questions=g.questions,this.questions.sort()):f+=g.value}this.quizSuffix=f,this.isAnswered=!1,this.quizUserAnswer="_"}},{key:"setAudio",value:function(t){t&&(this.audio.src=be+"audio/"+t+".mp3",this.audioPlaybackRate=1,this.playAudio())}},{key:"playAudio",value:function(){this.isAudioEnabled&&this.audio.src&&(this.audio.load(),this.audio.playbackRate=this.audioPlaybackRate,this.audio.play(),this.audioPlaybackRate=Math.max(.95*this.audioPlaybackRate,.5))}},{key:"onAudioClick",value:function(){"done"===this.state?0===he(this.answers)&&this.setAudio(Object(b.d)(ve)):this.playAudio()}},{key:"onAnswer",value:function(t,e){var n=this;this.clearImage(),this.isAnswered=!0,this.quizUserAnswer=t;var i=this.quizPrefix+this.quizUserAnswer+this.quizSuffix,a=this.quizPrefix+this.quizRealAnswer+this.quizSuffix;setTimeout(function(){var t,e=null===(t=n.imageRef)||void 0===t?void 0:t.nativeElement;if(e){var o=i===a?0===n.quizes.length&&0===he(n.answers)?pe.dances:pe.jumps:pe.looks,s=Object(b.d)(o);e.src=be+s.src;var r=Object(b.d)(s.frames),c="number"==typeof r.right?Object(k.k)(r.left,r.right):r.left,l="number"==typeof r.bottom?Object(k.k)(r.top,r.bottom):r.top;n.imageStyles={position:"absolute",left:c+"px",top:l+"px",width:r.width+"px"}}},10),setTimeout(function(){n.answers.push({userAnswer:i,realAnswer:a}),n.nextQuiz(),setTimeout(function(){e.scrollTop=e.scrollHeight},100)},1e3)}},{key:"trackByIndex",value:function(t){return t}},{key:"clearImage",value:function(){var t,e=null===(t=this.imageRef)||void 0===t?void 0:t.nativeElement;e&&(e.src=""),this.imageStyles={display:"none"}}},{key:"explodeImage",value:function(){var t,e=null===(t=this.imageRef)||void 0===t?void 0:t.nativeElement;if(e){var n=Object(b.d)(pe.booms);e.src=be+n.src}}},{key:"onMouseMove",value:function(t,e){if(this.sfx){var n=e.getBoundingClientRect();this.sfx.mouse={x:t.clientX-n.left,y:t.clientY-n.top}}}},{key:"onMouseOut",value:function(){this.sfx&&(this.sfx.mouse=void 0)}}]),t}()).\u0275fac=function(t){return new(t||Be)(p.Ob(u.a),p.Ob(h.a))},Be.\u0275cmp=p.Ib({type:Be,selectors:[["app-missing-letters"]],viewQuery:function(t,e){var n;1&t&&p.Gc(Ce,1),2&t&&p.pc(n=p.cc())&&(e.imageRef=n.first)},decls:24,vars:14,consts:[[1,"missing-letters"],[1,"missing-letters-frame"],["class","missing-letters-sfx","appCanvasAnimation","",3,"animationCallback","left","top","width","height",4,"ngIf"],[1,"missing-letters-board",3,"mousemove","mouseout"],["board",""],[3,"pastValue","nextValue",4,"ngFor","ngForOf"],[3,"missing-letters-input",4,"ngIf"],["class","missing-letters-audio",3,"active","click",4,"ngIf"],[1,"missing-letters-effects",3,"ngStyle","click"],["imageRef",""],[1,"missing-letters-front"],[3,"click",4,"ngIf"],[4,"ngIf"],["mat-fab","","color","warn",2,"position","absolute","left","872px","top","220px",3,"click"],["mat-fab","","color","primary",2,"position","absolute","left","960px","top","132px",3,"disabled","click"],["mat-fab","","color","primary",2,"position","absolute","left","954px","top","204px",3,"disabled","click"],["class","missing-letters-popup",3,"click",4,"ngIf"],["appCanvasAnimation","",1,"missing-letters-sfx",3,"animationCallback","width","height"],[3,"pastValue","nextValue"],[1,"missing-letters-answer"],[1,"missing-letters-audio",3,"click"],[3,"click"],[3,"disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"disabled","click"],[1,"missing-letters-popup",3,"click"],[1,"missing-letters-message",3,"innerHTML"]],template:function(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",0),p.Ub(1,"div",1),p.zc(2,Me,1,7,"canvas",2),p.Ub(3,"div",3,4),p.bc("mousemove",function(t){p.sc(n);var i=p.qc(4);return e.onMouseMove(t,i)})("mouseout",function(){return e.onMouseOut()}),p.zc(5,_e,1,2,"app-simple-diff",5),p.zc(6,Oe,7,5,"span",6),p.Tb(),p.zc(7,Pe,1,2,"div",7),p.Ub(8,"img",8,9),p.bc("click",function(){return e.explodeImage()}),p.Tb(),p.Ub(10,"div",10),p.zc(11,Te,2,0,"button",11),p.zc(12,Se,2,2,"ng-container",12),p.zc(13,Ue,2,0,"button",11),p.Tb(),p.Ub(14,"button",13),p.bc("click",function(){return e.isAudioEnabled=!e.isAudioEnabled}),p.Ub(15,"mat-icon"),p.Bc(16),p.Tb(),p.Tb(),p.Ub(17,"button",14),p.bc("click",function(){return e.fontSize=e.fontSize-(e.fontSizeMin>=e.fontSize?0:1)}),p.Ub(18,"mat-icon"),p.Bc(19,"zoom_out"),p.Tb(),p.Tb(),p.Ub(20,"button",15),p.bc("click",function(){return e.fontSize=e.fontSize+(e.fontSize>=e.fontSizeMax?0:1)}),p.Ub(21,"mat-icon"),p.Bc(22,"zoom_in"),p.Tb(),p.Tb(),p.zc(23,ze,3,3,"div",16),p.Tb(),p.Tb()}2&t&&(p.Cb(2),p.lc("ngIf",e.sfx&&!e.chatBot.currentItem),p.Cb(1),p.wc("font-size",e.fontSize,"px"),p.Cb(2),p.lc("ngForOf",e.answers),p.Cb(1),p.lc("ngIf","active"===e.state),p.Cb(1),p.lc("ngIf",e.isAudioEnabled),p.Cb(1),p.lc("ngStyle",e.imageStyles),p.Cb(3),p.lc("ngIf","ready"===e.state),p.Cb(1),p.lc("ngIf","active"===e.state),p.Cb(1),p.lc("ngIf","done"===e.state),p.Cb(3),p.Cc(e.isAudioEnabled?"volume_up":"volume_off"),p.Cb(1),p.lc("disabled",e.fontSizeMin>=e.fontSize),p.Cb(3),p.lc("disabled",e.fontSize>=e.fontSizeMax),p.Cb(3),p.lc("ngIf",e.chatBot.currentItem))},directives:[c.l,c.k,c.m,U.a,it.a,ye,we],styles:['@charset "UTF-8";@-webkit-keyframes keyframes-heartbeat{0%{opacity:1}40%{opacity:1}43%{opacity:0}to{opacity:1}}@keyframes keyframes-heartbeat{0%{opacity:1}40%{opacity:1}43%{opacity:0}to{opacity:1}}@-webkit-keyframes keyframes-fade-in{0%{opacity:0}to{opacity:1}}@keyframes keyframes-fade-in{0%{opacity:0}to{opacity:1}}@-webkit-keyframes keyframes-fade-in-alt{0%{opacity:0}to{opacity:1}}@keyframes keyframes-fade-in-alt{0%{opacity:0}to{opacity:1}}@-webkit-keyframes keyframes-breath{0%{transform:scale(1)}15%{transform:scaleY(1.05) translateY(-5px)}50%{transform:scale(1)}85%{transform:scaleY(1.075) translateY(-8px)}to{transform:scale(1)}}@keyframes keyframes-breath{0%{transform:scale(1)}15%{transform:scaleY(1.05) translateY(-5px)}50%{transform:scale(1)}85%{transform:scaleY(1.075) translateY(-8px)}to{transform:scale(1)}}.missing-letters[_ngcontent-%COMP%]{width:100vw;height:100vh;display:flex;justify-content:center;overflow:auto;background-color:#faebd7;background-image:url(paper.a337f7125fb46efa4f34.jpg);background-size:100% 100%}div.missing-letters-frame[_ngcontent-%COMP%]{position:relative;width:1024px;height:768px;flex-shrink:0;background-color:#7fffd4;background-image:url(board.4ec1c6648efcc3f0d49c.png);background-repeat:no-repeat;background-size:100% 100%}@media (min-height:800px){div.missing-letters-frame[_ngcontent-%COMP%]{margin-top:16px}}div.missing-letters-frame[_ngcontent-%COMP%]   .missing-letters-sfx[_ngcontent-%COMP%]{position:absolute;-webkit-animation:keyframes-fade-in 1s ease 1;animation:keyframes-fade-in 1s ease 1}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-board[_ngcontent-%COMP%]{position:absolute;left:226px;top:28px;width:calc(604px - 1em);height:calc(484px - 1em);color:#eee;line-height:2em;padding:.5em;overflow-y:auto;overflow-x:hidden;display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;align-content:flex-start}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-board[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:after{content:",\xa0"}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-board[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child:after{visibility:hidden;color:#0000}div.missing-letters-frame[_ngcontent-%COMP%]   span.missing-letters-answer[_ngcontent-%COMP%], div.missing-letters-frame[_ngcontent-%COMP%]   span.missing-letters-input[_ngcontent-%COMP%]{-webkit-animation:keyframes-fade-in 1s ease 1;animation:keyframes-fade-in 1s ease 1}div.missing-letters-frame[_ngcontent-%COMP%]   span.missing-letters-input[_ngcontent-%COMP%]   .missing-letters-answer[_ngcontent-%COMP%]{-webkit-animation:keyframes-heartbeat 2s linear infinite;animation:keyframes-heartbeat 2s linear infinite;padding-left:.075em;padding-right:.075em}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-audio[_ngcontent-%COMP%]{position:absolute;cursor:pointer;left:30px;top:525px;width:200px;height:228px;background-color:transparent;background-image:url(phonograph.e62f307fd663fa6ffac6.png);background-repeat:no-repeat;background-size:100% 100%}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-audio.active[_ngcontent-%COMP%]{-webkit-animation:keyframes-breath 1s linear .2s infinite;animation:keyframes-breath 1s linear .2s infinite}div.missing-letters-frame[_ngcontent-%COMP%]   img.missing-letters-effects[_ngcontent-%COMP%]{-webkit-animation:keyframes-fade-in .5s ease;animation:keyframes-fade-in .5s ease}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-front[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:flex-start;left:200px;top:526px;width:658px;height:240px;pointer-events:none;background-color:transparent}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-front[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:inline-block;background:radial-gradient(#00d090 0,#70d0a0cc 100%);color:#eee;text-decoration:none;font-size:40px;cursor:pointer;pointer-events:auto;min-height:98px;min-width:98px;margin:24px;border:none;border-radius:50%/50%;box-shadow:4px 4px 2px #0005}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-front[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{font-size:44px;background:radial-gradient(#70d0a0 0,#00d090cc 100%)}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-front[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #0f5040cc,4px 4px 2px #0005}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-front[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{outline:none;box-shadow:0 0 0 2px #0f5040cc,4px 4px 2px #0005;font-size:36px;opacity:.9}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-front[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:disabled{color:#aaa;opacity:.6;background:radial-gradient(#888 0,#555 100%)}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-popup[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;background-color:#2222}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-popup[_ngcontent-%COMP%]   div.missing-letters-message[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;flex-wrap:wrap;text-align:center}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-popup[_ngcontent-%COMP%]   div.missing-letters-student[_ngcontent-%COMP%], div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-popup[_ngcontent-%COMP%]   div.missing-letters-teacher[_ngcontent-%COMP%]{position:relative;background-color:transparent;background-repeat:no-repeat;background-size:100% 100%;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease;animation-timing-function:ease;-webkit-animation-duration:1s;animation-duration:1s}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-popup[_ngcontent-%COMP%]   div.missing-letters-teacher[_ngcontent-%COMP%]{-webkit-animation-name:keyframes-fade-in;animation-name:keyframes-fade-in;left:135px;top:5px;width:339px;height:253px;background-image:url(speech-bubble.d3e5271e6c9810001363.png)}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-popup[_ngcontent-%COMP%]   div.missing-letters-teacher[_ngcontent-%COMP%]   div.missing-letters-message[_ngcontent-%COMP%]{left:20px;top:38px;width:284px;height:140px;font-size:32px;line-height:1.1em;color:#700000}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-popup[_ngcontent-%COMP%]   div.missing-letters-student[_ngcontent-%COMP%]{-webkit-animation-name:keyframes-fade-in-alt;animation-name:keyframes-fade-in-alt;left:582px;top:334px;width:289px;height:175px;background-image:url(speech-bubble-small.3c897c002993c604083f.png)}div.missing-letters-frame[_ngcontent-%COMP%]   div.missing-letters-popup[_ngcontent-%COMP%]   div.missing-letters-student[_ngcontent-%COMP%]   div.missing-letters-message[_ngcontent-%COMP%]{left:14px;top:22px;width:222px;height:122px;font-size:32px;line-height:1.1em;color:#000070}']}),Be),qe=o("FKr1");function Ne(t,e){1&t&&(p.ec(),p.Pb(0,"path")),2&t&&p.Db("d",e.$implicit.path||"M0 0z")}function je(t,e){if(1&t){var n=p.Vb();p.Ub(0,"span",8),p.bc("click",function(){p.sc(n);var t=e.index,i=p.fc().index;return p.fc().onSelect(t,i)}),p.Bc(1),p.Tb()}if(2&t){var i=e.$implicit;p.Cb(1),p.Cc(i)}}function Ve(t,e){if(1&t&&(p.Ub(0,"div"),p.zc(1,je,2,1,"span",7),p.Tb()),2&t){var n=e.$implicit;p.Cb(1),p.lc("ngForOf",n)}}var De,Le=((De=function(){function t(){l(this,t),this.showFrame=!0,this.activeSelection=-1,this.selectionList=[],this.selectionChange=new p.n,this.letters=[]}return d(t,[{key:"letters",get:function(){return this._letters},set:function(t){this._letters=t;var e=t.length,n=e>0?t[0].length:0;this.colNum=2+n,this.rowNum=2+e,this.pathFrame=function(t,e){var n=t>2?"q.5 -1 1 0".repeat(t-2):"h-2",i=t>2?"q-.5 1-1 0".repeat(t-2):"h 2";return"M0 1q-2-3 1-1".concat(n,"q 3-2 1 1").concat(e>2?"q 1 .5 0 1".repeat(e-2):"v-2","q 2 3-1 1").concat(i,"q-3 2-1-1").concat(e>2?"q-1-.5 0-1".repeat(e-2):"v 2","z")}(n,e)}},{key:"ngOnInit",value:function(){}},{key:"onSelect",value:function(t,e){var n,i,a,o,s,r,c,l,u=this.selectionList[this.activeSelection];u&&(u.segment&&u.segment.x1===t&&u.segment.x2===t&&u.segment.y1===e&&u.segment.y2===e?(u.segment=void 0,u.path=void 0):(u.segment=function(t,e,n){if(n&&function(t,e,n){return(e-t.x1)*(t.y2-t.y1)==(n-t.y1)*(t.x2-t.x1)}(n,t,e)){var i=n.x1,a=n.x2,o=n.y1,s=n.y2;if(t===i&&i===a)return e<o?{x1:i,x2:a,y1:e,y2:s}:{x1:i,x2:a,y1:o,y2:e};if(e===o&&o===s)return t<i?{y1:o,y2:s,x1:t,x2:a}:{y1:o,y2:s,x1:i,x2:t};if(Math.abs(t-i)===Math.abs(e-o))return t<i?{x1:t,x2:a,y1:e,y2:s}:{x1:i,x2:t,y1:o,y2:e}}return{x1:t,y1:e,x2:t,y2:e}}(t,e,u.segment),u.path=(n=u.segment,i=n.x1,a=n.y1,o=n.x2-i,s=n.y2-a,r=0,c=0,l="",o>0?0===s?(r=i+.5+.354,c=a+.146,l="a.2 .2 0 0 0 .3 0a.5 .5 0 0 1 .7 0".repeat(o-1)+"a.2 .2 0 0 0 .3 0a.5 .5 0 1 1 0 .7"+"a.2 .2 0 0 0-.3 0a.5 .5 0 0 1-.7 0".repeat(o-1)+"a.2 .2 0 0 0-.3 0a.5 .5 0 1 1 0-.7"):o===s?(r=i+1,c=a+.5,l="a.5 .5 0 0 0 .5 .5a.5 .5 0 0 1 .5 .5".repeat(o-1)+"a.5 .5 0 0 0 .5 .5a.5 .5 0 1 1-.5 .5"+"a.5 .5 0 0 0-.5-.5a.5 .5 0 0 1-.5-.5".repeat(o-1)+"a.5 .5 0 0 0-.5-.5a.5 .5 0 1 1 .5-.5"):o===-s&&(r=i+.5,c=a,l="a.5 .5 0 0 0 .5-.5a.5 .5 0 0 1 .5-.5".repeat(o-1)+"a.5 .5 0 0 0 .5-.5a.5 .5 0 1 1 .5 .5"+"a.5 .5 0 0 0-.5 .5a.5 .5 0 0 1-.5 .5".repeat(o-1)+"a.5 .5 0 0 0-.5 .5a.5 .5 0 1 1-.5-.5"):0===o&&(s>0?(r=i+1-.146,c=a+.5+.354,l="a.2 .2 0 0 0 0 .3a.5 .5 0 0 1 0 .7".repeat(s-1)+"a.2 .2 0 0 0 0 .3a.5 .5 0 1 1-.7 0"+"a.2 .2 0 0 0 0-.3a.5 .5 0 0 1 0-.7".repeat(s-1)+"a.2 .2 0 0 0 0-.3a.5 .5 0 1 1 .7 0"):0===s&&(r=i+.5,c=a,l="a.5 .5 0 0 1 0 1a.5 .5 0 0 1 0 -1")),"M".concat(r," ").concat(c).concat(l,"z"))),this.selectionChange.emit(u))}}]),t}()).\u0275fac=function(t){return new(t||De)},De.\u0275cmp=p.Ib({type:De,selectors:[["app-letter-board"]],inputs:{letters:"letters",showFrame:"showFrame",activeSelection:"activeSelection",selectionList:"selectionList"},outputs:{selectionChange:"selectionChange"},decls:8,vars:7,consts:[[3,"colNum","rowNum"],["appContentSvg",""],["transform","translate(1 1)"],[1,"letter-board-frame"],[1,"letter-board-selections"],[4,"ngFor","ngForOf"],[1,"letter-board"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,e){1&t&&(p.Ub(0,"app-squared-paper",0),p.ec(),p.Ub(1,"svg",1),p.Ub(2,"g",2),p.Pb(3,"path",3),p.Ub(4,"g",4),p.zc(5,Ne,1,1,"path",5),p.Tb(),p.Tb(),p.Tb(),p.dc(),p.Ub(6,"div",6),p.zc(7,Ve,2,1,"div",5),p.Tb(),p.Tb()),2&t&&(p.lc("colNum",e.colNum)("rowNum",e.rowNum),p.Cb(3),p.Gb("letter-board-frame-active",e.showFrame),p.Db("d",e.pathFrame),p.Cb(2),p.lc("ngForOf",e.selectionList),p.Cb(2),p.lc("ngForOf",e.letters))},directives:[N,c.k],styles:[".letter-board[_ngcontent-%COMP%]{margin-left:24px;margin-top:24px}.letter-board[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;text-align:center;width:24px;min-width:24px;max-width:24px}.letter-board[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{box-shadow:2px 2px 4px #0008;outline:2px outset #0088;color:#008}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#444e;stroke-width:.1px}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+1){fill:#f004}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+2){fill:#0f04}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+3){fill:#00f4}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+4){fill:#ff04}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+5){fill:#0ff4}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+6){fill:#f0f4}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+7){fill:#8004}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+8){fill:#0804}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+9){fill:#0084}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n){fill:#8084}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:last-of-type{fill:#eeee;stroke:#d0d8}path.letter-board-frame[_ngcontent-%COMP%]{stroke:none;fill:#0000;transition:fill 2s linear}path.letter-board-frame.letter-board-frame-active[_ngcontent-%COMP%]{fill:#0808}"]}),De),Fe=["main"],Re=["*"];function Ee(t,e){1&t&&(p.Ub(0,"div"),p.Bc(1,"Loading..."),p.Tb())}function We(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",10),p.bc("click",function(){p.sc(n);var t=e.$implicit;return p.fc(3).onAnswerClick(t)}),p.Ub(1,"span"),p.Bc(2),p.Tb(),p.Tb()}if(2&t){var i=e.$implicit,a=e.last,o=p.fc(3);p.wc("transform",o.getSvgAnswerLayout(i).translate)("width",o.getSvgAnswerLayout(i).width)("height",o.getSvgAnswerLayout(i).height)("line-height",o.getSvgAnswerLayout(i).height),p.Gb("word-search-game-answer-next",a),p.Cb(2),p.Cc(i.value)}}function Ge(t,e){if(1&t&&(p.Ub(0,"div",8),p.zc(1,We,3,11,"div",9),p.Tb()),2&t){var n=p.fc(2);p.Cb(1),p.lc("ngForOf",n.answers)("ngForTrackBy",n.trackByIndex)}}function Ye(t,e){if(1&t&&p.zc(0,Ge,2,2,"div",7),2&t){var n=p.fc(),i=p.qc(1);p.lc("ngIf",n.gameSvg)("ngIfElse",i)}}function He(t,e){1&t&&(p.Ub(0,"mat-icon",11),p.Bc(1," emoji_events"),p.Tb())}function $e(t,e){if(1&t){var n=p.Vb();p.Ub(0,"app-word-search-game-svg",17),p.bc("itemChange",function(t){return p.sc(n),p.fc(2).onQuestionClick(t)}),p.Tb()}if(2&t){var i=p.fc(2);p.Gb("word-search-game-svg-done",i.isDone),p.lc("game",i.gameSvg)}}function Xe(t,e){if(1&t){var n=p.Vb();p.Ub(0,"li",10),p.bc("click",function(){p.sc(n);var t=e.$implicit;return p.fc(3).onQuestionClick(t.value)}),p.Ub(1,"mat-icon",5),p.Bc(2,"volume_up"),p.Tb(),p.Ub(3,"span"),p.Bc(4),p.Tb(),p.Tb()}if(2&t){var i=e.$implicit;p.Cb(4),p.Cc(i.value)}}function Ke(t,e){if(1&t){var n=p.Vb();p.Ub(0,"li",10),p.bc("click",function(){p.sc(n);var t=e.$implicit;return p.fc(3).onAnswerClick(t)}),p.Ub(1,"span"),p.Bc(2),p.Tb(),p.Tb()}if(2&t){var i=e.$implicit,a=e.last;p.wc("transform",i.transform),p.Gb("word-search-game-answer-next",a)("word-search-game-answer-last",i.isLast),p.Cb(2),p.Cc(i.value)}}function Qe(t,e){if(1&t&&(p.Ub(0,"div",18),p.Ub(1,"ul",19),p.zc(2,Xe,5,1,"li",20),p.Tb(),p.Ub(3,"ul",8),p.zc(4,Ke,3,7,"li",21),p.Tb(),p.Tb()),2&t){var n=p.fc(2);p.Cb(2),p.lc("ngForOf",n.questions)("ngForTrackBy",n.trackByIndex),p.Cb(2),p.lc("ngForOf",n.answers)("ngForTrackBy",n.trackByIndex)}}function Je(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",12),p.zc(1,$e,1,3,"app-word-search-game-svg",13),p.Ub(2,"div",14),p.Ub(3,"app-letter-board",15),p.bc("selectionChange",function(t){return p.sc(n),p.fc().onSelectionChange(t)}),p.Tb(),p.Tb(),p.zc(4,Qe,5,4,"div",16),p.Tb()}if(2&t){var i=p.fc(),a=p.qc(3);p.Gb("word-search-game-svg",!!i.gameSvg),p.Cb(1),p.lc("ngIf",i.gameSvg),p.Cb(1),p.wc("transform",null==i.gameSVGLayout?null:i.gameSVGLayout.board.translate),p.Cb(1),p.lc("showFrame",i.isDone)("letters",i.letters)("selectionList",i.answers)("activeSelection",i.activeAnswerIndex),p.Cb(1),p.lc("ngIf",!i.hasSvg)("ngIfElse",a)}}var Ze,tn="word-search-game-svg",en=((Ze=function(){function t(e){l(this,t),this._r2=e,this.itemChange=new p.n,this.width=0,this.height=0}return d(t,[{key:"ngAfterViewInit",value:function(){var t=this,e=this.game;if(e){var n=this.mainRef.nativeElement;n&&setTimeout(function(){var i=function(t){var e=1024,n=768;if(t){var i=t.split(/[\s,]+/gm).map(function(t){return+t}),a=i[2]-i[0],o=i[3]-i[1];a>0&&(e=a),o>0&&(n=o)}return{width:e,height:n}}(e.getAttribute("viewBox"));t.width=i.width,t.height=i.height,e.querySelectorAll("g.".concat(tn,"-questions > path")).forEach(function(e){var n=e.id.substring(e.tagName.length);e.onclick=function(){return t.itemChange.emit(n)}}),t._r2.appendChild(n,e)})}}}]),t}()).\u0275fac=function(t){return new(t||Ze)(p.Ob(p.F))},Ze.\u0275cmp=p.Ib({type:Ze,selectors:[["app-word-search-game-svg"]],viewQuery:function(t,e){var n;1&t&&p.Gc(Fe,1,p.l),2&t&&p.pc(n=p.cc())&&(e.mainRef=n.first)},inputs:{game:"game"},outputs:{itemChange:"itemChange"},ngContentSelectors:Re,decls:3,vars:4,consts:[[2,"position","relative"],["main",""]],template:function(t,e){1&t&&(p.kc(),p.Ub(0,"div",0,1),p.jc(2),p.Tb()),2&t&&p.wc("width",e.width,"px")("height",e.height,"px")},encapsulation:2}),Ze);function nn(t){return"translateY(".concat(-1-t,"50%)")}function an(t,e){var n={},i=t.querySelector(e);if(i){var a=i.getAttribute("x"),o=i.getAttribute("y"),s=i.getAttribute("width"),r=i.getAttribute("height");n.translate="translate(".concat(a||"0","px, ").concat(o||"0","px)"),n.width=s?s+"px":"inherit",n.height=r?r+"px":"inherit"}return n}function on(t,e,n){var i,a={},o=r(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;a[s.answerValue]=an(t,e+s.value)}}catch(c){o.e(c)}finally{o.f()}return a}var sn,rn,cn=((sn=function(){function t(e,n,i,a){l(this,t),this._route=e,this._http=n,this._iconRegistry=i,this._sanitizer=a}return d(t,[{key:"isDone",get:function(){return this.questions&&this.answers&&this.answers.length>this.questions.length}},{key:"activeAnswerIndex",get:function(){return this.answers?this.answers.length-1:-1}},{key:"ngOnInit",value:function(){var t=this,e=this._route.snapshot.queryParams,n=e.game;if(n){var i="assets/school/english/word-search-game/"+n+"/";this._http.get(i+"data.json").subscribe(function(a){t.mission=a.mission;var o=+e.index,s=o>0&&o<=a.puzzles.length?a.puzzles[o-1]:Object(b.d)(a.puzzles),r=a.blank||" ";if(t.letters=function(t,e,n){return function(t,e){if(e)return t.split(e);for(var n=Math.floor(Math.sqrt(t.length)),i=Array(n),a=0;a<n;a++)i[a]=t.substring(a*n,(a+1)*n);return i}(t,n).map(function(t){return t.split("").map(e)})}(s,function(t){return t===r?Object(y.d)(a.letters):t},a.liner),t.questions=Object.keys(a.answers).map(function(t,e){var n=a.answers[t],o="string"==typeof n?n:n[0],s=new Audio;return s.src=i+"audio/"+o+".mp3",{index:e,value:o,answerValue:t,answerIndex:-1,audio:s}}),t.answers=[],t._nextAnswer(),t.name=n,a.hasSvg){t.hasSvg=!0;var c=t._sanitizer.bypassSecurityTrustResourceUrl(i+"data.svg");t._iconRegistry.getSvgIconFromUrl(c).subscribe(function(e){var n,i;t.gameSvg=e,t.gameSVGLayout=(i=t.questions,{board:an(n=e,"rect.".concat(tn,"-board")),prompt:an(n,"rect.".concat(tn,"-prompt")),answers:on(n,"rect#".concat(tn,"-answer"),i)})})}})}}},{key:"onAnswerClick",value:function(t){var e=this.answers[this.activeAnswerIndex];t===e?(e.segment=void 0,e.path=void 0,e.value=""):(e.segment=t.segment,e.path=t.path,e.value=t.value)}},{key:"onQuestionClick",value:function(t){var e=this.questions.find(function(e){return e.value===t});if(e){e.audio.load(),e.audio.play();var n=e.answerIndex>=0?e.answerIndex:this.activeAnswerIndex;n>=0&&this.onAnswerClick(this.answers[n])}}},{key:"onSelectionChange",value:function(t){if(t.segment){var e=t.segment,n=e.x1,i=e.y1,a=e.x2-n,o=e.y2-i,s=Math.max(Math.abs(a),Math.abs(o));t.value=this.letters[i][n];for(var r=1;r<=s;r++)t.value+=this.letters[i+o*r/s][n+a*r/s];var c=this.questions.find(function(e){return e.answerIndex<0&&e.answerValue===t.value});c&&(c.answerIndex=t.index,t.isLast=c.index+1===this.questions.length,t.transform="translateY(".concat(c.index-t.index,"00%)"),this._nextAnswer())}else t.value=""}},{key:"trackByIndex",value:function(t){return t}},{key:"getSvgAnswerLayout",value:function(t){return t.index===this.activeAnswerIndex?this.gameSVGLayout.prompt:this.gameSVGLayout.answers[t.value]}},{key:"_nextAnswer",value:function(){var t=this.answers.length;this.answers.push({index:t,value:"",transform:nn(t)})}}]),t}()).\u0275fac=function(t){return new(t||sn)(p.Ob(h.a),p.Ob(u.a),p.Ob(it.c),p.Ob(at.b))},sn.\u0275cmp=p.Ib({type:sn,selectors:[["app-word-search-game"]],decls:12,vars:3,consts:[["templateLoadSvg",""],["templateGameSvg",""],[1,"word-search-game-title"],["color","accent","style","vertical-align: text-top; transform: translate(-10px, -10px)",4,"ngIf"],[1,"word-search-game-info"],["color","primary"],["class","word-search-game",3,"word-search-game-svg",4,"ngIf"],["class","word-search-game-answers",4,"ngIf","ngIfElse"],[1,"word-search-game-answers"],["matRipple","",3,"word-search-game-answer-next","transform","width","height","line-height","click",4,"ngFor","ngForOf","ngForTrackBy"],["matRipple","",3,"click"],["color","accent",2,"vertical-align","text-top","transform","translate(-10px, -10px)"],[1,"word-search-game"],[3,"word-search-game-svg-done","game","itemChange",4,"ngIf"],[1,"word-search-game-board"],[3,"showFrame","letters","selectionList","activeSelection","selectionChange"],["class","word-search-game-plan",4,"ngIf","ngIfElse"],[3,"game","itemChange"],[1,"word-search-game-plan"],[1,"word-search-game-questions"],["matRipple","",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["matRipple","",3,"word-search-game-answer-next","word-search-game-answer-last","transform","click",4,"ngFor","ngForOf","ngForTrackBy"]],template:function(t,e){1&t&&(p.zc(0,Ee,2,0,"ng-template",null,0,p.Ac),p.zc(2,Ye,1,2,"ng-template",null,1,p.Ac),p.Ub(4,"h2",2),p.Bc(5," Word Search Puzzle "),p.zc(6,He,2,0,"mat-icon",3),p.Tb(),p.Ub(7,"p",4),p.Ub(8,"mat-icon",5),p.Bc(9,"info"),p.Tb(),p.Bc(10),p.Tb(),p.zc(11,Je,5,11,"div",6)),2&t&&(p.Cb(6),p.lc("ngIf",e.isDone),p.Cb(4),p.Dc(" ",e.mission,"\n"),p.Cb(1),p.lc("ngIf",e.letters))},directives:[c.l,it.a,c.k,qe.l,Le,en],styles:[".word-search-game-title[_ngcontent-%COMP%]{padding-left:72px;padding-top:12px}.word-search-game-info[_ngcontent-%COMP%]{padding-left:24px}.word-search-game[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:flex-start;align-content:flex-start}.word-search-game-board[_ngcontent-%COMP%]{padding-left:24px;padding-bottom:24px}.word-search-game-plan[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:24px;margin-bottom:24px;padding-top:48px;border:1px solid #ddf;border-top:none;border-radius:0 0 6px 6px;background:linear-gradient(#eef,#eae)}.word-search-game-plan[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;font-size:20px}.word-search-game-plan[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;min-height:24px;max-height:24px;height:24px;display:flex;flex-direction:row;align-items:center;padding-left:12px;padding-right:0;background-color:#99f2}.word-search-game-questions[_ngcontent-%COMP%]{margin:0;min-width:119px}.word-search-game-questions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#63b;background-color:#99f4}.word-search-game-questions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-of-type{border-radius:0 0 0 6px}.word-search-game-answers[_ngcontent-%COMP%]{min-width:167px;margin:0 0 -24px;font-size:20px}.word-search-game-answers[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{transition:all 2s cubic-bezier(.5,-.5,.25,1.5)}.word-search-game-answers[_ngcontent-%COMP%]   li.word-search-game-answer-last[_ngcontent-%COMP%]{border-radius:0 0 6px 0}.word-search-game-answers[_ngcontent-%COMP%]   li.word-search-game-answer-next[_ngcontent-%COMP%]{letter-spacing:4.8px;padding-left:0;padding-right:0;background-color:#ffffff00}.word-search-game.word-search-game-svg[_ngcontent-%COMP%]{position:relative}.word-search-game.word-search-game-svg[_ngcontent-%COMP%]   .word-search-game-board[_ngcontent-%COMP%]{padding:0;position:absolute;left:0;top:0}.word-search-game.word-search-game-svg[_ngcontent-%COMP%]   .word-search-game-answers[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:pointer;position:absolute;left:0;top:0;text-align:center;transition:all 2s cubic-bezier(.5,-.5,.25,1.5);letter-spacing:0;background-color:#eef;border-radius:12px}.word-search-game.word-search-game-svg[_ngcontent-%COMP%]   .word-search-game-answers[_ngcontent-%COMP%] > div.word-search-game-answer-next[_ngcontent-%COMP%]{letter-spacing:4.8px;background-color:#0002;border-radius:0}"]}),sn),ln={stage:"done",game:null,difficulty:0,showMistakes:!1},un=((rn=function(t){n(i,t);var e=a(i);function i(){return l(this,i),e.call(this,ln)}return d(i,[{key:"set",value:function(t){return this._set(t)}}]),i}(qt.a)).\u0275fac=function(t){return new(t||rn)},rn.\u0275prov=p.Kb({token:rn,factory:rn.\u0275fac}),rn);function dn(t,e,n,i){var a,o=t[e]||(t[e]=[]),s=r(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(n===c.x&&i===c.y)return c}}catch(u){s.e(u)}finally{s.f()}var l={x:n,y:i,value:e};return o.push(l),l}var fn=function(){function t(e,n,i,a){l(this,t),this.cols=e,this.rows=n,this.xItems=i,this.yItems=a;var o,s={},c=r(i);try{for(c.s();!(o=c.n()).done;){var u=o.value;u.cells.length=0;for(var d=u.letters.length;d-- >0;){var f=dn(s,u.letters[d],u.x+d,u.y);f.hasLeft=d>0,f.hasRight=d<u.letters.length-1,u.cells[d]=f}}}catch(_){c.e(_)}finally{c.f()}var h,m=r(a);try{for(m.s();!(h=m.n()).done;){var g=h.value;g.cells.length=0;for(var p=g.letters.length;p-- >0;){var b=dn(s,g.letters[p],g.x,g.y+p);b.hasTop=p>0,b.hasBottom=p<g.letters.length-1,g.cells[p]=b}}}catch(_){m.e(_)}finally{m.f()}var v,y=Object.keys(s).sort(),x=[],k=r(y);try{for(k.s();!(v=k.n()).done;){var w,C=r(s[v.value]);try{for(C.s();!(w=C.n()).done;){var M=w.value;x.push(M)}}catch(_){C.e(_)}finally{C.f()}}}catch(_){k.e(_)}finally{k.f()}this.cells=x,this.letters=y,this.plan=s}return d(t,[{key:"isSolved",get:function(){var t,e=r(this.cells);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!n.next||n.next.value!==n.value)return!1}}catch(i){e.e(i)}finally{e.f()}return!0}},{key:"hasMistake",get:function(){var t,e=r(this.cells);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.next&&n.next.value!==n.value)return!0}}catch(i){e.e(i)}finally{e.f()}return!1}},{key:"countSolved",get:function(){var t,e=0,n=r(this.cells);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.isStatic||i.hasError||!i.next||i.next.value!==i.value||(e+=1)}}catch(a){n.e(a)}finally{n.f()}return e}},{key:"countStatic",get:function(){var t,e=0,n=r(this.cells);try{for(n.s();!(t=n.n()).done;){t.value.isStatic&&(e+=1)}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"countActive",get:function(){var t,e=0,n=r(this.cells);try{for(n.s();!(t=n.n()).done;){t.value.isActive&&(e+=1)}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"progress",get:function(){var t=this.cells.length-this.countStatic;return t>0?100*(t-this.countActive)/t:0}},{key:"getItem",value:function(t,e){return 0===t?this.xItems[e]:1===t?this.yItems[e]:void 0}},{key:"findCell",value:function(t,e){var n,i=r(this.cells);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.x===t&&a.y===e)return a}}catch(o){i.e(o)}finally{i.f()}}},{key:"getXWordIndex",value:function(t,e){for(var n=this.xItems.length;n-- >0;){var i=this.xItems[n];if(e===i.y&&t>=i.x&&t<i.x+i.letters.length)return n}return-1}},{key:"getYWordIndex",value:function(t,e){for(var n=this.yItems.length;n-- >0;){var i=this.yItems[n];if(t===i.x&&e>=i.y&&e<i.y+i.letters.length)return n}return-1}},{key:"getXWordFreeCell",value:function(t){var e=this.xItems[t];if(e){var n,i=r(e.cells);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a&&!a.next)return a}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getYWordFreeCell",value:function(t){var e=this.yItems[t];if(e){var n,i=r(e.cells);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a&&!a.next)return a}}catch(o){i.e(o)}finally{i.f()}}}},{key:"findLetterIndex",value:function(t){for(var e=this.letters,n=e.length;n-- >0&&t!==e[n];);return n}},{key:"markErrors",value:function(){var t,e=r(this.cells);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isActive&&n.next&&n.next.value!==n.value&&(n.hasError=!0)}}catch(i){e.e(i)}finally{e.f()}}},{key:"getSolvedXWordIndices",value:function(){var t,e,n=this.xItems.map(function(t,e){return e}),i=r(this.cells);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(a.hasError||(null===(t=a.next)||void 0===t?void 0:t.value)!==a.value){var o=this.getXWordIndex(a.x,a.y);o>=0&&(n[o]=-1)}}}catch(s){i.e(s)}finally{i.f()}return n.filter(function(t){return t>=0})}},{key:"getSolvedYWordIndices",value:function(){var t,e,n=this.yItems.map(function(t,e){return e}),i=r(this.cells);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(a.hasError||(null===(t=a.next)||void 0===t?void 0:t.value)!==a.value){var o=this.getYWordIndex(a.x,a.y);o>=0&&(n[o]=-1)}}}catch(s){i.e(s)}finally{i.f()}return n.filter(function(t){return t>=0})}}]),t}();function hn(t){return t.join("")}function mn(t,e,n){return t.map(function(t){return{x:t.x+e,y:t.y+n,letters:t.letters}}).sort(function(t,e){return t.y!==e.y?t.y-e.y:t.x-e.x})}var gn=o("0EQZ"),pn=o("FvrZ"),bn=o("8yBR"),vn=o("bSwM");function yn(t,e){if(1&t&&(p.Ub(0,"div"),p.Ub(1,"mat-icon"),p.Bc(2,"sentiment_very_dissatisfied"),p.Tb(),p.Bc(3),p.Tb()),2&t){var n=p.fc();p.Cb(3),p.Dc(" ",n.errorMessage," ")}}function xn(t,e){1&t&&(p.Ub(0,"div"),p.Bc(1,"Loading..."),p.Tb())}function kn(t,e){if(1&t&&p.zc(0,xn,2,0,"div",3),2&t){var n=p.fc(),i=p.qc(1);p.lc("ngIf",!n.errorMessage)("ngIfElse",i)}}function wn(t,e){if(1&t&&(p.Ub(0,"div"),p.Qb(1,11),p.Tb()),2&t){var n=p.fc().$implicit,i=p.fc(2);p.Gb("tree-invisible",!i.isNodeExpanded(n))}}function Cn(t,e){if(1&t){var n=p.Vb();p.Ub(0,"mat-nested-tree-node",6),p.Ub(1,"button",7),p.Ub(2,"mat-icon"),p.Bc(3),p.Tb(),p.Tb(),p.Ub(4,"mat-checkbox",8),p.bc("change",function(t){p.sc(n);var i=e.$implicit;return p.fc(2).setNodeChecked(i,t.checked)}),p.Bc(5),p.Tb(),p.Ub(6,"span",9),p.Bc(7),p.Tb(),p.zc(8,wn,2,2,"div",10),p.Tb()}if(2&t){var i=e.$implicit,a=p.fc(2);p.Cb(1),p.wc("visibility",a.getNodeVisibility(i)),p.lc("disabled",!a.isNodeParent(i)),p.Cb(2),p.Cc(a.getNodeIcon(i)),p.Cb(1),p.lc("checked",i.selected)("indeterminate",i.indeterminate),p.Cb(1),p.Cc(i.name),p.Cb(1),p.wc("color",i.selected||i.indeterminate?"blue":"grey"),p.Cb(1),p.Cc(a.getNodeInfo(i)),p.Cb(1),p.lc("ngIf",a.isNodeParent(i))}}function Mn(t,e){if(1&t&&(p.Ub(0,"mat-tree",4),p.zc(1,Cn,9,11,"mat-nested-tree-node",5),p.Tb()),2&t){var n=p.fc();p.lc("dataSource",n.dataSource)("treeControl",n.treeControl)}}function _n(t,e){for(var n,i=new Map,a=0,o=Object.keys(e);a<o.length;a++){var s=o[a],r=e[s];if("object"==typeof r){var c=_n(s,r);n?n.push(c):n=[c]}else"string"==typeof r&&i.set(s,r)}return n&&i.size>0&&(n.push({name:"",dict:i,capacity:i.size}),i=new Map),{name:t,dict:i,capacity:i.size,children:n}}function On(t,e){if(t.children){var n,i=r(t.children);try{for(i.s();!(n=i.n()).done;){On(n.value,e)}}catch(a){i.e(a)}finally{i.f()}}t.selected=e}function Pn(t){if(t.children){var e=0,n=!1;t.dict.clear();var i,a=r(t.children);try{for(a.s();!(i=a.n()).done;){var o=i.value;Pn(o),o.selected&&e++,o.indeterminate&&(n=!0),(o.selected||o.indeterminate)&&o.dict.forEach(function(e,n){return t.dict.set(n,e)})}}catch(s){a.e(s)}finally{a.f()}t.selected=e===t.children.length,t.indeterminate=n||e>0&&e<t.children.length,t.capacity=Math.max(t.dict.size,t.capacity)}}function Tn(t,e,n){if(e(t,n)){var i=t.children;if(i){for(var a=n.length,o=0;o<i.length;o++)n[a]=o,Tn(i[o],e,n);n.length=a}}}var In,Sn=((In=function(){function t(e,n){l(this,t),this.settings=e,this._http=n,this.dataChange=new p.n,this.treeControl=new pn.j(function(t){return t.children})}return d(t,[{key:"isNodeExpanded",value:function(t){return this.treeControl.isExpanded(t)}},{key:"isNodeParent",value:function(t){return!!t.children&&t.children.length>0}},{key:"getNodeIcon",value:function(t){return this.isNodeParent(t)?this.isNodeExpanded(t)?"expand_more":"chevron_right":""}},{key:"getNodeInfo",value:function(t){return t.indeterminate?"(".concat(t.dict.size," of ").concat(t.capacity,")"):"(".concat(t.capacity,")")}},{key:"getNodeVisibility",value:function(t){return this.isNodeParent(t)?"visible":"hidden"}},{key:"setNodeChecked",value:function(t,e){var n,i;On(t,e),Pn(this.root),this.settings.set({crosswordDataTreeState:(n=this.root,i=[],Tn(n,function(t,e){return t.selected&&i.push(e.join("/")),!t.selected},[0]),i.join(","))}),this.onDataChange()}},{key:"ngOnInit",value:function(){var t=this;this._http.get("assets/school/crossword/data.json").subscribe({next:function(e){var n=_n("",e);On(n,!0),Pn(n),function(t,e){if(e){var n=new Set(e.split(","));Tn(t,function(t,e){var i=e.join("/");return On(t,n.has(i)),!t.selected},[0])}else On(t,!1)}(n,t.settings.state.crosswordDataTreeState),Pn(n),t.root=n,t.dataSource=new gn.a(t.root.children||[t.root]),t.onDataChange()},error:function(e){t.errorMessage="HTTP load failed!",console.error("HTTP load error:",e)}})}},{key:"onDataChange",value:function(){if(this.root){var t={};this.root.dict.forEach(function(e,n){return t[n]=e}),this.dataChange.emit(t)}}}]),t}()).\u0275fac=function(t){return new(t||In)(p.Ob(Et),p.Ob(u.a))},In.\u0275cmp=p.Ib({type:In,selectors:[["app-crossword-data-tree"]],outputs:{dataChange:"dataChange"},decls:5,vars:2,consts:[["templateError",""],["templateLoading",""],[3,"dataSource","treeControl",4,"ngIf","ngIfElse"],[4,"ngIf","ngIfElse"],[3,"dataSource","treeControl"],["class","tree-node",4,"matTreeNodeDef"],[1,"tree-node"],["mat-icon-button","","matTreeNodeToggle","",3,"disabled"],[3,"checked","indeterminate","change"],[2,"font-size","x-small","padding-left","1em"],[3,"tree-invisible",4,"ngIf"],["matTreeNodeOutlet",""]],template:function(t,e){if(1&t&&(p.zc(0,yn,4,1,"ng-template",null,0,p.Ac),p.zc(2,kn,1,2,"ng-template",null,1,p.Ac),p.zc(4,Mn,2,2,"mat-tree",2)),2&t){var n=p.qc(3);p.Cb(4),p.lc("ngIf",e.root)("ngIfElse",n)}},directives:[c.l,it.a,bn.b,bn.d,bn.a,U.a,bn.f,vn.a,bn.e],styles:[".tree-invisible[_ngcontent-%COMP%]{display:none}.tree-node[_ngcontent-%COMP%]{display:block}.tree-node[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]{padding-left:40px}"]}),In),Un=o("bv9b");function zn(t,e){if(1&t&&(p.Ub(0,"option",19),p.Bc(1),p.Tb()),2&t){var n=e.$implicit;p.lc("value",e.index),p.Cb(1),p.Cc(n)}}var Bn,An=((Bn=function(){function t(e,n,i){l(this,t),this.dialogRef=e,this.maker=n,this.settings=i,this.data={},this.words=[],this.closeOnSuccess=!1,this.difficultyMin=jt.crosswordDifficulty,this.difficultyMax=Vt.crosswordDifficulty,this.difficultyNames=Nt,this.heightMin=jt.crosswordMaxHeight,this.heightMax=Vt.crosswordMaxHeight,this.widthMin=jt.crosswordMaxWidth,this.widthMax=Vt.crosswordMaxWidth}return d(t,[{key:"gridSize",get:function(){var t=this.maker.state.grid;return t?t.xWords.length+t.yWords.length:0}},{key:"progress",get:function(){var t=this.maker.state,e=t.words;return t.isWorking&&e.length>0?Math.floor(100*this.gridSize/e.length):0}},{key:"progressVisibility",get:function(){return this.maker.state.isWorking?"visible":"hidden"}},{key:"ngOnInit",value:function(){var t=this;this.subscription=this.maker.subscribe(function(e){if(t.closeOnSuccess&&!e.isWorking&&e.grid){var n=e.grid,i=n.xMax-n.xMin,a=n.yMax-n.yMin,o=mn(n.xWords,-n.xMin,-n.yMin).map(function(e){return Object.assign(Object.assign({},e),{cells:[],clue:t.data[hn(e.letters)]})}),s=mn(n.yWords,-n.xMin,-n.yMin).map(function(e){return Object.assign(Object.assign({},e),{cells:[],clue:t.data[hn(e.letters)]})}),r=new fn(i,a,o,s);t.dialogRef.close(r)}})}},{key:"ngOnDestroy",value:function(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0),this.maker.stop()}},{key:"onCreate",value:function(){if(this.words.length>0){var t=this.settings.state;this.closeOnSuccess=!0,this.maker.makePuzzle(this.words,t.crosswordMaxWidth,t.crosswordMaxHeight)}}},{key:"onStop",value:function(){this.maker.state.isWorking&&this.maker.stop()}},{key:"onDataChange",value:function(t){this.closeOnSuccess=!1,this.maker.stop(),this.data=t,this.words=Object.keys(t)}}]),t}()).\u0275fac=function(t){return new(t||Bn)(p.Ob(S.g),p.Ob(At.a),p.Ob(Et))},Bn.\u0275cmp=p.Ib({type:Bn,selectors:[["app-crossword-create-dialog"]],decls:37,vars:18,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"crossword-dialog-content","mat-elevation-z1"],[1,"crossword-settings-difficulty"],["for","crosswordDifficultySelect"],["name","crosswordDifficulty","id","crosswordDifficultySelect",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"crossword-settings-size"],[1,"input-range"],["for","crosswordMaxWidthInput"],["type","range","name","crosswordMaxWidth","id","crosswordMaxWidthInput","step","1",3,"min","max","ngModel","ngModelChange"],["for","crosswordMaxHeightInput"],["type","range","name","crosswordMaxHeight","id","crosswordMaxHeightInput","step","1",3,"min","max","ngModel","ngModelChange"],[3,"dataChange"],["mode","determinate",3,"value"],["mat-dialog-actions",""],["mat-button","",3,"disabled","click"],[1,"flex-space-filler-1"],["mat-button","","mat-dialog-close",""],[3,"value"]],template:function(t,e){1&t&&(p.Ub(0,"h1",0),p.Bc(1,"Crossword Puzzle Maker"),p.Tb(),p.Ub(2,"div",1),p.Ub(3,"div",2),p.Ub(4,"fieldset"),p.Ub(5,"legend"),p.Bc(6,"Settings:"),p.Tb(),p.Ub(7,"div",3),p.Ub(8,"label",4),p.Bc(9,"Difficulty:"),p.Tb(),p.Ub(10,"select",5),p.bc("ngModelChange",function(t){return e.settings.set({crosswordDifficulty:+t})}),p.zc(11,zn,2,2,"option",6),p.Tb(),p.Tb(),p.Ub(12,"fieldset",7),p.Ub(13,"legend"),p.Bc(14,"Maximum Size:"),p.Tb(),p.Ub(15,"div",8),p.Ub(16,"label",9),p.Bc(17,"Width"),p.Tb(),p.Ub(18,"input",10),p.bc("ngModelChange",function(t){return e.settings.set({crosswordMaxWidth:+t})}),p.Tb(),p.Ub(19,"span"),p.Bc(20),p.Tb(),p.Tb(),p.Ub(21,"div",8),p.Ub(22,"label",11),p.Bc(23,"Height"),p.Tb(),p.Ub(24,"input",12),p.bc("ngModelChange",function(t){return e.settings.set({crosswordMaxHeight:+t})}),p.Tb(),p.Ub(25,"span"),p.Bc(26),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(27,"app-crossword-data-tree",13),p.bc("dataChange",function(t){return e.onDataChange(t)}),p.Tb(),p.Tb(),p.Pb(28,"mat-progress-bar",14),p.Tb(),p.Ub(29,"div",15),p.Ub(30,"button",16),p.bc("click",function(){return e.onCreate()}),p.Bc(31,"Create"),p.Tb(),p.Ub(32,"button",16),p.bc("click",function(){return e.onStop()}),p.Bc(33),p.Tb(),p.Pb(34,"span",17),p.Ub(35,"button",18),p.Bc(36,"Close"),p.Tb(),p.Tb()),2&t&&(p.Cb(10),p.lc("ngModel",e.settings.state.crosswordDifficulty),p.Cb(1),p.lc("ngForOf",e.difficultyNames),p.Cb(7),p.lc("min",e.widthMin)("max",e.widthMax)("ngModel",e.settings.state.crosswordMaxWidth),p.Cb(2),p.Cc(e.settings.state.crosswordMaxWidth),p.Cb(4),p.lc("min",e.heightMin)("max",e.heightMax)("ngModel",e.settings.state.crosswordMaxHeight),p.Cb(2),p.Cc(e.settings.state.crosswordMaxHeight),p.Cb(2),p.wc("visibility",e.progressVisibility),p.lc("value",e.progress),p.Cb(2),p.lc("disabled",e.maker.state.isWorking||1>(null==e.words?null:e.words.length)),p.Cb(2),p.wc("visibility",e.progressVisibility),p.lc("disabled",!(e.maker.state.isWorking&&e.maker.state.grid)),p.Cb(1),p.Dc("Stop at ",e.gridSize,""))},directives:[S.h,S.e,f.p,f.i,f.l,c.k,f.o,f.b,Sn,Un.a,S.c,U.a,S.d,f.m,f.r],styles:[".crossword-dialog-content[_ngcontent-%COMP%]{width:60vmin;height:60vmin;overflow:auto}fieldset[_ngcontent-%COMP%]{border-radius:5px;background-color:rgba(0,0,0,.05)}.crossword-settings-difficulty[_ngcontent-%COMP%]{display:inline-block;margin-right:1em;margin-bottom:1em;vertical-align:top}.crossword-settings-difficulty[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{padding-right:1em}.crossword-settings-size[_ngcontent-%COMP%]{display:inline-block}.crossword-settings-size[_ngcontent-%COMP%]   .input-range[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:inline-block;min-width:6em;vertical-align:text-bottom}.crossword-settings-size[_ngcontent-%COMP%]   .input-range[_ngcontent-%COMP%] > input[type=range][_ngcontent-%COMP%]{margin-right:1em}.crossword-settings-size[_ngcontent-%COMP%]   .input-range[_ngcontent-%COMP%] > input[type=range][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{vertical-align:text-bottom}"]}),Bn);function qn(t,e){1&t&&(p.Ub(0,"mat-icon",6),p.Bc(1,"verified"),p.Tb())}var Nn,jn=((Nn=function(){function t(e){l(this,t),this.data=e,this.isFlawless=!1,this.difficulty="none",this.percentDifficulty=0,this.percentLetters=0,this.percentWords=0,this.percentTotal=0;var n=e.letterTotal,i=e.letterStatic,a=e.letterSolved,o=e.wordTotal,s=e.wordSolved;if(n>0){var r=(n-i)/n;r<.2?this.difficulty="Novice":r<.4?this.difficulty="Rookie":r<.6?this.difficulty="Competent":r<.8?this.difficulty="Proficient":r<1?this.difficulty="Expert":1===r&&(this.difficulty="Master");var c=1e4;this.percentDifficulty=Math.floor(c*r)/100,this.percentLetters=Math.floor(c*a/(n-i))/100,this.percentWords=Math.floor(c*s/o)/100,this.isFlawless=a===n}}return d(t,[{key:"ngAfterViewInit",value:function(){var t=this,e=this.data,n=e.letterTotal,i=e.letterSolved;i>0&&n>0&&setTimeout(function(){t.percentTotal=100*i/n},1e3)}},{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Nn)(p.Ob(S.a))},Nn.\u0275cmp=p.Ib({type:Nn,selectors:[["app-crossword-stats-dialog"]],decls:30,vars:20,consts:[["mat-dialog-title",""],["color","accent",4,"ngIf"],["mat-dialog-content",""],[3,"value","color"],[2,"padding-top","1em"],[1,"percent"],["color","accent"]],template:function(t,e){1&t&&(p.Ub(0,"h1",0),p.Bc(1,"Crossword Results "),p.zc(2,qn,2,0,"mat-icon",1),p.Tb(),p.Ub(3,"div",2),p.Pb(4,"mat-progress-bar",3),p.Ub(5,"div",4),p.Bc(6," Difficulty Level: "),p.Ub(7,"span",5),p.Bc(8),p.Tb(),p.Ub(9,"span"),p.Bc(10),p.Tb(),p.Tb(),p.Ub(11,"div"),p.Bc(12," Solved "),p.Ub(13,"ul"),p.Ub(14,"li"),p.Bc(15," Words: "),p.Ub(16,"span",5),p.Bc(17),p.Tb(),p.Bc(18,"("),p.Ub(19,"span"),p.Bc(20),p.Tb(),p.Bc(21,"). "),p.Tb(),p.Ub(22,"li"),p.Bc(23," Letters: "),p.Ub(24,"span",5),p.Bc(25),p.Tb(),p.Bc(26,"("),p.Ub(27,"span"),p.Bc(28),p.Tb(),p.Bc(29,". "),p.Tb(),p.Tb(),p.Tb(),p.Tb()),2&t&&(p.Gb("flawless",e.isFlawless),p.Cb(2),p.lc("ngIf",e.isFlawless),p.Cb(2),p.lc("value",e.percentTotal)("color",e.isFlawless?"accent":"primary"),p.Db("active",e.percentTotal>0),p.Cb(1),p.Gb("flawless",100===e.percentDifficulty),p.Cb(3),p.Cc(e.percentDifficulty),p.Cb(2),p.Dc("(",e.difficulty,")"),p.Cb(4),p.Gb("flawless",100===e.percentWords),p.Cb(3),p.Cc(e.percentWords),p.Cb(3),p.Ec("",e.data.wordSolved," of ",e.data.wordTotal,""),p.Cb(2),p.Gb("flawless",100===e.percentLetters),p.Cb(3),p.Cc(e.percentLetters),p.Cb(3),p.Ec("",e.data.letterSolved," of ",e.data.letterTotal-e.data.letterStatic,")"))},directives:[S.h,c.l,S.e,Un.a,it.a],styles:['@-webkit-keyframes twist-in{0%{transform:rotate(-1200deg);opacity:0}59%{transform:rotate(0deg);opacity:1}60%{transform:scale(1)}85%{transform:scale(2)}to{transform:scale(1.5)}}@keyframes twist-in{0%{transform:rotate(-1200deg);opacity:0}59%{transform:rotate(0deg);opacity:1}60%{transform:scale(1)}85%{transform:scale(2)}to{transform:scale(1.5)}}.percent[_ngcontent-%COMP%]:after{content:"%";padding-right:.5em}.flawless[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{color:blue;font-weight:600}h1.flawless[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{-webkit-animation:twist-in 1.4s 1s both;animation:twist-in 1.4s 1s both}mat-progress-bar[_ngcontent-%COMP%]{opacity:0;transition:opacity 1s ease}mat-progress-bar[active=true][_ngcontent-%COMP%]{opacity:1}']}),Nn);function Vn(t){return{wordTotal:t.xItems.length+t.yItems.length,wordSolved:t.getSolvedXWordIndices().length+t.getSolvedYWordIndices().length,letterTotal:t.cells.length,letterStatic:t.countStatic,letterSolved:t.countSolved}}var Dn=o("dqHA"),Ln=o("zh6y"),Fn=["tiles"];function Rn(t,e){if(1&t&&(p.ec(),p.Pb(0,"path",11)),2&t){var n=p.fc(2);p.Db("d",n.fillPath)}}function En(t,e){if(1&t&&(p.ec(),p.Pb(0,"path",12)),2&t){var n=p.fc(2);p.Db("d",n.wordPath)}}function Wn(t,e){if(1&t&&(p.ec(),p.Pb(0,"path",13)),2&t){var n=p.fc(2);p.Db("d",n.failPath)}}function Gn(t,e){if(1&t){var n=p.Vb();p.ec(),p.dc(),p.Ub(0,"div",14,15),p.bc("mousedown",function(t){p.sc(n);var i=e.index;return p.fc(2).onMouseDown(t,i)}),p.Bc(2),p.Tb()}if(2&t){var i=e.$implicit;p.wc("z-index",i.order)("transform",i.transform),p.lc("ngClass",i.className),p.Cb(2),p.Dc(" ",i.value,"")}}function Yn(t,e){if(1&t){var n=p.Vb();p.Sb(0),p.Ub(1,"div",1,2),p.bc("mousedown",function(t){p.sc(n);var e=p.qc(2);return p.fc().onBoardMouse(t,e,!0)})("mouseup",function(t){p.sc(n);var e=p.qc(2);return p.fc().onBoardMouse(t,e,!1)})("touchstart",function(t){return p.sc(n),p.fc().onTouchStart(t)})("touchend",function(t){return p.sc(n),p.fc().onTouchStop(t)})("touchcancel",function(t){return p.sc(n),p.fc().onTouchStop(t)})("touchmove",function(t){return p.sc(n),p.fc().onTouchMove(t)}),p.Ub(3,"app-squared-paper",3),p.ec(),p.Ub(4,"svg",4),p.zc(5,Rn,1,1,"path",5),p.zc(6,En,1,1,"path",6),p.zc(7,Wn,1,1,"path",7),p.Pb(8,"line",8),p.Tb(),p.zc(9,Gn,3,6,"div",9),p.Tb(),p.dc(),p.Pb(10,"div",10),p.Tb(),p.Rb()}if(2&t){var i=p.fc();p.Cb(1),p.Gb("solved",i.isDone),p.Cb(2),p.lc("colNum",i.layout.width)("rowNum",i.layout.height),p.Cb(2),p.lc("ngIf",i.fillPath),p.Cb(1),p.lc("ngIf",i.wordPath),p.Cb(1),p.lc("ngIf",i.failPath),p.Cb(1),p.Db("x1",i.layout.marginLeft)("x2",i.layout.marginRight)("y1",i.layout.marginTop)("y2",i.layout.marginBottom),p.Cb(1),p.lc("ngForOf",i.tiles)}}var Hn=function(t){return t[t.x=0]="x",t[t.y=1]="y",t}({});function $n(t,e){return t[t.length-1]===e[0]?t.concat(e.slice(1)):e[e.length-1]===t[0]?e.concat(t.slice(1)):void 0}var Xn,Kn=((Xn=function(){function t(e,n){l(this,t),this.gamester=e,this._renderer=n,this.selectionChange=new p.n,this._dragListener=new Dn.a,this._player=new v.a,this._subs=[]}return d(t,[{key:"selection",get:function(){return this._selection},set:function(t){this._selection=t,this.wordPath=this._getSelectionPath()}},{key:"isDone",get:function(){return"done"===this.gamester.state.stage}},{key:"isSolved",get:function(){var t,e=this.gamester.state;return e.showMistakes&&(null===(t=e.game)||void 0===t?void 0:t.isSolved)}},{key:"ngOnInit",value:function(){var t=this;this._subs.push(this._dragListener.dragChange.subscribe(function(e){switch(t._mouse=void 0,e){case"DragStart":t._onDragStart();break;case"DragMove":t._onDragMove();break;case"DragStop":t._onDragStop()}})),this._subs.push(this.gamester.subscribe(function(e){e.game&&(t.gamester.previousState.game!==e.game?t._onNewPuzzle():"live"===e.stage&&e.showMistakes&&!t.gamester.previousState.showMistakes&&t._onBoardChange())}))}},{key:"ngOnDestroy",value:function(){this._player.stop();var t,e=r(this._subs);try{for(e.s();!(t=e.n()).done;)t.value.unsubscribe()}catch(n){e.e(n)}finally{e.f()}this._subs.length=0}},{key:"assignTile",value:function(t,e){var n=this.tiles;if(t.isActive&&n){var i=n.findIndex(function(t){return t.isActive&&t.value===e&&!t.list});if(i>=0)return this.moveTileToFront(i),this._appendAuto(t,n[i]),this._removeExtraTiles(t.list,2),this._onBoardChange(),!0}return!1}},{key:"onMouseDown",value:function(t,e){if(0===t.button){var n=this.tiles[e];(null==n?void 0:n.isActive)&&this._dragListener.mouseStart(t,this._renderer,{index:e})}}},{key:"onTouchStart",value:function(t){if(t.targetTouches.length>0){var e=t.targetTouches[0],n=this.getTileIndex(e.clientX,e.clientY);n>=0&&this._dragListener.touchStart(t,{index:n})}}},{key:"onTouchStop",value:function(t){this._dragListener.isTouchDragging&&this._dragListener.stop(t)}},{key:"onTouchMove",value:function(t){this._dragListener.isTouchDragging&&this._dragListener.touchMove(t)}},{key:"getTileIndex",value:function(t,e){var n=-1;if(this.tileList)for(var i=this.tileList.toArray(),a=i.length;a-- >0;)if(this.tiles[a].isActive){var o=i[a].nativeElement.getBoundingClientRect();o.left<=t&&t<=o.right&&o.top<=e&&e<=o.bottom&&(n<0||this.tiles[n].order<this.tiles[a].order)&&(n=a)}return n}},{key:"getXItemIndex",value:function(t,e){var n=this.gamester.state.game;if(n){var i=n.getXWordIndex(t,e);if(i>=0)return{groupIndex:Hn.x,itemIndex:i}}return null}},{key:"getYItemIndex",value:function(t,e){var n=this.gamester.state.game;if(n){var i=n.getYWordIndex(t,e);if(i>=0)return{groupIndex:Hn.y,itemIndex:i}}return null}},{key:"getItemIndex",value:function(t,e){var n;return(null===(n=this._selection)||void 0===n?void 0:n.groupIndex)===Hn.x?this.getYItemIndex(t,e)||this.getXItemIndex(t,e):this.getXItemIndex(t,e)||this.getYItemIndex(t,e)}},{key:"onBoardMouse",value:function(t,e,n){if(0===t.button){var i=e.getBoundingClientRect(),a=Math.floor((t.clientX-i.left)/24)-this.layout.baseLeft,o=Math.floor((t.clientY-i.top)/24)-this.layout.baseTop,s=this.getItemIndex(a,o);if(s){if(n)this._mouse=Object.assign(Object.assign({},s),{x:a,y:o,time:Date.now()});else if(this._mouse){var r=this._mouse;this._mouse=void 0,s.groupIndex===r.groupIndex&&s.itemIndex===r.itemIndex&&a===r.x&&o===r.y&&Date.now()-r.time<5e3&&this.selectionChange.emit(s)}}else this._mouse=void 0}}},{key:"moveTileToFront",value:function(t){var e=this.tiles[t];if(e){var n,i=r(this.tiles);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.order>e.order&&a.order--}}catch(o){i.e(o)}finally{i.f()}}e.order=this.tiles.length}},{key:"_playIntro",value:function(){var t=this,e=this.gamester.state,n=e.game,i=e.difficulty,a=this.layout,o=function(t,e,n,i){for(var a=t.letters,o=t.plan,s=[],c=0;c<a.length;c++){var l,u=r(o[a[c]]);try{for(u.s();!(l=u.n()).done;){var d=l.value,f=e+c%i,h=n+Math.floor(c/i);s.push({x:f,y:h,value:d.value,order:s.length+1,className:"",transform:A(f,h)})}}catch(m){u.e(m)}finally{u.f()}}return s}(n,a.bankLeft,a.bankTop,a.bankRight-a.bankLeft),s=0;this._player.timeout=50,this._player.play(function(){if(s<n.letters.length){var e=n.letters[s];return t.tiles=t.tiles.concat(o.filter(function(t){return t.value===e})),s++,t.gamester.set({stage:"init"}),!0}return t._setBase(n.cells,i),t.fillPath=function(t,e){var n=e.pad,i=e.baseLeft,a=e.baseTop,o=e.baseRight-i+n+n,s=e.baseBottom-a+n+n,c=function(t,e,n){var i,a=[],o=r(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=s.x+e,l=s.y+n;s.hasTop||a.push(["".concat(c,",").concat(l),"".concat(c+1,",").concat(l)]),s.hasRight||a.push(["".concat(c+1,",").concat(l),"".concat(c+1,",").concat(l+1)]),s.hasBottom||a.push(["".concat(c+1,",").concat(l+1),"".concat(c,",").concat(l+1)]),s.hasLeft||a.push(["".concat(c,",").concat(l+1),"".concat(c,",").concat(l)])}}catch(u){o.e(u)}finally{o.f()}return a}(t,i,a);!function(t){for(var e=t.length;e-- >1;)for(var n=t[e],i=e;i-- >0;){var a=$n(n,t[i]);if(a){t[i]=a,t.splice(e,1),e=t.length;break}}}(c);var l,u="M".concat(i-n," ").concat(a-n,"v").concat(s,"h").concat(o,"v").concat(-s,"z"),d=r(c);try{for(d.s();!(l=d.n()).done;){var f=l.value;u+="M"+f.join(" ")+(f[0]===f[f.length-1]?"z":" ")}}catch(h){d.e(h)}finally{d.f()}return u}(n.cells,a),t.gamester.set({stage:"live"}),!1})}},{key:"_setBase",value:function(t,e){var n,i=this,a=r(this.tiles);try{for(a.s();!(n=a.n()).done;)n.value.isActive=!0}catch(d){a.e(d)}finally{a.f()}var o,s=this.layout.baseLeft,c=this.layout.baseTop,l=r(t);try{var u=function(){var t=o.value;if(t.isActive=Math.random()<e||(t.hasBottom||t.hasTop)&&(t.hasLeft||t.hasRight),!t.isActive){var n=i.tiles.find(function(e){return e.isActive&&e.value===t.value});n?(t.isStatic=!0,n.isActive=!1,n.x=t.x+s,n.y=t.y+c,n.transform=A(n.x,n.y),n.className="transition_deal",Object(Ln.a)(t,n)):t.isActive=!0}};for(l.s();!(o=l.n()).done;)u()}catch(d){l.e(d)}finally{l.f()}}},{key:"_setFailPath",value:function(){this.failPath=function(t,e,n,i){var a,o=e.pad,s=e.baseLeft-o,c=e.baseRight+o,l=e.baseTop-o,u=e.baseBottom+o,d={},f="",h=r(t);try{for(h.s();!(a=h.n()).done;){var m=a.value;if(m!==i&&m.x>=s&&m.x<c&&m.y>=l&&m.y<u&&(!m.list||m.list.length>3||m.list!==(null==i?void 0:i.list)&&m.list.length>2||n&&m.value!==m.list.head.value)){var g="M".concat(m.x," ").concat(m.y,"h1v1h-1z");d[g]||(d[g]=!0,f+=g)}}}catch(p){h.e(p)}finally{h.f()}return f}(this.tiles,this.layout,this.gamester.state.showMistakes,this._dragListener.isDragging&&this._dragListener.data?this.tiles[this._dragListener.data.index]:void 0)}},{key:"_onDragStart",value:function(){var t=this._dragListener.data;this.moveTileToFront(t.index);var e=this.tiles[t.index];e&&(e.className="transition_grab",this._setFailPath())}},{key:"_onDragMove",value:function(){var t=this._dragListener.data,e=this.tiles[t.index];if(e){var n=e.y+this._dragListener.pageDeltaY/24;e.transform=A(Math.max(0,Math.min(this.layout.width-1,e.x+this._dragListener.pageDeltaX/24)),Math.max(0,Math.min(this.layout.height-1,n))),e.className="transition_drag",(Math.abs(this._dragListener.pageDeltaX)>4||Math.abs(this._dragListener.pageDeltaY)>4)&&(t.dragged=!0)}}},{key:"_onDragStop",value:function(){var t=this._dragListener.data,e=this.tiles[t.index],n=this.gamester.state.game;if(e&&n){var i=Math.round(e.x+this._dragListener.pageDeltaX/24);i=Math.max(0,Math.min(this.layout.width-1,i));var a=Math.round(e.y+this._dragListener.pageDeltaY/24);a=Math.max(0,Math.min(this.layout.height-1,a)),e.x=i,e.y=a,e.className="transition_fast",e.transform=A(e.x,e.y);var o=n.findCell(i-this.layout.baseLeft,a-this.layout.baseTop);if(o)Object(Ln.a)(o,e);else if(Object(Ln.c)(e),!t.dragged&&this._selection){var s=this._getNextCell();s&&this._appendAuto(s,e)}this._onBoardChange()}}},{key:"_onBoardChange",value:function(){var t=this;this._setMistakes(),this._setFailPath(),this.isSolved&&(this._player.timeout=500,this._player.play(function(){return t.gamester.set({stage:"done"}),!1}))}},{key:"_appendAuto",value:function(t,e){e.x=t.x+this.layout.baseLeft,e.y=t.y+this.layout.baseTop,e.transform=A(e.x,e.y),e.className="transition_auto",Object(Ln.a)(t,e)}},{key:"_getNextCell",value:function(){var t=this.gamester.state.game;if(t&&this._selection){var e=this._selection,n=e.groupIndex,i=e.itemIndex;if(n===Hn.x)return t.getXWordFreeCell(i);if(n===Hn.y)return t.getYWordFreeCell(i)}}},{key:"_getSelectionPath",value:function(){var t=this.gamester.state.game;if(t&&this._selection){var e=this._selection,n=e.groupIndex,i=e.itemIndex;if(n===Hn.x){var a=t.xItems[i];if(a)return"M".concat(this.layout.baseLeft+a.x," ").concat(this.layout.baseTop+a.y+1,"v-1h").concat(a.letters.length,"v1z")}else if(n===Hn.y){var o=t.yItems[i];if(o)return"M".concat(this.layout.baseLeft+o.x," ").concat(this.layout.baseTop+o.y,"h1v").concat(o.letters.length,"h-1z")}}return""}},{key:"_removeExtraTiles",value:function(t,e){if(t&&e>0)for(var n=this.gamester.state.game,i=this.layout,a=i.bankLeft,o=i.bankTop,s=i.bankRight-a;t.length>e;){var r=t.tail;Object(Ln.c)(r);var c=n.findLetterIndex(r.value);r.x=a+c%s,r.y=o+Math.floor(c/s),r.transform=A(r.x,r.y),r.className="transition_norm"}}},{key:"_setMistakes",value:function(){var t,e=this.gamester.state,n=e.showMistakes,i=e.game;if(n&&i){var a,o=this.layout,s=o.baseLeft,c=o.baseTop,l=r(i.cells);try{for(l.s();!(a=l.n()).done;){var u=a.value;if(u.isActive&&(null===(t=u.next)||void 0===t?void 0:t.value)===u.value){var d=u.next;u.isActive=d.isActive=!1,d.x=u.x+s,d.y=u.y+c,d.transform=A(d.x,d.y),d.className="transition_deal",u.hasError&&(d.hasError=!0,d.className+=" has_error"),this._removeExtraTiles(u.list,2)}}}catch(f){l.e(f)}finally{l.f()}i.markErrors()}}},{key:"_onNewPuzzle",value:function(){this._player.stop();var t=this.gamester.state.game,e=t.cols,n=t.rows,i=t.letters;this.tiles=[],this.fillPath="",this.failPath="",this.layout=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:26,i=Math.ceil(n/2),a=1+t+1+4,o=1+Math.max(e,i)+1,s=a-4;return{pad:1,margin:4,width:a,height:o,bankLeft:s+1,bankRight:a-1,bankTop:1,bankBottom:1+i,baseLeft:1,baseRight:1+t,baseTop:1,baseBottom:1+e,marginLeft:s,marginRight:a-4,marginTop:0,marginBottom:o}}(e,n,i.length),this._playIntro()}}]),t}()).\u0275fac=function(t){return new(t||Xn)(p.Ob(un),p.Ob(p.F))},Xn.\u0275cmp=p.Ib({type:Xn,selectors:[["app-crossword-board"]],viewQuery:function(t,e){var n;1&t&&p.Gc(Fn,1),2&t&&p.pc(n=p.cc())&&(e.tileList=n)},inputs:{selection:"selection"},outputs:{selectionChange:"selectionChange"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"crossword-board",3,"mousedown","mouseup","touchstart","touchend","touchcancel","touchmove"],["board",""],[3,"colNum","rowNum"],["appContentSvg",""],["class","crossword-fill","pathLength","100",4,"ngIf"],["class","crossword-word",4,"ngIf"],["class","crossword-fail","pathLength","100",4,"ngIf"],[1,"crossword-line"],["class","crossword-tile",3,"ngClass","z-index","transform","mousedown",4,"ngFor","ngForOf"],[1,"crossword-sign"],["pathLength","100",1,"crossword-fill"],[1,"crossword-word"],["pathLength","100",1,"crossword-fail"],[1,"crossword-tile",3,"ngClass","mousedown"],["tiles",""]],template:function(t,e){1&t&&p.zc(0,Yn,11,12,"ng-container",0),2&t&&p.lc("ngIf",e.gamester.state.game)},directives:[c.l,N,c.k,c.j],styles:[".crossword-board[_ngcontent-%COMP%]{display:inline-block;position:relative;overflow:hidden}.crossword-tile[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:absolute;width:22px;height:22px;border:1px solid rgba(0,0,0,.25);color:rgba(0,0,0,.9);cursor:-webkit-grab;cursor:grab;display:inline-flex;justify-content:center;align-items:center;text-align:center;background-color:#fadc9a;border-radius:4px}.crossword-tile.transition_deal[_ngcontent-%COMP%]{cursor:default;transition:transform 1.5s cubic-bezier(.6,-.5,.25,1.5);background-color:#fafadc}.crossword-tile.transition_auto[_ngcontent-%COMP%]{transition:transform 1s ease-in-out}.crossword-tile.transition_norm[_ngcontent-%COMP%]{transition:transform .5s ease-out}.crossword-tile.transition_fast[_ngcontent-%COMP%]{transition:transform .25s linear}.crossword-tile.transition_drag[_ngcontent-%COMP%], .crossword-tile.transition_grab[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing;box-shadow:2px 2px 2px 1px rgba(0,0,0,.2)}.crossword-tile.transition_grab[_ngcontent-%COMP%]{transition:transform .15s ease-in-out}.crossword-tile.transition_drag[_ngcontent-%COMP%]{transition:none;opacity:.75}@-webkit-keyframes keyframes-fade-in{0%{opacity:0}to{opacity:1}}@keyframes keyframes-fade-in{0%{opacity:0}to{opacity:1}}line.crossword-line[_ngcontent-%COMP%]{fill:none;stroke:red;stroke-width:.1px;transition:opacity 1s ease-in}path.crossword-fill[_ngcontent-%COMP%]{stroke:none;fill:rgba(0,0,0,.15);-webkit-animation:keyframes-fade-in 2s ease 1;animation:keyframes-fade-in 2s ease 1;transition:fill 1.5s ease}path.crossword-fail[_ngcontent-%COMP%]{fill:none;stroke:#fa0000;stroke-width:.1px}path.crossword-word[_ngcontent-%COMP%]{fill:#ff0;fill-opacity:.3;stroke:#ff0;stroke-width:.2px;stroke-opacity:.7}@-webkit-keyframes bounce-in-bck{0%{transform:scale(6);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;opacity:0}38%{transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;opacity:1}55%{transform:scale(1.5);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}72%{transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}81%{transform:scale(1.24);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}89%{transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}95%{transform:scale(1.04);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}to{transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}}@keyframes bounce-in-bck{0%{transform:scale(6);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;opacity:0}38%{transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;opacity:1}55%{transform:scale(1.5);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}72%{transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}81%{transform:scale(1.24);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}89%{transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}95%{transform:scale(1.04);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}to{transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}}div.crossword-sign[_ngcontent-%COMP%]{display:none;position:absolute;z-index:1000;pointer-events:none;right:0;bottom:0;width:96px;height:96px;background-color:transparent;background-image:url(solved-sign-3.742c57d0e609635e04b2.svg);background-repeat:no-repeat;background-size:100% 100%}@-webkit-keyframes path-in-animation{0%{stroke-dashoffset:-100px}to{stroke-dashoffset:0px}}@keyframes path-in-animation{0%{stroke-dashoffset:-100px}to{stroke-dashoffset:0px}}.solved[_ngcontent-%COMP%]   line.crossword-line[_ngcontent-%COMP%]{opacity:0}.solved[_ngcontent-%COMP%]   path.crossword-fill[_ngcontent-%COMP%]{-webkit-animation:path-in-animation 5s linear .5s 1 both;animation:path-in-animation 5s linear .5s 1 both;stroke:green;stroke-width:.04px;stroke-dasharray:100px;fill:rgba(0,128,0,.2)}.solved[_ngcontent-%COMP%]   div.crossword-sign[_ngcontent-%COMP%]{display:block;-webkit-animation:bounce-in-bck 1.1s both;animation:bounce-in-bck 1.1s both;transform-origin:bottom right}.solved[_ngcontent-%COMP%]   .crossword-tile[_ngcontent-%COMP%]{transition:all 2s ease;background-color:transparent;border-radius:unset}.solved[_ngcontent-%COMP%]   .crossword-tile.has_error[_ngcontent-%COMP%]{background-color:#e8a}"]}),Xn),Qn=o("XhcP"),Jn=o("/t3+"),Zn=o("1jcm"),ti=o("MutI"),ei=o("Bgxr"),ni=["item"];function ii(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",4,5),p.bc("click",function(){p.sc(n);var t=e.index;return p.fc(2).onItemChange(t)}),p.Bc(2),p.Tb()}if(2&t){var i=e.$implicit,a=e.index,o=p.fc(2);p.Gb("active",a===o.selection.itemIndex),p.Cb(2),p.Cc(i)}}function ai(t,e){if(1&t&&(p.Ub(0,"div",2),p.zc(1,ii,3,3,"div",3),p.Tb()),2&t){var n=e.ngIf,i=p.fc();p.lc("ngStyle",i.panelStyle),p.Cb(1),p.lc("ngForOf",n.items)}}var oi,si=[[["","appTabListHead",""]],[["","appTabListTail",""]]],ri=["[appTabListHead]","[appTabListTail]"],ci=((oi=function(){function t(){l(this,t),this.groups=[],this.selection={groupIndex:0,itemIndex:-1},this.selectionChange=new p.n}return d(t,[{key:"labels",get:function(){return this.groups.map(function(t){return t.label})}},{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(t){var e=this,n=t.selection;if((null==n?void 0:n.currentValue)&&n.currentValue!==n.previousValue){var i=this.selection.itemIndex;i>=0&&setTimeout(function(){return e.scrollItemIntoView(i)},100)}}},{key:"onGroupChange",value:function(t){var e={groupIndex:-1,itemIndex:-1},n=this.groups[t];n&&(e.groupIndex=t,"number"==typeof n.selection&&(e.itemIndex=n.selection)),this.selectionChange.emit(e)}},{key:"onItemChange",value:function(t){this.selectionChange.emit({groupIndex:this.selection.groupIndex,itemIndex:t})}},{key:"scrollItemIntoView",value:function(t){var e,n,i=null===(n=null===(e=this.itemList)||void 0===e?void 0:e.toArray()[t])||void 0===n?void 0:n.nativeElement;i&&"function"==typeof i.scrollIntoView&&i.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}}]),t}()).\u0275fac=function(t){return new(t||oi)},oi.\u0275cmp=p.Ib({type:oi,selectors:[["app-tab-list"]],viewQuery:function(t,e){var n;1&t&&p.Gc(ni,1),2&t&&p.pc(n=p.cc())&&(e.itemList=n)},inputs:{groups:"groups",selection:"selection",panelStyle:"panelStyle"},outputs:{selectionChange:"selectionChange"},features:[p.Ab],ngContentSelectors:ri,decls:4,vars:3,consts:[[3,"items","selection","selectionChange"],["class","tab-list-base",3,"ngStyle",4,"ngIf"],[1,"tab-list-base",3,"ngStyle"],["class","tab-list-item",3,"active","click",4,"ngFor","ngForOf"],[1,"tab-list-item",3,"click"],["item",""]],template:function(t,e){1&t&&(p.kc(si),p.Ub(0,"app-tab-group",0),p.bc("selectionChange",function(t){return e.onGroupChange(t)}),p.jc(1,0,["appTabGroupHead",""]),p.zc(2,ai,2,2,"div",1),p.jc(3,1,["appTabGroupTail",""]),p.Tb()),2&t&&(p.lc("items",e.labels)("selection",e.selection.groupIndex),p.Cb(2),p.lc("ngIf",e.groups[e.selection.groupIndex]))},directives:[ei.a,c.l,c.m,c.k],styles:[".tab-list-base[_ngcontent-%COMP%]{padding:1px}.tab-list-base[_ngcontent-%COMP%]   .tab-list-item[_ngcontent-%COMP%]{padding:.5rem;cursor:pointer;color:currentColor}.tab-list-base[_ngcontent-%COMP%]   .tab-list-item[_ngcontent-%COMP%]:hover:not(.active){color:#06b;background-color:rgba(0,0,0,.04)}.tab-list-base[_ngcontent-%COMP%]   .tab-list-item.active[_ngcontent-%COMP%]{color:inherit;background-color:rgba(0,0,0,.12)}"]}),oi),li=o("kmnG"),ui=o("qFsG");function di(t,e){if(1&t&&p.Pb(0,"mat-progress-bar",14),2&t){var n=p.fc().ngIf;p.lc("value",n.progress)}}function fi(t,e){if(1&t){var n=p.Vb();p.Sb(0),p.Ub(1,"button",11),p.bc("click",function(){return p.sc(n),p.fc().onAction()}),p.Ub(2,"mat-icon",12),p.Bc(3),p.Tb(),p.Bc(4),p.zc(5,di,1,1,"mat-progress-bar",13),p.Tb(),p.Rb()}if(2&t){var i=e.ngIf,a=p.fc();p.Cb(1),p.lc("disabled",a.isActionDisabled),p.Cb(1),p.lc("ngClass",a.showMistakesIconClassName),p.Cb(1),p.Cc(a.showMistakesIcon),p.Cb(1),p.Dc("",a.showMistakesText," "),p.Cb(1),p.lc("ngIf",a.showMistakes&&!i.isSolved)}}function hi(t,e){1&t&&(p.Ub(0,"mat-hint"),p.Bc(1,"You can type your answer here."),p.Tb())}function mi(t,e){if(1&t&&(p.Ub(0,"mat-error"),p.Bc(1),p.Tb()),2&t){var n=p.fc(2);p.Cb(1),p.Cc(n.inputState.error)}}var gi=function(){return{maxHeight:"24em",overflowY:"auto"}};function pi(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",15),p.Ub(1,"app-tab-list",16),p.bc("selectionChange",function(t){return p.sc(n),p.fc().onSelectionChange(t)}),p.Ub(2,"div",17),p.Ub(3,"span"),p.Bc(4,"Clues"),p.Tb(),p.Ub(5,"mat-icon",1),p.Bc(6,"business"),p.Tb(),p.Tb(),p.Tb(),p.Ub(7,"mat-form-field",18),p.Ub(8,"mat-label"),p.Bc(9),p.Tb(),p.Ub(10,"input",19),p.bc("keydown",function(t){return p.sc(n),p.fc().onInputKeyDown(t)})("ngModelChange",function(t){return p.sc(n),p.fc().inputState.value=t}),p.Tb(),p.zc(11,hi,2,0,"mat-hint",6),p.zc(12,mi,2,1,"mat-error",6),p.Tb(),p.Tb()}if(2&t){var i=p.fc();p.Cb(1),p.lc("groups",i.clues)("selection",i.selection)("panelStyle",p.mc(9,gi)),p.Cb(8),p.Cc(i.inputInfo),p.Cb(1),p.lc("disabled",i.isInputDisabled)("errorStateMatcher",i.inputState)("ngModel",i.inputState.value),p.Cb(1),p.lc("ngIf",!i.isInputDisabled),p.Cb(1),p.lc("ngIf",i.inputState.isErrorState())}}function bi(t,e){if(1&t){var n=p.Vb();p.Ub(0,"button",20),p.bc("click",function(){return p.sc(n),p.fc().settings.set({sidenavClosed:!1})}),p.Ub(1,"mat-icon"),p.Bc(2,"double_arrow"),p.Tb(),p.Tb()}}var vi,yi,xi=function(){function t(){l(this,t),this.value="",this.error=""}return d(t,[{key:"isErrorState",value:function(){return!!this.error}},{key:"clear",value:function(){this.value=this.error=""}}]),t}(),ki=[{path:"mental-math",component:Bt},{path:"word-puzzle",component:cn},{path:"missing-letters",component:Ae},{path:"crossword",component:(vi=function(){function t(e,n,i){l(this,t),this.gamester=e,this.settings=n,this.dialog=i,this.selection={groupIndex:0,itemIndex:-1},this.inputState=new xi}return d(t,[{key:"mode",get:function(){return this.settings.state.sidenavModeSide?"side":"over"}},{key:"closed",get:function(){return this.settings.state.sidenavClosed}},{key:"opened",get:function(){return!this.settings.state.sidenavClosed}},{key:"difficulty",get:function(){var t=jt.crosswordDifficulty;return(this.settings.state.crosswordDifficulty-t)/(Vt.crosswordDifficulty-t)}},{key:"isInputDisabled",get:function(){var t=this.gamester.state;return!t.game||"live"!==t.stage}},{key:"isActionDisabled",get:function(){var t=this.gamester.state;return!t.game||t.showMistakes&&"done"!==t.stage}},{key:"showMistakes",get:function(){return this.gamester.state.showMistakes}},{key:"showMistakesText",get:function(){var t=this.gamester.state;return"done"!==t.stage?t.showMistakes?"Checking":"Check":"Done!"}},{key:"showMistakesIcon",get:function(){return"done"!==this.gamester.state.stage?"mode":"done"}},{key:"showMistakesIconClassName",get:function(){var t=this.gamester.state;return"done"!==t.stage?t.showMistakes?"disabled-color":"mat-accent":"mat-warn"}},{key:"inputInfo",get:function(){var t=this.gamester.state,e="done"===t.stage?"Answer: ":"Current value: ";if(t.game){var n=this.selection,i=n.groupIndex,a=n.itemIndex,o=t.game.getItem(i,a);o&&(e+=o.cells.map(function(t){var e;return(null===(e=t.next)||void 0===e?void 0:e.value)||"\u203b"}).join(""))}return e}},{key:"ngOnInit",value:function(){var t=this;this._subscription=this.gamester.stateChange.subscribe(function(e){"born"===e.stage?(t.clues=[{label:"Across",items:e.game.xItems.map(function(t){return t.clue})},{label:"Down",items:e.game.yItems.map(function(t){return t.clue})}],t.onSelectionChange({groupIndex:0,itemIndex:-1})):"done"===e.stage&&t.clues&&t.onSelectionChange({groupIndex:t.selection.groupIndex,itemIndex:-1})})}},{key:"ngOnDestroy",value:function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=void 0)}},{key:"openCreateDialog",value:function(){var t=this;this.dialog.open(An).afterClosed().subscribe(function(e){e&&t.gamester.set({stage:"born",game:e,showMistakes:!1,difficulty:t.difficulty})})}},{key:"onSelectionChange",value:function(t){this.selection.groupIndex===t.groupIndex&&this.clues[t.groupIndex].selection===t.itemIndex&&(t.itemIndex=-1),this.clues[t.groupIndex].selection=t.itemIndex,this.selection=t,this.inputState.clear()}},{key:"onAction",value:function(){if(this.gamester.state.showMistakes){var t=this.gamester.state,e=t.stage,n=t.game;n&&"done"===e&&this.dialog.open(jn,{data:Vn(n)})}else this.gamester.set({showMistakes:!0})}},{key:"onSelectionNext",value:function(){var t=this.clues;if((null==t?void 0:t.length)>0){var e=this.selection,n=e.groupIndex,i=e.itemIndex;++i>=t[n].items.length&&(n=(n+1)%t.length,i=0),this.onSelectionChange({groupIndex:n,itemIndex:i})}}},{key:"onSelectionPrev",value:function(){var t=this.clues;if((null==t?void 0:t.length)>0){var e=this.selection,n=e.groupIndex,i=e.itemIndex;--i<0&&(--n<0&&(n=t.length-1),i=t[n].items.length-1),this.onSelectionChange({groupIndex:n,itemIndex:i})}}},{key:"onInputEnter",value:function(){var t=this.gamester.state.game,e=this.inputState.value,n=this.boardComponent;if(t&&e&&n){var i=this.selection,a=i.groupIndex,o=i.itemIndex,s=t.getItem(a,o);if(s){var r=function(t){return t.split("")}(e);if(r.length!==s.letters.length)return"Input is too ".concat(r.length<s.letters.length?"short":"long","!");for(var c=0;c<r.length;c++){var l=s.cells[c],u=r[c];if(l.isActive){if(!(l.next&&l.next.value===u||n.assignTile(l,u)))return"Could not find a free tile for ".concat(c+1," letter '").concat(u,"'!")}else if(l.value!==u)return"".concat(c+1," letter should be '").concat(l.value,"' instead of '").concat(u,"'!")}}}return""}},{key:"onInputKeyDown",value:function(t){var e=t.code;"ArrowDown"===e?this.onSelectionNext():"ArrowUp"===e?this.onSelectionPrev():"Enter"===e&&(this.inputState.error=this.onInputEnter())}}]),t}(),vi.\u0275fac=function(t){return new(t||vi)(p.Ob(un),p.Ob(Et),p.Ob(S.b))},vi.\u0275cmp=p.Ib({type:vi,selectors:[["app-crossword-sidenav"]],viewQuery:function(t,e){var n;1&t&&p.Gc(Kn,1),2&t&&p.pc(n=p.cc())&&(e.boardComponent=n.first)},features:[p.Bb([un])],decls:22,vars:7,consts:[[3,"mode","opened","openedChange"],["color","primary"],["mat-icon-button","",3,"click"],[1,"flex-space-filler-1"],["color","primary",3,"checked","change"],["mat-list-item","",3,"click"],[4,"ngIf"],["style","margin: 1em;",4,"ngIf"],[2,"padding","1px"],[3,"selection","selectionChange"],["class","sidenav-open-button","mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-list-item","",3,"disabled","click"],[3,"ngClass"],["style","margin-left: 1em;","mode","determinate",3,"value",4,"ngIf"],["mode","determinate",2,"margin-left","1em",3,"value"],[2,"margin","1em"],[3,"groups","selection","panelStyle","selectionChange"],["appTabListHead",""],["appearance","standard",2,"width","100%","margin-top","0.5em"],["matInput","","type","text","autocomplete","off","placeholder","...",3,"disabled","errorStateMatcher","ngModel","keydown","ngModelChange"],["mat-icon-button","","color","primary",1,"sidenav-open-button",3,"click"]],template:function(t,e){1&t&&(p.Ub(0,"mat-sidenav-container"),p.Ub(1,"mat-sidenav",0),p.bc("openedChange",function(t){return e.settings.set({sidenavClosed:!t})}),p.Ub(2,"mat-toolbar",1),p.Ub(3,"button",2),p.bc("click",function(){return e.settings.set({sidenavClosed:!0})}),p.Ub(4,"mat-icon"),p.Bc(5,"close"),p.Tb(),p.Tb(),p.Pb(6,"span",3),p.Ub(7,"span"),p.Bc(8,"Crossword"),p.Tb(),p.Pb(9,"span",3),p.Ub(10,"mat-slide-toggle",4),p.bc("change",function(t){return e.settings.set({sidenavModeSide:t.checked})}),p.Tb(),p.Tb(),p.Ub(11,"mat-action-list"),p.Ub(12,"button",5),p.bc("click",function(){return e.openCreateDialog()}),p.Ub(13,"mat-icon"),p.Bc(14,"developer_board"),p.Tb(),p.Bc(15,"Create... "),p.Tb(),p.zc(16,fi,6,5,"ng-container",6),p.Tb(),p.zc(17,pi,13,10,"div",7),p.Tb(),p.Ub(18,"mat-sidenav-content"),p.Ub(19,"div",8),p.Ub(20,"app-crossword-board",9),p.bc("selectionChange",function(t){return e.onSelectionChange(t)}),p.Tb(),p.zc(21,bi,3,0,"button",10),p.Tb(),p.Tb(),p.Tb()),2&t&&(p.Cb(1),p.lc("mode",e.mode)("opened",e.opened),p.Cb(9),p.lc("checked",e.settings.state.sidenavModeSide),p.Cb(6),p.lc("ngIf",e.gamester.state.game),p.Cb(1),p.lc("ngIf",e.clues),p.Cb(3),p.lc("selection",e.selection),p.Cb(1),p.lc("ngIf",e.closed))},directives:[Qn.b,Qn.a,Jn.a,U.a,it.a,Zn.a,ti.a,ti.b,c.l,Qn.c,Kn,c.j,Un.a,ci,li.c,li.g,ui.a,f.b,f.i,f.l,li.f,li.b],styles:["mat-sidenav-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#d7d7f6}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:360px}@-webkit-keyframes keyframes-fade-in{0%{opacity:0}to{opacity:1}}@keyframes keyframes-fade-in{0%{opacity:0}to{opacity:1}}.sidenav-open-button[_ngcontent-%COMP%]{-webkit-animation:keyframes-fade-in 3s ease 1;animation:keyframes-fade-in 3s ease 1;position:absolute;left:0;top:0;background-color:#f0f8ff50}div[appTabListHead][_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:16px}div[appTabListHead][_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{font-size:larger}div[appTabListHead][_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px}"]}),vi)},{path:"",component:Bt}],wi=((yi=d(function t(){l(this,t)})).\u0275fac=function(t){return new(t||yi)},yi.\u0275mod=p.Mb({type:yi}),yi.\u0275inj=p.Lb({providers:[At.a,Et],imports:[[h.c.forChild(ki),c.c,f.d,u.b,m.a,g.a],h.c]}),yi)},keE2:function(t,e,i){"use strict";(function(t){i.d(e,"a",function(){return c});var o=i("SeXe"),s=i("fXoL"),r={requestId:"",isWorking:!1,grid:null,words:[]},c=function(){var e=function(e){n(o,e);var i=a(o);function o(){var t;return l(this,o),(t=i.call(this,r))._worker=null,t._createWorker(),t}return d(o,[{key:"stop",value:function(){this._worker&&this.state.isWorking&&(this._worker.postMessage({requestId:null}),this._set({isWorking:!1}))}},{key:"makePuzzle",value:function(t,e,n){if(this._worker){this.stop();var i=t.length<100?t.length<50?t.length<25?8:4:2:1,a=JSON.stringify(t),o={requestId:a,maxWidth:e,maxHeight:n,tryCount:i,words:t.slice()};this._worker.postMessage(o),this._set({requestId:a,words:t,isWorking:!0,grid:null})}}},{key:"_createWorker",value:function(){var e=this;"undefined"!=typeof Worker&&(this._worker=new Worker(t,void 0),this._worker.onmessage=function(t){var n,i,a=e.state,o=t.data;a.isWorking&&a.requestId===o.requestId&&e._set({grid:(n=a.grid,i=o.grid,n?i&&i.xWords.length+i.yWords.length>n.xWords.length+n.yWords.length?i:n:i),isWorking:o.isWorking})})}}]),o}(o.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Kb({token:e,factory:e.\u0275fac}),e}()}).call(this,i("6I+0"))}}])}();
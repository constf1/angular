function _defineProperty(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function _createForOfIteratorHelper(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=_unsupportedIterableToArray(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function _unsupportedIterableToArray(t,n){if(t){if("string"==typeof t)return _arrayLikeToArray(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,n):void 0}}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{C9RU:function(t,n,e){"use strict";e.r(n);var i=e("ofXK"),r=e("3Pt+"),a=e("tyNb"),o=e("hctd"),u=e("pKmL"),c=e("fXoL"),s=e("dPmG"),p=e("fKvJ"),m=e("voYn"),l=e("bgvp");function g(t,n){return{name:"subtraction",operator:{name:"minus",notation:"-"},first:{name:"minuend",value:t},second:{name:"subtrahend",value:n},result:{name:"difference",value:t-n}}}var b=e("NFeN"),h=e("jhN1");function d(t,n){if(1&t&&(c.fc(),c.Pb(0,"path",7)),2&t){var e=n.$implicit;c.mc("ngStyle",e.style),c.Cb("d",e.d)}}var f,v=["*"],x=((f=function(){function t(){_classCallCheck(this,t),this.rowNum=41,this.colNum=34,this.paths=[{d:"M".concat(24*(this.colNum-4)," 0v").concat(this.height),style:{fill:"none",stroke:"#f00",strokeWidth:"2px"}}]}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"width",get:function(){return 24*this.colNum}},{key:"height",get:function(){return 24*this.rowNum}}]),t}()).\u0275fac=function(t){return new(t||f)},f.\u0275cmp=c.Ib({type:f,selectors:[["app-squared-paper"]],inputs:{rowNum:"rowNum",colNum:"colNum",paths:"paths"},ngContentSelectors:v,decls:10,vars:7,consts:[[1,"squared-paper"],[1,"squared-paper-bg"],["id","patternSquaredPaper","x","0","y","0","width","24","height","24","patternUnits","userSpaceOnUse"],["fill","none","stroke","#00f","stroke-width",".25","d","M0 0h24v24H0z"],["width","100%","height","100%","fill","url(#patternSquaredPaper)"],[3,"ngStyle",4,"ngFor","ngForOf"],[1,"squared-paper-fg"],[3,"ngStyle"]],template:function(t,n){1&t&&(c.lc(),c.Ub(0,"div",0),c.Ub(1,"div",1),c.fc(),c.Ub(2,"svg"),c.Ub(3,"defs"),c.Ub(4,"pattern",2),c.Pb(5,"path",3),c.Tb(),c.Tb(),c.Pb(6,"rect",4),c.zc(7,d,1,2,"path",5),c.Tb(),c.Tb(),c.ec(),c.Ub(8,"div",6),c.kc(9),c.Tb(),c.Tb()),2&t&&(c.yc("width",n.width,"px")("height",n.height,"px"),c.Bb(2),c.Cb("width",n.width)("height",n.height),c.Bb(5),c.mc("ngForOf",n.paths))},directives:[i.k,i.m],styles:[".squared-paper[_ngcontent-%COMP%]{position:relative;margin-left:1px;margin-top:1px;background-color:#f5f5f5;font-family:Fira Mono,monospace;font-weight:500;font-size:20px;line-height:24px}.squared-paper-bg[_ngcontent-%COMP%]{width:100%;height:100%}.squared-paper-fg[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0}.squared-paper-par[_ngcontent-%COMP%]{text-indent:48px;padding-left:6px;margin-bottom:24px}.squared-paper-text-indent-1[_ngcontent-%COMP%]{text-indent:24px}.squared-paper-text-indent-2[_ngcontent-%COMP%]{text-indent:48px}.squared-paper-text-indent-3[_ngcontent-%COMP%]{text-indent:72px}.squared-paper-text-indent-4[_ngcontent-%COMP%]{text-indent:96px}.squared-paper-pl[_ngcontent-%COMP%]{padding-left:6px}.squared-paper-pr[_ngcontent-%COMP%]{padding-right:6px}.squared-paper-margin-1[_ngcontent-%COMP%]{margin:24px}.squared-paper-margin-2[_ngcontent-%COMP%]{margin:48px}.squared-paper-margin-3[_ngcontent-%COMP%]{margin:72px}.squared-paper-margin-4[_ngcontent-%COMP%]{margin:96px}.squared-paper-mb-1[_ngcontent-%COMP%]{margin-bottom:24px}.squared-paper-ml-1[_ngcontent-%COMP%]{margin-left:24px}.squared-paper-mr-1[_ngcontent-%COMP%]{margin-right:24px}.squared-paper-mt-1[_ngcontent-%COMP%]{margin-top:24px}.squared-paper-mb-2[_ngcontent-%COMP%]{margin-bottom:48px}.squared-paper-ml-2[_ngcontent-%COMP%]{margin-left:48px}.squared-paper-mr-2[_ngcontent-%COMP%]{margin-right:48px}.squared-paper-mt-2[_ngcontent-%COMP%]{margin-top:48px}.squared-paper-mb-3[_ngcontent-%COMP%]{margin-bottom:72px}.squared-paper-ml-3[_ngcontent-%COMP%]{margin-left:72px}.squared-paper-mr-3[_ngcontent-%COMP%]{margin-right:72px}.squared-paper-mt-3[_ngcontent-%COMP%]{margin-top:72px}.squared-paper-mb-4[_ngcontent-%COMP%]{margin-bottom:96px}.squared-paper-ml-4[_ngcontent-%COMP%]{margin-left:96px}.squared-paper-mr-4[_ngcontent-%COMP%]{margin-right:96px}.squared-paper-mt-4[_ngcontent-%COMP%]{margin-top:96px}.squared-paper-spacing[_ngcontent-%COMP%]{letter-spacing:12px}.squared-paper-col-3[_ngcontent-%COMP%], .squared-paper-col-12[_ngcontent-%COMP%], .squared-paper-col-15[_ngcontent-%COMP%], .squared-paper-col-30[_ngcontent-%COMP%]{display:inline-block}.squared-paper-col-3[_ngcontent-%COMP%]{width:72px}.squared-paper-col-12[_ngcontent-%COMP%]{width:288px}.squared-paper-col-15[_ngcontent-%COMP%]{width:360px}.squared-paper-col-30[_ngcontent-%COMP%]{width:720px}"]}),f),y=e("bTqV");function C(t,n){if(1&t){var e=c.Vb();c.Ub(0,"button",1),c.cc("click",(function(){c.tc(e);var t=n.index;return c.gc().selectionChange.emit(t)})),c.Bc(1),c.Tb()}if(2&t){var i=n.$implicit;c.Bb(1),c.Cc(i)}}var P,O=((P=function(){function t(){_classCallCheck(this,t),this.buttonNames=[],this.selectionChange=new c.n}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||P)},P.\u0275cmp=c.Ib({type:P,selectors:[["app-numpad"]],inputs:{buttonNames:"buttonNames"},outputs:{selectionChange:"selectionChange"},decls:1,vars:1,consts:[["type","button","mat-button","",3,"click",4,"ngFor","ngForOf"],["type","button","mat-button","",3,"click"]],template:function(t,n){1&t&&c.zc(0,C,2,1,"button",0),2&t&&c.mc("ngForOf",n.buttonNames)},directives:[i.k,y.a],styles:[".mat-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]{color:inherit}"]}),P),_=["itemInputs"];function M(t,n){1&t&&(c.Ub(0,"div",12),c.Bc(1,"\u2713"),c.Tb())}function I(t,n){if(1&t&&(c.Sb(0),c.Ub(1,"span",14),c.Bc(2),c.Tb(),c.Ub(3,"span",16),c.Bc(4,"="),c.Tb(),c.Rb()),2&t){var e=c.gc(2).$implicit;c.Bb(1),c.mc("title",e.expression.second.name),c.Bb(1),c.Cc(e.expression.second.value)}}function k(t,n){if(1&t&&(c.Ub(0,"label",13),c.Ub(1,"span",14),c.Bc(2),c.Tb(),c.Ub(3,"span",14),c.Bc(4),c.Tb(),c.zc(5,I,5,2,"ng-container",15),c.Tb()),2&t){var e=c.gc().$implicit;c.mc("for",e.inputName),c.Bb(1),c.mc("title",e.expression.first.name),c.Bb(1),c.Cc(e.expression.first.value),c.Bb(1),c.mc("title",e.expression.operator.name),c.Bb(1),c.Cc(e.expression.operator.notation),c.Bb(1),c.mc("ngIf","second"!==e.inputIndex)}}function S(t,n){if(1&t&&(c.Sb(0),c.Ub(1,"span",14),c.Bc(2),c.Tb(),c.Ub(3,"span",14),c.Bc(4),c.Tb(),c.Rb()),2&t){var e=c.gc(2).$implicit;c.Bb(1),c.mc("title",e.expression.operator.name),c.Bb(1),c.Cc(e.expression.operator.notation),c.Bb(1),c.mc("title",e.expression.second.name),c.Bb(1),c.Cc(e.expression.second.value)}}function B(t,n){if(1&t&&(c.Ub(0,"label",13),c.zc(1,S,5,4,"ng-container",15),c.Ub(2,"span",16),c.Bc(3,"="),c.Tb(),c.Ub(4,"span",14),c.Bc(5),c.Tb(),c.Tb()),2&t){var e=c.gc().$implicit;c.mc("for",e.inputName),c.Bb(1),c.mc("ngIf","second"!==e.inputIndex),c.Bb(3),c.mc("title",e.expression.result.name),c.Bb(1),c.Cc(e.expression.result.value)}}function T(t,n){if(1&t){var e=c.Vb();c.Ub(0,"div",4),c.Ub(1,"div",5),c.zc(2,M,2,0,"div",6),c.Tb(),c.Ub(3,"div",7),c.Ub(4,"div",8),c.zc(5,k,6,6,"label",9),c.Ub(6,"input",10,11),c.cc("ngModelChange",(function(t){c.tc(e);var i=n.$implicit,r=n.index,a=c.gc();return i.inputValue=t,a.itemChange.emit(r)}))("keyup.Enter",(function(){c.tc(e);var t=n.index;return c.gc().onInputEnter(t)}))("focus",(function(t){c.tc(e);var i=n.index,r=c.gc(),a=c.rc(1);return r.onInputFocus(t,a,i)})),c.Tb(),c.zc(8,B,6,4,"label",9),c.Tb(),c.Tb(),c.Tb()}if(2&t){var i=n.$implicit,r=c.gc();c.Bb(2),c.mc("ngIf",i.isChecked&&i.isValid),c.Bb(3),c.mc("ngIf","first"!==i.inputIndex),c.Bb(1),c.Fb("invalid",i.isChecked&&!i.isValid),c.mc("id",i.inputName)("name",i.inputName)("readonly",!r.active||i.isReadonly)("ngModel",i.inputValue),c.Cb("maxlength",i.inputLength),c.Bb(2),c.mc("ngIf","result"!==i.inputIndex)}}function w(t,n){if(1&t){var e=c.Vb();c.Ub(0,"div",20),c.Ub(1,"app-numpad",21),c.cc("selectionChange",(function(t){return c.tc(e),c.gc(2).onInputNext(t)})),c.Tb(),c.Tb()}if(2&t){var i=c.gc(2);c.Bb(1),c.mc("buttonNames",i.buttons)}}function U(t,n){if(1&t){var e=c.Vb();c.Ub(0,"div",17),c.Ub(1,"div",18),c.cc("click",(function(){c.tc(e);var t=c.gc();return t.showKeyboard=!t.showKeyboard})),c.Ub(2,"mat-icon"),c.Bc(3),c.Tb(),c.Tb(),c.zc(4,w,2,1,"div",19),c.Tb()}if(2&t){var i=c.gc();c.yc("transform",i.keyboardTransform),c.Bb(3),c.Cc(i.toggleKeyboardIcon),c.Bb(1),c.mc("ngIf",i.showKeyboard)}}var q,V,N=((V=function(){function t(){_classCallCheck(this,t),this.active=!0,this.formSubmit=new c.n,this.itemChange=new c.n,this.buttons=["1","2","3","4","5","6","7","8","9","0","\u2190","OK"],this.showKeyboard=!1,this.keyboardTransform="",this.inputIndex=-1}return _createClass(t,[{key:"ngAfterViewInit",value:function(){this.nextItemRequestFocus(0)}},{key:"ngOnChanges",value:function(t){var n=this,e=t.items;e&&(this.keyboardTransform="",this.inputIndex=-1,e.firstChange||setTimeout((function(){n.nextItemRequestFocus(0)}),100))}},{key:"ngOnInit",value:function(){}},{key:"onInputEnter",value:function(t){if(t>=0&&t<this.items.length){var n=this.items[t].inputValue;if(n&&!isNaN(+n))return this.nextItemRequestFocus(t+1)}return!0}},{key:"onInputFocus",value:function(t,n,e){this.inputIndex=e;var i=t.target;if(n&&i){var r=n.getBoundingClientRect(),a=i.getBoundingClientRect();this.keyboardTransform="translate(".concat(a.left-r.left,"px, ").concat(a.bottom-r.top,"px)")}}},{key:"onInputNext",value:function(t){var n=this.buttons[t];if(isNaN(+n))"\u2190"===n?this.onInputBack():"OK"===n&&(this.showKeyboard=this.onInputEnter(this.inputIndex));else if(this.inputIndex>=0&&this.inputIndex<this.items.length){var e=this.items[this.inputIndex];(!e.isReadonly||e.inputValue.length<e.inputLength)&&(e.inputValue=e.inputValue+n,this.itemChange.emit(this.inputIndex))}}},{key:"onInputBack",value:function(){if(this.inputIndex>=0&&this.inputIndex<this.items.length){var t=this.items[this.inputIndex],n=t.inputValue.length;!t.isReadonly&&n>0&&(t.inputValue=t.inputValue.substring(0,n-1),this.itemChange.emit(this.inputIndex))}}},{key:"nextItemRequestFocus",value:function(t){for(var n=this.inputList.toArray(),e=n.length,i=function(i){var r=n[(t+i)%e].nativeElement;if(r&&!r.value)return{v:(setTimeout((function(){r.focus()})),!0)}},r=0;r<e;r++){var a=i(r);if("object"==typeof a)return a.v}return!1}},{key:"toggleKeyboardIcon",get:function(){return this.showKeyboard?"keyboard_hide":"keyboard"}}]),t}()).\u0275fac=function(t){return new(t||V)},V.\u0275cmp=c.Ib({type:V,selectors:[["app-math-input-group"]],viewQuery:function(t,n){var e;1&t&&c.Fc(_,!0),2&t&&c.qc(e=c.dc())&&(n.inputList=e)},inputs:{items:"items",active:"active"},outputs:{formSubmit:"formSubmit",itemChange:"itemChange"},features:[c.zb],decls:4,vars:2,consts:[[1,"math-input-group"],["main",""],["class","math-input-group-item",4,"ngFor","ngForOf"],["class","math-input-group-keyboard",3,"transform",4,"ngIf"],[1,"math-input-group-item"],[1,"math-input-group-col-20"],["class","math-input-group-item-pref",4,"ngIf"],[1,"math-input-group-col-80"],[1,"math-input-group-item-main"],[3,"for",4,"ngIf"],["type","text","placeholder","?","autocomplete","off",3,"id","name","readonly","ngModel","ngModelChange","keyup.Enter","focus"],["itemInputs",""],[1,"math-input-group-item-pref"],[3,"for"],[3,"title"],[4,"ngIf"],["title","equals"],[1,"math-input-group-keyboard"],[1,"math-input-group-keyboard-icon",3,"click"],["class","math-input-group-keyboard-dial",4,"ngIf"],[1,"math-input-group-keyboard-dial"],[3,"buttonNames","selectionChange"]],template:function(t,n){1&t&&(c.Ub(0,"div",0,1),c.zc(2,T,9,10,"div",2),c.zc(3,U,5,4,"div",3),c.Tb()),2&t&&(c.Bb(2),c.mc("ngForOf",n.items),c.Bb(1),c.mc("ngIf",n.active&&n.keyboardTransform))},directives:[i.k,i.l,r.b,r.e,r.i,r.l,b.a,O],styles:['.math-input-group[_ngcontent-%COMP%]{position:relative;margin-right:96px}.math-input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font:inherit;letter-spacing:inherit;border:none;background-color:transparent;margin-left:-6px;margin-right:6px;padding:0 0 0 6px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="1"][_ngcontent-%COMP%]{width:18px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="2"][_ngcontent-%COMP%]{width:42px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="3"][_ngcontent-%COMP%]{width:66px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="4"][_ngcontent-%COMP%]{width:90px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="5"][_ngcontent-%COMP%]{width:114px}.math-input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{letter-spacing:normal;outline:thin dashed #00f;background-color:#fed}.math-input-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{-webkit-text-decoration:solid red line-through;text-decoration:solid red line-through}.math-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}.math-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{text-shadow:1px 1px 2px #eba}.math-input-group[_ngcontent-%COMP%]   .math-input-group-item[_ngcontent-%COMP%]{display:inline-block;width:50%;margin-bottom:24px}.math-input-group[_ngcontent-%COMP%]   .math-input-group-col-20[_ngcontent-%COMP%]{display:inline-block;width:20%}.math-input-group[_ngcontent-%COMP%]   .math-input-group-col-80[_ngcontent-%COMP%]{display:inline-block;width:80%}.math-input-group[_ngcontent-%COMP%]   .math-input-group-item-pref[_ngcontent-%COMP%]{margin-left:24px;color:red;font-weight:600}.math-input-group[_ngcontent-%COMP%]   .math-input-group-item-main[_ngcontent-%COMP%], .math-input-group[_ngcontent-%COMP%]   .math-input-group-item-pref[_ngcontent-%COMP%]{letter-spacing:12px;padding-left:6px}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard[_ngcontent-%COMP%]{position:absolute;top:0;left:0;transition:transform .6s ease-in-out}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard-icon[_ngcontent-%COMP%]{cursor:pointer;height:24px;color:#bbf;transition:color .6s ease-in-out}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard-icon[_ngcontent-%COMP%]:hover{color:#008}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard-dial[_ngcontent-%COMP%]{position:relative;border:1px solid #bbf;border-radius:4px;padding:2px;top:-24px;left:24px;width:192px;color:#008;background-color:#ddf;box-shadow:2px 2px 4px #888}']}),V),F=((q=function(){function t(n){_classCallCheck(this,t),this._ref=n}return _createClass(t,[{key:"ngAfterViewInit",value:function(){var t=this;setTimeout((function(){var n,e=null===(n=t._ref)||void 0===n?void 0:n.nativeElement;e&&e.focus()}))}}]),t}()).\u0275fac=function(t){return new(t||q)(c.Ob(c.l))},q.\u0275dir=c.Jb({type:q,selectors:[["","appFocus",""]]}),q),E=e("STbY"),j=["menuButton"];function A(t,n){if(1&t&&(c.Ub(0,"button",12),c.Ub(1,"mat-icon"),c.Bc(2,"face"),c.Tb(),c.Tb()),2&t){var e=c.gc();c.mc("disabled",!("active"===e.primeStatus&&e.canPrimeSubmit))}}function L(t,n){if(1&t){var e=c.Vb();c.Ub(0,"mat-icon",13),c.cc("click",(function(){c.tc(e);var t=c.gc();return t.victoryAnimation=!t.victoryAnimation})),c.Tb()}if(2&t){var i=c.gc();c.Fb("step1",1===i.todayVictories)("step2",2===i.todayVictories)("step3",3===i.todayVictories)("step4",4===i.todayVictories)("step5",i.todayVictories>=5)("animate",i.victoryAnimation)}}function z(t,n){if(1&t){var e=c.Vb();c.Sb(0),c.Ub(1,"button",14,15),c.Ub(3,"mat-icon"),c.Bc(4,"face"),c.Tb(),c.Tb(),c.Ub(5,"mat-menu",16,17),c.Ub(7,"button",18),c.cc("click",(function(){return c.tc(e),c.gc().onRefresh()})),c.Ub(8,"mat-icon",19),c.Bc(9,"refresh"),c.Tb(),c.Ub(10,"span"),c.Bc(11),c.Tb(),c.Tb(),c.Tb(),c.Rb()}if(2&t){var i=c.rc(6),r=c.gc();c.Bb(1),c.mc("matMenuTriggerFor",i),c.Bb(10),c.Cc(r.refreshButtonLabel)}}function R(t,n){if(1&t&&(c.Ub(0,"span",20),c.Bc(1),c.Tb()),2&t){var e=c.gc();c.Bb(1),c.Cc(e.scoreMessage)}}function K(t,n){if(1&t){var e=c.Vb();c.Ub(0,"form",3,21),c.cc("ngSubmit",(function(){c.tc(e);var t=c.rc(1);return c.gc().onExtraSubmit(t)})),c.Ub(2,"div",5),c.Bc(3),c.Tb(),c.Ub(4,"app-math-input-group",6),c.cc("itemChange",(function(t){return c.tc(e),c.gc().onExtraItemChange(t)})),c.Tb(),c.Ub(5,"div",7),c.Ub(6,"button",22),c.Ub(7,"mat-icon"),c.Bc(8,"child_care"),c.Tb(),c.Tb(),c.Ub(9,"label"),c.Bc(10),c.Tb(),c.Tb(),c.Tb()}if(2&t){var i=c.gc();c.Bb(3),c.Cc(i.extraMessage),c.Bb(1),c.mc("items",i.extraItems)("active","active"===i.extraStatus),c.Bb(2),c.mc("disabled","active"!==i.extraStatus),c.Bb(3),c.Cb("for","done"===i.extraStatus?"onPrimeSubmitButton":"onExtraSubmitButton"),c.Bb(1),c.Cc(i.extraSubmitLabel)}}function Y(t){return t.replace(/[^0-9]/g,"")}var $,J=["first","second","result"],D="[School.Math.Grade-3.Mental-math]",H=(($=function(){function t(n,e){_classCallCheck(this,t),this.primeMessage="\u041d\u0430\u0439\u0434\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f.",this.extraMessage="\u0420\u0430\u0431\u043e\u0442\u0430 \u043d\u0430\u0434 \u043e\u0448\u0438\u0431\u043a\u0430\u043c\u0438:",this.canPrimeSubmit=!1,this.scoreMessage="",this.score=0,this.autoplay=new p.a,this.todayVictories=0,this.victoryAnimation=!1,n.addSvgIcon("icon_sun",e.bypassSecurityTrustResourceUrl("assets/school/sun.svg"))}return _createClass(t,[{key:"init",value:function(){for(this.autoplay.stop(),this.canPrimeSubmit=!1,this.score=0,this.scoreMessage="",this.primeStatus="active",this.primeItems=[],this.extraStatus=void 0,this.extraItems=void 0;this.primeItems.length<10;){var t=Object(s.d)(0,2),n=J[Object(s.d)(0,J.length)],e="mathExpression"+this.primeItems.length;if(0===t){var i=Object(s.d)(0,101),r=Object(s.d)(0,i+1),a={name:"addition",operator:{name:"plus",notation:"+"},first:{name:"augend",value:m=r},second:{name:"addend",value:l=i-r},result:{name:"sum",value:m+l}},o=a[n].value.toString().length;this.primeItems.push({inputName:e,inputValue:"",inputIndex:n,inputLength:o,expression:a})}else if(1===t){var u=Object(s.d)(0,101),c=g(u,Object(s.d)(0,u+1)),p=c[n].value.toString().length;this.primeItems.push({inputName:e,inputValue:"",inputIndex:n,inputLength:p,expression:c})}}var m,l}},{key:"ngOnInit",value:function(){this.init();var t=localStorage.getItem(D);if(t){var n=JSON.parse(t);if(n){var e=n[Object(l.a)("YYYY-MM-DD")];"number"==typeof e&&e>this.todayVictories&&(this.todayVictories=e)}}}},{key:"onRefresh",value:function(){this.init()}},{key:"getPrimeSubmitStatus",value:function(){if("active"!==this.primeStatus)return!1;var t,n=_createForOfIteratorHelper(this.primeItems);try{for(n.s();!(t=n.n()).done;){var e=t.value;if(!e.inputValue||isNaN(+e.inputValue))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}},{key:"setScore",value:function(){var t,n=0,e=_createForOfIteratorHelper(this.primeItems);try{for(e.s();!(t=e.n()).done;)t.value.isValid&&n++}catch(r){e.e(r)}finally{e.f()}if(this.score=n/this.primeItems.length,this.score>=1){this.todayVictories++;try{var i=Object(l.a)("YYYY-MM-DD");localStorage.setItem(D,JSON.stringify(_defineProperty({},i,this.todayVictories)))}catch(a){console.warn("localStorage error:",a)}}}},{key:"onPrimeChecked",value:function(){this.primeStatus="done",this.victoryAnimation=!1,this.scoreMessage="",this.setScore()}},{key:"onPrimeEnded",value:function(){var t=this.primeItems.filter((function(t){return!t.isValid})).map((function(t){return Object.assign(Object.assign({},t),{isChecked:!1,inputValue:"",inputName:t.inputName+"Extra"})}));t.length>0?(this.extraItems=t,this.extraStatus="active"):this.victoryAnimation=!0}},{key:"onExtraSubmit",value:function(t){var n=this;this.extraStatus="validation";var e=this.extraItems,i=0;this.autoplay.timeout=200,this.autoplay.play((function(){for(;i<e.length;){var t=e[i++];if(!t.isChecked&&t.inputValue){t.expression[t.inputIndex].value===+t.inputValue?t.isValid=t.isChecked=t.isReadonly=!0:t.inputValue="";break}}return!(i>=e.length&&(e.find((function(t){return!t.isChecked}))?n.extraStatus="active":(n.extraStatus="done",n.requestMenuButtonFocus()),1))}))}},{key:"onPrimeSubmit",value:function(t){var n=this;if(this.getPrimeSubmitStatus()){this.primeStatus="validation";var e=this.primeItems,i=0;this.autoplay.timeout=250,this.autoplay.play((function(){if(i<e.length){var t=e[i++];t.isChecked=!0,t.isValid=t.expression[t.inputIndex].value===+t.inputValue}if(i>=e.length){n.onPrimeChecked();var r=function(t){if(1===t){var n=["","\u0417\u0434\u043e\u0440\u043e\u0432\u043e!","\u041f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u043e!","\u041e\u0442\u043b\u0438\u0447\u043d\u043e!","\u041c\u043e\u043b\u043e\u0434\u0435\u0446!","\u0423\u043c\u043d\u0438\u0446\u0430!","\u0423\u043c\u043d\u0438\u0447\u043a\u0430!!!","\u0425\u0432\u0430\u043b\u044e!","\u0411\u0440\u0430\u0432\u043e!","\u0422\u0430\u043b\u0430\u043d\u0442!","\u041f\u0440\u0435\u0432\u043e\u0441\u0445\u043e\u0434\u043d\u043e!","\u0422\u0430\u043a \u0434\u0435\u0440\u0436\u0430\u0442\u044c!","\u0417\u0430\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e!","\u0427\u0443\u0434\u0435\u0441\u043d\u043e!"];return"5+ "+n[Object(s.d)(0,n.length)]}if(t>=.98)return"5+";if(t>.9)return"5";if(t>.8)return"5-";if(t>.7)return"4";if(t>.6)return"4-";if(t>.5)return"3";if(t>.4)return"3-";if(t>.3)return"2";if(t>.2)return"2-";var e=["","","","","\u043f\u043b\u043e\u0445\u043e.","\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u0435\u043b\u044c\u043d\u043e.","\u0443\u0436\u0430\u0441\u043d\u043e."];return"1 "+e[Object(s.d)(0,e.length)]}(n.score);return n.autoplay.timeout=100,n.autoplay.play((function(){var t=Object(m.a)(n.scoreMessage,r);return n.scoreMessage=t.length<r.length?r.substring(0,t.length+1):r,n.scoreMessage!==r||(n.onPrimeEnded(),!1)})),!1}return!0}))}else console.warn("Cannot submit:",t.value)}},{key:"onPrimeItemChange",value:function(t){var n=this,e=this.primeItems[t];if(e){var i=Y(e.inputValue).substring(0,e.inputLength);i!==e.inputValue?(this.canPrimeSubmit=!1,setTimeout((function(){e.inputValue=i,n.canPrimeSubmit=n.getPrimeSubmitStatus()}),100)):this.canPrimeSubmit=this.getPrimeSubmitStatus()}}},{key:"onExtraItemChange",value:function(t){var n=this.extraItems[t];if(n){var e=Y(n.inputValue).substring(0,n.inputLength);e!==n.inputValue&&setTimeout((function(){n.inputValue=e}),100)}}},{key:"requestMenuButtonFocus",value:function(){var t=this;setTimeout((function(){var n,e=null===(n=t.menuButtonRef)||void 0===n?void 0:n.nativeElement;e&&e.focus()}))}},{key:"primeSubmitLabel",get:function(){switch(this.primeStatus){case"active":return this.canPrimeSubmit?"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043c?":"?";case"validation":return"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c...";case"done":return"\u041e\u0446\u0435\u043d\u043a\u0430: "}}},{key:"extraSubmitLabel",get:function(){switch(this.extraStatus){case"active":return"?";case"validation":return"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u044e...";case"done":return"!"}}},{key:"refreshButtonLabel",get:function(){return this.score>=1?"\u0415\u0449\u0451 \u0440\u0430\u0437?":"\u041f\u0435\u0440\u0435\u0438\u0433\u0440\u0430\u0442\u044c!"}}]),t}()).\u0275fac=function(t){return new(t||$)(c.Ob(b.c),c.Ob(h.b))},$.\u0275cmp=c.Ib({type:$,selectors:[["app-mental-math"]],viewQuery:function(t,n){var e;1&t&&c.Fc(j,!0,c.l),2&t&&c.qc(e=c.dc())&&(n.menuButtonRef=e.first)},decls:16,vars:9,consts:[["formPrimeSubmitButton",""],[2,"position","absolute","right","0","top","0"],["class","mental-math-trophy","svgIcon","icon_sun",3,"step1","step2","step3","step4","step5","animate","click",4,"ngIf"],[3,"ngSubmit"],["formPrime","ngForm"],[1,"mental-math-topic"],[3,"items","active","itemChange"],[1,"mental-math-submit"],[4,"ngIf","ngIfElse"],["for","onPrimeSubmitButton"],["class","mental-math-teacher",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["id","onPrimeSubmitButton","mat-icon-button","","color","primary","aria-label","submission button","type","submit",3,"disabled"],["svgIcon","icon_sun",1,"mental-math-trophy",3,"click"],["id","onPrimeSubmitButton","mat-icon-button","","color","warn","aria-label","refresh button","type","button","appFocus","",3,"matMenuTriggerFor"],["menuButton",""],["yPosition","above"],["menu","matMenu"],["mat-menu-item","","type","button",3,"click"],["color","primary"],[1,"mental-math-teacher"],["formExtra","ngForm"],["id","onExtraSubmitButton","mat-icon-button","","color","primary","aria-label","submission button","type","submit",3,"disabled"]],template:function(t,n){if(1&t){var e=c.Vb();c.zc(0,A,3,1,"ng-template",null,0,c.Ac),c.Ub(2,"app-squared-paper"),c.Ub(3,"div",1),c.zc(4,L,1,12,"mat-icon",2),c.Tb(),c.Ub(5,"form",3,4),c.cc("ngSubmit",(function(){c.tc(e);var t=c.rc(6);return n.onPrimeSubmit(t)})),c.Ub(7,"div",5),c.Bc(8),c.Tb(),c.Ub(9,"app-math-input-group",6),c.cc("itemChange",(function(t){return n.onPrimeItemChange(t)})),c.Tb(),c.Ub(10,"div",7),c.zc(11,z,12,2,"ng-container",8),c.Ub(12,"label",9),c.Bc(13),c.Tb(),c.zc(14,R,2,1,"span",10),c.Tb(),c.Tb(),c.zc(15,K,11,6,"form",11),c.Tb()}if(2&t){var i=c.rc(1);c.Bb(4),c.mc("ngIf",n.todayVictories>0),c.Bb(4),c.Cc(n.primeMessage),c.Bb(1),c.mc("items",n.primeItems)("active","active"===n.primeStatus),c.Bb(2),c.mc("ngIf","done"===n.primeStatus)("ngIfElse",i),c.Bb(2),c.Cc(n.primeSubmitLabel),c.Bb(1),c.mc("ngIf","done"===n.primeStatus),c.Bb(1),c.mc("ngIf",n.extraItems)}},directives:[x,i.l,r.m,r.j,r.k,N,y.a,b.a,F,E.c,E.d,E.a],styles:[".mental-math-submit[_ngcontent-%COMP%]{height:72px}.mental-math-submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:4px}.mental-math-submit[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;vertical-align:top;margin-left:6px}.mental-math-submit[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{text-shadow:1px 1px 2px #cba}.mental-math-topic[_ngcontent-%COMP%]{margin:24px 96px 24px 0;padding-left:6px;text-indent:48px}.mental-math-trophy[_ngcontent-%COMP%]{display:block;width:96px;height:96px}.mental-math-teacher[_ngcontent-%COMP%]{font-family:Pacifico,cursive;font-weight:400;font-size:32px;color:red;letter-spacing:normal}"]}),$);e.d(n,"SchoolModule",(function(){return X}));var G,Q=[{path:"mental-math",component:H},{path:"",component:H}],X=((G=function t(){_classCallCheck(this,t)}).\u0275mod=c.Mb({type:G}),G.\u0275inj=c.Lb({factory:function(t){return new(t||G)},imports:[[a.c.forChild(Q),i.c,r.d,o.a,u.a],a.c]}),G)}}]);
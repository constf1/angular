@mixin bg_pos($index) {
  $col: $index % 8;
  $row: ($index - $col) / 8;
  // grid with gaps
  background-position: (18 * $col + 1) / (16 * 8) * 100% (18 * $row + 1) / (16 * 8) * 100%;
}

@mixin bg_rank($index) {
  $i: $index * 4;
  &.freecell_spades { @include bg_pos($i); }
  &.freecell_diamonds { @include bg_pos($i + 1); }
  &.freecell_clubs { @include bg_pos($i + 2); }
  &.freecell_hearts { @include bg_pos($i + 3); }
}

.freecell_deck {
  width:100%;
  height:100%;
  background-color:yellow;
  position: relative;

  background-image: url('../../../assets/freecell/blue_gray_paper_grid.jpg');
  background-repeat: repeat;
  background-size: auto;
}

.freecell_spot, .freecell_card {
  cursor: pointer;
  position: absolute;

  background-image: url('../../../assets/freecell/cards.svg');
  background-size: 900% 900%;
  background-repeat: no-repeat;

  border-radius: 8.333% / 6.25%;
}

.freecell_spot {
  background-color: lightblue;

  &.freecell_pile { @include bg_pos(57); }
  &.freecell_base { @include bg_rank(13); }
  &.freecell_cell {
    background-color: lightseagreen;
    @include bg_pos(56);
  }
}

.freecell_card {
  background-color: #d3caa1;
  &.freecell_Ace { @include bg_rank(0); }
  &.freecell_Two { @include bg_rank(1); }
  &.freecell_Three { @include bg_rank(2); }
  &.freecell_Four { @include bg_rank(3); }
  &.freecell_Five { @include bg_rank(4); }
  &.freecell_Six { @include bg_rank(5); }
  &.freecell_Seven { @include bg_rank(6); }
  &.freecell_Eight { @include bg_rank(7); }
  &.freecell_Nine { @include bg_rank(8); }
  &.freecell_Ten { @include bg_rank(9); }
  &.freecell_Jack { @include bg_rank(10); }
  &.freecell_Queen { @include bg_rank(11); }
  &.freecell_King { @include bg_rank(12); }

  transition-property: transform;

  &.transition_deal {
    transition-duration: 1.5s;
    transition-timing-function: cubic-bezier(.6,-0.5,.25,1.5);
  }

  &.transition_norm {
    transition-duration: 0.5s;
    transition-timing-function: ease-out;
  }

  &.transition_fast {
    transition-duration: 0.25s;
    transition-timing-function: linear;
  }

  // transition-property: left, top;
  // transition-duration: 1s;
  // transition-timing-function: cubic-bezier(.5,1,.5,1);

  &.dragged {
    transition-property: none;
    // border: 1px solid grey;
    cursor: grabbing;
  }
}

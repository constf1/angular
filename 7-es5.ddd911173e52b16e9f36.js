!function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"/cH8":function(e,t,n){e.exports=n.p+"1-es5.7f9dc9e434174e79d4ab.worker.js"},"1ROQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("afNV"),a=n("jZWl"),c=n("g/AF"),u=n("WxrP"),f=n("fXoL"),h=Object.assign(Object.assign({},a.b),{deal:-1,mark:0,path:""}),g=function(){var e=function(e){l(n,e);var t=d(n);function n(e){var i;return r(this,n),(i=t.call(this,h))._game=null,i._addSubscription(e.subscribe((function(e){i._set(Object.assign({},e))}))),i}return o(n,[{key:"_validate",value:function(e){var t=Object(u.a)(e);return e.path!==t&&(console.warn("Replacing path with:",t),e.path=t),e.mark=Math.max(0,Math.min(e.path.length/2,e.mark)),(e=s(b(n.prototype),"_validate",this).call(this,e))&&(this._game=null),e}},{key:"move",value:function(e,t){var n=this.state,i=Object(c.b)(n.path,n.mark,e,t);this._set({mark:i.length/2,path:n.path.startsWith(i)?n.path:i})}},{key:"set",value:function(e,t,n){var i=this.state;e===i.deal&&t===i.path&&n===i.mark||this._set({deal:e,path:t,mark:n})}},{key:"deal",get:function(){return this.state.deal},set:function(e){if(this.deal!==e){var t=h.path,n=h.mark;this._set({deal:e,path:t,mark:n})}}},{key:"mark",get:function(){return this.state.mark},set:function(e){this.mark!==e&&this._set({mark:e})}},{key:"path",get:function(){return this.state.path},set:function(e){this.path!==e&&this._set({path:e})}},{key:"game",get:function(){return this._game||(this._game=Object(u.c)(this.state))}}]),n}(i.a);return e.\u0275fac=function(t){return new(t||e)(f.Vb(a.a))},e.\u0275prov=f.Hb({token:e,factory:e.\u0275fac}),e}()},"2MXh":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(t,n,i){r(this,e),this.PILE_NUM=t,this.CELL_NUM=n,this.BASE_NUM=i,this.PILE_START=0,this.DESK_SIZE=t+n+i,this.PILE_END=this.BASE_START=this.PILE_START+this.PILE_NUM,this.BASE_END=this.CELL_START=this.BASE_START+this.BASE_NUM,this.CELL_END=this.CELL_START+this.CELL_NUM}return o(e,[{key:"isPile",value:function(e){return e>=this.PILE_START&&e<this.PILE_END}},{key:"isBase",value:function(e){return e>=this.BASE_START&&e<this.BASE_END}},{key:"isCell",value:function(e){return e>=this.CELL_START&&e<this.CELL_END}},{key:"getSpotName",value:function(e){return this.isBase(e)?"base "+(e-this.BASE_START):this.isPile(e)?"pile "+(e-this.PILE_START):this.isCell(e)?"cell "+(e-this.CELL_START):"unknown "+e}}]),e}()},GPiM:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return p}));var a=i("afNV"),c=i("fXoL"),s=i("1ROQ"),u=i("dkWW"),f=i("tt9D"),b=i("dNgK"),h={solved:!1,canAssist:!1,canUndo:!1,canRedo:!1,nextMove:null,assistRequest:null},g=String.fromCharCode(215),p=function(){var t=function(t){l(a,t);var i=d(a);function a(e,t,c,o){var s;return r(this,a),(s=i.call(this,h))._gameService=e,s._playService=t,s._settings=c,s._snackBar=o,s._worker=null,s._createWorker(),s._addSubscription(s._gameService.subscribe((function(e){var t=Object.assign({},h),i=s._gameService.game;if(t.solved=i.isSolved(),!t.solved){var a=i.countEmpty();if(a<i.PILE_NUM+i.CELL_NUM){var r=i.getMoves();t.canAssist=!!s._worker&&r.length>0&&a<=i.CELL_NUM;var c,o=n(r);try{for(o.s();!(c=o.n()).done;){var l=c.value;if(i.isBase(l.taker)){t.nextMove=l;break}}}catch(u){o.e(u)}finally{o.f()}}}t.canUndo=e.mark>0,t.canRedo=2*e.mark<e.path.length,s.state.assistRequest&&(s.cancelAssist(),s._snackBar.open("Assist was canceled.",g,{duration:1e3})),Promise.resolve().then((function(){return s._set(t)}))}))),s}return o(a,[{key:"undo",value:function(){var e=this._gameService.state.mark-1;e>=0&&(this._gameService.mark=e)}},{key:"redo",value:function(){var e=this._gameService.state.mark+1;e+e<=this._gameService.state.path.length&&(this._gameService.mark=e)}},{key:"next",value:function(){var e=this.state.nextMove;e&&this._gameService.move(e.giver,e.taker)}},{key:"playNext",value:function(){var e=this;this._playService.play((function(){return e.next(),!!e.state.nextMove}))}},{key:"play",value:function(e){var t=this;this._playService.play((function(){if(e.length>1){var n=e.charCodeAt(0),i=e.charCodeAt(1);e=e.substring(2),t._gameService.move(n,i)}return e.length>1}))}},{key:"assist",value:function(){var e=this;if(this._worker&&this.state.canAssist){var t=this._gameService.game,n={base:t.BASE_NUM,cell:t.CELL_NUM,pile:t.PILE_NUM,desk:t.toArray()},i=JSON.stringify(n);this._worker.postMessage({requestId:i,desk:n,searchThreshold:this._settings.state.assistLevel}),this._set({assistRequest:i,canAssist:!1});var a=this._snackBar.open("Thinking...",g).onAction().subscribe((function(){a.unsubscribe(),e.cancelAssist(),e._set({assistRequest:null,canAssist:!0})}))}}},{key:"cancelAssist",value:function(){this._worker&&this._worker.postMessage({requestId:null})}},{key:"_createWorker",value:function(){var t=this;"undefined"!=typeof Worker&&(this._worker=new Worker(e,void 0),this._worker.onmessage=function(e){var n=e.data;if(n.requestId===t.state.assistRequest){var i="Unable to assist ;-(";n.path&&(i="Assisting...",t.play(n.path)),t._snackBar.open(i,g,{duration:2e3}),t._set({assistRequest:h.assistRequest})}})}}]),a}(a.a);return t.\u0275fac=function(e){return new(e||t)(c.Vb(s.a),c.Vb(u.a),c.Vb(f.a),c.Vb(b.a))},t.\u0275prov=c.Hb({token:t,factory:t.\u0275fac}),t}()}).call(this,i("/cH8"))},LGbN:function(i,a,c){"use strict";c.r(a),c.d(a,"FreecellModule",(function(){return un}));var u=c("ofXK"),f=c("3Pt+"),h=c("tyNb"),g=c("hctd"),p=c("pKmL"),v=c("GPiM"),m=c("dkWW"),_=c("jZWl"),k=c("bgvp"),y=c("fXoL");function S(e){return new Promise((function(t,n){e.onsuccess=function(){return t(e.result)},e.onerror=function(){return n(e.error.message)}}))}var w,C=((w=function(){function e(){var t=this;r(this,e),this._openPromise=new Promise((function(e,n){var i=window.indexedDB.open("freecell-db",1);i.onerror=function(e){t.onOpenError(i),n(i.error.message)},i.onupgradeneeded=function(e){return t.onUpgradeNeeded(i)},i.onsuccess=function(n){t.onOpenSuccess(i),e()}}))}return o(e,[{key:"_createTransaction",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return this._openPromise.then((function(){return t._db.transaction(e,n)}))}},{key:"_getStore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return this._createTransaction([e],t).then((function(t){return t.objectStore(e)}))}},{key:"onOpenSuccess",value:function(e){this._db=e.result,console.log("DB open success:",e.result.name)}},{key:"onOpenError",value:function(e){this.openError="DB open error: "+e.error.message,console.error("DB Error:",e.error)}},{key:"onUpgradeNeeded",value:function(e){this._db=e.result,this._db.createObjectStore("game",{keyPath:"deal",autoIncrement:!1}).createIndex("date","date",{unique:!1})}},{key:"getGame",value:function(e){return this._getStore("game","readonly").then((function(t){return S(t.get(e))}))}},{key:"setGame",value:function(e){return e.date||(e.date=Object(k.a)()),this._getStore("game","readwrite").then((function(t){return S(t.put(e))}))}},{key:"isOpen",get:function(){return!!this._db}}]),e}()).\u0275fac=function(e){return new(e||w)},w.\u0275prov=y.Hb({token:w,factory:w.\u0275fac}),w),R=c("1ROQ"),M=c("tt9D"),O=c("mrSG"),A=c("dPmG"),L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r(this,e),this._subscriptions=t}return o(e,[{key:"_addSubscription",value:function(e){this._subscriptions.push(e)}},{key:"ngOnDestroy",value:function(){this._subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}(),E=function(e){return e[e.card=0]="card",e[e.deal=1]="deal",e[e.shuffle=2]="shuffle",e[e.aplause_001=3]="aplause_001",e[e.aplause_002=4]="aplause_002",e[e.aplause_003=5]="aplause_003",e[e.aplause_004=6]="aplause_004",e[e.aplause_005=7]="aplause_005",e[e.aplause_006=8]="aplause_006",e[e.aplause_007=9]="aplause_007",e[e.length=10]="length",e}({});function T(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=e.createBufferSource();r.buffer=n;var c=r;if(1!==i){var o=e.createGain();o.gain.value=i,c.connect(o),c=o}if(0!==a){var s=e.createStereoPanner();s.pan.value=a,c.connect(s),c=s}return c.connect(t),r}var x,P=((x=function(e){l(n,e);var t=d(n);function n(e){var i;return r(this,n),(i=t.call(this))._enabled=!1,i._activated=!1,i._sounds=null,i._nextState=Promise.resolve(),i._addSubscription(e.subscribe((function(e){e.enableSound?i.enable():i.disable()}))),i}return o(n,[{key:"_next",value:function(e){return Object(O.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._nextState;case 3:return t.prev=3,this._nextState=e(),t.finish(3);case 6:case"end":return t.stop()}}),t,this,[[0,,3,6]])})))}},{key:"activate",value:function(){this._activated=!0}},{key:"disable",value:function(){var e=this;this._next((function(){return Object(O.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._enabled=!1);case 1:case"end":return e.stop()}}),e,this)})))}))}},{key:"enable",value:function(){var e=this;this._next((function(){return Object(O.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._sounds){e.next=6;break}return this._context||(this._context=new AudioContext),e.next=4,this._getBuffers();case 4:t=e.sent,this._sounds=function(e,t){var n=function(e){var t=e.createDynamicsCompressor();return t.connect(e.destination),t}(e),i={deal:function(){T(e,n,t[E.deal],1).start()},shuffle:function(){T(e,n,t[E.shuffle],1.5).start()}},a=0;return i.card=function(){0==a++&&setTimeout((function(){(1===a?T(e,n,t[E.card],.8):T(e,n,t[E.shuffle],1)).start(),a=0}))},i.victory=function(){for(var i=E.aplause_001,a=E.aplause_007,r=e.currentTime,c=0,o=Object(A.k)(1,4);c<o;c++){var s=T(e,n,t[Object(A.k)(i,a+1)],Object(A.l)(.75,1.75),Object(A.k)(-100,101)/100);s.playbackRate.value=Object(A.l)(.85,1.75),s.start(r+3*Math.random())}},i}(this._context,t);case 6:this._enabled=!0;case 7:case"end":return e.stop()}}),e,this)})))}))}},{key:"_getBuffers",value:function(){return this._buffers||(this._buffers=this._loadAll()),this._buffers}},{key:"_loadAll",value:function(){for(var e,t,n=[],i=0;i<E.length;i++)n.push("./assets/freecell/sounds/"+E[i]+".mp3");return e=this._context,t=n,new Promise((function(n,i){var a=t.length,r=new Array(t.length);0===a&&n([]),t.forEach((function(t,c){(function(e,t){return new Promise((function(t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){return t(i.response)},i.onerror=function(e){return n(e)},i.send()}))})(t).then((function(t){return function(e,t){return new Promise((function(n,i){e.decodeAudioData(t,(function(e){return n(e)}),(function(e){return i(e)}))}))}(e,t)})).then((function(e){r[c]=e,0==--a&&n(r)})).catch((function(e){return i(e)}))}))}))}},{key:"play",value:function(e){return Object(O.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._nextState;case 2:if(!(this._enabled&&this._activated&&this._sounds)){t.next=11;break}if(n=this._sounds[e],t.t0="function"==typeof n,!t.t0){t.next=11;break}if(t.t1="suspended"===this._context.state,!t.t1){t.next=10;break}return t.next=10,this._context.resume();case 10:n();case 11:case"end":return t.stop()}}),t,this)})))}},{key:"enabled",get:function(){return this._enabled}},{key:"activated",get:function(){return this._activated}}]),n}(L)).\u0275fac=function(e){return new(e||x)(y.Vb(M.a))},x.\u0275prov=y.Hb({token:x,factory:x.\u0275fac}),x),Q=c("RDYl"),D=c("rDax"),I=c("0IaG"),N=c("wZkO"),z=c("1jcm"),j=c("bTqV"),B=c("NFeN"),F=c("5RNC"),Y=c("jaxi"),X=c("f0Cb");function U(e,t){if(1&e&&(y.Rb(0,"mat-icon",8),y.Ac(1),y.Qb(),y.Ac(2," Game Sounds ")),2&e){var n=y.cc();y.zb(1),y.Bc(n.settings.state.enableSound?"volume_up":"volume_off")}}function W(e,t){1&e&&(y.Rb(0,"mat-icon",8),y.Ac(1,"assistant"),y.Qb(),y.Ac(2," Assist level "))}function H(e,t){1&e&&(y.Rb(0,"mat-icon",8),y.Ac(1,"layers"),y.Qb(),y.Ac(2," Card Effects "))}function G(e,t){1&e&&(y.Rb(0,"mat-icon",8),y.Ac(1,"dashboard"),y.Qb(),y.Ac(2," Appearance "))}var K,q=1e3,V=((K=function(){function e(t){var n=this;r(this,e),this.settings=t,this.aspectRatioMin=M.d.aspectRatio*q,this.aspectRatioMax=M.c.aspectRatio*q,this.aspectRatioStep=5,this.assistLevelMin=Math.ceil(M.d.assistLevel/q),this.assistLevelMax=Math.floor(M.c.assistLevel/q),this.assistLevelStep=5,this.aspectRatioLabel=function(e){return(e/q).toFixed(3)},this.assistLevelLabel=function(e){var t=(n.assistLevelMax-n.assistLevelMin)/3;return e<n.assistLevelMin+t?"low":e>n.assistLevelMax-t?"high":"norm"}}return o(e,[{key:"assistLevelColor",value:function(){switch(this.assistLevelLabel(this.assistLevel)){case"low":return"primary";case"high":return"warn";default:return"accent"}}},{key:"ngOnInit",value:function(){}},{key:"aspectRatio",get:function(){return Math.round(this.settings.state.aspectRatio*q)},set:function(e){this.settings.set({aspectRatio:+e/q})}},{key:"assistLevel",get:function(){return Math.round(this.settings.state.assistLevel/q)},set:function(e){(e=Math.max(this.assistLevelMin,Math.min(this.assistLevelMax,+e)))!==this.assistLevel&&this.settings.set({assistLevel:e*q})}}]),e}()).\u0275fac=function(e){return new(e||K)(y.Lb(M.a))},K.\u0275cmp=y.Fb({type:K,selectors:[["app-freecell-settings-dialog"]],decls:75,vars:30,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-tab-label",""],[1,"tab-content"],[3,"checked","change"],[1,"pad-top"],["mat-stroked-button","",3,"disabled","click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","color","ngModelChange"],[1,"margin-right-8"],[3,"value"],["value","sidenav",3,"click"],["value","sandwich",3,"click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","ngModelChange"],["align","center"],["mat-button","",3,"click"],["mat-button","","matDialogClose","","cdkFocusInitial",""]],template:function(e,t){1&e&&(y.Rb(0,"h2",0),y.Ac(1,"Freecell Settings"),y.Qb(),y.Rb(2,"mat-dialog-content",1),y.Rb(3,"mat-tab-group"),y.Rb(4,"mat-tab"),y.yc(5,U,3,1,"ng-template",2),y.Rb(6,"div",3),y.Rb(7,"mat-slide-toggle",4),y.Yb("change",(function(e){return t.settings.set({enableSound:!!e.checked})})),y.Ac(8," Enable "),y.Qb(),y.Qb(),y.Qb(),y.Rb(9,"mat-tab"),y.yc(10,W,3,0,"ng-template",2),y.Rb(11,"div",3),y.Rb(12,"p"),y.Ac(13,"The maximum number of moves the assistant will try to solve."),y.Qb(),y.Rb(14,"div",5),y.Rb(15,"button",6),y.Yb("click",(function(){return t.assistLevel=t.assistLevel-t.assistLevelStep})),y.Rb(16,"mat-icon"),y.Ac(17,"chevron_left"),y.Qb(),y.Qb(),y.Rb(18,"button",6),y.Yb("click",(function(){return t.assistLevel=t.assistLevel+t.assistLevelStep})),y.Rb(19,"mat-icon"),y.Ac(20,"chevron_right"),y.Qb(),y.Qb(),y.Rb(21,"mat-slider",7),y.Yb("ngModelChange",(function(e){return t.assistLevel=e})),y.Qb(),y.Ac(22),y.dc(23,"number"),y.Qb(),y.Qb(),y.Qb(),y.Rb(24,"mat-tab"),y.yc(25,H,3,0,"ng-template",2),y.Rb(26,"div",3),y.Rb(27,"div"),y.Rb(28,"mat-slide-toggle",4),y.Yb("change",(function(e){return t.settings.set({deckUseSvg:!!e.checked})})),y.Ac(29," Use SVG "),y.Qb(),y.Qb(),y.Rb(30,"div",5),y.Rb(31,"mat-slide-toggle",4),y.Yb("change",(function(e){return t.settings.set({enableRipples:!!e.checked})})),y.Ac(32," Enable Ripples "),y.Qb(),y.Qb(),y.Rb(33,"div",5),y.Rb(34,"mat-slide-toggle",4),y.Yb("change",(function(e){return t.settings.set({enableWinAnimation:!!e.checked})})),y.Ac(35," Enable Victory Animation "),y.Qb(),y.Qb(),y.Qb(),y.Qb(),y.Rb(36,"mat-tab"),y.yc(37,G,3,0,"ng-template",2),y.Rb(38,"div",3),y.Rb(39,"div"),y.Rb(40,"mat-icon",8),y.Ac(41,"table_chart"),y.Qb(),y.Ac(42,"Layout: "),y.Rb(43,"span"),y.Ac(44,"horizontal"),y.Qb(),y.Ac(45," or "),y.Rb(46,"span"),y.Ac(47,"vertical"),y.Qb(),y.Ac(48,". "),y.Rb(49,"mat-button-toggle-group",9),y.Rb(50,"mat-button-toggle",10),y.Yb("click",(function(){return t.settings.set({view:"sidenav"})})),y.Rb(51,"mat-icon"),y.Ac(52,"stay_current_landscape"),y.Qb(),y.Qb(),y.Rb(53,"mat-button-toggle",11),y.Yb("click",(function(){return t.settings.set({view:"sandwich"})})),y.Rb(54,"mat-icon"),y.Ac(55,"stay_current_portrait"),y.Qb(),y.Qb(),y.Qb(),y.Qb(),y.Rb(56,"div",5),y.Rb(57,"mat-icon",8),y.Ac(58,"aspect_ratio"),y.Qb(),y.Ac(59,"Aspect ratio. The playground width divided by its height. "),y.Rb(60,"mat-slider",12),y.Yb("ngModelChange",(function(e){return t.aspectRatio=e})),y.Qb(),y.Ac(61),y.dc(62,"number"),y.Qb(),y.Qb(),y.Qb(),y.Qb(),y.Qb(),y.Mb(63,"mat-divider"),y.Rb(64,"mat-dialog-actions",13),y.Rb(65,"button",14),y.Yb("click",(function(){return t.settings.restoreDefaults()})),y.Rb(66,"mat-icon"),y.Ac(67,"settings_backup_restore"),y.Qb(),y.Rb(68,"label"),y.Ac(69,"RESET"),y.Qb(),y.Qb(),y.Rb(70,"button",15),y.Rb(71,"mat-icon"),y.Ac(72,"close"),y.Qb(),y.Rb(73,"label"),y.Ac(74,"CLOSE"),y.Qb(),y.Qb(),y.Qb()),2&e&&(y.zb(7),y.ic("checked",t.settings.state.enableSound),y.zb(8),y.ic("disabled",t.assistLevelMin>=t.assistLevel),y.zb(3),y.ic("disabled",t.assistLevel>=t.assistLevelMax),y.zb(3),y.ic("displayWith",t.assistLevelLabel)("min",t.assistLevelMin)("max",t.assistLevelMax)("step",t.assistLevelStep)("ngModel",t.assistLevel)("color",t.assistLevelColor()),y.zb(1),y.Cc(" ",y.fc(23,24,t.settings.state.assistLevel,"1.0-0")," "),y.zb(6),y.ic("checked",t.settings.state.deckUseSvg),y.zb(3),y.ic("checked",t.settings.state.enableRipples),y.zb(3),y.ic("checked",t.settings.state.enableWinAnimation),y.zb(9),y.Db("text-selected","sidenav"===t.settings.state.view),y.zb(3),y.Db("text-selected","sandwich"===t.settings.state.view),y.zb(3),y.ic("value",t.settings.state.view),y.zb(11),y.ic("displayWith",t.aspectRatioLabel)("min",t.aspectRatioMin)("max",t.aspectRatioMax)("step",t.aspectRatioStep)("ngModel",t.aspectRatio),y.zb(1),y.Cc(" ",y.fc(62,27,t.settings.state.aspectRatio,"1.3-3")," "))},directives:[I.h,I.e,N.b,N.a,N.c,z.a,j.a,B.a,F.a,f.i,f.l,Y.b,Y.a,X.a,I.c,I.d],pipes:[u.e],styles:[".pad-top[_ngcontent-%COMP%], .tab-content[_ngcontent-%COMP%]{padding-top:16px}.tab-content[_ngcontent-%COMP%]{min-height:12.75rem;margin-left:10px}@media (min-aspect-ratio:8/5){.tab-content[_ngcontent-%COMP%]{min-height:9rem}}.margin-right-8[_ngcontent-%COMP%]{margin-right:8px}span.text-selected[_ngcontent-%COMP%]{font-weight:500}"]}),K),Z=c("0MNC");function J(e,t){1&e&&(y.bc(),y.Rb(0,"svg",6),y.Mb(1,"path",7),y.Mb(2,"path",8),y.Qb())}function $(e,t){1&e&&(y.Pb(0),y.bc(),y.Rb(1,"svg",6),y.Mb(2,"path",7),y.Mb(3,"path",11),y.Qb(),y.Ob())}function ee(e,t){if(1&e){var n=y.Sb();y.Rb(0,"button",9),y.Yb("click",(function(){y.pc(n);var e=t.$implicit;return y.cc().changeOrder(e)})),y.yc(1,$,4,0,"ng-container",10),y.Qb()}if(2&e){var i=t.$implicit,a=y.cc(),r=y.nc(1);y.Db("sandwich-button-move-down",a.order[1]>a.order[i])("sandwich-button-move-up",a.order[i]>a.order[1]),y.zb(1),y.ic("ngIf",a.order[1]>a.order[i])("ngIfElse",r)}}function te(e,t){1&e&&y.Nb(0)}var ne=function(){return{$implicit:0}};function ie(e,t){if(1&e&&(y.Rb(0,"div",12),y.gc(1,1),y.yc(2,te,1,0,"ng-container",13),y.Qb()),2&e){var n=y.cc(),i=y.nc(3);y.vc("order",n.order[0]),y.zb(2),y.ic("ngTemplateOutlet",i)("ngTemplateOutletContext",y.jc(4,ne))}}function ae(e,t){1&e&&y.Nb(0)}var re=function(){return{$implicit:2}};function ce(e,t){if(1&e&&(y.Rb(0,"div",14),y.gc(1,2),y.yc(2,ae,1,0,"ng-container",13),y.Qb()),2&e){var n=y.cc(),i=y.nc(3);y.vc("order",n.order[2]),y.zb(2),y.ic("ngTemplateOutlet",i)("ngTemplateOutletContext",y.jc(4,re))}}var oe=[[["","appSandwichContent",""]],[["","appSandwichHeader",""]],[["","appSandwichFooter",""]]],se=["[appSandwichContent]","[appSandwichHeader]","[appSandwichFooter]"],le=[5,7,11,15,19,21];function ue(e,t){return Math.floor(le[e]/Math.pow(3,2-t))%3}var de,fe,be=((de=function(){function e(){r(this,e),this.order=[0,1,2],this._sandwichOrder=0,this.sandwichOrderChange=new y.n,this.hideHeader=!1,this.hideFooter=!1}return o(e,[{key:"ngOnInit",value:function(){}},{key:"changeOrder",value:function(e){var n=t(this.order),i=n[e];if(i>n[1])for(var a=n.length;a-- >0;)n[a]===i?n[a]=i-1:n[a]===i-1&&(n[a]=i);else if(i<n[1])for(var r=n.length;r-- >0;)n[r]===i?n[r]=i+1:n[r]===i+1&&(n[r]=i);this.sandwichOrderChange.emit(le.indexOf(3*(3*n[0]+n[1])+n[2]))}},{key:"sandwichOrder",get:function(){return this._sandwichOrder},set:function(e){this._sandwichOrder!==e&&e>=0&&e<le.length&&(this._sandwichOrder=e,this.order[0]=ue(e,0),this.order[1]=ue(e,1),this.order[2]=ue(e,2))}}]),e}()).\u0275fac=function(e){return new(e||de)},de.\u0275cmp=y.Fb({type:de,selectors:[["app-sandwich"]],inputs:{sandwichOrder:"sandwichOrder",hideHeader:"hideHeader",hideFooter:"hideFooter"},outputs:{sandwichOrderChange:"sandwichOrderChange"},ngContentSelectors:se,decls:9,vars:4,consts:[["arrowUpward",""],["moveButton",""],[1,"sandwich-container"],["class","sandwich-header",3,"order",4,"ngIf"],[1,"sandwich-content"],["class","sandwich-footer",3,"order",4,"ngIf"],["height","24","width","24"],["d","M0 0h24v24H0V0z","fill","none"],["d","M6 6h4v4h4V6h4l-6-4zM2 15h20v-4H2v4zm2-3h2v2H4v-2z","fill","currentColor"],["mat-icon-button","",3,"click"],[4,"ngIf","ngIfElse"],["d","M18 18h-4v-4h-4v4H6l6 4zM2 13h20V9H2v4zm2-3h2v2H4v-2z","fill","currentColor"],[1,"sandwich-header"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"sandwich-footer"]],template:function(e,t){1&e&&(y.hc(oe),y.yc(0,J,3,0,"ng-template",null,0,y.zc),y.yc(2,ee,2,6,"ng-template",null,1,y.zc),y.Rb(4,"div",2),y.yc(5,ie,3,5,"div",3),y.Rb(6,"div",4),y.gc(7),y.Qb(),y.yc(8,ce,3,5,"div",5),y.Qb()),2&e&&(y.zb(5),y.ic("ngIf",!t.hideHeader),y.zb(1),y.vc("order",t.order[1]),y.zb(2),y.ic("ngIf",!t.hideFooter))},directives:[u.l,j.a,u.q],styles:["div.sandwich-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch}div.sandwich-footer[_ngcontent-%COMP%], div.sandwich-header[_ngcontent-%COMP%]{position:relative;flex-grow:0;flex-shrink:0}div.sandwich-content[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:0}.sandwich-button-move-down[_ngcontent-%COMP%], .sandwich-button-move-up[_ngcontent-%COMP%]{position:absolute;right:0;color:#bccfe0}.sandwich-button-move-down[_ngcontent-%COMP%]:hover, .sandwich-button-move-up[_ngcontent-%COMP%]:hover{color:#fff}.sandwich-button-move-down[_ngcontent-%COMP%]{bottom:0}.sandwich-button-move-up[_ngcontent-%COMP%]{top:0}"]}),de),he=c("/t3+"),ge=c("voYn"),pe=c("STbY"),ve=c("MutI"),me=((fe=function(e){l(n,e);var t=d(n);function n(e){var i;return r(this,n),(i=t.call(this))._gameService=e,i.minDeal=0,i.maxDeal=2147483648,i.digitCount=i.maxDeal.toString(10).length,i.listItem=!1,i.dealLabel="",i.isMenuOpened=!1,i}return o(n,[{key:"ngOnInit",value:function(){var e=this;this._addSubscription(this._gameService.subscribe((function(t){e.deal=t.deal,e.dealLabel="#"+(e.deal>=0?Object(ge.c)(e.deal.toString(10),e.digitCount,"0"):Object(ge.c)("",e.digitCount,"#"))})))}},{key:"setDeal",value:function(e){e>=this.minDeal&&e<=this.maxDeal&&(this._gameService.deal=e)}},{key:"setRandomDeal",value:function(){this.setDeal(Object(A.k)(this.minDeal,this.maxDeal,this.deal))}}]),n}(L)).\u0275fac=function(e){return new(e||fe)(y.Lb(R.a))},fe.\u0275cmp=y.Fb({type:fe,selectors:[["app-freecell-deal-menu"]],inputs:{listItem:"listItem"},features:[y.wb],decls:22,vars:7,consts:[["xPosition","before"],["appMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["mat-button","",3,"matMenuTriggerFor","menuOpened","menuClosed"]],template:function(e,t){if(1&e&&(y.Rb(0,"mat-menu",0,1),y.Rb(2,"button",2),y.Yb("click",(function(){return t.setDeal(t.deal+1)})),y.Rb(3,"mat-icon"),y.Ac(4,"navigate_next"),y.Qb(),y.Rb(5,"span"),y.Ac(6,"Next"),y.Qb(),y.Qb(),y.Rb(7,"button",2),y.Yb("click",(function(){return t.setDeal(t.deal-1)})),y.Rb(8,"mat-icon"),y.Ac(9,"navigate_before"),y.Qb(),y.Rb(10,"span"),y.Ac(11,"Previous"),y.Qb(),y.Qb(),y.Rb(12,"button",3),y.Yb("click",(function(){return t.setRandomDeal()})),y.Rb(13,"mat-icon"),y.Ac(14,"casino"),y.Qb(),y.Rb(15,"span"),y.Ac(16,"Random"),y.Qb(),y.Qb(),y.Qb(),y.Rb(17,"button",4),y.Yb("menuOpened",(function(){return t.isMenuOpened=!0}))("menuClosed",(function(){return t.isMenuOpened=!1})),y.Rb(18,"label"),y.Ac(19),y.Qb(),y.Rb(20,"mat-icon"),y.Ac(21),y.Qb(),y.Qb()),2&e){var n=y.nc(1);y.zb(2),y.ic("disabled",t.deal>=t.maxDeal),y.zb(5),y.ic("disabled",t.minDeal>=t.deal),y.zb(10),y.Db("mat-list-item",t.listItem),y.ic("matMenuTriggerFor",n),y.zb(2),y.Bc(t.dealLabel),y.zb(2),y.Bc(t.isMenuOpened?"remove":"expand_more")}},directives:[pe.d,pe.a,B.a,j.a,ve.b,pe.c],styles:[""]}),fe),_e=c("bv9b");function ke(e,t){1&e&&y.Mb(0,"mat-progress-bar",6)}function ye(e,t){if(1&e){var n=y.Sb();y.Rb(0,"button",2),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.undo()})),y.Rb(1,"mat-icon"),y.Ac(2,"undo"),y.Qb(),y.Rb(3,"label"),y.Ac(4,"UNDO"),y.Qb(),y.Qb(),y.Rb(5,"button",2),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.redo()})),y.Rb(6,"mat-icon"),y.Ac(7,"redo"),y.Qb(),y.Rb(8,"label"),y.Ac(9,"REDO"),y.Qb(),y.Qb(),y.Rb(10,"button",3),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.playNext()})),y.Rb(11,"mat-icon"),y.Ac(12,"emoji_objects"),y.Qb(),y.Rb(13,"label"),y.Ac(14,"AUTO"),y.Qb(),y.Qb(),y.Rb(15,"button",4),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.assist()})),y.Rb(16,"mat-icon"),y.Ac(17,"assistant"),y.Qb(),y.Rb(18,"label"),y.Ac(19,"ASSIST"),y.Qb(),y.yc(20,ke,1,0,"mat-progress-bar",5),y.Qb()}if(2&e){var i=y.cc();y.ic("disabled",!i.actionService.state.canUndo),y.zb(5),y.ic("disabled",!i.actionService.state.canRedo),y.zb(5),y.ic("disabled",!i.actionService.state.nextMove),y.zb(5),y.ic("disabled",!i.actionService.state.canAssist),y.zb(5),y.ic("ngIf",i.actionService.state.assistRequest)}}function Se(e,t){1&e&&y.Mb(0,"mat-progress-bar",6)}function we(e,t){if(1&e){var n=y.Sb();y.Pb(0),y.Rb(1,"button",7),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.undo()})),y.Rb(2,"mat-icon"),y.Ac(3,"undo"),y.Qb(),y.Qb(),y.Rb(4,"button",7),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.redo()})),y.Rb(5,"mat-icon"),y.Ac(6,"redo"),y.Qb(),y.Qb(),y.Rb(7,"button",8),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.playNext()})),y.Rb(8,"mat-icon"),y.Ac(9,"emoji_objects"),y.Qb(),y.Qb(),y.Rb(10,"button",9),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.assist()})),y.Rb(11,"mat-icon"),y.Ac(12,"assistant"),y.Qb(),y.yc(13,Se,1,0,"mat-progress-bar",5),y.Qb(),y.Ob()}if(2&e){var i=y.cc();y.zb(1),y.ic("disabled",!i.actionService.state.canUndo),y.zb(3),y.ic("disabled",!i.actionService.state.canRedo),y.zb(3),y.ic("disabled",!i.actionService.state.nextMove),y.zb(3),y.ic("disabled",!i.actionService.state.canAssist),y.zb(3),y.ic("ngIf",i.actionService.state.assistRequest)}}var Ce,Re=((Ce=function(){function e(t){r(this,e),this.actionService=t,this.noLabel=!1}return o(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ce)(y.Lb(v.a))},Ce.\u0275cmp=y.Fb({type:Ce,selectors:[["app-freecell-action-buttons"]],inputs:{noLabel:"noLabel"},decls:3,vars:2,consts:[["buttons",""],[4,"ngIf","ngIfElse"],["mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","accent",3,"disabled","click"],["mat-stroked-button","","color","warn",3,"disabled","click"],["mode","indeterminate","color","warn","style","position: absolute; left: 0; bottom: 0",4,"ngIf"],["mode","indeterminate","color","warn",2,"position","absolute","left","0","bottom","0"],["mat-icon-button","",3,"disabled","click"],["mat-icon-button","","color","accent",3,"disabled","click"],["mat-icon-button","","color","warn",3,"disabled","click"]],template:function(e,t){if(1&e&&(y.yc(0,ye,21,5,"ng-template",null,0,y.zc),y.yc(2,we,14,5,"ng-container",1)),2&e){var n=y.nc(1);y.zb(2),y.ic("ngIf",t.noLabel)("ngIfElse",n)}},directives:[u.l,j.a,B.a,_e.a],styles:[""]}),Ce),Me=c("lPNG"),Oe=c("WxrP"),Ae=c("kmnG"),Le=c("d3UM"),Ee=c("FKr1");function Te(e,t){1&e&&(y.Rb(0,"mat-icon",4),y.Ac(1,"emoji_events"),y.Qb())}function xe(e,t){if(1&e&&(y.Rb(0,"mat-option",2),y.Rb(1,"div",5),y.Ac(2),y.Rb(3,"span"),y.Ac(4),y.Qb(),y.Ac(5,"\xa0\u2192\xa0 "),y.Rb(6,"span"),y.Ac(7),y.Qb(),y.Ac(8,"\xa0 "),y.Rb(9,"span"),y.Ac(10),y.Qb(),y.Qb(),y.Qb()),2&e){var n=t.$implicit,i=t.index;y.ic("value",i),y.zb(2),y.Cc(" ",i+1,".\xa0 "),y.zb(1),y.Bb(n.cardClass),y.zb(1),y.Bc(n.cardName),y.zb(2),y.Bb(n.takerClass),y.zb(1),y.Bc(n.takerName),y.zb(2),y.Bb(n.outcomeClass),y.zb(1),y.Bc(n.outcomeName)}}var Pe,Qe=["danger-critical","danger-extreme","danger-very-high","danger-high","danger-moderate","danger-low","danger-very-low"],De=((Pe=function(e){l(n,e);var t=d(n);function n(e){var i;return r(this,n),(i=t.call(this))._gameService=e,i.items=[],i.selection=-1,i.isSolved=!1,i.cards={},i.onMoveCallback=function(e,t,n,a){var r=i.items[a]||{};if(t!==r.giver||n!==r.taker){if(r.card=e.getCard(n,-1),r.giver=t,r.taker=n,r.outcome=e.countEmpty(),r.cardName=i.cards[r.card].cardName,r.cardClass=i.cards[r.card].className,r.outcome===e.PILE_NUM+e.CELL_NUM?(i.isSolved=!0,r.outcomeName="solved!"):r.outcomeName="free "+r.outcome,r.outcomeClass=Qe[Math.min(r.outcome,Qe.length-1)],e.getLine(n).length>1){var c=e.getCard(n,-2);r.takerName=i.cards[c].cardName,r.takerClass=i.cards[c].className}else r.takerName=function(e,t){return e.isBase(t)?"base":e.isPile(t)?"pile":e.isCell(t)?"cell":"unknown index:"+t}(e,n),r.takerClass="";i.items[a]=r}else"solved!"===r.outcomeName&&(i.isSolved=!0)},i}return o(n,[{key:"ngOnInit",value:function(){for(var e=this,t=0;t<Me.a;t++)this.cards[t]={className:"history-item-"+Object(Me.i)(t),cardName:Object(Me.f)(t)};this._addSubscription(this._gameService.subscribe((function(t){var n;(e._gameService.isFirstChange||t.deal!==(null===(n=e._gameService.previousState)||void 0===n?void 0:n.deal))&&(e.isSolved=!1,e.items.length=0),t.path&&(e.isSolved=!1,Object(Oe.b)(t,e.onMoveCallback),e.items.splice(t.path.length/2)),e.selection=t.mark-1})))}},{key:"setSelection",value:function(e){this.selection!==e&&e<=this.items.length&&e>=-1&&(this._gameService.mark=e+1)}}]),n}(L)).\u0275fac=function(e){return new(e||Pe)(y.Lb(R.a))},Pe.\u0275cmp=y.Fb({type:Pe,selectors:[["app-freecell-history"]],features:[y.wb],decls:8,vars:4,consts:[["color","accent",4,"ngIf"],[3,"value","valueChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["color","accent"],[1,"history-item"]],template:function(e,t){1&e&&(y.Rb(0,"mat-form-field"),y.Rb(1,"mat-label"),y.yc(2,Te,2,0,"mat-icon",0),y.Ac(3," Game History: "),y.Qb(),y.Rb(4,"mat-select",1),y.Yb("valueChange",(function(e){return t.setSelection(e)})),y.Rb(5,"mat-option",2),y.Ac(6,"Start"),y.Qb(),y.yc(7,xe,11,11,"mat-option",3),y.Qb(),y.Qb()),2&e&&(y.zb(2),y.ic("ngIf",t.isSolved),y.zb(2),y.ic("value",t.selection),y.zb(1),y.ic("value",-1),y.zb(2),y.ic("ngForOf",t.items))},directives:[Ae.b,Ae.f,u.l,Le.a,Ee.i,u.k,B.a],styles:["div.history-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.history-item-diamonds[_ngcontent-%COMP%], .history-item-hearts[_ngcontent-%COMP%]{color:red}.history-item-clubs[_ngcontent-%COMP%], .history-item-spades[_ngcontent-%COMP%]{color:#000}.danger-critical[_ngcontent-%COMP%], .danger-extreme[_ngcontent-%COMP%], .danger-high[_ngcontent-%COMP%], .danger-low[_ngcontent-%COMP%], .danger-moderate[_ngcontent-%COMP%], .danger-very-high[_ngcontent-%COMP%], .danger-very-low[_ngcontent-%COMP%]{min-width:4em;padding-left:.25em;padding-right:.25em}.danger-very-low[_ngcontent-%COMP%]{background-color:#bbee90}.danger-low[_ngcontent-%COMP%]{background-color:#bbdd85}.danger-moderate[_ngcontent-%COMP%]{background-color:#bbcc80}.danger-high[_ngcontent-%COMP%]{background-color:#ffee30}.danger-very-high[_ngcontent-%COMP%]{background-color:#fc0}.danger-extreme[_ngcontent-%COMP%]{background-color:#ff9920}.danger-critical[_ngcontent-%COMP%]{background-color:#ff5540}"]}),Pe);function Ie(e,t){if(1&e&&y.Mb(0,"app-freecell-action-buttons",11),2&e){var n=y.cc();y.ic("noLabel",n.noLabel)}}function Ne(e,t){1&e&&(y.Rb(0,"div",12),y.Mb(1,"app-freecell-history"),y.Qb())}function ze(e,t){if(1&e){var n=y.Sb();y.Rb(0,"button",13),y.Yb("click",(function(){y.pc(n);var e=y.cc();return e.settings.set({enableDarkMode:!e.settings.state.enableDarkMode})})),y.Rb(1,"mat-icon"),y.Ac(2),y.Qb(),y.Qb(),y.Rb(3,"button",14),y.Yb("click",(function(){return y.pc(n),y.cc().settingsChange.emit()})),y.Rb(4,"mat-icon"),y.Ac(5,"settings"),y.Qb(),y.Qb()}if(2&e){var i=y.cc();y.zb(2),y.Bc(i.settings.state.enableDarkMode?"brightness_3":"brightness_7")}}function je(e,t){1&e&&y.Nb(0)}function Be(e,t){1&e&&y.Nb(0)}function Fe(e,t){if(1&e&&(y.yc(0,je,1,0,"ng-container",15),y.Mb(1,"span",16),y.yc(2,Be,1,0,"ng-container",15)),2&e){y.cc();var n=y.nc(3),i=y.nc(5);y.ic("ngTemplateOutlet",n),y.zb(2),y.ic("ngTemplateOutlet",i)}}function Ye(e,t){1&e&&y.Nb(0)}function Xe(e,t){if(1&e&&(y.Mb(0,"span",16),y.yc(1,Ye,1,0,"ng-container",15),y.Mb(2,"span",16)),2&e){y.cc();var n=y.nc(1);y.zb(1),y.ic("ngTemplateOutlet",n)}}function Ue(e,t){1&e&&y.Nb(0)}function We(e,t){1&e&&y.Nb(0)}function He(e,t){1&e&&y.Nb(0)}function Ge(e,t){if(1&e&&(y.yc(0,Ue,1,0,"ng-container",15),y.yc(1,We,1,0,"ng-container",15),y.yc(2,He,1,0,"ng-container",15)),2&e){y.cc();var n=y.nc(3),i=y.nc(9),a=y.nc(5);y.ic("ngTemplateOutlet",n),y.zb(1),y.ic("ngTemplateOutlet",i),y.zb(1),y.ic("ngTemplateOutlet",a)}}function Ke(e,t){1&e&&y.Nb(0)}function qe(e,t){if(1&e&&(y.Pb(0),y.yc(1,Ke,1,0,"ng-container",15),y.Ob()),2&e){y.cc();var n=y.nc(11);y.zb(1),y.ic("ngTemplateOutlet",n)}}function Ve(e,t){1&e&&y.Nb(0)}function Ze(e,t){if(1&e&&(y.Pb(0),y.yc(1,Ve,1,0,"ng-container",15),y.Ob()),2&e){y.cc();var n=y.nc(9);y.zb(1),y.ic("ngTemplateOutlet",n)}}function Je(e,t){1&e&&y.Nb(0)}function $e(e,t){if(1&e&&(y.Rb(0,"mat-toolbar-row"),y.yc(1,Je,1,0,"ng-container",15),y.Qb()),2&e){y.cc();var n=y.nc(9);y.zb(1),y.ic("ngTemplateOutlet",n)}}function et(e,t){1&e&&y.Nb(0)}function tt(e,t){if(1&e&&(y.Rb(0,"mat-toolbar",17),y.yc(1,et,1,0,"ng-container",15),y.Qb()),2&e){y.cc();var n=y.nc(7);y.zb(1),y.ic("ngTemplateOutlet",n)}}var nt,it=["*"],at=Z.b.XSmall,rt=Z.b.Small,ct=Z.b.Large,ot=Z.b.XLarge,st=((nt=function(e){l(n,e);var t=d(n);function n(e,i){var a;return r(this,n),(a=t.call(this)).settings=i,a.settingsChange=new y.n,a.noLabel=!1,a.rowNum=3,a._addSubscription(e.observe([at,rt,ct,ot]).subscribe((function(e){a.noLabel=e.breakpoints[at]||e.breakpoints[rt],a.rowNum=e.breakpoints[at]?3:e.breakpoints[ct]||e.breakpoints[ot]?1:2}))),a}return o(n,[{key:"ngOnInit",value:function(){}}]),n}(L)).\u0275fac=function(e){return new(e||nt)(y.Lb(Z.a),y.Lb(M.a))},nt.\u0275cmp=y.Fb({type:nt,selectors:[["app-freecell-sandwich"]],outputs:{settingsChange:"settingsChange"},features:[y.wb],ngContentSelectors:it,decls:23,vars:6,consts:[["actionButtons",""],["history",""],["settingsButtons",""],["toolbarRow3",""],["toolbarRow2",""],["toolbarRow1",""],[3,"sandwichOrder","hideFooter","sandwichOrderChange"],["appSandwichHeader","","color","primary"],[2,"margin-right","20px"],[4,"ngIf"],["appSandwichFooter","","color","primary",4,"ngIf"],[3,"noLabel"],[1,"mat-typography","padding-top-half-rem"],["mat-icon-button","",3,"click"],["mat-icon-button","",2,"margin-right","40px",3,"click"],[4,"ngTemplateOutlet"],[1,"flex-space-filler-1"],["appSandwichFooter","","color","primary"]],template:function(e,t){1&e&&(y.hc(),y.yc(0,Ie,1,1,"ng-template",null,0,y.zc),y.yc(2,Ne,2,0,"ng-template",null,1,y.zc),y.yc(4,ze,6,1,"ng-template",null,2,y.zc),y.yc(6,Fe,3,2,"ng-template",null,3,y.zc),y.yc(8,Xe,3,1,"ng-template",null,4,y.zc),y.yc(10,Ge,3,3,"ng-template",null,5,y.zc),y.Rb(12,"app-sandwich",6),y.Yb("sandwichOrderChange",(function(e){return t.settings.set({sandwichOrder:e})})),y.Rb(13,"mat-toolbar",7),y.Rb(14,"mat-toolbar-row"),y.Rb(15,"span"),y.Ac(16,"Freecell"),y.Qb(),y.Mb(17,"app-freecell-deal-menu",8),y.yc(18,qe,2,1,"ng-container",9),y.yc(19,Ze,2,1,"ng-container",9),y.Qb(),y.yc(20,$e,2,1,"mat-toolbar-row",9),y.Qb(),y.gc(21,0,["appSandwichContent",""]),y.yc(22,tt,2,1,"mat-toolbar",10),y.Qb()),2&e&&(y.zb(12),y.ic("sandwichOrder",t.settings.state.sandwichOrder)("hideFooter",2>t.rowNum),y.zb(6),y.ic("ngIf",1===t.rowNum),y.zb(1),y.ic("ngIf",2===t.rowNum),y.zb(1),y.ic("ngIf",t.rowNum>=3),y.zb(2),y.ic("ngIf",t.rowNum>1))},directives:[be,he.a,he.c,me,u.l,Re,De,j.a,B.a,u.q],styles:[".padding-top-half-rem[_ngcontent-%COMP%]{padding-top:.5rem}"]}),nt),lt=c("XhcP");function ut(e,t){1&e&&y.Ac(0," Loading stuff...\n")}function dt(e,t){if(1&e){var n=y.Sb();y.Rb(0,"mat-slide-toggle",17),y.Yb("change",(function(e){return y.pc(n),y.cc(2).settings.set({sidenavModeSide:!!e.checked})})),y.Qb()}if(2&e){var i=y.cc(2);y.ic("checked",i.settings.state.sidenavModeSide)}}function ft(e,t){1&e&&y.Mb(0,"mat-progress-bar",18)}function bt(e,t){if(1&e){var n=y.Sb();y.Rb(0,"button",19),y.Yb("click",(function(){return y.pc(n),y.cc(2).settings.set({sidenavClosed:!1})})),y.Rb(1,"mat-icon"),y.Ac(2,"double_arrow"),y.Qb(),y.Qb()}if(2&e){var i=y.cc(2);y.Db("sidenav-open-button-active",!i.sidenavOpened)}}function ht(e,t){if(1&e){var n=y.Sb();y.Rb(0,"div",2),y.Rb(1,"mat-sidenav-container",3),y.Rb(2,"mat-sidenav",4),y.Yb("closedStart",(function(){return y.pc(n),y.cc().settings.set({sidenavClosed:!0})}))("openedChange",(function(e){return y.pc(n),y.cc().sidenavOpened=e})),y.Rb(3,"mat-toolbar",5),y.Rb(4,"button",6),y.Yb("click",(function(){return y.pc(n),y.cc().settings.set({sidenavClosed:!0})})),y.Rb(5,"mat-icon"),y.Ac(6,"close"),y.Qb(),y.Qb(),y.Mb(7,"span",7),y.Rb(8,"span"),y.Ac(9,"Freecell"),y.Qb(),y.Mb(10,"span",7),y.yc(11,dt,1,1,"mat-slide-toggle",8),y.Qb(),y.Rb(12,"mat-action-list"),y.Mb(13,"app-freecell-deal-menu",9),y.Rb(14,"div",10),y.Ac(15,"Actions:"),y.Qb(),y.Rb(16,"button",11),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.undo()})),y.Rb(17,"mat-icon",12),y.Ac(18,"undo"),y.Qb(),y.Ac(19," UNDO "),y.Qb(),y.Rb(20,"button",11),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.redo()})),y.Rb(21,"mat-icon",12),y.Ac(22,"redo"),y.Qb(),y.Ac(23," REDO "),y.Qb(),y.Rb(24,"button",11),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.playNext()})),y.Rb(25,"mat-icon",12),y.Ac(26,"emoji_objects"),y.Qb(),y.Rb(27,"span"),y.Ac(28,"AUTO"),y.Qb(),y.Qb(),y.Rb(29,"button",11),y.Yb("click",(function(){return y.pc(n),y.cc().actionService.assist()})),y.Rb(30,"mat-icon",12),y.Ac(31,"assistant"),y.Qb(),y.Rb(32,"span"),y.Ac(33,"ASSIST"),y.Qb(),y.yc(34,ft,1,0,"mat-progress-bar",13),y.Qb(),y.Qb(),y.Rb(35,"div",14),y.Mb(36,"app-freecell-history"),y.Qb(),y.Mb(37,"span",7),y.Mb(38,"mat-divider"),y.Rb(39,"mat-action-list"),y.Rb(40,"button",15),y.Yb("click",(function(){y.pc(n);var e=y.cc();return e.settings.set({enableDarkMode:!e.settings.state.enableDarkMode})})),y.Rb(41,"mat-icon"),y.Ac(42),y.Qb(),y.Rb(43,"span"),y.Ac(44,"THEME"),y.Qb(),y.Qb(),y.Rb(45,"button",15),y.Yb("click",(function(){return y.pc(n),y.cc().settingsChange.emit()})),y.Rb(46,"mat-icon"),y.Ac(47,"settings"),y.Qb(),y.Rb(48,"span"),y.Ac(49,"SETTINGS"),y.Qb(),y.Qb(),y.Qb(),y.Qb(),y.Rb(50,"mat-sidenav-content"),y.gc(51),y.yc(52,bt,3,2,"button",16),y.Qb(),y.Qb(),y.Qb()}if(2&e){var i=t.ngIf,a=y.cc();y.zb(2),y.ic("mode",!a.settings.state.sidenavModeSide||i.breakpoints[a.BP_XS]?"over":"side")("opened",!a.settings.state.sidenavClosed),y.zb(9),y.ic("ngIf",!i.breakpoints[a.BP_XS]),y.zb(2),y.ic("listItem",!0),y.zb(3),y.ic("disabled",!a.actionService.state.canUndo),y.zb(1),y.ic("ngClass",a.actionService.state.canUndo?"mat-primary":"disabled-color"),y.zb(3),y.ic("disabled",!a.actionService.state.canRedo),y.zb(1),y.ic("ngClass",a.actionService.state.canRedo?"mat-primary":"disabled-color"),y.zb(3),y.ic("disabled",!a.actionService.state.nextMove),y.zb(1),y.ic("ngClass",a.actionService.state.nextMove?"mat-accent":"disabled-color"),y.zb(4),y.ic("disabled",!a.actionService.state.canAssist),y.zb(1),y.ic("ngClass",a.actionService.state.canAssist?"mat-warn":"disabled-color"),y.zb(4),y.ic("ngIf",a.actionService.state.assistRequest),y.zb(8),y.Bc(a.settings.state.enableDarkMode?"brightness_3":"brightness_7"),y.zb(10),y.ic("ngIf",a.settings.state.sidenavClosed)}}var gt,pt=["*"],vt=Z.b.XSmall,mt=Z.b.Small,_t=Z.b.Medium,kt=Z.b.Large,yt=Z.b.XLarge,St=((gt=function(){function e(t,n,i){r(this,e),this.actionService=t,this.settings=n,this.settingsChange=new y.n,this.BP_XS=vt,this.BP_SM=mt,this.BP_MD=_t,this.BP_LG=kt,this.BP_XL=yt,this.sidenavOpened=!1,this.breakpoints$=i.observe([vt,mt,_t,kt,yt])}return o(e,[{key:"isXSmall",value:function(e){return e.breakpoints[Z.b.XSmall]}},{key:"getSideNavMode",value:function(e){return e.breakpoints[vt]?"over":"side"}}]),e}()).\u0275fac=function(e){return new(e||gt)(y.Lb(v.a),y.Lb(M.a),y.Lb(Z.a))},gt.\u0275cmp=y.Fb({type:gt,selectors:[["app-freecell-sidenav"]],outputs:{settingsChange:"settingsChange"},ngContentSelectors:pt,decls:4,vars:3,consts:[["loading",""],["class","freecell-container",4,"ngIf"],[1,"freecell-container"],[1,"freecell-sidenav-container"],[3,"mode","opened","closedStart","openedChange"],["color","primary",1,"freecell-toolbar"],["mat-icon-button","",3,"click"],[1,"flex-space-filler-1"],["color","primary",3,"checked","change",4,"ngIf"],[3,"listItem"],["mat-subheader",""],["mat-list-item","",3,"disabled","click"],[3,"ngClass"],["mode","indeterminate","color","warn",4,"ngIf"],[2,"padding","1em"],["mat-list-item","",3,"click"],["class","sidenav-open-button","mat-icon-button","","color","primary",3,"sidenav-open-button-active","click",4,"ngIf"],["color","primary",3,"checked","change"],["mode","indeterminate","color","warn"],["mat-icon-button","","color","primary",1,"sidenav-open-button",3,"click"]],template:function(e,t){1&e&&(y.hc(),y.yc(0,ut,1,0,"ng-template",null,0,y.zc),y.yc(2,ht,53,15,"div",1),y.dc(3,"async")),2&e&&(y.zb(2),y.ic("ngIf",y.ec(3,1,t.breakpoints$)))},directives:[u.l,lt.b,lt.a,he.a,j.a,B.a,ve.a,me,ve.d,ve.b,u.j,De,X.a,lt.c,z.a,_e.a],pipes:[u.b],styles:["button.sidenav-open-button[_ngcontent-%COMP%]{position:absolute;left:-64px;top:1px;transition:left 2s 1s}button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-12px}@media (min-width:600px) and (max-width:959.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-9px}}@media (min-width:960px) and (max-width:1279.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-6px}}@media (min-width:1280px) and (max-width:1919.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-3px}}@media (min-width:1920px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:0}}.freecell-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}.freecell-sidenav-container[_ngcontent-%COMP%]{flex:1}"]}),gt);function wt(e,t){1&e&&y.gc(0)}function Ct(e,t){if(1&e){var n=y.Sb();y.Rb(0,"app-freecell-sandwich",4),y.Yb("settingsChange",(function(){return y.pc(n),y.cc().openSettingsDialog()})),y.Nb(1,3),y.Qb()}if(2&e){y.cc();var i=y.nc(1);y.zb(1),y.ic("ngTemplateOutlet",i)}}function Rt(e,t){if(1&e){var n=y.Sb();y.Rb(0,"app-freecell-sidenav",4),y.Yb("settingsChange",(function(){return y.pc(n),y.cc().openSettingsDialog()})),y.Nb(1,3),y.Qb()}if(2&e){y.cc();var i=y.nc(1);y.zb(1),y.ic("ngTemplateOutlet",i)}}var Mt,Ot=["*"],At=((Mt=function(){function e(t,n){r(this,e),this.settings=t,this.dialog=n}return o(e,[{key:"ngOnInit",value:function(){}},{key:"openSettingsDialog",value:function(){this.dialog.open(V,{maxHeight:"100vh"})}}]),e}()).\u0275fac=function(e){return new(e||Mt)(y.Lb(M.a),y.Lb(I.b))},Mt.\u0275cmp=y.Fb({type:Mt,selectors:[["app-freecell-view"]],ngContentSelectors:Ot,decls:7,vars:1,consts:[["portal",""],["sandwich",""],["sidenav",""],[3,"ngTemplateOutlet"],[3,"settingsChange"]],template:function(e,t){if(1&e&&(y.hc(),y.yc(0,wt,1,0,"ng-template",null,0,y.zc),y.yc(2,Ct,2,1,"ng-template",null,1,y.zc),y.yc(4,Rt,2,1,"ng-template",null,2,y.zc),y.Nb(6,3)),2&e){var n=y.nc(3),i=y.nc(5);y.zb(6),y.ic("ngTemplateOutlet","sidenav"===t.settings.state.view?i:n)}},directives:[u.q,st,St],styles:[""]}),Mt);function Lt(e,t,n){return e+(t-e)*n}var Et=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;r(this,e),this.basis=t,this.itemWidth=a,this.itemHeight=c,this.deltaWidth=n,this.deltaHeight=i/2,this.cellStartX=n,this.cellStartY=this.deltaHeight,this.cellEndX=this.cellStartX+t.CELL_NUM*(a+n)-n,this.cellEndY=this.cellStartY+c,this.baseStartX=this.cellEndX+n,this.baseStartY=this.cellStartY,this.baseEndX=this.baseStartX+t.BASE_NUM*(a+n)-n,this.baseEndY=this.cellEndY,this.pileStartX=n,this.pileStartY=this.cellEndY+this.deltaHeight,this.pileEndX=this.pileStartX+t.PILE_NUM*(a+n)-n,this.pileEndY=this.pileStartY+4.5*c}return o(e,[{key:"getCellX",value:function(e){return Lt(this.cellStartX,this.cellEndX-this.itemWidth,e/(this.basis.CELL_NUM-1))}},{key:"getCellY",value:function(e){return this.cellStartY}},{key:"getBaseX",value:function(e){return Lt(this.baseStartX,this.baseEndX-this.itemWidth,e/(this.basis.BASE_NUM-1))}},{key:"getBaseY",value:function(e){return this.baseStartY}},{key:"getPileX",value:function(e){return Lt(this.pileStartX,this.pileEndX-this.itemWidth,e/(this.basis.PILE_NUM-1))}},{key:"getPileY",value:function(e){return this.pileStartY}},{key:"getSpotPosition",value:function(e){var t=this.basis;return t.isBase(e)?{x:this.getBaseX(e-=t.BASE_START),y:this.getBaseY(e)}:t.isCell(e)?{x:this.getCellX(e-=t.CELL_START),y:this.getCellY(e)}:t.isPile(e)?{x:this.getPileX(e-=t.PILE_START),y:this.getPileY(e)}:{x:0,y:0}}},{key:"getCardPosition",value:function(e,t,n){var i=this.basis,a=this.getSpotPosition(e);if(i.isPile(e)&&n>0){var r=Math.min((this.pileEndY-this.pileStartY-this.itemHeight)/(n-1),.4*this.itemHeight);a.y+=r*t}return a}},{key:"width",get:function(){return this.deltaWidth+Math.max(this.baseEndX,this.cellEndX,this.pileEndX)}},{key:"height",get:function(){return this.deltaHeight+Math.max(this.baseEndY,this.cellEndY,this.pileEndY)}}]),e}();function Tt(e,t){if(1&e&&(y.Rb(0,"div"),y.Rb(1,"p"),y.Ac(2),y.Qb(),y.Rb(3,"p"),y.Ac(4),y.Qb(),y.Rb(5,"p"),y.Ac(6),y.Qb(),y.Qb()),2&e){var n=y.cc();y.zb(2),y.Cc("DEAL: ",n.deal,""),y.zb(2),y.Cc("MARK: ",n.mark,""),y.zb(2),y.Cc("PATH: ",n.path,"")}}var xt,Pt=((xt=function(e){l(n,e);var t=d(n);function n(e,i,a){var c;return r(this,n),(c=t.call(this))._router=e,c._route=i,c._gameService=a,c.debug=!1,c._lock=!1,c}return o(n,[{key:"_update",value:function(e){var t=this,n=e.path||"",i=parseInt(e.deal,10);(isNaN(i)||i<0)&&(i=-1);var a=parseInt(e.mark,10);(isNaN(a)||a<0||a+a>n.length)&&(a=Math.floor(n.length/2)),i!==this.deal||n!==this.path||a!==this.mark?(this.deal=i,this.path=n,this.mark=a,this._lock=!0,Promise.resolve().then((function(){var e=t._gameService.state;e.deal===i&&e.path===n&&e.mark===a||t._gameService.set(i,n,a)})).finally((function(){return t._lock=!1}))):this._lock=!1}},{key:"ngOnInit",value:function(){var e=this;this._lock=!0,this._addSubscription(this._gameService.subscribe((function(t){e._lock||e.deal===t.deal&&e.path===t.path&&e.mark===t.mark||(e.deal=t.deal,e.path=t.path,e.mark=t.mark,e.updateAddressBar(t.deal,t.path,t.mark))}))),this._addSubscription(this._route.queryParams.subscribe((function(t){return e._update(t)})))}},{key:"updateAddressBar",value:function(e,t,n){return t?"number"==typeof n&&n+n===t.length&&(n=void 0):(t=void 0,n=void 0),this._router.navigate(["."],{relativeTo:this._route,queryParams:{deal:e,path:t,mark:n}})}}]),n}(L)).\u0275fac=function(e){return new(e||xt)(y.Lb(h.b),y.Lb(h.a),y.Lb(R.a))},xt.\u0275cmp=y.Fb({type:xt,selectors:[["app-freecell-router"]],inputs:{debug:"debug"},features:[y.wb],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&y.yc(0,Tt,7,3,"div",0),2&e&&y.ic("ngIf",t.debug)},directives:[u.l],styles:[""]}),xt),Qt=c("zh6y"),Dt=c("dqHA"),It=["spot"];function Nt(e,t){if(1&e){var n=y.Sb();y.Rb(0,"div",3,4),y.Yb("click",(function(){y.pc(n);var e=t.index,i=y.cc();return i.selectionChange.emit(i.selection===e?-1:e)})),y.Qb()}if(2&e){var i=t.$implicit,a=t.index,r=y.cc();y.Db("freecell_selection",r.selection===a),y.ic("ngClass",i.ngClass)("ngStyle",i.ngStyle)("matRippleDisabled",!r.settings.state.enableRipples)}}function zt(e,t){1&e&&(y.Pb(0),y.Mb(1,"object",5),y.Ob())}var jt,Bt,Ft=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],Yt=["[appFreecellBackground]","[appFreecellForeground]"],Xt=((jt=function(){function e(t,n){r(this,e),this.settings=t,this.action=n,this.selection=-1,this.selectionChange=new y.n,this.touchChange=new y.n,this.spots=[]}return o(e,[{key:"ngOnInit",value:function(){}},{key:"layout",set:function(e){this.spots=function(e){var t=[];if(e)for(var n=e.basis,i=e.itemWidth,a=e.itemHeight,r=Object(A.m)(i,e.width),c=Object(A.m)(a,e.height),o=0;o<n.DESK_SIZE;o++){var s=e.getSpotPosition(o),l={ngStyle:{transform:"translate(".concat(Object(A.m)(s.x,i),", ").concat(Object(A.m)(s.y,a),")"),width:r,height:c},ngClass:{}};n.isBase(o)?(l.ngClass.freecell_base=!0,l.ngClass["freecell_"+Object(Me.i)(o-n.BASE_START)]=!0):n.isCell(o)?l.ngClass.freecell_cell=!0:n.isPile(o)&&(l.ngClass.freecell_pile=!0),t.push(l)}return t}(e)}}]),e}()).\u0275fac=function(e){return new(e||jt)(y.Lb(M.a),y.Lb(v.a))},jt.\u0275cmp=y.Fb({type:jt,selectors:[["app-freecell-playground"]],viewQuery:function(e,t){var n;1&e&&y.Dc(It,!0),2&e&&y.mc(n=y.Zb())&&(t.spotList=n)},inputs:{layout:"layout",selection:"selection"},outputs:{selectionChange:"selectionChange",touchChange:"touchChange"},ngContentSelectors:Yt,decls:5,vars:6,consts:[[1,"freecell_deck",3,"touchstart","touchend","touchcancel","touchmove"],["class","freecell_spot","matRipple","",3,"freecell_selection","ngClass","ngStyle","matRippleDisabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],["matRipple","",1,"freecell_spot",3,"ngClass","ngStyle","matRippleDisabled","click"],["spot",""],["type","image/svg+xml","data","./assets/freecell/fireworks.svg",1,"freecell-fireworks"]],template:function(e,t){1&e&&(y.hc(Ft),y.Rb(0,"div",0),y.Yb("touchstart",(function(e){return t.touchChange.emit({type:"DragStart",event:e})}))("touchend",(function(e){return t.touchChange.emit({type:"DragStop",event:e})}))("touchcancel",(function(e){return t.touchChange.emit({type:"DragStop",event:e})}))("touchmove",(function(e){return t.touchChange.emit({type:"DragMove",event:e})})),y.gc(1),y.yc(2,Nt,2,5,"div",1),y.gc(3,1),y.yc(4,zt,2,0,"ng-container",2),y.Qb()),2&e&&(y.Db("use-svg-background",t.settings.state.deckUseSvg)("freecell_deck_solved",t.action.state.solved&&t.settings.state.enableWinAnimation),y.zb(2),y.ic("ngForOf",t.spots),y.zb(2),y.ic("ngIf",t.action.state.solved&&t.settings.state.enableWinAnimation))},directives:[u.k,u.l,Ee.m,u.j,u.m],styles:[".freecell_deck{width:100%;height:100%;position:relative;background:#cfe url(bg-desk.09c80cb5354cc50b5181.jpg) repeat}.freecell_card,.freecell_spot{cursor:pointer;position:absolute;background-image:url(cards_3.f425b6710669dbc8105a.png);background-size:900% 900%;background-repeat:no-repeat;background-color:transparent}@media (min-width:600px) and (max-width:1279.99px){.freecell_card,.freecell_spot{background-image:url(cards_2.70d80d7fff9de7d2572a.png)}}@media (max-width:599.99px){.freecell_card,.freecell_spot{background-image:url(cards_1.6288bccad84dee6dc98e.png)}}div.use-svg-background .freecell_card,div.use-svg-background .freecell_spot{background-image:url(cards.ebd91e0b7d767203a0cd.svg)}.freecell_spot.freecell_selection{outline-style:dotted;outline-color:#eed;outline-width:medium}.freecell_spot.freecell_selection.freecell_base{outline-color:#bb11a1}.freecell_spot.freecell_selection.freecell_cell{outline-color:#3e8181}.freecell_spot.freecell_pile{background-position:14.84375% 99.21875%}.freecell_spot.freecell_base.freecell_spades{background-position:57.03125% 85.15625%}.freecell_spot.freecell_base.freecell_diamonds{background-position:71.09375% 85.15625%}.freecell_spot.freecell_base.freecell_clubs{background-position:85.15625% 85.15625%}.freecell_spot.freecell_base.freecell_hearts{background-position:99.21875% 85.15625%}.freecell_spot.freecell_cell{background-position:.78125% 99.21875%}.freecell_card.freecell_Ace.freecell_spades{background-position:.78125% .78125%}.freecell_card.freecell_Ace.freecell_diamonds{background-position:14.84375% .78125%}.freecell_card.freecell_Ace.freecell_clubs{background-position:28.90625% .78125%}.freecell_card.freecell_Ace.freecell_hearts{background-position:42.96875% .78125%}.freecell_card.freecell_Two.freecell_spades{background-position:57.03125% .78125%}.freecell_card.freecell_Two.freecell_diamonds{background-position:71.09375% .78125%}.freecell_card.freecell_Two.freecell_clubs{background-position:85.15625% .78125%}.freecell_card.freecell_Two.freecell_hearts{background-position:99.21875% .78125%}.freecell_card.freecell_Three.freecell_spades{background-position:.78125% 14.84375%}.freecell_card.freecell_Three.freecell_diamonds{background-position:14.84375% 14.84375%}.freecell_card.freecell_Three.freecell_clubs{background-position:28.90625% 14.84375%}.freecell_card.freecell_Three.freecell_hearts{background-position:42.96875% 14.84375%}.freecell_card.freecell_Four.freecell_spades{background-position:57.03125% 14.84375%}.freecell_card.freecell_Four.freecell_diamonds{background-position:71.09375% 14.84375%}.freecell_card.freecell_Four.freecell_clubs{background-position:85.15625% 14.84375%}.freecell_card.freecell_Four.freecell_hearts{background-position:99.21875% 14.84375%}.freecell_card.freecell_Five.freecell_spades{background-position:.78125% 28.90625%}.freecell_card.freecell_Five.freecell_diamonds{background-position:14.84375% 28.90625%}.freecell_card.freecell_Five.freecell_clubs{background-position:28.90625% 28.90625%}.freecell_card.freecell_Five.freecell_hearts{background-position:42.96875% 28.90625%}.freecell_card.freecell_Six.freecell_spades{background-position:57.03125% 28.90625%}.freecell_card.freecell_Six.freecell_diamonds{background-position:71.09375% 28.90625%}.freecell_card.freecell_Six.freecell_clubs{background-position:85.15625% 28.90625%}.freecell_card.freecell_Six.freecell_hearts{background-position:99.21875% 28.90625%}.freecell_card.freecell_Seven.freecell_spades{background-position:.78125% 42.96875%}.freecell_card.freecell_Seven.freecell_diamonds{background-position:14.84375% 42.96875%}.freecell_card.freecell_Seven.freecell_clubs{background-position:28.90625% 42.96875%}.freecell_card.freecell_Seven.freecell_hearts{background-position:42.96875% 42.96875%}.freecell_card.freecell_Eight.freecell_spades{background-position:57.03125% 42.96875%}.freecell_card.freecell_Eight.freecell_diamonds{background-position:71.09375% 42.96875%}.freecell_card.freecell_Eight.freecell_clubs{background-position:85.15625% 42.96875%}.freecell_card.freecell_Eight.freecell_hearts{background-position:99.21875% 42.96875%}.freecell_card.freecell_Nine.freecell_spades{background-position:.78125% 57.03125%}.freecell_card.freecell_Nine.freecell_diamonds{background-position:14.84375% 57.03125%}.freecell_card.freecell_Nine.freecell_clubs{background-position:28.90625% 57.03125%}.freecell_card.freecell_Nine.freecell_hearts{background-position:42.96875% 57.03125%}.freecell_card.freecell_Ten.freecell_spades{background-position:57.03125% 57.03125%}.freecell_card.freecell_Ten.freecell_diamonds{background-position:71.09375% 57.03125%}.freecell_card.freecell_Ten.freecell_clubs{background-position:85.15625% 57.03125%}.freecell_card.freecell_Ten.freecell_hearts{background-position:99.21875% 57.03125%}.freecell_card.freecell_Jack.freecell_spades{background-position:.78125% 71.09375%}.freecell_card.freecell_Jack.freecell_diamonds{background-position:14.84375% 71.09375%}.freecell_card.freecell_Jack.freecell_clubs{background-position:28.90625% 71.09375%}.freecell_card.freecell_Jack.freecell_hearts{background-position:42.96875% 71.09375%}.freecell_card.freecell_Queen.freecell_spades{background-position:57.03125% 71.09375%}.freecell_card.freecell_Queen.freecell_diamonds{background-position:71.09375% 71.09375%}.freecell_card.freecell_Queen.freecell_clubs{background-position:85.15625% 71.09375%}.freecell_card.freecell_Queen.freecell_hearts{background-position:99.21875% 71.09375%}.freecell_card.freecell_King.freecell_spades{background-position:.78125% 85.15625%}.freecell_card.freecell_King.freecell_diamonds{background-position:14.84375% 85.15625%}.freecell_card.freecell_King.freecell_clubs{background-position:28.90625% 85.15625%}.freecell_card.freecell_King.freecell_hearts{background-position:42.96875% 85.15625%}@-webkit-keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@-webkit-keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}@keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}.freecell_deck_solved .freecell_card{-webkit-animation-name:animation-card;animation-name:animation-card;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}.freecell_deck_solved .freecell_card.freecell_Ace{-webkit-animation-delay:1.7s;animation-delay:1.7s;-webkit-animation-duration:1.6s;animation-duration:1.6s}.freecell_deck_solved .freecell_card.freecell_Two{-webkit-animation-delay:1.6s;animation-delay:1.6s;-webkit-animation-duration:1.8s;animation-duration:1.8s}.freecell_deck_solved .freecell_card.freecell_Three{-webkit-animation-delay:1.5s;animation-delay:1.5s;-webkit-animation-duration:2s;animation-duration:2s}.freecell_deck_solved .freecell_card.freecell_Four{-webkit-animation-delay:1.4s;animation-delay:1.4s;-webkit-animation-duration:2.2s;animation-duration:2.2s}.freecell_deck_solved .freecell_card.freecell_Five{-webkit-animation-delay:1.3s;animation-delay:1.3s;-webkit-animation-duration:2.4s;animation-duration:2.4s}.freecell_deck_solved .freecell_card.freecell_Six{-webkit-animation-delay:1.2s;animation-delay:1.2s;-webkit-animation-duration:2.6s;animation-duration:2.6s}.freecell_deck_solved .freecell_card.freecell_Seven{-webkit-animation-delay:1.1s;animation-delay:1.1s;-webkit-animation-duration:2.8s;animation-duration:2.8s}.freecell_deck_solved .freecell_card.freecell_Eight{-webkit-animation-delay:1s;animation-delay:1s;-webkit-animation-duration:3s;animation-duration:3s}.freecell_deck_solved .freecell_card.freecell_Nine{-webkit-animation-delay:.9s;animation-delay:.9s;-webkit-animation-duration:3.2s;animation-duration:3.2s}.freecell_deck_solved .freecell_card.freecell_Ten{-webkit-animation-delay:.8s;animation-delay:.8s;-webkit-animation-duration:3.4s;animation-duration:3.4s}.freecell_deck_solved .freecell_card.freecell_Jack{-webkit-animation-delay:.7s;animation-delay:.7s;-webkit-animation-duration:3.6s;animation-duration:3.6s}.freecell_deck_solved .freecell_card.freecell_Queen{-webkit-animation-delay:.6s;animation-delay:.6s;-webkit-animation-duration:3.8s;animation-duration:3.8s}.freecell_deck_solved .freecell_card.freecell_King{-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s}.freecell_deck_solved .freecell_spot{-webkit-animation-name:animation-spot;animation-name:animation-spot;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s}.freecell-fireworks{width:100%;height:100%;background-color:transparent}.app-dark-theme .freecell_deck{background:teal url(bg-desk-dark.be1fcb326a55804c8741.jpg) repeat}.app-dark-theme .freecell_spot.freecell_selection.freecell_cell{outline-color:#aaecec}"],encapsulation:2}),jt),Ut=c("g/AF"),Wt=((Bt=function(){function e(){r(this,e),this.userGesture=new y.n}return o(e,[{key:"handle",value:function(e){this.userGesture.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||Bt)},Bt.\u0275dir=y.Gb({type:Bt,selectors:[["","appGesture",""]],hostBindings:function(e,t){1&e&&y.Yb("keydown",(function(e){return t.handle(e)}),!1,y.oc)("touchstart",(function(e){return t.handle(e)}),!1,y.oc)("mousedown",(function(e){return t.handle(e)}),!1,y.oc)("click",(function(e){return t.handle(e)}),!1,y.oc)},outputs:{userGesture:"userGesture"}}),Bt),Ht=["cards"];function Gt(e,t){if(1&e){var n=y.Sb();y.Rb(0,"div",5),y.Yb("userGesture",(function(e){return y.pc(n),y.cc().activateOnGesture(e)})),y.Qb()}}function Kt(e,t){if(1&e){var n=y.Sb();y.Rb(0,"div",6,7),y.Yb("mousedown",(function(e){y.pc(n);var i=t.index;return y.cc().onMouseDown(e,i)})),y.Qb()}if(2&e){var i=t.$implicit,a=y.cc();y.ic("matRippleDisabled",!a.settings.state.enableRipples)("ngClass",i.ngClass)("ngStyle",i.ngStyle)}}var qt=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],Vt=["[appFreecellBackground]","[appFreecellForeground]"],Zt=["transition_deal","transition_norm","transition_fast"];function Jt(e,t){var i,a=n(Zt);try{for(a.s();!(i=a.n()).done;){var r=i.value;e[r]=r===t}}catch(c){a.e(c)}finally{a.f()}}function $t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"px";return"translate(".concat(e).concat(n,", ").concat(t).concat(n,")")}var en,tn=((en=function(t){l(a,t);var i=d(a);function a(e,t,n,c,o){var s;return r(this,a),(s=i.call(this)).settings=e,s.soundService=t,s._renderer=n,s._playService=c,s._gameService=o,s._dragListener=new Dt.a,s._emptySpotCount=0,s.lineChange=new y.n,s.cards=[],s.spotSelection=-1,s}return o(a,[{key:"ngOnInit",value:function(){var e=this;this._addSubscription(this._gameService.subscribe((function(t){var n;e.layout&&(e._gameService.isFirstChange||t.deal!==(null===(n=e._gameService.previousState)||void 0===n?void 0:n.deal)?e.onDeal():e.onCardMove())}))),this._addSubscription(this._dragListener.dragChange.subscribe((function(t){switch(t){case"DragStart":e._onDragStart();break;case"DragMove":e._onDragMove();break;case"DragStop":e._onDragStop()}})))}},{key:"trackByIndex",value:function(e){return e}},{key:"getTransforms",value:function(e){for(var t=100,n=[],i=this.cardList.toArray(),a=i[e[0]].nativeElement.parentElement.getBoundingClientRect(),r=i[e[0]].nativeElement.getBoundingClientRect(),c=r.left-a.left,o=r.top-a.top,s=r.height/3,l=e.length;l-- >0;){var u=Math.round((c+0*l)*t)/t,d=Math.round((o+s*l)*t)/t;n[l]={x:u,y:d}}return n}},{key:"onTouch",value:function(e){var t=e.type,n=e.event;if(!this.isTouchDisabled)switch(t){case"DragStart":if(n.targetTouches.length>0){var i=n.targetTouches[0],a=this.getCardIndex(i.clientX,i.clientY);if(a>=0){var r=this._gameService.game,c=r.asTablaeu(a),o=this.getTransforms(c);this._dragListener.touchStart(n,{game:r,tableau:c,transforms:o})}}break;case"DragMove":this._dragListener.isTouchDragging&&this._dragListener.touchMove(n);break;case"DragStop":this._dragListener.isTouchDragging&&this._dragListener.stop(n)}}},{key:"onMouseDown",value:function(e,t){if(!this.isMouseDisabled&&(this._playService.stop(),0===e.button)){var n=this._gameService.game,i=n.asTablaeu(t),a=this.getTransforms(i);this._dragListener.mouseStart(e,this._renderer,{game:n,tableau:i,transforms:a})}}},{key:"_onDragStart",value:function(){this._playService.stop();for(var e=this._dragListener.data,t=e.tableau,n=e.transforms,i=t.length;i-- >0;){var a=this.cards[t[i]];a.ngStyle.zIndex+=Me.a,a.ngStyle.transform=$t(n[i].x,n[i].y),a.ngClass.grabbing=!0,Jt(a.ngClass)}}},{key:"_onDragMove",value:function(){for(var e=this._dragListener.data,t=e.tableau,n=e.transforms,i=this._dragListener.pageDeltaX,a=this._dragListener.pageDeltaY,r=t.length;r-- >0;){var c=this.cards[t[r]];c.ngClass.dragging=!0,c.ngStyle.transform=$t(n[r].x+i,n[r].y+a)}(Math.abs(i)>4||Math.abs(a)>4)&&(this._dragListener.data.dragged=!0)}},{key:"_onDragStop",value:function(){var e,t=this._dragListener.data,i=t.game,a=t.tableau,r=t.dragged,c=n(a);try{for(c.s();!(e=c.n()).done;){var o=e.value,s=this.cards[o];s.ngStyle.zIndex-=Me.a,s.ngStyle.transform=this.getCardTransform(i,i.toLine(o),o),delete s.ngClass.grabbing,delete s.ngClass.dragging,Jt(s.ngClass,"transition_fast")}}catch(f){c.e(f)}finally{c.f()}if(r){var l=this.getDestination(i,a);if(l>=0){var u=i.toLine(a[0]);u!==l&&this.lineChange.emit({source:u,destination:l,tableau:a})}}else{var d=i.toLine(a[0]);this.lineChange.emit({source:d,destination:this.spotSelection>=0?this.spotSelection:void 0,tableau:a})}}},{key:"onDeal",value:function(){this.spotSelection=-1;var e=this._gameService.game;this._emptySpotCount=Math.max(e.CELL_NUM,e.countEmpty());for(var t=e.DESK_SIZE;t-- >0;){var i,a=n(e.getLine(t));try{for(a.s();!(i=a.n()).done;){var r=i.value;this.bringToFront(r)}}catch(c){a.e(c)}finally{a.f()}this.updateLine(e,t,"transition_deal")}this.updateZIndex(),this.soundService.play("deal")}},{key:"updateZIndex",value:function(){if(this.cards.length>1)for(var e=1,t=this.cards[0].list.head;t;t=t.next)this.cards[t.card].ngStyle.zIndex=e++}},{key:"bringToFront",value:function(e){var t=this.cards[e],n=t.list;n&&n.tail&&n.tail!==t&&Object(Qt.a)(n.tail,t)}},{key:"onCardMove",value:function(){this.spotSelection=-1;var e=this._gameService.state,t=this._gameService.previousState||e,i=t.path.substring(0,2*t.mark),a=e.path.substring(0,2*e.mark),r=new Set,c=Object(Ut.a)(i,a),o=[];t.mark>c&&(Object(Oe.c)(t,(function(e,t,n,i){i>=c&&(r.add(t),r.add(n),o.push(e.getCard(n,-1)))})),o.reverse()),e.mark>c&&Object(Oe.c)(e,(function(e,t,n,i){i>=c&&(r.add(t),r.add(n),o.push(e.getCard(n,-1)))}));for(var s=0,l=o;s<l.length;s++){var u=l[s];this.bringToFront(u)}this.updateZIndex();var d,f=r.size>2?"transition_fast":"transition_norm",b=this._gameService.game,h=n(r.keys());try{for(h.s();!(d=h.n()).done;){var g=d.value;this.updateLine(b,g,f)}}catch(v){h.e(v)}finally{h.f()}"transition_fast"===f?this.soundService.play("shuffle"):"transition_norm"===f&&this.soundService.play("card");var p=b.countEmpty();p>this._emptySpotCount&&(this._emptySpotCount=p,this.soundService.play("victory"))}},{key:"createCards",value:function(){var t=[],n=this.layout;if(n){for(var i=Object(A.m)(n.itemWidth,n.width),a=Object(A.m)(n.itemHeight,n.height),r=0;r<Me.a;r++){var c,o={card:r,ngStyle:{width:i,height:a,zIndex:r},ngClass:(c={freecell_card:!0},e(c,"freecell_"+Object(Me.i)(r),!0),e(c,"freecell_"+Object(Me.g)(r),!0),c)};t.push(o)}Object(Qt.b).apply(void 0,t)}return t}},{key:"getCardTransform",value:function(e,t,n){var i=this.layout.getCardPosition(t,e.toSpot(n),e.getLine(t).length);return"translate(".concat(Object(A.m)(i.x,this.layout.itemWidth),", ").concat(Object(A.m)(i.y,this.layout.itemHeight),")")}},{key:"updateLine",value:function(e,t){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"transition_norm",r=n(e.getLine(t));try{for(r.s();!(i=r.n()).done;){var c=i.value,o=this.cards[c];o.ngStyle.transform=this.getCardTransform(e,t,c),Jt(o.ngClass,a)}}catch(s){r.e(s)}finally{r.f()}}},{key:"getDestination",value:function(e,t){var n,i=0,a=-1;if(t.length>0&&this.cardList){for(var r=this.cardList.toArray(),c=r[t[0]].nativeElement.getBoundingClientRect(),o=r.length;o-- >0;)if(t.indexOf(o)<0){var s=r[o].nativeElement.getBoundingClientRect(),l=Object(A.j)(c,s);l>i&&(i=l,a=e.toLine(o))}if(null===(n=this.playground)||void 0===n?void 0:n.spotList)for(var u=this.playground.spotList.toArray(),d=u.length;d-- >0;){var f=u[d].nativeElement.getBoundingClientRect(),b=Object(A.j)(c,f);b>i&&(i=b,a=d)}}return a}},{key:"getCardIndex",value:function(e,t){var n=-1;if(this.cardList)for(var i=this.cardList.toArray(),a=i.length;a-- >0;){var r=i[a].nativeElement.getBoundingClientRect();r.left<=e&&e<=r.right&&r.top<=t&&t<=r.bottom&&(n<0||this.cards[n].ngStyle.zIndex<this.cards[a].ngStyle.zIndex)&&(n=a)}return n}},{key:"activateOnGesture",value:function(e){e.isTrusted&&this.soundService.activate()}},{key:"layout",get:function(){return this._layout},set:function(e){this._layout!==e&&(this._layout=e,this.layout&&(this.cards=this.createCards(),this.onDeal()))}},{key:"isTouchDisabled",get:function(){return!(this.settings.state.inputMode&M.b.Touch)}},{key:"isMouseDisabled",get:function(){return!(this.settings.state.inputMode&M.b.Mouse)}}]),a}(L)).\u0275fac=function(e){return new(e||en)(y.Lb(M.a),y.Lb(P),y.Lb(y.E),y.Lb(m.a),y.Lb(R.a))},en.\u0275cmp=y.Fb({type:en,selectors:[["app-freecell-deck"]],viewQuery:function(e,t){var n;1&e&&(y.Dc(Xt,!0),y.Dc(Ht,!0)),2&e&&(y.mc(n=y.Zb())&&(t.playground=n.first),y.mc(n=y.Zb())&&(t.cardList=n))},inputs:{layout:"layout"},outputs:{lineChange:"lineChange"},features:[y.wb],ngContentSelectors:Vt,decls:7,vars:5,consts:[["appGesture","",3,"userGesture",4,"ngIf"],[3,"layout","selection","selectionChange","touchChange"],["appFreecellBackground",""],["appFreecellForeground",""],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],["appGesture","",3,"userGesture"],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown"],["cards",""]],template:function(e,t){1&e&&(y.hc(qt),y.yc(0,Gt,1,0,"div",0),y.Rb(1,"app-freecell-playground",1),y.Yb("selectionChange",(function(e){return t.spotSelection=e}))("touchChange",(function(e){return t.onTouch(e)})),y.Pb(2,2),y.gc(3),y.Ob(),y.Pb(4,3),y.yc(5,Kt,2,3,"div",4),y.gc(6,1),y.Ob(),y.Qb()),2&e&&(y.ic("ngIf",t.soundService.enabled&&!t.soundService.activated),y.zb(1),y.ic("layout",t.layout)("selection",t.spotSelection),y.zb(4),y.ic("ngForOf",t.cards)("ngForTrackBy",t.trackByIndex))},directives:[u.l,Xt,u.k,Wt,Ee.m,u.j,u.m],styles:[".freecell_card.transition_deal[_ngcontent-%COMP%]{transition:transform 1.5s cubic-bezier(.6,-.5,.25,1.5)}.freecell_card.transition_norm[_ngcontent-%COMP%]{transition:transform .5s ease-out}.freecell_card.transition_fast[_ngcontent-%COMP%]{transition:transform .25s linear}.freecell_card.grabbing[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing;transition:transform .15s ease-in-out}.freecell_card.grabbing.dragging[_ngcontent-%COMP%]{transition:none;opacity:.75}"]}),en);function nn(e,t){if(1&e){var n=y.Sb();y.Rb(0,"app-freecell-deck",4),y.Yb("lineChange",(function(e){return y.pc(n),y.cc().onLineChange(e)})),y.Pb(1,5),y.gc(2),y.Ob(),y.Qb()}if(2&e){var i=y.cc();y.ic("layout",i.layout)}}var an,rn,cn,on=["*"],sn=((an=function(e){l(n,e);var t=d(n);function n(e,i,a,c){var o;return r(this,n),(o=t.call(this)).settings=e,o._gameService=i,o._playService=a,o._addSubscription(c.subscribe((function(e){return o.layout=new Et(c.basis)}))),o}return o(n,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){s(b(n.prototype),"ngOnDestroy",this).call(this)}},{key:"onLineChange",value:function(e){var t=this;this._playService.stop();var n=this._gameService.game,i="";(i=void 0===e.destination?n.solveFor(e.tableau,e.source):n.getBestPath(e.tableau,e.destination))&&(this._gameService.move(i.charCodeAt(0),i.charCodeAt(1)),(i=i.substring(2))&&this._playService.play((function(){return t._gameService.move(i.charCodeAt(0),i.charCodeAt(1)),(i=i.substring(2)).length>0})))}}]),n}(L)).\u0275fac=function(e){return new(e||an)(y.Lb(M.a),y.Lb(R.a),y.Lb(m.a),y.Lb(_.a))},an.\u0275cmp=y.Fb({type:an,selectors:[["app-freecell-main"]],features:[y.wb],ngContentSelectors:on,decls:5,vars:3,consts:[[1,"freecell-content"],[1,"freecell-content-outer"],[1,"freecell-content-inner"],[3,"layout","lineChange",4,"ngIf"],[3,"layout","lineChange"],["appFreecellBackground",""]],template:function(e,t){1&e&&(y.hc(),y.Mb(0,"app-freecell-router"),y.Rb(1,"div",0),y.Rb(2,"div",1),y.Rb(3,"div",2),y.yc(4,nn,3,1,"app-freecell-deck",3),y.Qb(),y.Qb(),y.Qb()),2&e&&(y.zb(1),y.vc("padding-top",100*t.settings.state.aspectRatio,"%"),y.zb(3),y.ic("ngIf",t.layout))},directives:[Pt,u.l,tn],styles:[".freecell-content[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;padding:1px}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]   .freecell-content-inner[_ngcontent-%COMP%]{width:100%;height:100%}"]}),an),ln=[{path:"",component:(rn=function(e){l(n,e);var t=d(n);function n(e,i,a,c){var o;r(this,n),(o=t.call(this)).settings=e,o.info="".concat(Q.a," ver.").concat(Q.b),e.subscribe((function(t){var n,i=null===(n=e.previousState)||void 0===n?void 0:n.enableDarkMode,a=t.enableDarkMode;i!==a&&(a?c.getContainerElement().classList.add("app-dark-theme"):c.getContainerElement().classList.remove("app-dark-theme"))}));var s=a.snapshot.queryParams;return(void 0===s.deal||isNaN(parseInt(s.deal,10)))&&i.navigate(["."],{relativeTo:a,queryParams:{deal:Date.now()%2147483648}}),o}return o(n,[{key:"ngOnInit",value:function(){}}]),n}(L),rn.\u0275fac=function(e){return new(e||rn)(y.Lb(M.a),y.Lb(h.b),y.Lb(h.a),y.Lb(D.e))},rn.\u0275cmp=y.Fb({type:rn,selectors:[["app-freecell-demo"]],features:[y.wb],decls:4,vars:3,consts:[[1,"version-info"]],template:function(e,t){1&e&&(y.Rb(0,"app-freecell-view"),y.Rb(1,"app-freecell-main"),y.Rb(2,"div",0),y.Ac(3),y.Qb(),y.Qb(),y.Qb()),2&e&&(y.Db("app-dark-theme",t.settings.state.enableDarkMode),y.zb(3),y.Bc(t.info))},directives:[At,sn],styles:[".version-info[_ngcontent-%COMP%]{font-size:small;position:absolute;bottom:0;right:0}"]}),rn)}],un=((cn=function e(){r(this,e)}).\u0275mod=y.Jb({type:cn}),cn.\u0275inj=y.Ib({factory:function(e){return new(e||cn)},providers:[v.a,m.a,_.a,C,P,R.a,M.a],imports:[[h.c.forChild(ln),u.c,f.d,g.a,p.a],h.c]}),cn)},RDYl:function(e){e.exports=JSON.parse('{"a":"freecell-demo","b":"0.2.3"}')},WxrP:function(i,a,c){"use strict";c.d(a,"b",(function(){return k})),c.d(a,"c",(function(){return y})),c.d(a,"a",(function(){return S}));var u=c("g/AF"),f=c("Bd3B"),h=c("lPNG"),g=c("2MXh"),p=function(e){l(n,e);var t=d(n);function n(e,i,a){var c;r(this,n),(c=t.call(this,e,i,a)).desk=[];for(var o=0;o<c.DESK_SIZE;o++)c.desk.push([]);return c}return o(n,[{key:"toArray",value:function(){return Object(f.a)(this.desk)}},{key:"clear",value:function(){for(var e=this.desk.length;e-- >0;)this.desk[e].length=0}},{key:"addCard",value:function(e,t){this.desk[e].push(t)}},{key:"getCard",value:function(e,t){var n=this.desk[e];return t<0&&(t=n.length+t),t>=0&&t<n.length?n[t]:-1}},{key:"getLine",value:function(e){return this.desk[e]}},{key:"getTableauAt",value:function(e){var t=[],n=this.desk[e],i=n.length;if(i>0)for(t.push(n[i-1]);--i>0&&Object(h.e)(n[i-1],n[i])&&Object(h.h)(n[i-1])>0;)t.push(n[i-1]);return t.reverse(),t}},{key:"countEmptyCells",value:function(){for(var e=0,t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmptyPiles",value:function(){for(var e=0,t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}},{key:"isSolved",value:function(){for(var e=this.BASE_START;e<this.BASE_END;e++)if(this.desk[e].length<h.b)return!1;return!0}},{key:"countEmpty",value:function(){return this.countEmptyCells()+this.countEmptyPiles()}},{key:"getEmptyCell",value:function(){for(var e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getEmptyPile",value:function(){for(var e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getBase",value:function(e){for(var t=Object(h.j)(e),n=Object(h.h)(e),i=0;i<this.BASE_NUM;i++)if(Object(h.j)(i)===t&&this.desk[i+this.BASE_START].length===n)return i+this.BASE_START;return-1}},{key:"deal",value:function(e){var t=Object(h.d)(e);this.clear();for(var n=0;n<t.length;n++)this.addCard(this.PILE_START+n%this.PILE_NUM,t[n]);return t}},{key:"isMoveValid",value:function(e,t){if(e===t)return!1;if(e<0||e>=this.DESK_SIZE)return!1;if(t<0||t>=this.DESK_SIZE)return!1;var n=this.desk[e].length;if(n<=0)return!1;var i=this.desk[t].length;if(this.isCell(t))return 0===i;var a=this.desk[e][n-1];if(this.isPile(t))return 0===i||Object(h.e)(this.desk[t][i-1],a);if(this.isBase(t)){var r=Object(h.j)(a),c=Object(h.h)(a);return Object(h.j)(t-this.BASE_START)===r&&i===c}return!1}},{key:"moveCard",value:function(e,t){this.addCard(t,this.desk[e].pop())}},{key:"getMoves",value:function(){for(var e=[],t=this.DESK_SIZE;t-- >0;)for(var n=t;n-- >0;)this.isMoveValid(t,n)&&e.push({giver:t,taker:n}),this.isMoveValid(n,t)&&e.push({giver:n,taker:t});return e}}]),n}(g.a),v=function e(t){r(this,e),this.success=t},m=function(e){l(a,e);var i=d(a);function a(e,t,n,c){var o;return r(this,a),(o=i.call(this,e,t,n)).desk=c,o.cardToWatch=-1,o.searchTime=500,o.done=new Set,o.buffers=[[],[]],o.iteration=0,o.path="",o.onMove=function(e,t,n){},o}return o(a,[{key:"stop",value:function(e){throw new v(e)}},{key:"getAllPaths",value:function(){return this.buffers[this.iteration%2]}},{key:"getPath",value:function(){var e=this.buffers[this.iteration%2];return e[e.length-1]}},{key:"clear",value:function(){this.done.clear(),this.buffers[0].length=0,this.buffers[1].length=0,this.iteration=0,this.path=""}},{key:"prepare",value:function(){this.clear(),this.done.add(this.toKey()),this.buffers[0][0]=""}},{key:"nextIteration",value:function(){var e=this.buffers[this.iteration%2];if(this.iteration++,e.length<=0)return!1;var t,i=n(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.skipForward(a),this.findMoves(),this.skipBackward()}}catch(r){i.e(r)}finally{i.f()}return e.length=0,this.buffers[this.iteration%2].length>0}},{key:"solve",value:function(){this.prepare();var e=Date.now();try{for(;this.nextIteration();)Date.now()-e>this.searchTime&&this.stop(!1)}catch(t){if(t instanceof v)return t.success;throw t}return!1}},{key:"skipForward",value:function(e){for(var t=0;t<e.length;t+=2)this.desk[e.charCodeAt(t+1)].push(this.desk[e.charCodeAt(t)].pop());this.path=e}},{key:"skipBackward",value:function(){for(var e=this.path,t=e.length;t>0;t-=2)this.desk[e.charCodeAt(t-2)].push(this.desk[e.charCodeAt(t-1)].pop())}},{key:"move",value:function(e,t,n){this.desk[n].push(this.desk[t].pop());var i=this.toKey();this.done.has(i)||(this.done.add(i),this.buffers[this.iteration%2].push(this.path+String.fromCharCode(t,n)),!(this.cardToWatch<0||this.cardToWatch===e)||this.cardFilter&&!this.cardFilter[e]||this.destinationFilter&&!this.destinationFilter[n]||this.onMove(e,t,n)),this.desk[t].push(this.desk[n].pop())}},{key:"findMoves",value:function(){for(var e=this.cardFilter,t=this.getEmptyCell(),n=this.getEmptyPile(),i=0;i<this.DESK_SIZE;i++){var a=this.desk[i];if(a.length>0){var r=a[a.length-1];if(!e||e[r]){if(!this.isBase(i)){var c=this.getBase(r);c>=0&&this.move(r,i,c)}for(var o=this.PILE_START;o<this.PILE_END;o++)if(o!==i){var s=this.desk[o];s.length>0&&Object(h.e)(s[s.length-1],r)&&this.move(r,i,o)}t>=0&&(this.isCell(i)||this.move(r,i,t)),n>=0&&(!this.isPile(i)||a.length>1)&&this.move(r,i,n)}}}}},{key:"baseToString",value:function(){for(var e="",t=this.BASE_START;t<this.BASE_END;t++)e+=String.fromCharCode(this.desk[t].length);return e}},{key:"pileToString",value:function(){for(var e=[],n=this.PILE_START;n<this.PILE_END;n++)e.push(String.fromCharCode.apply(String,t(this.desk[n])));return e.sort(),e.join(String.fromCharCode(h.a))}},{key:"toKey",value:function(){return this.baseToString()+this.pileToString()}},{key:"getEmptyCell",value:function(){for(var e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getEmptyPile",value:function(){for(var e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"countEmptyCells",value:function(){for(var e=0,t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmptyPiles",value:function(){for(var e=0,t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmpty",value:function(){return this.countEmptyCells()+this.countEmptyPiles()}},{key:"countCardsInBases",value:function(){for(var e=0,t=this.BASE_START;t<this.BASE_END;t++)e+=this.desk[t].length;return e}},{key:"getBase",value:function(e){for(var t=Object(h.j)(e),n=Object(h.h)(e),i=this.BASE_START+t;i<this.BASE_END;i+=h.c)if(this.desk[i].length===n)return i;return-1}},{key:"doneSize",get:function(){return this.done.size}}]),a}(g.a),_=function(t){l(i,t);var n=d(i);function i(e,t,a){var c;return r(this,i),(c=n.call(this,e,t,a)).lineMap=[],c.spotMap=[],c}return o(i,[{key:"toLine",value:function(e){return this.lineMap[e]}},{key:"toSpot",value:function(e){return this.spotMap[e]}},{key:"clear",value:function(){s(b(i.prototype),"clear",this).call(this),this.lineMap.length=0,this.spotMap.length=0}},{key:"addCard",value:function(e,t){s(b(i.prototype),"addCard",this).call(this,e,t),this.lineMap[t]=e,this.spotMap[t]=this.getLine(e).length-1}},{key:"asTablaeu",value:function(e){var t=this.getTableauAt(this.lineMap[e]),n=t.indexOf(e);return n<0?t=[e]:n>0&&t.splice(0,n),t}},{key:"getBestPath",value:function(t,n){if(t.length<=0)return"";var i=t[t.length-1],a=this.lineMap[i];if(this.getCard(a,-1)!==i)return"";if(1===t.length)return this.isMoveValid(a,n)?String.fromCharCode(a,n):"";var r=new m(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray());if(r.cardToWatch=i,r.cardFilter=t.reduce((function(e,t){return e[t]=!0,e}),{}),r.destinationFilter=e({},n,!0),this.isPile(n)&&0===this.getLine(n).length)for(var c=this.PILE_START;c<this.PILE_END;c++)0===this.getLine(c).length&&(r.destinationFilter[c]=!0);if(r.onMove=function(e,n,i){Object(f.b)(r.desk[i],t)&&r.stop(!0)},r.solve()){var o=r.getPath(),s=o.charCodeAt(o.length-1);return s!==n&&(o=function(e,t,n){for(var i=[],a=0;a<e.length;a++){var r=e.charCodeAt(a);r===n?r=t:r===t&&(r=n),i.push(r)}return String.fromCharCode.apply(String,i)}(o,n,s)),o}return""}},{key:"solveFor",value:function(t,n){if(this.getLine(n).length<=0)return"";if(t.length<=0)return"";var i=t[t.length-1];if(this.getCard(n,-1)!==i)return"";var a=new m(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray()),r="",c=0;return a.cardToWatch=this.getCard(n,-1),a.cardFilter=e({},a.cardToWatch,!0),a.onMove=function(){r||(r=a.getPath(),c=1)},a.findMoves(),r?(this.isBase(r.charCodeAt(1))||t.length>1&&(a.cardFilter=t.reduce((function(e,t){return e[t]=!0,e}),{}),a.onMove=function(e,i,o){if(o!==n){var s=Object(f.e)(a.desk[o],t);Object(f.e)(a.desk[n],t,0,s)+s===t.length&&c<s&&(r=a.getPath(),(c=s)===t.length&&a.stop(!0))}},a.solve()),r):r}}]),i}(p);function k(e,t,n){var i=new _(e.pile,e.cell,e.base);i.deal(e.deal);for(var a=0;a+1<e.path.length;a+=2){var r=Object(u.c)(e.path,a),c=Object(u.c)(e.path,a+1);if(!i.isMoveValid(r,c)){n&&n(i,r,c,a/2);break}i.moveCard(r,c),t&&t(i,r,c,a/2)}return i}function y(e,t,n){return k(Object.assign(Object.assign({},e),{path:e.path.substring(0,2*e.mark)}),t,n)}function S(e){var t="";return k(e,(function(e,n,i,a){t=Object(u.b)(t,t.length/2,n,i)}),(function(t,n,i,a){console.warn("Invalid subpath:",e.path.substring(a+a))})),t}},afNV:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){l(n,e);var t=d(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r(this,n),(e=t.call(this,i))._subscriptions=a,e}return o(n,[{key:"_addSubscription",value:function(e){this._subscriptions.push(e)}},{key:"ngOnDestroy",value:function(){this._subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),n}(n("SeXe").a)},dkWW:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("fKvJ"),a=n("fXoL"),c=function(){var e=function(e){l(n,e);var t=d(n);function n(){return r(this,n),t.call(this,200)}return n}(i.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Hb({token:e,factory:e.\u0275fac}),e}()},"g/AF":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return o}));var i=n("voYn"),a=n("dPmG");function r(e,t){return Math.floor(Object(i.a)(e,t).length/2)}function c(e,t){return Object(a.e)(e.charCodeAt(t))}function o(e,t,n,i){return t>0&&i===function(e,t){return c(e,t+t-2)}(e,t)&&n===function(e,t){return c(e,t+t-1)}(e,t)?e.substring(0,t+t-2):e.substring(0,t+t)+function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.c)(t)}(n,i)}},jZWl:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return f}));var i=n("SeXe"),a=n("2MXh"),c=n("fXoL"),u={base:4,cell:4,pile:8},f=function(){var e=function(e){l(n,e);var t=d(n);function n(){var e;return r(this,n),(e=t.call(this,u))._basis=new a.a(u.pile,u.cell,u.base),e}return o(n,[{key:"_validate",value:function(e){return e.base>0&&e.cell>0&&e.pile>0&&(e=s(b(n.prototype),"_validate",this).call(this,e))?(this._basis=new a.a(e.pile,e.cell,e.base),e):null}},{key:"set",value:function(e){return this._set(e)}},{key:"basis",get:function(){return this._basis}}]),n}(i.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Hb({token:e,factory:e.\u0275fac}),e}()},lPNG:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"i",(function(){return b})),n.d(t,"g",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return p})),Array.from("SDCH");var i=["\u2660","\u2666","\u2663","\u2665"],a=["spades","diamonds","clubs","hearts"],r=(Array.from("A23456789TJQK"),["A","2","3","4","5","6","7","8","9","10","J","Q","K"]),c=["Ace","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Jack","Queen","King"],o="SDCH".length,s="A23456789TJQK".length,l=o*s;function u(e){return Math.floor(e/o)}function d(e){return e%o}function f(e){return r[u(e)]+i[d(e)]}function b(e){return a[d(e)]}function h(e){return c[u(e)]}function g(e){for(var t=[],n=0;n<l;n++)t[n]=n;if(e>=0)for(var i=0;i<l;i++){var a=(e=(1103515245*e+12345)%2147483648)%l;if(i!==a){var r=t[i];t[i]=t[a],t[a]=r}}return t}function p(e,t){return u(e)===u(t)+1&&d(e)%2!=d(t)%2}},mrSG:function(e,t,n){"use strict";function i(e,t,n,i){return new(n||(n=Promise))((function(a,r){function c(e){try{s(i.next(e))}catch(t){r(t)}}function o(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}s((i=i.apply(e,t||[])).next())}))}n.d(t,"a",(function(){return i}))},tt9D:function(e,t,i){"use strict";i.d(t,"b",(function(){return f})),i.d(t,"d",(function(){return g})),i.d(t,"c",(function(){return p})),i.d(t,"a",(function(){return m}));var a=i("SeXe"),c=i("fXoL"),u=["sidenav","sandwich"],f=function(e){return e[e.Mouse=1]="Mouse",e[e.Touch=2]="Touch",e[e.Keyboard=4]="Keyboard",e[e.All=7]="All",e}({}),h={view:u[0],aspectRatio:.56,sandwichOrder:0,sidenavModeSide:!0,sidenavClosed:!0,deckUseSvg:!1,enableSound:!1,enableRipples:!0,enableWinAnimation:!0,enableDarkMode:!1,assistLevel:1e6,inputMode:f.All},g={aspectRatio:.4,assistLevel:2e4,sandwichOrder:0,inputMode:1},p={aspectRatio:.7,assistLevel:2e6,sandwichOrder:5,inputMode:f.All},v="[FreecellSettingsState]",m=function(){var e=function(e){l(i,e);var t=d(i);function i(){var e;r(this,i),e=t.call(this,h);var a=localStorage.getItem(v);if(a){var c=JSON.parse(a);if(c){var o,s=Object.assign({},h),l=n(e.keys);try{for(l.s();!(o=l.n()).done;){var u=o.value;typeof s[u]==typeof c[u]&&(s[u]=c[u])}}catch(d){l.e(d)}finally{l.f()}e._set(s)}}return e}return o(i,[{key:"restoreDefaults",value:function(){this.set(h)}},{key:"_validate",value:function(e){u.indexOf(e.view)<0&&(e.view=h.view);for(var t=0,n=Object.keys(g);t<n.length;t++){var a=n[t];e[a]=Math.max(g[a],Math.min(p[a],e[a]))}return s(b(i.prototype),"_validate",this).call(this,e)}},{key:"set",value:function(e){var t=this._set(e);if(t)try{localStorage.setItem(v,JSON.stringify(this.state))}catch(n){console.warn("localStorage error:",n)}return t}}]),i}(a.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Hb({token:e,factory:e.\u0275fac}),e}()}}])}();
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"/cH8":function(e,t,n){e.exports=n.p+"1-es2015.7f9dc9e434174e79d4ab.worker.js"},"1ROQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("afNV"),s=n("jZWl"),a=n("g/AF"),c=n("WxrP"),r=n("fXoL");const o=Object.assign(Object.assign({},s.b),{deal:-1,mark:0,path:""});let l=(()=>{class e extends i.a{constructor(e){super(o),this._game=null,this._addSubscription(e.subscribe(e=>{this._set(Object.assign({},e))}))}get deal(){return this.state.deal}set deal(e){if(this.deal!==e){const{path:t,mark:n}=o;this._set({deal:e,path:t,mark:n})}}get mark(){return this.state.mark}set mark(e){this.mark!==e&&this._set({mark:e})}get path(){return this.state.path}set path(e){this.path!==e&&this._set({path:e})}get game(){return this._game||(this._game=Object(c.c)(this.state))}_validate(e){const t=Object(c.a)(e);return e.path!==t&&(console.warn("Replacing path with:",t),e.path=t),e.mark=Math.max(0,Math.min(e.path.length/2,e.mark)),(e=super._validate(e))&&(this._game=null),e}move(e,t){const n=this.state,i=Object(a.b)(n.path,n.mark,e,t);this._set({mark:i.length/2,path:n.path.startsWith(i)?n.path:i})}set(e,t,n){const i=this.state;e===i.deal&&t===i.path&&n===i.mark||this._set({deal:e,path:t,mark:n})}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(s.a))},e.\u0275prov=r.Hb({token:e,factory:e.\u0275fac}),e})()},"2MXh":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e,t,n){this.PILE_NUM=e,this.CELL_NUM=t,this.BASE_NUM=n,this.PILE_START=0,this.DESK_SIZE=e+t+n,this.PILE_END=this.BASE_START=this.PILE_START+this.PILE_NUM,this.BASE_END=this.CELL_START=this.BASE_START+this.BASE_NUM,this.CELL_END=this.CELL_START+this.CELL_NUM}isPile(e){return e>=this.PILE_START&&e<this.PILE_END}isBase(e){return e>=this.BASE_START&&e<this.BASE_END}isCell(e){return e>=this.CELL_START&&e<this.CELL_END}getSpotName(e){return this.isBase(e)?"base "+(e-this.BASE_START):this.isPile(e)?"pile "+(e-this.PILE_START):this.isCell(e)?"cell "+(e-this.CELL_START):"unknown "+e}}},GPiM:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var i=n("afNV"),s=n("fXoL"),a=n("1ROQ"),c=n("dkWW"),r=n("tt9D"),o=n("dNgK");const l={solved:!1,canAssist:!1,canUndo:!1,canRedo:!1,nextMove:null,assistRequest:null},d=String.fromCharCode(215);let u=(()=>{class t extends i.a{constructor(e,t,n,i){super(l),this._gameService=e,this._playService=t,this._settings=n,this._snackBar=i,this._worker=null,this._createWorker(),this._addSubscription(this._gameService.subscribe(e=>{const t=Object.assign({},l),n=this._gameService.game;if(t.solved=n.isSolved(),!t.solved){const e=n.countEmpty();if(e<n.PILE_NUM+n.CELL_NUM){const i=n.getMoves();t.canAssist=!!this._worker&&i.length>0&&e<=n.CELL_NUM;for(const e of i)if(n.isBase(e.taker)){t.nextMove=e;break}}}t.canUndo=e.mark>0,t.canRedo=2*e.mark<e.path.length,this.state.assistRequest&&(this.cancelAssist(),this._snackBar.open("Assist was canceled.",d,{duration:1e3})),Promise.resolve().then(()=>this._set(t))}))}undo(){const e=this._gameService.state.mark-1;e>=0&&(this._gameService.mark=e)}redo(){const e=this._gameService.state.mark+1;e+e<=this._gameService.state.path.length&&(this._gameService.mark=e)}next(){const e=this.state.nextMove;e&&this._gameService.move(e.giver,e.taker)}playNext(){this._playService.play(()=>(this.next(),!!this.state.nextMove))}play(e){this._playService.play(()=>{if(e.length>1){const t=e.charCodeAt(0),n=e.charCodeAt(1);e=e.substring(2),this._gameService.move(t,n)}return e.length>1})}assist(){if(!this._worker||!this.state.canAssist)return;const e=this._gameService.game,t={base:e.BASE_NUM,cell:e.CELL_NUM,pile:e.PILE_NUM,desk:e.toArray()},n=JSON.stringify(t);this._worker.postMessage({requestId:n,desk:t,searchThreshold:this._settings.state.assistLevel}),this._set({assistRequest:n,canAssist:!1});const i=this._snackBar.open("Thinking...",d).onAction().subscribe(()=>{i.unsubscribe(),this.cancelAssist(),this._set({assistRequest:null,canAssist:!0})})}cancelAssist(){this._worker&&this._worker.postMessage({requestId:null})}_createWorker(){"undefined"!=typeof Worker&&(this._worker=new Worker(e,void 0),this._worker.onmessage=e=>{const t=e.data;if(t.requestId===this.state.assistRequest){let e="Unable to assist ;-(";t.path&&(e="Assisting...",this.play(t.path)),this._snackBar.open(e,d,{duration:2e3}),this._set({assistRequest:l.assistRequest})}})}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(a.a),s.Vb(c.a),s.Vb(r.a),s.Vb(o.a))},t.\u0275prov=s.Hb({token:t,factory:t.\u0275fac}),t})()}).call(this,n("/cH8"))},LGbN:function(e,t,n){"use strict";n.r(t),n.d(t,"FreecellModule",(function(){return Nt}));var i=n("ofXK"),s=n("3Pt+"),a=n("tyNb"),c=n("hctd"),r=n("pKmL"),o=n("GPiM"),l=n("dkWW"),d=n("jZWl"),u=n("bgvp"),h=n("fXoL");function b(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>n(e.error.message)})}let g=(()=>{class e{constructor(){this._openPromise=new Promise((e,t)=>{const n=window.indexedDB.open("freecell-db",1);n.onerror=e=>{this.onOpenError(n),t(n.error.message)},n.onupgradeneeded=e=>this.onUpgradeNeeded(n),n.onsuccess=t=>{this.onOpenSuccess(n),e()}})}get isOpen(){return!!this._db}_createTransaction(e,t="readonly"){return this._openPromise.then(()=>this._db.transaction(e,t))}_getStore(e,t="readonly"){return this._createTransaction([e],t).then(t=>t.objectStore(e))}onOpenSuccess(e){this._db=e.result,console.log("DB open success:",e.result.name)}onOpenError(e){this.openError="DB open error: "+e.error.message,console.error("DB Error:",e.error)}onUpgradeNeeded(e){this._db=e.result,this._db.createObjectStore("game",{keyPath:"deal",autoIncrement:!1}).createIndex("date","date",{unique:!1})}getGame(e){return this._getStore("game","readonly").then(t=>b(t.get(e)))}setGame(e){return e.date||(e.date=Object(u.a)()),this._getStore("game","readwrite").then(t=>b(t.put(e)))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h.Hb({token:e,factory:e.\u0275fac}),e})();var f=n("1ROQ"),p=n("tt9D"),m=n("mrSG"),_=n("dPmG");let v=class{constructor(e=[]){this._subscriptions=e}_addSubscription(e){this._subscriptions.push(e)}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}};var k=function(e){return e[e.card=0]="card",e[e.deal=1]="deal",e[e.shuffle=2]="shuffle",e[e.aplause_001=3]="aplause_001",e[e.aplause_002=4]="aplause_002",e[e.aplause_003=5]="aplause_003",e[e.aplause_004=6]="aplause_004",e[e.aplause_005=7]="aplause_005",e[e.aplause_006=8]="aplause_006",e[e.aplause_007=9]="aplause_007",e[e.length=10]="length",e}({});function S(e,t,n,i=1,s=0){const a=e.createBufferSource();a.buffer=n;let c=a;if(1!==i){const t=e.createGain();t.gain.value=i,c.connect(t),c=t}if(0!==s){const t=e.createStereoPanner();t.pan.value=s,c.connect(t),c=t}return c.connect(t),a}let y=(()=>{class e extends v{constructor(e){super(),this._enabled=!1,this._activated=!1,this._sounds=null,this._nextState=Promise.resolve(),this._addSubscription(e.subscribe(e=>{e.enableSound?this.enable():this.disable()}))}get enabled(){return this._enabled}get activated(){return this._activated}_next(e){return Object(m.a)(this,void 0,void 0,(function*(){try{yield this._nextState}finally{this._nextState=e()}}))}activate(){this._activated=!0}disable(){this._next(()=>Object(m.a)(this,void 0,void 0,(function*(){return this._enabled=!1})))}enable(){this._next(()=>Object(m.a)(this,void 0,void 0,(function*(){if(!this._sounds){this._context||(this._context=new AudioContext);const e=yield this._getBuffers();this._sounds=function(e,t){const n=function(e){const t=e.createDynamicsCompressor();return t.connect(e.destination),t}(e),i={deal:()=>{S(e,n,t[k.deal],1).start()},shuffle:()=>{S(e,n,t[k.shuffle],1.5).start()}};let s=0;return i.card=()=>{0==s++&&setTimeout(()=>{(1===s?S(e,n,t[k.card],.8):S(e,n,t[k.shuffle],1)).start(),s=0})},i.victory=()=>{const i=k.aplause_001,s=k.aplause_007,a=e.currentTime;for(let c=0,r=Object(_.k)(1,4);c<r;c++){const c=S(e,n,t[Object(_.k)(i,s+1)],Object(_.l)(.75,1.75),Object(_.k)(-100,101)/100);c.playbackRate.value=Object(_.l)(.85,1.75),c.start(a+3*Math.random())}},i}(this._context,e)}this._enabled=!0})))}_getBuffers(){return this._buffers||(this._buffers=this._loadAll()),this._buffers}_loadAll(){const e=[];for(let i=0;i<k.length;i++)e.push("./assets/freecell/sounds/"+k[i]+".mp3");return t=this._context,n=e,new Promise((e,i)=>{let s=n.length;const a=new Array(n.length);0===s&&e([]),n.forEach((n,c)=>{(function(e,t){return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>t(i.response),i.onerror=e=>n(e),i.send()})})(n).then(e=>function(e,t){return new Promise((n,i)=>{e.decodeAudioData(t,e=>n(e),e=>i(e))})}(t,e)).then(t=>{a[c]=t,0==--s&&e(a)}).catch(e=>i(e))})});var t,n}play(e){return Object(m.a)(this,void 0,void 0,(function*(){if(yield this._nextState,this._enabled&&this._activated&&this._sounds){const t=this._sounds[e];"function"==typeof t&&("suspended"===this._context.state&&(yield this._context.resume()),t())}}))}}return e.\u0275fac=function(t){return new(t||e)(h.Vb(p.a))},e.\u0275prov=h.Hb({token:e,factory:e.\u0275fac}),e})();var C=n("RDYl"),w=n("rDax"),R=n("0IaG"),M=n("wZkO"),L=n("1jcm"),O=n("bTqV"),A=n("NFeN"),E=n("5RNC"),x=n("jaxi"),T=n("f0Cb");function Q(e,t){if(1&e&&(h.Rb(0,"mat-icon",8),h.Ac(1),h.Qb(),h.Ac(2," Game Sounds ")),2&e){const e=h.cc();h.zb(1),h.Bc(e.settings.state.enableSound?"volume_up":"volume_off")}}function P(e,t){1&e&&(h.Rb(0,"mat-icon",8),h.Ac(1,"assistant"),h.Qb(),h.Ac(2," Assist level "))}function D(e,t){1&e&&(h.Rb(0,"mat-icon",8),h.Ac(1,"layers"),h.Qb(),h.Ac(2," Card Effects "))}function I(e,t){1&e&&(h.Rb(0,"mat-icon",8),h.Ac(1,"dashboard"),h.Qb(),h.Ac(2," Appearance "))}const N=1e3;let z=(()=>{class e{constructor(e){this.settings=e,this.aspectRatioMin=p.d.aspectRatio*N,this.aspectRatioMax=p.c.aspectRatio*N,this.aspectRatioStep=5,this.assistLevelMin=Math.ceil(p.d.assistLevel/N),this.assistLevelMax=Math.floor(p.c.assistLevel/N),this.assistLevelStep=5,this.aspectRatioLabel=e=>(e/N).toFixed(3),this.assistLevelLabel=e=>{const t=(this.assistLevelMax-this.assistLevelMin)/3;return e<this.assistLevelMin+t?"low":e>this.assistLevelMax-t?"high":"norm"}}get aspectRatio(){return Math.round(this.settings.state.aspectRatio*N)}set aspectRatio(e){this.settings.set({aspectRatio:+e/N})}get assistLevel(){return Math.round(this.settings.state.assistLevel/N)}set assistLevel(e){(e=Math.max(this.assistLevelMin,Math.min(this.assistLevelMax,+e)))!==this.assistLevel&&this.settings.set({assistLevel:e*N})}assistLevelColor(){switch(this.assistLevelLabel(this.assistLevel)){case"low":return"primary";case"high":return"warn";default:return"accent"}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(p.a))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-settings-dialog"]],decls:75,vars:30,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-tab-label",""],[1,"tab-content"],[3,"checked","change"],[1,"pad-top"],["mat-stroked-button","",3,"disabled","click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","color","ngModelChange"],[1,"margin-right-8"],[3,"value"],["value","sidenav",3,"click"],["value","sandwich",3,"click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","ngModelChange"],["align","center"],["mat-button","",3,"click"],["mat-button","","matDialogClose","","cdkFocusInitial",""]],template:function(e,t){1&e&&(h.Rb(0,"h2",0),h.Ac(1,"Freecell Settings"),h.Qb(),h.Rb(2,"mat-dialog-content",1),h.Rb(3,"mat-tab-group"),h.Rb(4,"mat-tab"),h.yc(5,Q,3,1,"ng-template",2),h.Rb(6,"div",3),h.Rb(7,"mat-slide-toggle",4),h.Yb("change",(function(e){return t.settings.set({enableSound:!!e.checked})})),h.Ac(8," Enable "),h.Qb(),h.Qb(),h.Qb(),h.Rb(9,"mat-tab"),h.yc(10,P,3,0,"ng-template",2),h.Rb(11,"div",3),h.Rb(12,"p"),h.Ac(13,"The maximum number of moves the assistant will try to solve."),h.Qb(),h.Rb(14,"div",5),h.Rb(15,"button",6),h.Yb("click",(function(){return t.assistLevel=t.assistLevel-t.assistLevelStep})),h.Rb(16,"mat-icon"),h.Ac(17,"chevron_left"),h.Qb(),h.Qb(),h.Rb(18,"button",6),h.Yb("click",(function(){return t.assistLevel=t.assistLevel+t.assistLevelStep})),h.Rb(19,"mat-icon"),h.Ac(20,"chevron_right"),h.Qb(),h.Qb(),h.Rb(21,"mat-slider",7),h.Yb("ngModelChange",(function(e){return t.assistLevel=e})),h.Qb(),h.Ac(22),h.dc(23,"number"),h.Qb(),h.Qb(),h.Qb(),h.Rb(24,"mat-tab"),h.yc(25,D,3,0,"ng-template",2),h.Rb(26,"div",3),h.Rb(27,"div"),h.Rb(28,"mat-slide-toggle",4),h.Yb("change",(function(e){return t.settings.set({deckUseSvg:!!e.checked})})),h.Ac(29," Use SVG "),h.Qb(),h.Qb(),h.Rb(30,"div",5),h.Rb(31,"mat-slide-toggle",4),h.Yb("change",(function(e){return t.settings.set({enableRipples:!!e.checked})})),h.Ac(32," Enable Ripples "),h.Qb(),h.Qb(),h.Rb(33,"div",5),h.Rb(34,"mat-slide-toggle",4),h.Yb("change",(function(e){return t.settings.set({enableWinAnimation:!!e.checked})})),h.Ac(35," Enable Victory Animation "),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Rb(36,"mat-tab"),h.yc(37,I,3,0,"ng-template",2),h.Rb(38,"div",3),h.Rb(39,"div"),h.Rb(40,"mat-icon",8),h.Ac(41,"table_chart"),h.Qb(),h.Ac(42,"Layout: "),h.Rb(43,"span"),h.Ac(44,"horizontal"),h.Qb(),h.Ac(45," or "),h.Rb(46,"span"),h.Ac(47,"vertical"),h.Qb(),h.Ac(48,". "),h.Rb(49,"mat-button-toggle-group",9),h.Rb(50,"mat-button-toggle",10),h.Yb("click",(function(){return t.settings.set({view:"sidenav"})})),h.Rb(51,"mat-icon"),h.Ac(52,"stay_current_landscape"),h.Qb(),h.Qb(),h.Rb(53,"mat-button-toggle",11),h.Yb("click",(function(){return t.settings.set({view:"sandwich"})})),h.Rb(54,"mat-icon"),h.Ac(55,"stay_current_portrait"),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Rb(56,"div",5),h.Rb(57,"mat-icon",8),h.Ac(58,"aspect_ratio"),h.Qb(),h.Ac(59,"Aspect ratio. The playground width divided by its height. "),h.Rb(60,"mat-slider",12),h.Yb("ngModelChange",(function(e){return t.aspectRatio=e})),h.Qb(),h.Ac(61),h.dc(62,"number"),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Mb(63,"mat-divider"),h.Rb(64,"mat-dialog-actions",13),h.Rb(65,"button",14),h.Yb("click",(function(){return t.settings.restoreDefaults()})),h.Rb(66,"mat-icon"),h.Ac(67,"settings_backup_restore"),h.Qb(),h.Rb(68,"label"),h.Ac(69,"RESET"),h.Qb(),h.Qb(),h.Rb(70,"button",15),h.Rb(71,"mat-icon"),h.Ac(72,"close"),h.Qb(),h.Rb(73,"label"),h.Ac(74,"CLOSE"),h.Qb(),h.Qb(),h.Qb()),2&e&&(h.zb(7),h.ic("checked",t.settings.state.enableSound),h.zb(8),h.ic("disabled",t.assistLevelMin>=t.assistLevel),h.zb(3),h.ic("disabled",t.assistLevel>=t.assistLevelMax),h.zb(3),h.ic("displayWith",t.assistLevelLabel)("min",t.assistLevelMin)("max",t.assistLevelMax)("step",t.assistLevelStep)("ngModel",t.assistLevel)("color",t.assistLevelColor()),h.zb(1),h.Cc(" ",h.fc(23,24,t.settings.state.assistLevel,"1.0-0")," "),h.zb(6),h.ic("checked",t.settings.state.deckUseSvg),h.zb(3),h.ic("checked",t.settings.state.enableRipples),h.zb(3),h.ic("checked",t.settings.state.enableWinAnimation),h.zb(9),h.Db("text-selected","sidenav"===t.settings.state.view),h.zb(3),h.Db("text-selected","sandwich"===t.settings.state.view),h.zb(3),h.ic("value",t.settings.state.view),h.zb(11),h.ic("displayWith",t.aspectRatioLabel)("min",t.aspectRatioMin)("max",t.aspectRatioMax)("step",t.aspectRatioStep)("ngModel",t.aspectRatio),h.zb(1),h.Cc(" ",h.fc(62,27,t.settings.state.aspectRatio,"1.3-3")," "))},directives:[R.h,R.e,M.b,M.a,M.c,L.a,O.a,A.a,E.a,s.i,s.l,x.b,x.a,T.a,R.c,R.d],pipes:[i.e],styles:[".pad-top[_ngcontent-%COMP%], .tab-content[_ngcontent-%COMP%]{padding-top:16px}.tab-content[_ngcontent-%COMP%]{min-height:12.75rem;margin-left:10px}@media (min-aspect-ratio:8/5){.tab-content[_ngcontent-%COMP%]{min-height:9rem}}.margin-right-8[_ngcontent-%COMP%]{margin-right:8px}span.text-selected[_ngcontent-%COMP%]{font-weight:500}"]}),e})();var j=n("0MNC");function B(e,t){1&e&&(h.bc(),h.Rb(0,"svg",6),h.Mb(1,"path",7),h.Mb(2,"path",8),h.Qb())}function F(e,t){1&e&&(h.Pb(0),h.bc(),h.Rb(1,"svg",6),h.Mb(2,"path",7),h.Mb(3,"path",11),h.Qb(),h.Ob())}function Y(e,t){if(1&e){const e=h.Sb();h.Rb(0,"button",9),h.Yb("click",(function(){h.pc(e);const n=t.$implicit;return h.cc().changeOrder(n)})),h.yc(1,F,4,0,"ng-container",10),h.Qb()}if(2&e){const e=t.$implicit,n=h.cc(),i=h.nc(1);h.Db("sandwich-button-move-down",n.order[1]>n.order[e])("sandwich-button-move-up",n.order[e]>n.order[1]),h.zb(1),h.ic("ngIf",n.order[1]>n.order[e])("ngIfElse",i)}}function X(e,t){1&e&&h.Nb(0)}const U=function(){return{$implicit:0}};function W(e,t){if(1&e&&(h.Rb(0,"div",12),h.gc(1,1),h.yc(2,X,1,0,"ng-container",13),h.Qb()),2&e){const e=h.cc(),t=h.nc(3);h.vc("order",e.order[0]),h.zb(2),h.ic("ngTemplateOutlet",t)("ngTemplateOutletContext",h.jc(4,U))}}function H(e,t){1&e&&h.Nb(0)}const G=function(){return{$implicit:2}};function K(e,t){if(1&e&&(h.Rb(0,"div",14),h.gc(1,2),h.yc(2,H,1,0,"ng-container",13),h.Qb()),2&e){const e=h.cc(),t=h.nc(3);h.vc("order",e.order[2]),h.zb(2),h.ic("ngTemplateOutlet",t)("ngTemplateOutletContext",h.jc(4,G))}}const q=[[["","appSandwichContent",""]],[["","appSandwichHeader",""]],[["","appSandwichFooter",""]]],V=["[appSandwichContent]","[appSandwichHeader]","[appSandwichFooter]"],$=[5,7,11,15,19,21];function Z(e,t){return Math.floor($[e]/Math.pow(3,2-t))%3}let J=(()=>{class e{constructor(){this.order=[0,1,2],this._sandwichOrder=0,this.sandwichOrderChange=new h.n,this.hideHeader=!1,this.hideFooter=!1}get sandwichOrder(){return this._sandwichOrder}set sandwichOrder(e){this._sandwichOrder!==e&&e>=0&&e<$.length&&(this._sandwichOrder=e,this.order[0]=Z(e,0),this.order[1]=Z(e,1),this.order[2]=Z(e,2))}ngOnInit(){}changeOrder(e){const t=[...this.order],n=t[e];if(n>t[1])for(let i=t.length;i-- >0;)t[i]===n?t[i]=n-1:t[i]===n-1&&(t[i]=n);else if(n<t[1])for(let i=t.length;i-- >0;)t[i]===n?t[i]=n+1:t[i]===n+1&&(t[i]=n);this.sandwichOrderChange.emit($.indexOf(3*(3*t[0]+t[1])+t[2]))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Fb({type:e,selectors:[["app-sandwich"]],inputs:{sandwichOrder:"sandwichOrder",hideHeader:"hideHeader",hideFooter:"hideFooter"},outputs:{sandwichOrderChange:"sandwichOrderChange"},ngContentSelectors:V,decls:9,vars:4,consts:[["arrowUpward",""],["moveButton",""],[1,"sandwich-container"],["class","sandwich-header",3,"order",4,"ngIf"],[1,"sandwich-content"],["class","sandwich-footer",3,"order",4,"ngIf"],["height","24","width","24"],["d","M0 0h24v24H0V0z","fill","none"],["d","M6 6h4v4h4V6h4l-6-4zM2 15h20v-4H2v4zm2-3h2v2H4v-2z","fill","currentColor"],["mat-icon-button","",3,"click"],[4,"ngIf","ngIfElse"],["d","M18 18h-4v-4h-4v4H6l6 4zM2 13h20V9H2v4zm2-3h2v2H4v-2z","fill","currentColor"],[1,"sandwich-header"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"sandwich-footer"]],template:function(e,t){1&e&&(h.hc(q),h.yc(0,B,3,0,"ng-template",null,0,h.zc),h.yc(2,Y,2,6,"ng-template",null,1,h.zc),h.Rb(4,"div",2),h.yc(5,W,3,5,"div",3),h.Rb(6,"div",4),h.gc(7),h.Qb(),h.yc(8,K,3,5,"div",5),h.Qb()),2&e&&(h.zb(5),h.ic("ngIf",!t.hideHeader),h.zb(1),h.vc("order",t.order[1]),h.zb(2),h.ic("ngIf",!t.hideFooter))},directives:[i.l,O.a,i.q],styles:["div.sandwich-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch}div.sandwich-footer[_ngcontent-%COMP%], div.sandwich-header[_ngcontent-%COMP%]{position:relative;flex-grow:0;flex-shrink:0}div.sandwich-content[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:0}.sandwich-button-move-down[_ngcontent-%COMP%], .sandwich-button-move-up[_ngcontent-%COMP%]{position:absolute;right:0;color:#bccfe0}.sandwich-button-move-down[_ngcontent-%COMP%]:hover, .sandwich-button-move-up[_ngcontent-%COMP%]:hover{color:#fff}.sandwich-button-move-down[_ngcontent-%COMP%]{bottom:0}.sandwich-button-move-up[_ngcontent-%COMP%]{top:0}"]}),e})();var ee=n("/t3+"),te=n("voYn"),ne=n("STbY"),ie=n("MutI");let se=(()=>{class e extends v{constructor(e){super(),this._gameService=e,this.minDeal=0,this.maxDeal=2147483648,this.digitCount=this.maxDeal.toString(10).length,this.listItem=!1,this.dealLabel="",this.isMenuOpened=!1}ngOnInit(){this._addSubscription(this._gameService.subscribe(e=>{this.deal=e.deal,this.dealLabel="#"+(this.deal>=0?Object(te.c)(this.deal.toString(10),this.digitCount,"0"):Object(te.c)("",this.digitCount,"#"))}))}setDeal(e){e>=this.minDeal&&e<=this.maxDeal&&(this._gameService.deal=e)}setRandomDeal(){this.setDeal(Object(_.k)(this.minDeal,this.maxDeal,this.deal))}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(f.a))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-deal-menu"]],inputs:{listItem:"listItem"},features:[h.wb],decls:22,vars:7,consts:[["xPosition","before"],["appMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["mat-button","",3,"matMenuTriggerFor","menuOpened","menuClosed"]],template:function(e,t){if(1&e&&(h.Rb(0,"mat-menu",0,1),h.Rb(2,"button",2),h.Yb("click",(function(){return t.setDeal(t.deal+1)})),h.Rb(3,"mat-icon"),h.Ac(4,"navigate_next"),h.Qb(),h.Rb(5,"span"),h.Ac(6,"Next"),h.Qb(),h.Qb(),h.Rb(7,"button",2),h.Yb("click",(function(){return t.setDeal(t.deal-1)})),h.Rb(8,"mat-icon"),h.Ac(9,"navigate_before"),h.Qb(),h.Rb(10,"span"),h.Ac(11,"Previous"),h.Qb(),h.Qb(),h.Rb(12,"button",3),h.Yb("click",(function(){return t.setRandomDeal()})),h.Rb(13,"mat-icon"),h.Ac(14,"casino"),h.Qb(),h.Rb(15,"span"),h.Ac(16,"Random"),h.Qb(),h.Qb(),h.Qb(),h.Rb(17,"button",4),h.Yb("menuOpened",(function(){return t.isMenuOpened=!0}))("menuClosed",(function(){return t.isMenuOpened=!1})),h.Rb(18,"label"),h.Ac(19),h.Qb(),h.Rb(20,"mat-icon"),h.Ac(21),h.Qb(),h.Qb()),2&e){const e=h.nc(1);h.zb(2),h.ic("disabled",t.deal>=t.maxDeal),h.zb(5),h.ic("disabled",t.minDeal>=t.deal),h.zb(10),h.Db("mat-list-item",t.listItem),h.ic("matMenuTriggerFor",e),h.zb(2),h.Bc(t.dealLabel),h.zb(2),h.Bc(t.isMenuOpened?"remove":"expand_more")}},directives:[ne.d,ne.a,A.a,O.a,ie.b,ne.c],styles:[""]}),e})();var ae=n("bv9b");function ce(e,t){1&e&&h.Mb(0,"mat-progress-bar",6)}function re(e,t){if(1&e){const e=h.Sb();h.Rb(0,"button",2),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.undo()})),h.Rb(1,"mat-icon"),h.Ac(2,"undo"),h.Qb(),h.Rb(3,"label"),h.Ac(4,"UNDO"),h.Qb(),h.Qb(),h.Rb(5,"button",2),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.redo()})),h.Rb(6,"mat-icon"),h.Ac(7,"redo"),h.Qb(),h.Rb(8,"label"),h.Ac(9,"REDO"),h.Qb(),h.Qb(),h.Rb(10,"button",3),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.playNext()})),h.Rb(11,"mat-icon"),h.Ac(12,"emoji_objects"),h.Qb(),h.Rb(13,"label"),h.Ac(14,"AUTO"),h.Qb(),h.Qb(),h.Rb(15,"button",4),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.assist()})),h.Rb(16,"mat-icon"),h.Ac(17,"assistant"),h.Qb(),h.Rb(18,"label"),h.Ac(19,"ASSIST"),h.Qb(),h.yc(20,ce,1,0,"mat-progress-bar",5),h.Qb()}if(2&e){const e=h.cc();h.ic("disabled",!e.actionService.state.canUndo),h.zb(5),h.ic("disabled",!e.actionService.state.canRedo),h.zb(5),h.ic("disabled",!e.actionService.state.nextMove),h.zb(5),h.ic("disabled",!e.actionService.state.canAssist),h.zb(5),h.ic("ngIf",e.actionService.state.assistRequest)}}function oe(e,t){1&e&&h.Mb(0,"mat-progress-bar",6)}function le(e,t){if(1&e){const e=h.Sb();h.Pb(0),h.Rb(1,"button",7),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.undo()})),h.Rb(2,"mat-icon"),h.Ac(3,"undo"),h.Qb(),h.Qb(),h.Rb(4,"button",7),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.redo()})),h.Rb(5,"mat-icon"),h.Ac(6,"redo"),h.Qb(),h.Qb(),h.Rb(7,"button",8),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.playNext()})),h.Rb(8,"mat-icon"),h.Ac(9,"emoji_objects"),h.Qb(),h.Qb(),h.Rb(10,"button",9),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.assist()})),h.Rb(11,"mat-icon"),h.Ac(12,"assistant"),h.Qb(),h.yc(13,oe,1,0,"mat-progress-bar",5),h.Qb(),h.Ob()}if(2&e){const e=h.cc();h.zb(1),h.ic("disabled",!e.actionService.state.canUndo),h.zb(3),h.ic("disabled",!e.actionService.state.canRedo),h.zb(3),h.ic("disabled",!e.actionService.state.nextMove),h.zb(3),h.ic("disabled",!e.actionService.state.canAssist),h.zb(3),h.ic("ngIf",e.actionService.state.assistRequest)}}let de=(()=>{class e{constructor(e){this.actionService=e,this.noLabel=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(o.a))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-action-buttons"]],inputs:{noLabel:"noLabel"},decls:3,vars:2,consts:[["buttons",""],[4,"ngIf","ngIfElse"],["mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","accent",3,"disabled","click"],["mat-stroked-button","","color","warn",3,"disabled","click"],["mode","indeterminate","color","warn","style","position: absolute; left: 0; bottom: 0",4,"ngIf"],["mode","indeterminate","color","warn",2,"position","absolute","left","0","bottom","0"],["mat-icon-button","",3,"disabled","click"],["mat-icon-button","","color","accent",3,"disabled","click"],["mat-icon-button","","color","warn",3,"disabled","click"]],template:function(e,t){if(1&e&&(h.yc(0,re,21,5,"ng-template",null,0,h.zc),h.yc(2,le,14,5,"ng-container",1)),2&e){const e=h.nc(1);h.zb(2),h.ic("ngIf",t.noLabel)("ngIfElse",e)}},directives:[i.l,O.a,A.a,ae.a],styles:[""]}),e})();var ue=n("lPNG"),he=n("WxrP"),be=n("kmnG"),ge=n("d3UM"),fe=n("FKr1");function pe(e,t){1&e&&(h.Rb(0,"mat-icon",4),h.Ac(1,"emoji_events"),h.Qb())}function me(e,t){if(1&e&&(h.Rb(0,"mat-option",2),h.Rb(1,"div",5),h.Ac(2),h.Rb(3,"span"),h.Ac(4),h.Qb(),h.Ac(5,"\xa0\u2192\xa0 "),h.Rb(6,"span"),h.Ac(7),h.Qb(),h.Ac(8,"\xa0 "),h.Rb(9,"span"),h.Ac(10),h.Qb(),h.Qb(),h.Qb()),2&e){const e=t.$implicit,n=t.index;h.ic("value",n),h.zb(2),h.Cc(" ",n+1,".\xa0 "),h.zb(1),h.Bb(e.cardClass),h.zb(1),h.Bc(e.cardName),h.zb(2),h.Bb(e.takerClass),h.zb(1),h.Bc(e.takerName),h.zb(2),h.Bb(e.outcomeClass),h.zb(1),h.Bc(e.outcomeName)}}const _e=["danger-critical","danger-extreme","danger-very-high","danger-high","danger-moderate","danger-low","danger-very-low"];let ve=(()=>{class e extends v{constructor(e){super(),this._gameService=e,this.items=[],this.selection=-1,this.isSolved=!1,this.cards={},this.onMoveCallback=(e,t,n,i)=>{const s=this.items[i]||{};if(t!==s.giver||n!==s.taker){if(s.card=e.getCard(n,-1),s.giver=t,s.taker=n,s.outcome=e.countEmpty(),s.cardName=this.cards[s.card].cardName,s.cardClass=this.cards[s.card].className,s.outcome===e.PILE_NUM+e.CELL_NUM?(this.isSolved=!0,s.outcomeName="solved!"):s.outcomeName="free "+s.outcome,s.outcomeClass=_e[Math.min(s.outcome,_e.length-1)],e.getLine(n).length>1){const t=e.getCard(n,-2);s.takerName=this.cards[t].cardName,s.takerClass=this.cards[t].className}else s.takerName=function(e,t){return e.isBase(t)?"base":e.isPile(t)?"pile":e.isCell(t)?"cell":"unknown index:"+t}(e,n),s.takerClass="";this.items[i]=s}else"solved!"===s.outcomeName&&(this.isSolved=!0)}}ngOnInit(){for(let e=0;e<ue.a;e++)this.cards[e]={className:"history-item-"+Object(ue.i)(e),cardName:Object(ue.f)(e)};this._addSubscription(this._gameService.subscribe(e=>{var t;(this._gameService.isFirstChange||e.deal!==(null===(t=this._gameService.previousState)||void 0===t?void 0:t.deal))&&(this.isSolved=!1,this.items.length=0),e.path&&(this.isSolved=!1,Object(he.b)(e,this.onMoveCallback),this.items.splice(e.path.length/2)),this.selection=e.mark-1}))}setSelection(e){this.selection!==e&&e<=this.items.length&&e>=-1&&(this._gameService.mark=e+1)}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(f.a))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-history"]],features:[h.wb],decls:8,vars:4,consts:[["color","accent",4,"ngIf"],[3,"value","valueChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["color","accent"],[1,"history-item"]],template:function(e,t){1&e&&(h.Rb(0,"mat-form-field"),h.Rb(1,"mat-label"),h.yc(2,pe,2,0,"mat-icon",0),h.Ac(3," Game History: "),h.Qb(),h.Rb(4,"mat-select",1),h.Yb("valueChange",(function(e){return t.setSelection(e)})),h.Rb(5,"mat-option",2),h.Ac(6,"Start"),h.Qb(),h.yc(7,me,11,11,"mat-option",3),h.Qb(),h.Qb()),2&e&&(h.zb(2),h.ic("ngIf",t.isSolved),h.zb(2),h.ic("value",t.selection),h.zb(1),h.ic("value",-1),h.zb(2),h.ic("ngForOf",t.items))},directives:[be.b,be.f,i.l,ge.a,fe.i,i.k,A.a],styles:["div.history-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.history-item-diamonds[_ngcontent-%COMP%], .history-item-hearts[_ngcontent-%COMP%]{color:red}.history-item-clubs[_ngcontent-%COMP%], .history-item-spades[_ngcontent-%COMP%]{color:#000}.danger-critical[_ngcontent-%COMP%], .danger-extreme[_ngcontent-%COMP%], .danger-high[_ngcontent-%COMP%], .danger-low[_ngcontent-%COMP%], .danger-moderate[_ngcontent-%COMP%], .danger-very-high[_ngcontent-%COMP%], .danger-very-low[_ngcontent-%COMP%]{min-width:4em;padding-left:.25em;padding-right:.25em}.danger-very-low[_ngcontent-%COMP%]{background-color:#bbee90}.danger-low[_ngcontent-%COMP%]{background-color:#bbdd85}.danger-moderate[_ngcontent-%COMP%]{background-color:#bbcc80}.danger-high[_ngcontent-%COMP%]{background-color:#ffee30}.danger-very-high[_ngcontent-%COMP%]{background-color:#fc0}.danger-extreme[_ngcontent-%COMP%]{background-color:#ff9920}.danger-critical[_ngcontent-%COMP%]{background-color:#ff5540}"]}),e})();function ke(e,t){if(1&e&&h.Mb(0,"app-freecell-action-buttons",11),2&e){const e=h.cc();h.ic("noLabel",e.noLabel)}}function Se(e,t){1&e&&(h.Rb(0,"div",12),h.Mb(1,"app-freecell-history"),h.Qb())}function ye(e,t){if(1&e){const e=h.Sb();h.Rb(0,"button",13),h.Yb("click",(function(){h.pc(e);const t=h.cc();return t.settings.set({enableDarkMode:!t.settings.state.enableDarkMode})})),h.Rb(1,"mat-icon"),h.Ac(2),h.Qb(),h.Qb(),h.Rb(3,"button",14),h.Yb("click",(function(){return h.pc(e),h.cc().settingsChange.emit()})),h.Rb(4,"mat-icon"),h.Ac(5,"settings"),h.Qb(),h.Qb()}if(2&e){const e=h.cc();h.zb(2),h.Bc(e.settings.state.enableDarkMode?"brightness_3":"brightness_7")}}function Ce(e,t){1&e&&h.Nb(0)}function we(e,t){1&e&&h.Nb(0)}function Re(e,t){if(1&e&&(h.yc(0,Ce,1,0,"ng-container",15),h.Mb(1,"span",16),h.yc(2,we,1,0,"ng-container",15)),2&e){h.cc();const e=h.nc(3),t=h.nc(5);h.ic("ngTemplateOutlet",e),h.zb(2),h.ic("ngTemplateOutlet",t)}}function Me(e,t){1&e&&h.Nb(0)}function Le(e,t){if(1&e&&(h.Mb(0,"span",16),h.yc(1,Me,1,0,"ng-container",15),h.Mb(2,"span",16)),2&e){h.cc();const e=h.nc(1);h.zb(1),h.ic("ngTemplateOutlet",e)}}function Oe(e,t){1&e&&h.Nb(0)}function Ae(e,t){1&e&&h.Nb(0)}function Ee(e,t){1&e&&h.Nb(0)}function xe(e,t){if(1&e&&(h.yc(0,Oe,1,0,"ng-container",15),h.yc(1,Ae,1,0,"ng-container",15),h.yc(2,Ee,1,0,"ng-container",15)),2&e){h.cc();const e=h.nc(3),t=h.nc(9),n=h.nc(5);h.ic("ngTemplateOutlet",e),h.zb(1),h.ic("ngTemplateOutlet",t),h.zb(1),h.ic("ngTemplateOutlet",n)}}function Te(e,t){1&e&&h.Nb(0)}function Qe(e,t){if(1&e&&(h.Pb(0),h.yc(1,Te,1,0,"ng-container",15),h.Ob()),2&e){h.cc();const e=h.nc(11);h.zb(1),h.ic("ngTemplateOutlet",e)}}function Pe(e,t){1&e&&h.Nb(0)}function De(e,t){if(1&e&&(h.Pb(0),h.yc(1,Pe,1,0,"ng-container",15),h.Ob()),2&e){h.cc();const e=h.nc(9);h.zb(1),h.ic("ngTemplateOutlet",e)}}function Ie(e,t){1&e&&h.Nb(0)}function Ne(e,t){if(1&e&&(h.Rb(0,"mat-toolbar-row"),h.yc(1,Ie,1,0,"ng-container",15),h.Qb()),2&e){h.cc();const e=h.nc(9);h.zb(1),h.ic("ngTemplateOutlet",e)}}function ze(e,t){1&e&&h.Nb(0)}function je(e,t){if(1&e&&(h.Rb(0,"mat-toolbar",17),h.yc(1,ze,1,0,"ng-container",15),h.Qb()),2&e){h.cc();const e=h.nc(7);h.zb(1),h.ic("ngTemplateOutlet",e)}}const Be=["*"],Fe=j.b.XSmall,Ye=j.b.Small,Xe=j.b.Large,Ue=j.b.XLarge;let We=(()=>{class e extends v{constructor(e,t){super(),this.settings=t,this.settingsChange=new h.n,this.noLabel=!1,this.rowNum=3,this._addSubscription(e.observe([Fe,Ye,Xe,Ue]).subscribe(e=>{this.noLabel=e.breakpoints[Fe]||e.breakpoints[Ye],this.rowNum=e.breakpoints[Fe]?3:e.breakpoints[Xe]||e.breakpoints[Ue]?1:2}))}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(j.a),h.Lb(p.a))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-sandwich"]],outputs:{settingsChange:"settingsChange"},features:[h.wb],ngContentSelectors:Be,decls:23,vars:6,consts:[["actionButtons",""],["history",""],["settingsButtons",""],["toolbarRow3",""],["toolbarRow2",""],["toolbarRow1",""],[3,"sandwichOrder","hideFooter","sandwichOrderChange"],["appSandwichHeader","","color","primary"],[2,"margin-right","20px"],[4,"ngIf"],["appSandwichFooter","","color","primary",4,"ngIf"],[3,"noLabel"],[1,"mat-typography","padding-top-half-rem"],["mat-icon-button","",3,"click"],["mat-icon-button","",2,"margin-right","40px",3,"click"],[4,"ngTemplateOutlet"],[1,"flex-space-filler-1"],["appSandwichFooter","","color","primary"]],template:function(e,t){1&e&&(h.hc(),h.yc(0,ke,1,1,"ng-template",null,0,h.zc),h.yc(2,Se,2,0,"ng-template",null,1,h.zc),h.yc(4,ye,6,1,"ng-template",null,2,h.zc),h.yc(6,Re,3,2,"ng-template",null,3,h.zc),h.yc(8,Le,3,1,"ng-template",null,4,h.zc),h.yc(10,xe,3,3,"ng-template",null,5,h.zc),h.Rb(12,"app-sandwich",6),h.Yb("sandwichOrderChange",(function(e){return t.settings.set({sandwichOrder:e})})),h.Rb(13,"mat-toolbar",7),h.Rb(14,"mat-toolbar-row"),h.Rb(15,"span"),h.Ac(16,"Freecell"),h.Qb(),h.Mb(17,"app-freecell-deal-menu",8),h.yc(18,Qe,2,1,"ng-container",9),h.yc(19,De,2,1,"ng-container",9),h.Qb(),h.yc(20,Ne,2,1,"mat-toolbar-row",9),h.Qb(),h.gc(21,0,["appSandwichContent",""]),h.yc(22,je,2,1,"mat-toolbar",10),h.Qb()),2&e&&(h.zb(12),h.ic("sandwichOrder",t.settings.state.sandwichOrder)("hideFooter",2>t.rowNum),h.zb(6),h.ic("ngIf",1===t.rowNum),h.zb(1),h.ic("ngIf",2===t.rowNum),h.zb(1),h.ic("ngIf",t.rowNum>=3),h.zb(2),h.ic("ngIf",t.rowNum>1))},directives:[J,ee.a,ee.c,se,i.l,de,ve,O.a,A.a,i.q],styles:[".padding-top-half-rem[_ngcontent-%COMP%]{padding-top:.5rem}"]}),e})();var He=n("XhcP");function Ge(e,t){1&e&&h.Ac(0," Loading stuff...\n")}function Ke(e,t){if(1&e){const e=h.Sb();h.Rb(0,"mat-slide-toggle",17),h.Yb("change",(function(t){return h.pc(e),h.cc(2).settings.set({sidenavModeSide:!!t.checked})})),h.Qb()}if(2&e){const e=h.cc(2);h.ic("checked",e.settings.state.sidenavModeSide)}}function qe(e,t){1&e&&h.Mb(0,"mat-progress-bar",18)}function Ve(e,t){if(1&e){const e=h.Sb();h.Rb(0,"button",19),h.Yb("click",(function(){return h.pc(e),h.cc(2).settings.set({sidenavClosed:!1})})),h.Rb(1,"mat-icon"),h.Ac(2,"double_arrow"),h.Qb(),h.Qb()}if(2&e){const e=h.cc(2);h.Db("sidenav-open-button-active",!e.sidenavOpened)}}function $e(e,t){if(1&e){const e=h.Sb();h.Rb(0,"div",2),h.Rb(1,"mat-sidenav-container",3),h.Rb(2,"mat-sidenav",4),h.Yb("closedStart",(function(){return h.pc(e),h.cc().settings.set({sidenavClosed:!0})}))("openedChange",(function(t){return h.pc(e),h.cc().sidenavOpened=t})),h.Rb(3,"mat-toolbar",5),h.Rb(4,"button",6),h.Yb("click",(function(){return h.pc(e),h.cc().settings.set({sidenavClosed:!0})})),h.Rb(5,"mat-icon"),h.Ac(6,"close"),h.Qb(),h.Qb(),h.Mb(7,"span",7),h.Rb(8,"span"),h.Ac(9,"Freecell"),h.Qb(),h.Mb(10,"span",7),h.yc(11,Ke,1,1,"mat-slide-toggle",8),h.Qb(),h.Rb(12,"mat-action-list"),h.Mb(13,"app-freecell-deal-menu",9),h.Rb(14,"div",10),h.Ac(15,"Actions:"),h.Qb(),h.Rb(16,"button",11),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.undo()})),h.Rb(17,"mat-icon",12),h.Ac(18,"undo"),h.Qb(),h.Ac(19," UNDO "),h.Qb(),h.Rb(20,"button",11),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.redo()})),h.Rb(21,"mat-icon",12),h.Ac(22,"redo"),h.Qb(),h.Ac(23," REDO "),h.Qb(),h.Rb(24,"button",11),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.playNext()})),h.Rb(25,"mat-icon",12),h.Ac(26,"emoji_objects"),h.Qb(),h.Rb(27,"span"),h.Ac(28,"AUTO"),h.Qb(),h.Qb(),h.Rb(29,"button",11),h.Yb("click",(function(){return h.pc(e),h.cc().actionService.assist()})),h.Rb(30,"mat-icon",12),h.Ac(31,"assistant"),h.Qb(),h.Rb(32,"span"),h.Ac(33,"ASSIST"),h.Qb(),h.yc(34,qe,1,0,"mat-progress-bar",13),h.Qb(),h.Qb(),h.Rb(35,"div",14),h.Mb(36,"app-freecell-history"),h.Qb(),h.Mb(37,"span",7),h.Mb(38,"mat-divider"),h.Rb(39,"mat-action-list"),h.Rb(40,"button",15),h.Yb("click",(function(){h.pc(e);const t=h.cc();return t.settings.set({enableDarkMode:!t.settings.state.enableDarkMode})})),h.Rb(41,"mat-icon"),h.Ac(42),h.Qb(),h.Rb(43,"span"),h.Ac(44,"THEME"),h.Qb(),h.Qb(),h.Rb(45,"button",15),h.Yb("click",(function(){return h.pc(e),h.cc().settingsChange.emit()})),h.Rb(46,"mat-icon"),h.Ac(47,"settings"),h.Qb(),h.Rb(48,"span"),h.Ac(49,"SETTINGS"),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Rb(50,"mat-sidenav-content"),h.gc(51),h.yc(52,Ve,3,2,"button",16),h.Qb(),h.Qb(),h.Qb()}if(2&e){const e=t.ngIf,n=h.cc();h.zb(2),h.ic("mode",!n.settings.state.sidenavModeSide||e.breakpoints[n.BP_XS]?"over":"side")("opened",!n.settings.state.sidenavClosed),h.zb(9),h.ic("ngIf",!e.breakpoints[n.BP_XS]),h.zb(2),h.ic("listItem",!0),h.zb(3),h.ic("disabled",!n.actionService.state.canUndo),h.zb(1),h.ic("ngClass",n.actionService.state.canUndo?"mat-primary":"disabled-color"),h.zb(3),h.ic("disabled",!n.actionService.state.canRedo),h.zb(1),h.ic("ngClass",n.actionService.state.canRedo?"mat-primary":"disabled-color"),h.zb(3),h.ic("disabled",!n.actionService.state.nextMove),h.zb(1),h.ic("ngClass",n.actionService.state.nextMove?"mat-accent":"disabled-color"),h.zb(4),h.ic("disabled",!n.actionService.state.canAssist),h.zb(1),h.ic("ngClass",n.actionService.state.canAssist?"mat-warn":"disabled-color"),h.zb(4),h.ic("ngIf",n.actionService.state.assistRequest),h.zb(8),h.Bc(n.settings.state.enableDarkMode?"brightness_3":"brightness_7"),h.zb(10),h.ic("ngIf",n.settings.state.sidenavClosed)}}const Ze=["*"],Je=j.b.XSmall,et=j.b.Small,tt=j.b.Medium,nt=j.b.Large,it=j.b.XLarge;let st=(()=>{class e{constructor(e,t,n){this.actionService=e,this.settings=t,this.settingsChange=new h.n,this.BP_XS=Je,this.BP_SM=et,this.BP_MD=tt,this.BP_LG=nt,this.BP_XL=it,this.sidenavOpened=!1,this.breakpoints$=n.observe([Je,et,tt,nt,it])}isXSmall(e){return e.breakpoints[j.b.XSmall]}getSideNavMode(e){return e.breakpoints[Je]?"over":"side"}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(o.a),h.Lb(p.a),h.Lb(j.a))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-sidenav"]],outputs:{settingsChange:"settingsChange"},ngContentSelectors:Ze,decls:4,vars:3,consts:[["loading",""],["class","freecell-container",4,"ngIf"],[1,"freecell-container"],[1,"freecell-sidenav-container"],[3,"mode","opened","closedStart","openedChange"],["color","primary",1,"freecell-toolbar"],["mat-icon-button","",3,"click"],[1,"flex-space-filler-1"],["color","primary",3,"checked","change",4,"ngIf"],[3,"listItem"],["mat-subheader",""],["mat-list-item","",3,"disabled","click"],[3,"ngClass"],["mode","indeterminate","color","warn",4,"ngIf"],[2,"padding","1em"],["mat-list-item","",3,"click"],["class","sidenav-open-button","mat-icon-button","","color","primary",3,"sidenav-open-button-active","click",4,"ngIf"],["color","primary",3,"checked","change"],["mode","indeterminate","color","warn"],["mat-icon-button","","color","primary",1,"sidenav-open-button",3,"click"]],template:function(e,t){1&e&&(h.hc(),h.yc(0,Ge,1,0,"ng-template",null,0,h.zc),h.yc(2,$e,53,15,"div",1),h.dc(3,"async")),2&e&&(h.zb(2),h.ic("ngIf",h.ec(3,1,t.breakpoints$)))},directives:[i.l,He.b,He.a,ee.a,O.a,A.a,ie.a,se,ie.d,ie.b,i.j,ve,T.a,He.c,L.a,ae.a],pipes:[i.b],styles:["button.sidenav-open-button[_ngcontent-%COMP%]{position:absolute;left:-64px;top:1px;transition:left 2s 1s}button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-12px}@media (min-width:600px) and (max-width:959.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-9px}}@media (min-width:960px) and (max-width:1279.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-6px}}@media (min-width:1280px) and (max-width:1919.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-3px}}@media (min-width:1920px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:0}}.freecell-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}.freecell-sidenav-container[_ngcontent-%COMP%]{flex:1}"]}),e})();function at(e,t){1&e&&h.gc(0)}function ct(e,t){if(1&e){const e=h.Sb();h.Rb(0,"app-freecell-sandwich",4),h.Yb("settingsChange",(function(){return h.pc(e),h.cc().openSettingsDialog()})),h.Nb(1,3),h.Qb()}if(2&e){h.cc();const e=h.nc(1);h.zb(1),h.ic("ngTemplateOutlet",e)}}function rt(e,t){if(1&e){const e=h.Sb();h.Rb(0,"app-freecell-sidenav",4),h.Yb("settingsChange",(function(){return h.pc(e),h.cc().openSettingsDialog()})),h.Nb(1,3),h.Qb()}if(2&e){h.cc();const e=h.nc(1);h.zb(1),h.ic("ngTemplateOutlet",e)}}const ot=["*"];let lt=(()=>{class e{constructor(e,t){this.settings=e,this.dialog=t}ngOnInit(){}openSettingsDialog(){this.dialog.open(z,{maxHeight:"100vh"})}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(p.a),h.Lb(R.b))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-view"]],ngContentSelectors:ot,decls:7,vars:1,consts:[["portal",""],["sandwich",""],["sidenav",""],[3,"ngTemplateOutlet"],[3,"settingsChange"]],template:function(e,t){if(1&e&&(h.hc(),h.yc(0,at,1,0,"ng-template",null,0,h.zc),h.yc(2,ct,2,1,"ng-template",null,1,h.zc),h.yc(4,rt,2,1,"ng-template",null,2,h.zc),h.Nb(6,3)),2&e){const e=h.nc(3),n=h.nc(5);h.zb(6),h.ic("ngTemplateOutlet","sidenav"===t.settings.state.view?n:e)}},directives:[i.q,We,st],styles:[""]}),e})();function dt(e,t,n){return e+(t-e)*n}class ut{constructor(e,t=1,n=1,i=2,s=2){this.basis=e,this.itemWidth=i,this.itemHeight=s,this.deltaWidth=t,this.deltaHeight=n/2,this.cellStartX=t,this.cellStartY=this.deltaHeight,this.cellEndX=this.cellStartX+e.CELL_NUM*(i+t)-t,this.cellEndY=this.cellStartY+s,this.baseStartX=this.cellEndX+t,this.baseStartY=this.cellStartY,this.baseEndX=this.baseStartX+e.BASE_NUM*(i+t)-t,this.baseEndY=this.cellEndY,this.pileStartX=t,this.pileStartY=this.cellEndY+this.deltaHeight,this.pileEndX=this.pileStartX+e.PILE_NUM*(i+t)-t,this.pileEndY=this.pileStartY+4.5*s}get width(){return this.deltaWidth+Math.max(this.baseEndX,this.cellEndX,this.pileEndX)}get height(){return this.deltaHeight+Math.max(this.baseEndY,this.cellEndY,this.pileEndY)}getCellX(e){return dt(this.cellStartX,this.cellEndX-this.itemWidth,e/(this.basis.CELL_NUM-1))}getCellY(e){return this.cellStartY}getBaseX(e){return dt(this.baseStartX,this.baseEndX-this.itemWidth,e/(this.basis.BASE_NUM-1))}getBaseY(e){return this.baseStartY}getPileX(e){return dt(this.pileStartX,this.pileEndX-this.itemWidth,e/(this.basis.PILE_NUM-1))}getPileY(e){return this.pileStartY}getSpotPosition(e){const t=this.basis;return t.isBase(e)?{x:this.getBaseX(e-=t.BASE_START),y:this.getBaseY(e)}:t.isCell(e)?{x:this.getCellX(e-=t.CELL_START),y:this.getCellY(e)}:t.isPile(e)?{x:this.getPileX(e-=t.PILE_START),y:this.getPileY(e)}:{x:0,y:0}}getCardPosition(e,t,n){const i=this.basis,s=this.getSpotPosition(e);if(i.isPile(e)&&n>0){const e=Math.min((this.pileEndY-this.pileStartY-this.itemHeight)/(n-1),.4*this.itemHeight);s.y+=e*t}return s}}function ht(e,t){if(1&e&&(h.Rb(0,"div"),h.Rb(1,"p"),h.Ac(2),h.Qb(),h.Rb(3,"p"),h.Ac(4),h.Qb(),h.Rb(5,"p"),h.Ac(6),h.Qb(),h.Qb()),2&e){const e=h.cc();h.zb(2),h.Cc("DEAL: ",e.deal,""),h.zb(2),h.Cc("MARK: ",e.mark,""),h.zb(2),h.Cc("PATH: ",e.path,"")}}let bt=(()=>{class e extends v{constructor(e,t,n){super(),this._router=e,this._route=t,this._gameService=n,this.debug=!1,this._lock=!1}_update(e){const t=e.path||"";let n=parseInt(e.deal,10);(isNaN(n)||n<0)&&(n=-1);let i=parseInt(e.mark,10);(isNaN(i)||i<0||i+i>t.length)&&(i=Math.floor(t.length/2)),n!==this.deal||t!==this.path||i!==this.mark?(this.deal=n,this.path=t,this.mark=i,this._lock=!0,Promise.resolve().then(()=>{const e=this._gameService.state;e.deal===n&&e.path===t&&e.mark===i||this._gameService.set(n,t,i)}).finally(()=>this._lock=!1)):this._lock=!1}ngOnInit(){this._lock=!0,this._addSubscription(this._gameService.subscribe(e=>{this._lock||this.deal===e.deal&&this.path===e.path&&this.mark===e.mark||(this.deal=e.deal,this.path=e.path,this.mark=e.mark,this.updateAddressBar(e.deal,e.path,e.mark))})),this._addSubscription(this._route.queryParams.subscribe(e=>this._update(e)))}updateAddressBar(e,t,n){return t?"number"==typeof n&&n+n===t.length&&(n=void 0):(t=void 0,n=void 0),this._router.navigate(["."],{relativeTo:this._route,queryParams:{deal:e,path:t,mark:n}})}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(a.b),h.Lb(a.a),h.Lb(f.a))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-router"]],inputs:{debug:"debug"},features:[h.wb],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&h.yc(0,ht,7,3,"div",0),2&e&&h.ic("ngIf",t.debug)},directives:[i.l],styles:[""]}),e})();var gt=n("zh6y"),ft=n("dqHA");const pt=["spot"];function mt(e,t){if(1&e){const e=h.Sb();h.Rb(0,"div",3,4),h.Yb("click",(function(){h.pc(e);const n=t.index,i=h.cc();return i.selectionChange.emit(i.selection===n?-1:n)})),h.Qb()}if(2&e){const e=t.$implicit,n=t.index,i=h.cc();h.Db("freecell_selection",i.selection===n),h.ic("ngClass",e.ngClass)("ngStyle",e.ngStyle)("matRippleDisabled",!i.settings.state.enableRipples)}}function _t(e,t){1&e&&(h.Pb(0),h.Mb(1,"object",5),h.Ob())}const vt=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],kt=["[appFreecellBackground]","[appFreecellForeground]"];let St=(()=>{class e{constructor(e,t){this.settings=e,this.action=t,this.selection=-1,this.selectionChange=new h.n,this.touchChange=new h.n,this.spots=[]}set layout(e){this.spots=function(e){const t=[];if(e){const n=e.basis,i=e.itemWidth,s=e.itemHeight,a=Object(_.m)(i,e.width),c=Object(_.m)(s,e.height);for(let r=0;r<n.DESK_SIZE;r++){const o=e.getSpotPosition(r),l={ngStyle:{transform:`translate(${Object(_.m)(o.x,i)}, ${Object(_.m)(o.y,s)})`,width:a,height:c},ngClass:{}};n.isBase(r)?(l.ngClass.freecell_base=!0,l.ngClass["freecell_"+Object(ue.i)(r-n.BASE_START)]=!0):n.isCell(r)?l.ngClass.freecell_cell=!0:n.isPile(r)&&(l.ngClass.freecell_pile=!0),t.push(l)}}return t}(e)}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(p.a),h.Lb(o.a))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-playground"]],viewQuery:function(e,t){var n;1&e&&h.Dc(pt,!0),2&e&&h.mc(n=h.Zb())&&(t.spotList=n)},inputs:{layout:"layout",selection:"selection"},outputs:{selectionChange:"selectionChange",touchChange:"touchChange"},ngContentSelectors:kt,decls:5,vars:6,consts:[[1,"freecell_deck",3,"touchstart","touchend","touchcancel","touchmove"],["class","freecell_spot","matRipple","",3,"freecell_selection","ngClass","ngStyle","matRippleDisabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],["matRipple","",1,"freecell_spot",3,"ngClass","ngStyle","matRippleDisabled","click"],["spot",""],["type","image/svg+xml","data","./assets/freecell/fireworks.svg",1,"freecell-fireworks"]],template:function(e,t){1&e&&(h.hc(vt),h.Rb(0,"div",0),h.Yb("touchstart",(function(e){return t.touchChange.emit({type:"DragStart",event:e})}))("touchend",(function(e){return t.touchChange.emit({type:"DragStop",event:e})}))("touchcancel",(function(e){return t.touchChange.emit({type:"DragStop",event:e})}))("touchmove",(function(e){return t.touchChange.emit({type:"DragMove",event:e})})),h.gc(1),h.yc(2,mt,2,5,"div",1),h.gc(3,1),h.yc(4,_t,2,0,"ng-container",2),h.Qb()),2&e&&(h.Db("use-svg-background",t.settings.state.deckUseSvg)("freecell_deck_solved",t.action.state.solved&&t.settings.state.enableWinAnimation),h.zb(2),h.ic("ngForOf",t.spots),h.zb(2),h.ic("ngIf",t.action.state.solved&&t.settings.state.enableWinAnimation))},directives:[i.k,i.l,fe.m,i.j,i.m],styles:[".freecell_deck{width:100%;height:100%;position:relative;background:#cfe url(bg-desk.09c80cb5354cc50b5181.jpg) repeat}.freecell_card,.freecell_spot{cursor:pointer;position:absolute;background-image:url(cards_3.f425b6710669dbc8105a.png);background-size:900% 900%;background-repeat:no-repeat;background-color:transparent}@media (min-width:600px) and (max-width:1279.99px){.freecell_card,.freecell_spot{background-image:url(cards_2.70d80d7fff9de7d2572a.png)}}@media (max-width:599.99px){.freecell_card,.freecell_spot{background-image:url(cards_1.6288bccad84dee6dc98e.png)}}div.use-svg-background .freecell_card,div.use-svg-background .freecell_spot{background-image:url(cards.ebd91e0b7d767203a0cd.svg)}.freecell_spot.freecell_selection{outline-style:dotted;outline-color:#eed;outline-width:medium}.freecell_spot.freecell_selection.freecell_base{outline-color:#bb11a1}.freecell_spot.freecell_selection.freecell_cell{outline-color:#3e8181}.freecell_spot.freecell_pile{background-position:14.84375% 99.21875%}.freecell_spot.freecell_base.freecell_spades{background-position:57.03125% 85.15625%}.freecell_spot.freecell_base.freecell_diamonds{background-position:71.09375% 85.15625%}.freecell_spot.freecell_base.freecell_clubs{background-position:85.15625% 85.15625%}.freecell_spot.freecell_base.freecell_hearts{background-position:99.21875% 85.15625%}.freecell_spot.freecell_cell{background-position:.78125% 99.21875%}.freecell_card.freecell_Ace.freecell_spades{background-position:.78125% .78125%}.freecell_card.freecell_Ace.freecell_diamonds{background-position:14.84375% .78125%}.freecell_card.freecell_Ace.freecell_clubs{background-position:28.90625% .78125%}.freecell_card.freecell_Ace.freecell_hearts{background-position:42.96875% .78125%}.freecell_card.freecell_Two.freecell_spades{background-position:57.03125% .78125%}.freecell_card.freecell_Two.freecell_diamonds{background-position:71.09375% .78125%}.freecell_card.freecell_Two.freecell_clubs{background-position:85.15625% .78125%}.freecell_card.freecell_Two.freecell_hearts{background-position:99.21875% .78125%}.freecell_card.freecell_Three.freecell_spades{background-position:.78125% 14.84375%}.freecell_card.freecell_Three.freecell_diamonds{background-position:14.84375% 14.84375%}.freecell_card.freecell_Three.freecell_clubs{background-position:28.90625% 14.84375%}.freecell_card.freecell_Three.freecell_hearts{background-position:42.96875% 14.84375%}.freecell_card.freecell_Four.freecell_spades{background-position:57.03125% 14.84375%}.freecell_card.freecell_Four.freecell_diamonds{background-position:71.09375% 14.84375%}.freecell_card.freecell_Four.freecell_clubs{background-position:85.15625% 14.84375%}.freecell_card.freecell_Four.freecell_hearts{background-position:99.21875% 14.84375%}.freecell_card.freecell_Five.freecell_spades{background-position:.78125% 28.90625%}.freecell_card.freecell_Five.freecell_diamonds{background-position:14.84375% 28.90625%}.freecell_card.freecell_Five.freecell_clubs{background-position:28.90625% 28.90625%}.freecell_card.freecell_Five.freecell_hearts{background-position:42.96875% 28.90625%}.freecell_card.freecell_Six.freecell_spades{background-position:57.03125% 28.90625%}.freecell_card.freecell_Six.freecell_diamonds{background-position:71.09375% 28.90625%}.freecell_card.freecell_Six.freecell_clubs{background-position:85.15625% 28.90625%}.freecell_card.freecell_Six.freecell_hearts{background-position:99.21875% 28.90625%}.freecell_card.freecell_Seven.freecell_spades{background-position:.78125% 42.96875%}.freecell_card.freecell_Seven.freecell_diamonds{background-position:14.84375% 42.96875%}.freecell_card.freecell_Seven.freecell_clubs{background-position:28.90625% 42.96875%}.freecell_card.freecell_Seven.freecell_hearts{background-position:42.96875% 42.96875%}.freecell_card.freecell_Eight.freecell_spades{background-position:57.03125% 42.96875%}.freecell_card.freecell_Eight.freecell_diamonds{background-position:71.09375% 42.96875%}.freecell_card.freecell_Eight.freecell_clubs{background-position:85.15625% 42.96875%}.freecell_card.freecell_Eight.freecell_hearts{background-position:99.21875% 42.96875%}.freecell_card.freecell_Nine.freecell_spades{background-position:.78125% 57.03125%}.freecell_card.freecell_Nine.freecell_diamonds{background-position:14.84375% 57.03125%}.freecell_card.freecell_Nine.freecell_clubs{background-position:28.90625% 57.03125%}.freecell_card.freecell_Nine.freecell_hearts{background-position:42.96875% 57.03125%}.freecell_card.freecell_Ten.freecell_spades{background-position:57.03125% 57.03125%}.freecell_card.freecell_Ten.freecell_diamonds{background-position:71.09375% 57.03125%}.freecell_card.freecell_Ten.freecell_clubs{background-position:85.15625% 57.03125%}.freecell_card.freecell_Ten.freecell_hearts{background-position:99.21875% 57.03125%}.freecell_card.freecell_Jack.freecell_spades{background-position:.78125% 71.09375%}.freecell_card.freecell_Jack.freecell_diamonds{background-position:14.84375% 71.09375%}.freecell_card.freecell_Jack.freecell_clubs{background-position:28.90625% 71.09375%}.freecell_card.freecell_Jack.freecell_hearts{background-position:42.96875% 71.09375%}.freecell_card.freecell_Queen.freecell_spades{background-position:57.03125% 71.09375%}.freecell_card.freecell_Queen.freecell_diamonds{background-position:71.09375% 71.09375%}.freecell_card.freecell_Queen.freecell_clubs{background-position:85.15625% 71.09375%}.freecell_card.freecell_Queen.freecell_hearts{background-position:99.21875% 71.09375%}.freecell_card.freecell_King.freecell_spades{background-position:.78125% 85.15625%}.freecell_card.freecell_King.freecell_diamonds{background-position:14.84375% 85.15625%}.freecell_card.freecell_King.freecell_clubs{background-position:28.90625% 85.15625%}.freecell_card.freecell_King.freecell_hearts{background-position:42.96875% 85.15625%}@-webkit-keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@-webkit-keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}@keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}.freecell_deck_solved .freecell_card{-webkit-animation-name:animation-card;animation-name:animation-card;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}.freecell_deck_solved .freecell_card.freecell_Ace{-webkit-animation-delay:1.7s;animation-delay:1.7s;-webkit-animation-duration:1.6s;animation-duration:1.6s}.freecell_deck_solved .freecell_card.freecell_Two{-webkit-animation-delay:1.6s;animation-delay:1.6s;-webkit-animation-duration:1.8s;animation-duration:1.8s}.freecell_deck_solved .freecell_card.freecell_Three{-webkit-animation-delay:1.5s;animation-delay:1.5s;-webkit-animation-duration:2s;animation-duration:2s}.freecell_deck_solved .freecell_card.freecell_Four{-webkit-animation-delay:1.4s;animation-delay:1.4s;-webkit-animation-duration:2.2s;animation-duration:2.2s}.freecell_deck_solved .freecell_card.freecell_Five{-webkit-animation-delay:1.3s;animation-delay:1.3s;-webkit-animation-duration:2.4s;animation-duration:2.4s}.freecell_deck_solved .freecell_card.freecell_Six{-webkit-animation-delay:1.2s;animation-delay:1.2s;-webkit-animation-duration:2.6s;animation-duration:2.6s}.freecell_deck_solved .freecell_card.freecell_Seven{-webkit-animation-delay:1.1s;animation-delay:1.1s;-webkit-animation-duration:2.8s;animation-duration:2.8s}.freecell_deck_solved .freecell_card.freecell_Eight{-webkit-animation-delay:1s;animation-delay:1s;-webkit-animation-duration:3s;animation-duration:3s}.freecell_deck_solved .freecell_card.freecell_Nine{-webkit-animation-delay:.9s;animation-delay:.9s;-webkit-animation-duration:3.2s;animation-duration:3.2s}.freecell_deck_solved .freecell_card.freecell_Ten{-webkit-animation-delay:.8s;animation-delay:.8s;-webkit-animation-duration:3.4s;animation-duration:3.4s}.freecell_deck_solved .freecell_card.freecell_Jack{-webkit-animation-delay:.7s;animation-delay:.7s;-webkit-animation-duration:3.6s;animation-duration:3.6s}.freecell_deck_solved .freecell_card.freecell_Queen{-webkit-animation-delay:.6s;animation-delay:.6s;-webkit-animation-duration:3.8s;animation-duration:3.8s}.freecell_deck_solved .freecell_card.freecell_King{-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s}.freecell_deck_solved .freecell_spot{-webkit-animation-name:animation-spot;animation-name:animation-spot;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s}.freecell-fireworks{width:100%;height:100%;background-color:transparent}.app-dark-theme .freecell_deck{background:teal url(bg-desk-dark.be1fcb326a55804c8741.jpg) repeat}.app-dark-theme .freecell_spot.freecell_selection.freecell_cell{outline-color:#aaecec}"],encapsulation:2}),e})();var yt=n("g/AF");let Ct=(()=>{class e{constructor(){this.userGesture=new h.n}handle(e){this.userGesture.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=h.Gb({type:e,selectors:[["","appGesture",""]],hostBindings:function(e,t){1&e&&h.Yb("keydown",(function(e){return t.handle(e)}),!1,h.oc)("touchstart",(function(e){return t.handle(e)}),!1,h.oc)("mousedown",(function(e){return t.handle(e)}),!1,h.oc)("click",(function(e){return t.handle(e)}),!1,h.oc)},outputs:{userGesture:"userGesture"}}),e})();const wt=["cards"];function Rt(e,t){if(1&e){const e=h.Sb();h.Rb(0,"div",5),h.Yb("userGesture",(function(t){return h.pc(e),h.cc().activateOnGesture(t)})),h.Qb()}}function Mt(e,t){if(1&e){const e=h.Sb();h.Rb(0,"div",6,7),h.Yb("mousedown",(function(n){h.pc(e);const i=t.index;return h.cc().onMouseDown(n,i)})),h.Qb()}if(2&e){const e=t.$implicit,n=h.cc();h.ic("matRippleDisabled",!n.settings.state.enableRipples)("ngClass",e.ngClass)("ngStyle",e.ngStyle)}}const Lt=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],Ot=["[appFreecellBackground]","[appFreecellForeground]"],At=["transition_deal","transition_norm","transition_fast"];function Et(e,t){for(const n of At)e[n]=n===t}function xt(e,t,n="px"){return`translate(${e}${n}, ${t}${n})`}let Tt=(()=>{class e extends v{constructor(e,t,n,i,s){super(),this.settings=e,this.soundService=t,this._renderer=n,this._playService=i,this._gameService=s,this._dragListener=new ft.a,this._emptySpotCount=0,this.lineChange=new h.n,this.cards=[],this.spotSelection=-1}get layout(){return this._layout}set layout(e){this._layout!==e&&(this._layout=e,this.layout&&(this.cards=this.createCards(),this.onDeal()))}get isTouchDisabled(){return!(this.settings.state.inputMode&p.b.Touch)}get isMouseDisabled(){return!(this.settings.state.inputMode&p.b.Mouse)}ngOnInit(){this._addSubscription(this._gameService.subscribe(e=>{var t;this.layout&&(this._gameService.isFirstChange||e.deal!==(null===(t=this._gameService.previousState)||void 0===t?void 0:t.deal)?this.onDeal():this.onCardMove())})),this._addSubscription(this._dragListener.dragChange.subscribe(e=>{switch(e){case"DragStart":this._onDragStart();break;case"DragMove":this._onDragMove();break;case"DragStop":this._onDragStop()}}))}trackByIndex(e){return e}getTransforms(e){const t=100,n=[],i=this.cardList.toArray(),s=i[e[0]].nativeElement.parentElement.getBoundingClientRect(),a=i[e[0]].nativeElement.getBoundingClientRect(),c=a.left-s.left,r=a.top-s.top,o=a.height/3;for(let l=e.length;l-- >0;){const e=Math.round((c+0*l)*t)/t,i=Math.round((r+o*l)*t)/t;n[l]={x:e,y:i}}return n}onTouch({type:e,event:t}){if(!this.isTouchDisabled)switch(e){case"DragStart":if(t.targetTouches.length>0){const e=t.targetTouches[0],n=this.getCardIndex(e.clientX,e.clientY);if(n>=0){const e=this._gameService.game,i=e.asTablaeu(n),s=this.getTransforms(i);this._dragListener.touchStart(t,{game:e,tableau:i,transforms:s})}}break;case"DragMove":this._dragListener.isTouchDragging&&this._dragListener.touchMove(t);break;case"DragStop":this._dragListener.isTouchDragging&&this._dragListener.stop(t)}}onMouseDown(e,t){if(this.isMouseDisabled)return;if(this._playService.stop(),0!==e.button)return;const n=this._gameService.game,i=n.asTablaeu(t),s=this.getTransforms(i);this._dragListener.mouseStart(e,this._renderer,{game:n,tableau:i,transforms:s})}_onDragStart(){this._playService.stop();const{tableau:e,transforms:t}=this._dragListener.data;for(let n=e.length;n-- >0;){const i=this.cards[e[n]];i.ngStyle.zIndex+=ue.a,i.ngStyle.transform=xt(t[n].x,t[n].y),i.ngClass.grabbing=!0,Et(i.ngClass)}}_onDragMove(){const{tableau:e,transforms:t}=this._dragListener.data,n=this._dragListener.pageDeltaX,i=this._dragListener.pageDeltaY;for(let s=e.length;s-- >0;){const a=this.cards[e[s]];a.ngClass.dragging=!0,a.ngStyle.transform=xt(t[s].x+n,t[s].y+i)}(Math.abs(n)>4||Math.abs(i)>4)&&(this._dragListener.data.dragged=!0)}_onDragStop(){const{game:e,tableau:t,dragged:n}=this._dragListener.data;for(const i of t){const t=this.cards[i];t.ngStyle.zIndex-=ue.a,t.ngStyle.transform=this.getCardTransform(e,e.toLine(i),i),delete t.ngClass.grabbing,delete t.ngClass.dragging,Et(t.ngClass,"transition_fast")}if(n){const n=this.getDestination(e,t);if(n>=0){const i=e.toLine(t[0]);i!==n&&this.lineChange.emit({source:i,destination:n,tableau:t})}}else{const n=e.toLine(t[0]);this.lineChange.emit({source:n,destination:this.spotSelection>=0?this.spotSelection:void 0,tableau:t})}}onDeal(){this.spotSelection=-1;const e=this._gameService.game;this._emptySpotCount=Math.max(e.CELL_NUM,e.countEmpty());for(let t=e.DESK_SIZE;t-- >0;){for(const n of e.getLine(t))this.bringToFront(n);this.updateLine(e,t,"transition_deal")}this.updateZIndex(),this.soundService.play("deal")}updateZIndex(){if(this.cards.length>1){let e=1;for(let t=this.cards[0].list.head;t;t=t.next)this.cards[t.card].ngStyle.zIndex=e++}}bringToFront(e){const t=this.cards[e],n=t.list;n&&n.tail&&n.tail!==t&&Object(gt.a)(n.tail,t)}onCardMove(){this.spotSelection=-1;const e=this._gameService.state,t=this._gameService.previousState||e,n=t.path.substring(0,2*t.mark),i=e.path.substring(0,2*e.mark),s=new Set,a=Object(yt.a)(n,i),c=[];t.mark>a&&(Object(he.c)(t,(e,t,n,i)=>{i>=a&&(s.add(t),s.add(n),c.push(e.getCard(n,-1)))}),c.reverse()),e.mark>a&&Object(he.c)(e,(e,t,n,i)=>{i>=a&&(s.add(t),s.add(n),c.push(e.getCard(n,-1)))});for(const d of c)this.bringToFront(d);this.updateZIndex();const r=s.size>2?"transition_fast":"transition_norm",o=this._gameService.game;for(const d of s.keys())this.updateLine(o,d,r);"transition_fast"===r?this.soundService.play("shuffle"):"transition_norm"===r&&this.soundService.play("card");const l=o.countEmpty();l>this._emptySpotCount&&(this._emptySpotCount=l,this.soundService.play("victory"))}createCards(){const e=[],t=this.layout;if(t){const n=Object(_.m)(t.itemWidth,t.width),i=Object(_.m)(t.itemHeight,t.height);for(let t=0;t<ue.a;t++){const s={card:t,ngStyle:{width:n,height:i,zIndex:t},ngClass:{freecell_card:!0,["freecell_"+Object(ue.i)(t)]:!0,["freecell_"+Object(ue.g)(t)]:!0}};e.push(s)}Object(gt.b)(...e)}return e}getCardTransform(e,t,n){const i=this.layout.getCardPosition(t,e.toSpot(n),e.getLine(t).length);return`translate(${Object(_.m)(i.x,this.layout.itemWidth)}, ${Object(_.m)(i.y,this.layout.itemHeight)})`}updateLine(e,t,n="transition_norm"){for(const i of e.getLine(t)){const s=this.cards[i];s.ngStyle.transform=this.getCardTransform(e,t,i),Et(s.ngClass,n)}}getDestination(e,t){var n;let i=0,s=-1;if(t.length>0&&this.cardList){const a=this.cardList.toArray(),c=a[t[0]].nativeElement.getBoundingClientRect();for(let n=a.length;n-- >0;)if(t.indexOf(n)<0){const t=a[n].nativeElement.getBoundingClientRect(),r=Object(_.j)(c,t);r>i&&(i=r,s=e.toLine(n))}if(null===(n=this.playground)||void 0===n?void 0:n.spotList){const e=this.playground.spotList.toArray();for(let t=e.length;t-- >0;){const n=e[t].nativeElement.getBoundingClientRect(),a=Object(_.j)(c,n);a>i&&(i=a,s=t)}}}return s}getCardIndex(e,t){let n=-1;if(this.cardList){const i=this.cardList.toArray();for(let s=i.length;s-- >0;){const a=i[s].nativeElement.getBoundingClientRect();a.left<=e&&e<=a.right&&a.top<=t&&t<=a.bottom&&(n<0||this.cards[n].ngStyle.zIndex<this.cards[s].ngStyle.zIndex)&&(n=s)}}return n}activateOnGesture(e){e.isTrusted&&this.soundService.activate()}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(p.a),h.Lb(y),h.Lb(h.E),h.Lb(l.a),h.Lb(f.a))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-deck"]],viewQuery:function(e,t){var n;1&e&&(h.Dc(St,!0),h.Dc(wt,!0)),2&e&&(h.mc(n=h.Zb())&&(t.playground=n.first),h.mc(n=h.Zb())&&(t.cardList=n))},inputs:{layout:"layout"},outputs:{lineChange:"lineChange"},features:[h.wb],ngContentSelectors:Ot,decls:7,vars:5,consts:[["appGesture","",3,"userGesture",4,"ngIf"],[3,"layout","selection","selectionChange","touchChange"],["appFreecellBackground",""],["appFreecellForeground",""],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],["appGesture","",3,"userGesture"],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown"],["cards",""]],template:function(e,t){1&e&&(h.hc(Lt),h.yc(0,Rt,1,0,"div",0),h.Rb(1,"app-freecell-playground",1),h.Yb("selectionChange",(function(e){return t.spotSelection=e}))("touchChange",(function(e){return t.onTouch(e)})),h.Pb(2,2),h.gc(3),h.Ob(),h.Pb(4,3),h.yc(5,Mt,2,3,"div",4),h.gc(6,1),h.Ob(),h.Qb()),2&e&&(h.ic("ngIf",t.soundService.enabled&&!t.soundService.activated),h.zb(1),h.ic("layout",t.layout)("selection",t.spotSelection),h.zb(4),h.ic("ngForOf",t.cards)("ngForTrackBy",t.trackByIndex))},directives:[i.l,St,i.k,Ct,fe.m,i.j,i.m],styles:[".freecell_card.transition_deal[_ngcontent-%COMP%]{transition:transform 1.5s cubic-bezier(.6,-.5,.25,1.5)}.freecell_card.transition_norm[_ngcontent-%COMP%]{transition:transform .5s ease-out}.freecell_card.transition_fast[_ngcontent-%COMP%]{transition:transform .25s linear}.freecell_card.grabbing[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing;transition:transform .15s ease-in-out}.freecell_card.grabbing.dragging[_ngcontent-%COMP%]{transition:none;opacity:.75}"]}),e})();function Qt(e,t){if(1&e){const e=h.Sb();h.Rb(0,"app-freecell-deck",4),h.Yb("lineChange",(function(t){return h.pc(e),h.cc().onLineChange(t)})),h.Pb(1,5),h.gc(2),h.Ob(),h.Qb()}if(2&e){const e=h.cc();h.ic("layout",e.layout)}}const Pt=["*"];let Dt=(()=>{class e extends v{constructor(e,t,n,i){super(),this.settings=e,this._gameService=t,this._playService=n,this._addSubscription(i.subscribe(e=>this.layout=new ut(i.basis)))}ngOnInit(){}ngOnDestroy(){super.ngOnDestroy()}onLineChange(e){this._playService.stop();const t=this._gameService.game;let n="";n=void 0===e.destination?t.solveFor(e.tableau,e.source):t.getBestPath(e.tableau,e.destination),n&&(this._gameService.move(n.charCodeAt(0),n.charCodeAt(1)),n=n.substring(2),n&&this._playService.play(()=>(this._gameService.move(n.charCodeAt(0),n.charCodeAt(1)),n=n.substring(2),n.length>0)))}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(p.a),h.Lb(f.a),h.Lb(l.a),h.Lb(d.a))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-main"]],features:[h.wb],ngContentSelectors:Pt,decls:5,vars:3,consts:[[1,"freecell-content"],[1,"freecell-content-outer"],[1,"freecell-content-inner"],[3,"layout","lineChange",4,"ngIf"],[3,"layout","lineChange"],["appFreecellBackground",""]],template:function(e,t){1&e&&(h.hc(),h.Mb(0,"app-freecell-router"),h.Rb(1,"div",0),h.Rb(2,"div",1),h.Rb(3,"div",2),h.yc(4,Qt,3,1,"app-freecell-deck",3),h.Qb(),h.Qb(),h.Qb()),2&e&&(h.zb(1),h.vc("padding-top",100*t.settings.state.aspectRatio,"%"),h.zb(3),h.ic("ngIf",t.layout))},directives:[bt,i.l,Tt],styles:[".freecell-content[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;padding:1px}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]   .freecell-content-inner[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();const It=[{path:"",component:(()=>{class e extends v{constructor(e,t,n,i){super(),this.settings=e,this.info=`${C.a} ver.${C.b}`,e.subscribe(t=>{var n;const s=null===(n=e.previousState)||void 0===n?void 0:n.enableDarkMode,a=t.enableDarkMode;s!==a&&(a?i.getContainerElement().classList.add("app-dark-theme"):i.getContainerElement().classList.remove("app-dark-theme"))});const s=n.snapshot.queryParams;(void 0===s.deal||isNaN(parseInt(s.deal,10)))&&t.navigate(["."],{relativeTo:n,queryParams:{deal:Date.now()%2147483648}})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(p.a),h.Lb(a.b),h.Lb(a.a),h.Lb(w.e))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-freecell-demo"]],features:[h.wb],decls:4,vars:3,consts:[[1,"version-info"]],template:function(e,t){1&e&&(h.Rb(0,"app-freecell-view"),h.Rb(1,"app-freecell-main"),h.Rb(2,"div",0),h.Ac(3),h.Qb(),h.Qb(),h.Qb()),2&e&&(h.Db("app-dark-theme",t.settings.state.enableDarkMode),h.zb(3),h.Bc(t.info))},directives:[lt,Dt],styles:[".version-info[_ngcontent-%COMP%]{font-size:small;position:absolute;bottom:0;right:0}"]}),e})()}];let Nt=(()=>{class e{}return e.\u0275mod=h.Jb({type:e}),e.\u0275inj=h.Ib({factory:function(t){return new(t||e)},providers:[o.a,l.a,d.a,g,y,f.a,p.a],imports:[[a.c.forChild(It),i.c,s.d,c.a,r.a],a.c]}),e})()},RDYl:function(e){e.exports=JSON.parse('{"a":"freecell-demo","b":"0.2.3"}')},WxrP:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return b}));var i=n("g/AF"),s=n("Bd3B"),a=n("lPNG"),c=n("2MXh");class r extends c.a{constructor(e,t,n){super(e,t,n),this.desk=[];for(let i=0;i<this.DESK_SIZE;i++)this.desk.push([])}toArray(){return Object(s.a)(this.desk)}clear(){for(let e=this.desk.length;e-- >0;)this.desk[e].length=0}addCard(e,t){this.desk[e].push(t)}getCard(e,t){const n=this.desk[e];return t<0&&(t=n.length+t),t>=0&&t<n.length?n[t]:-1}getLine(e){return this.desk[e]}getTableauAt(e){const t=[],n=this.desk[e];let i=n.length;if(i>0)for(t.push(n[i-1]);--i>0&&Object(a.e)(n[i-1],n[i])&&Object(a.h)(n[i-1])>0;)t.push(n[i-1]);return t.reverse(),t}countEmptyCells(){let e=0;for(let t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}countEmptyPiles(){let e=0;for(let t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}isSolved(){for(let e=this.BASE_START;e<this.BASE_END;e++)if(this.desk[e].length<a.b)return!1;return!0}countEmpty(){return this.countEmptyCells()+this.countEmptyPiles()}getEmptyCell(){for(let e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}getEmptyPile(){for(let e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}getBase(e){const t=Object(a.j)(e),n=Object(a.h)(e);for(let i=0;i<this.BASE_NUM;i++)if(Object(a.j)(i)===t&&this.desk[i+this.BASE_START].length===n)return i+this.BASE_START;return-1}deal(e){const t=Object(a.d)(e);this.clear();for(let n=0;n<t.length;n++)this.addCard(this.PILE_START+n%this.PILE_NUM,t[n]);return t}isMoveValid(e,t){if(e===t)return!1;if(e<0||e>=this.DESK_SIZE)return!1;if(t<0||t>=this.DESK_SIZE)return!1;const n=this.desk[e].length;if(n<=0)return!1;const i=this.desk[t].length;if(this.isCell(t))return 0===i;const s=this.desk[e][n-1];if(this.isPile(t))return 0===i||Object(a.e)(this.desk[t][i-1],s);if(this.isBase(t)){const e=Object(a.j)(s),n=Object(a.h)(s);return Object(a.j)(t-this.BASE_START)===e&&i===n}return!1}moveCard(e,t){this.addCard(t,this.desk[e].pop())}getMoves(){const e=[];for(let t=this.DESK_SIZE;t-- >0;)for(let n=t;n-- >0;)this.isMoveValid(t,n)&&e.push({giver:t,taker:n}),this.isMoveValid(n,t)&&e.push({giver:n,taker:t});return e}}class o{constructor(e){this.success=e}}class l extends c.a{constructor(e,t,n,i){super(e,t,n),this.desk=i,this.cardToWatch=-1,this.searchTime=500,this.done=new Set,this.buffers=[[],[]],this.iteration=0,this.path="",this.onMove=(e,t,n)=>{}}get doneSize(){return this.done.size}stop(e){throw new o(e)}getAllPaths(){return this.buffers[this.iteration%2]}getPath(){const e=this.buffers[this.iteration%2];return e[e.length-1]}clear(){this.done.clear(),this.buffers[0].length=0,this.buffers[1].length=0,this.iteration=0,this.path=""}prepare(){this.clear(),this.done.add(this.toKey()),this.buffers[0][0]=""}nextIteration(){const e=this.buffers[this.iteration%2];if(this.iteration++,e.length<=0)return!1;for(const t of e)this.skipForward(t),this.findMoves(),this.skipBackward();return e.length=0,this.buffers[this.iteration%2].length>0}solve(){this.prepare();const e=Date.now();try{for(;this.nextIteration();)Date.now()-e>this.searchTime&&this.stop(!1)}catch(t){if(t instanceof o)return t.success;throw t}return!1}skipForward(e){for(let t=0;t<e.length;t+=2)this.desk[e.charCodeAt(t+1)].push(this.desk[e.charCodeAt(t)].pop());this.path=e}skipBackward(){const e=this.path;for(let t=e.length;t>0;t-=2)this.desk[e.charCodeAt(t-2)].push(this.desk[e.charCodeAt(t-1)].pop())}move(e,t,n){this.desk[n].push(this.desk[t].pop());const i=this.toKey();this.done.has(i)||(this.done.add(i),this.buffers[this.iteration%2].push(this.path+String.fromCharCode(t,n)),!(this.cardToWatch<0||this.cardToWatch===e)||this.cardFilter&&!this.cardFilter[e]||this.destinationFilter&&!this.destinationFilter[n]||this.onMove(e,t,n)),this.desk[t].push(this.desk[n].pop())}findMoves(){const e=this.cardFilter,t=this.getEmptyCell(),n=this.getEmptyPile();for(let i=0;i<this.DESK_SIZE;i++){const s=this.desk[i];if(s.length>0){const c=s[s.length-1];if(!e||e[c]){if(!this.isBase(i)){const e=this.getBase(c);e>=0&&this.move(c,i,e)}for(let e=this.PILE_START;e<this.PILE_END;e++)if(e!==i){const t=this.desk[e];t.length>0&&Object(a.e)(t[t.length-1],c)&&this.move(c,i,e)}t>=0&&(this.isCell(i)||this.move(c,i,t)),n>=0&&(!this.isPile(i)||s.length>1)&&this.move(c,i,n)}}}}baseToString(){let e="";for(let t=this.BASE_START;t<this.BASE_END;t++)e+=String.fromCharCode(this.desk[t].length);return e}pileToString(){const e=[];for(let t=this.PILE_START;t<this.PILE_END;t++)e.push(String.fromCharCode(...this.desk[t]));return e.sort(),e.join(String.fromCharCode(a.a))}toKey(){return this.baseToString()+this.pileToString()}getEmptyCell(){for(let e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}getEmptyPile(){for(let e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}countEmptyCells(){let e=0;for(let t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}countEmptyPiles(){let e=0;for(let t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}countEmpty(){return this.countEmptyCells()+this.countEmptyPiles()}countCardsInBases(){let e=0;for(let t=this.BASE_START;t<this.BASE_END;t++)e+=this.desk[t].length;return e}getBase(e){const t=Object(a.j)(e),n=Object(a.h)(e);for(let i=this.BASE_START+t;i<this.BASE_END;i+=a.c)if(this.desk[i].length===n)return i;return-1}}class d extends r{constructor(e,t,n){super(e,t,n),this.lineMap=[],this.spotMap=[]}toLine(e){return this.lineMap[e]}toSpot(e){return this.spotMap[e]}clear(){super.clear(),this.lineMap.length=0,this.spotMap.length=0}addCard(e,t){super.addCard(e,t),this.lineMap[t]=e,this.spotMap[t]=this.getLine(e).length-1}asTablaeu(e){let t=this.getTableauAt(this.lineMap[e]);const n=t.indexOf(e);return n<0?t=[e]:n>0&&t.splice(0,n),t}getBestPath(e,t){if(e.length<=0)return"";const n=e[e.length-1],i=this.lineMap[n];if(this.getCard(i,-1)!==n)return"";if(1===e.length)return this.isMoveValid(i,t)?String.fromCharCode(i,t):"";const a=new l(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray());if(a.cardToWatch=n,a.cardFilter=e.reduce((e,t)=>(e[t]=!0,e),{}),a.destinationFilter={[t]:!0},this.isPile(t)&&0===this.getLine(t).length)for(let s=this.PILE_START;s<this.PILE_END;s++)0===this.getLine(s).length&&(a.destinationFilter[s]=!0);if(a.onMove=(t,n,i)=>{Object(s.b)(a.desk[i],e)&&a.stop(!0)},a.solve()){let e=a.getPath();const n=e.charCodeAt(e.length-1);return n!==t&&(e=function(e,t,n){const i=[];for(let s=0;s<e.length;s++){let a=e.charCodeAt(s);a===n?a=t:a===t&&(a=n),i.push(a)}return String.fromCharCode(...i)}(e,t,n)),e}return""}solveFor(e,t){if(this.getLine(t).length<=0)return"";if(e.length<=0)return"";const n=e[e.length-1];if(this.getCard(t,-1)!==n)return"";const i=new l(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray());let a="",c=0;return i.cardToWatch=this.getCard(t,-1),i.cardFilter={[i.cardToWatch]:!0},i.onMove=()=>{a||(a=i.getPath(),c=1)},i.findMoves(),a?(this.isBase(a.charCodeAt(1))||e.length>1&&(i.cardFilter=e.reduce((e,t)=>(e[t]=!0,e),{}),i.onMove=(n,r,o)=>{if(o!==t){const n=Object(s.e)(i.desk[o],e);Object(s.e)(i.desk[t],e,0,n)+n===e.length&&c<n&&(a=i.getPath(),c=n,c===e.length&&i.stop(!0))}},i.solve()),a):a}}function u(e,t,n){const s=new d(e.pile,e.cell,e.base);s.deal(e.deal);for(let a=0;a+1<e.path.length;a+=2){const c=Object(i.c)(e.path,a),r=Object(i.c)(e.path,a+1);if(!s.isMoveValid(c,r)){n&&n(s,c,r,a/2);break}s.moveCard(c,r),t&&t(s,c,r,a/2)}return s}function h(e,t,n){return u(Object.assign(Object.assign({},e),{path:e.path.substring(0,2*e.mark)}),t,n)}function b(e){let t="";return u(e,(e,n,s,a)=>{t=Object(i.b)(t,t.length/2,n,s)},(t,n,i,s)=>{console.warn("Invalid subpath:",e.path.substring(s+s))}),t}},afNV:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("SeXe");let s=class extends i.a{constructor(e=null,t=[]){super(e),this._subscriptions=t}_addSubscription(e){this._subscriptions.push(e)}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}}},dkWW:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fKvJ"),s=n("fXoL");let a=(()=>{class e extends i.a{constructor(){super(200)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac}),e})()},"g/AF":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return r}));var i=n("voYn"),s=n("dPmG");function a(e,t){return Math.floor(Object(i.a)(e,t).length/2)}function c(e,t){return Object(s.e)(e.charCodeAt(t))}function r(e,t,n,i){return t>0&&i===function(e,t){return c(e,t+t-2)}(e,t)&&n===function(e,t){return c(e,t+t-1)}(e,t)?e.substring(0,t+t-2):e.substring(0,t+t)+function(...e){return Object(s.c)(e)}(n,i)}},jZWl:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return r}));var i=n("SeXe"),s=n("2MXh"),a=n("fXoL");const c={base:4,cell:4,pile:8};let r=(()=>{class e extends i.a{constructor(){super(c),this._basis=new s.a(c.pile,c.cell,c.base)}get basis(){return this._basis}_validate(e){return e.base>0&&e.cell>0&&e.pile>0&&(e=super._validate(e))?(this._basis=new s.a(e.pile,e.cell,e.base),e):null}set(e){return this._set(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Hb({token:e,factory:e.\u0275fac}),e})()},lPNG:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"j",(function(){return u})),n.d(t,"f",(function(){return h})),n.d(t,"i",(function(){return b})),n.d(t,"g",(function(){return g})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return p})),Array.from("SDCH");const i=["\u2660","\u2666","\u2663","\u2665"],s=["spades","diamonds","clubs","hearts"],a=(Array.from("A23456789TJQK"),["A","2","3","4","5","6","7","8","9","10","J","Q","K"]),c=["Ace","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Jack","Queen","King"],r="SDCH".length,o="A23456789TJQK".length,l=r*o;function d(e){return Math.floor(e/r)}function u(e){return e%r}function h(e){return a[d(e)]+i[u(e)]}function b(e){return s[u(e)]}function g(e){return c[d(e)]}function f(e){const t=[];for(let n=0;n<l;n++)t[n]=n;if(e>=0){const n=2147483648,i=1103515245,s=12345;for(let a=0;a<l;a++){const c=(e=(i*e+s)%n)%l;if(a!==c){const e=t[a];t[a]=t[c],t[c]=e}}}return t}function p(e,t){return d(e)===d(t)+1&&u(e)%2!=u(t)%2}},mrSG:function(e,t,n){"use strict";function i(e,t,n,i){return new(n||(n=Promise))((function(s,a){function c(e){try{o(i.next(e))}catch(t){a(t)}}function r(e){try{o(i.throw(e))}catch(t){a(t)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}o((i=i.apply(e,t||[])).next())}))}n.d(t,"a",(function(){return i}))},tt9D:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u}));var i=n("SeXe"),s=n("fXoL");const a=["sidenav","sandwich"];var c=function(e){return e[e.Mouse=1]="Mouse",e[e.Touch=2]="Touch",e[e.Keyboard=4]="Keyboard",e[e.All=7]="All",e}({});const r={view:a[0],aspectRatio:.56,sandwichOrder:0,sidenavModeSide:!0,sidenavClosed:!0,deckUseSvg:!1,enableSound:!1,enableRipples:!0,enableWinAnimation:!0,enableDarkMode:!1,assistLevel:1e6,inputMode:c.All},o={aspectRatio:.4,assistLevel:2e4,sandwichOrder:0,inputMode:1},l={aspectRatio:.7,assistLevel:2e6,sandwichOrder:5,inputMode:c.All},d="[FreecellSettingsState]";let u=(()=>{class e extends i.a{constructor(){super(r);const e=localStorage.getItem(d);if(e){const t=JSON.parse(e);if(t){const e=Object.assign({},r);for(const n of this.keys)typeof e[n]==typeof t[n]&&(e[n]=t[n]);this._set(e)}}}restoreDefaults(){this.set(r)}_validate(e){a.indexOf(e.view)<0&&(e.view=r.view);for(const t of Object.keys(o))e[t]=Math.max(o[t],Math.min(l[t],e[t]));return super._validate(e)}set(e){const t=this._set(e);if(t)try{localStorage.setItem(d,JSON.stringify(this.state))}catch(n){console.warn("localStorage error:",n)}return t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac}),e})()}}]);
!function(){var e;function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,c=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw c}}}}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=u(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}}).apply(this,arguments)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1ROQ":function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("afNV"),a=n("jZWl"),r=n("g/AF"),s=n("WxrP"),u=n("fXoL"),f=Object.assign(Object.assign({},a.b),{deal:-1,mark:0,path:""}),h=function(){var e=function(e){d(n,e);var t=b(n);function n(e){var i;return c(this,n),(i=t.call(this,f))._game=null,i._addSubscription(e.subscribe(function(e){i._set(Object.assign({},e))})),i}return o(n,[{key:"deal",get:function(){return this.state.deal},set:function(e){if(this.deal!==e){var t=f.path,n=f.mark;this._set({deal:e,path:t,mark:n})}}},{key:"mark",get:function(){return this.state.mark},set:function(e){this.mark!==e&&this._set({mark:e})}},{key:"path",get:function(){return this.state.path},set:function(e){this.path!==e&&this._set({path:e})}},{key:"game",get:function(){return this._game||(this._game=Object(s.c)(this.state))}},{key:"move",value:function(e,t){var n=this.state,i=Object(r.b)(n.path,n.mark,e,t);this._set({mark:i.length/2,path:n.path.startsWith(i)?n.path:i})}},{key:"set",value:function(e,t,n){var i=this.state;e===i.deal&&t===i.path&&n===i.mark||this._set({deal:e,path:t,mark:n})}},{key:"_validate",value:function(e){var t=Object(s.a)(e);return e.path!==t&&(console.warn("Replacing path with:",t),e.path=t),e.mark=Math.max(0,Math.min(e.path.length/2,e.mark)),(e=l(g(n.prototype),"_validate",this).call(this,e))&&(this._game=null),e}}]),n}(i.a);return e.\u0275fac=function(t){return new(t||e)(u.Yb(a.a))},e.\u0275prov=u.Kb({token:e,factory:e.\u0275fac}),e}()},"2MXh":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(t,n,i){c(this,e),this.PILE_NUM=t,this.CELL_NUM=n,this.BASE_NUM=i,this.PILE_START=0,this.DESK_SIZE=t+n+i,this.PILE_END=this.BASE_START=this.PILE_START+this.PILE_NUM,this.BASE_END=this.CELL_START=this.BASE_START+this.BASE_NUM,this.CELL_END=this.CELL_START+this.CELL_NUM}return o(e,[{key:"isPile",value:function(e){return e>=this.PILE_START&&e<this.PILE_END}},{key:"isBase",value:function(e){return e>=this.BASE_START&&e<this.BASE_END}},{key:"isCell",value:function(e){return e>=this.CELL_START&&e<this.CELL_END}},{key:"getSpotName",value:function(e){return this.isBase(e)?"base "+(e-this.BASE_START):this.isPile(e)?"pile "+(e-this.PILE_START):this.isCell(e)?"cell "+(e-this.CELL_START):"unknown "+e}}]),e}()},"9fNZ":function(e,t,n){e.exports=n.p+"0-es5.db97afc6e2847476d60b.worker.js"},GPiM:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var a=n("afNV"),r=n("fXoL"),s=n("1ROQ"),l=n("dkWW"),u=n("tt9D"),f=n("dNgK"),h={solved:!1,canAssist:!1,canUndo:!1,canRedo:!1,nextMove:null,assistRequest:null},g=String.fromCharCode(215),p=function(){var t=function(t){d(a,t);var n=b(a);function a(e,t,r,s){var o;return c(this,a),(o=n.call(this,h))._gameService=e,o._playService=t,o._settings=r,o._snackBar=s,o._worker=null,o._createWorker(),o._addSubscription(o._gameService.subscribe(function(e){var t=Object.assign({},h),n=o._gameService.game;if(t.solved=n.isSolved(),!t.solved){var a=n.countEmpty();if(a<n.PILE_NUM+n.CELL_NUM){var r=n.getMoves();t.canAssist=!!o._worker&&r.length>0&&a<=n.CELL_NUM;var c,s=i(r);try{for(s.s();!(c=s.n()).done;){var l=c.value;if(n.isBase(l.taker)){t.nextMove=l;break}}}catch(u){s.e(u)}finally{s.f()}}}t.canUndo=e.mark>0,t.canRedo=2*e.mark<e.path.length,o.state.assistRequest&&(o.cancelAssist(),o._snackBar.open("Assist was canceled.",g,{duration:1e3})),Promise.resolve().then(function(){return o._set(t)})})),o}return o(a,[{key:"undo",value:function(){var e=this._gameService.state.mark-1;e>=0&&(this._gameService.mark=e)}},{key:"redo",value:function(){var e=this._gameService.state.mark+1;e+e<=this._gameService.state.path.length&&(this._gameService.mark=e)}},{key:"next",value:function(){var e=this.state.nextMove;e&&this._gameService.move(e.giver,e.taker)}},{key:"playNext",value:function(){var e=this;this._playService.play(function(){return e.next(),!!e.state.nextMove})}},{key:"play",value:function(e){var t=this;this._playService.play(function(){if(e.length>1){var n=e.charCodeAt(0),i=e.charCodeAt(1);e=e.substring(2),t._gameService.move(n,i)}return e.length>1})}},{key:"assist",value:function(){var e=this;if(this._worker&&this.state.canAssist){var t=this._gameService.game,n={base:t.BASE_NUM,cell:t.CELL_NUM,pile:t.PILE_NUM,desk:t.toArray()},i=JSON.stringify(n);this._worker.postMessage({requestId:i,desk:n,searchThreshold:this._settings.state.assistLevel}),this._set({assistRequest:i,canAssist:!1});var a=this._snackBar.open("Thinking...",g).onAction().subscribe(function(){a.unsubscribe(),e.cancelAssist(),e._set({assistRequest:null,canAssist:!0})})}}},{key:"cancelAssist",value:function(){this._worker&&this._worker.postMessage({requestId:null})}},{key:"_createWorker",value:function(){var t=this;"undefined"!=typeof Worker&&(this._worker=new Worker(e,void 0),this._worker.onmessage=function(e){var n=e.data;if(n.requestId===t.state.assistRequest){var i="Unable to assist ;-(";n.path&&(i="Assisting...",t.play(n.path)),t._snackBar.open(i,g,{duration:2e3}),t._set({assistRequest:h.assistRequest})}})}}]),a}(a.a);return t.\u0275fac=function(e){return new(e||t)(r.Yb(s.a),r.Yb(l.a),r.Yb(u.a),r.Yb(f.a))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t}()}).call(this,n("9fNZ"))},LGbN:function(a,r,s){"use strict";s.r(r),s.d(r,"FreecellModule",function(){return bn});var u=s("ofXK"),f=s("3Pt+"),h=s("tyNb"),p=s("hctd"),v=s("pKmL"),m=s("GPiM"),_=s("dkWW"),k=s("jZWl"),y=s("bgvp"),S=s("fXoL");function C(e){return new Promise(function(t,n){e.onsuccess=function(){return t(e.result)},e.onerror=function(){return n(e.error.message)}})}var T,w=((T=function(){function e(){var t=this;c(this,e),this._openPromise=new Promise(function(e,n){var i=window.indexedDB.open("freecell-db",1);i.onerror=function(e){t.onOpenError(i),n(i.error.message)},i.onupgradeneeded=function(e){return t.onUpgradeNeeded(i)},i.onsuccess=function(n){t.onOpenSuccess(i),e()}})}return o(e,[{key:"isOpen",get:function(){return!!this._db}},{key:"onOpenSuccess",value:function(e){this._db=e.result,console.log("DB open success:",e.result.name)}},{key:"onOpenError",value:function(e){this.openError="DB open error: "+e.error.message,console.error("DB Error:",e.error)}},{key:"onUpgradeNeeded",value:function(e){this._db=e.result,this._db.createObjectStore("game",{keyPath:"deal",autoIncrement:!1}).createIndex("date","date",{unique:!1})}},{key:"getGame",value:function(e){return this._getStore("game","readonly").then(function(t){return C(t.get(e))})}},{key:"setGame",value:function(e){return e.date||(e.date=Object(y.a)()),this._getStore("game","readwrite").then(function(t){return C(t.put(e))})}},{key:"_createTransaction",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return this._openPromise.then(function(){return t._db.transaction(e,n)})}},{key:"_getStore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return this._createTransaction([e],t).then(function(t){return t.objectStore(e)})}}]),e}()).\u0275fac=function(e){return new(e||T)},T.\u0275prov=S.Kb({token:T,factory:T.\u0275fac}),T),O=s("1ROQ"),M=s("tt9D");function E(e,t,n,i){return new(n||(n=Promise))(function(a,r){function c(e){try{o(i.next(e))}catch(t){r(t)}}function s(e){try{o(i.throw(e))}catch(t){r(t)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}o((i=i.apply(e,t||[])).next())})}var L=s("dPmG"),U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];c(this,e),this._subscriptions=t}return o(e,[{key:"ngOnDestroy",value:function(){this._subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"_addSubscription",value:function(e){this._subscriptions.push(e)}}]),e}(),P=function(e){return e[e.card=0]="card",e[e.deal=1]="deal",e[e.shuffle=2]="shuffle",e[e.aplause_001=3]="aplause_001",e[e.aplause_002=4]="aplause_002",e[e.aplause_003=5]="aplause_003",e[e.aplause_004=6]="aplause_004",e[e.aplause_005=7]="aplause_005",e[e.aplause_006=8]="aplause_006",e[e.aplause_007=9]="aplause_007",e[e.length=10]="length",e}({});function x(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=e.createBufferSource();r.buffer=n;var c=r;if(1!==i){var s=e.createGain();s.gain.value=i,c.connect(s),c=s}if(0!==a){var o=e.createStereoPanner();o.pan.value=a,c.connect(o),c=o}return c.connect(t),r}var B,A=((B=function(e){d(n,e);var t=b(n);function n(e){var i;return c(this,n),(i=t.call(this))._enabled=!1,i._activated=!1,i._sounds=null,i._nextState=Promise.resolve(),i._addSubscription(e.subscribe(function(e){e.enableSound?i.enable():i.disable()})),i}return o(n,[{key:"enabled",get:function(){return this._enabled}},{key:"activated",get:function(){return this._activated}},{key:"activate",value:function(){this._activated=!0}},{key:"disable",value:function(){var e=this;this._next(function(){return E(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._enabled=!1);case 1:case"end":return e.stop()}},e,this)}))})}},{key:"enable",value:function(){var e=this;this._next(function(){return E(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._sounds){e.next=6;break}return this._context||(this._context=new AudioContext),e.next=4,this._getBuffers();case 4:t=e.sent,this._sounds=function(e,t){var n=function(e){var t=e.createDynamicsCompressor();return t.connect(e.destination),t}(e),i={deal:function(){x(e,n,t[P.deal],1).start()},shuffle:function(){x(e,n,t[P.shuffle],1.5).start()}},a=0;return i.card=function(){0==a++&&setTimeout(function(){(1===a?x(e,n,t[P.card],.8):x(e,n,t[P.shuffle],1)).start(),a=0})},i.victory=function(){for(var i=P.aplause_001,a=P.aplause_007,r=e.currentTime,c=0,s=Object(L.k)(1,4);c<s;c++){var o=x(e,n,t[Object(L.k)(i,a+1)],Object(L.l)(.75,1.75),Object(L.k)(-100,101)/100);o.playbackRate.value=Object(L.l)(.85,1.75),o.start(r+3*Math.random())}},i}(this._context,t);case 6:this._enabled=!0;case 7:case"end":return e.stop()}},e,this)}))})}},{key:"play",value:function(e){return E(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._nextState;case 2:if(!(this._enabled&&this._activated&&this._sounds)){t.next=11;break}if(n=this._sounds[e],t.t0="function"==typeof n,!t.t0){t.next=11;break}if(t.t1="suspended"===this._context.state,!t.t1){t.next=10;break}return t.next=10,this._context.resume();case 10:n();case 11:case"end":return t.stop()}},t,this)}))}},{key:"_next",value:function(e){return E(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._nextState;case 3:return t.prev=3,this._nextState=e(),t.finish(3);case 6:case"end":return t.stop()}},t,this,[[0,,3,6]])}))}},{key:"_getBuffers",value:function(){return this._buffers||(this._buffers=this._loadAll()),this._buffers}},{key:"_loadAll",value:function(){for(var e,t,n=[],i=0;i<P.length;i++)n.push("./assets/freecell/sounds/"+P[i]+".mp3");return e=this._context,t=n,new Promise(function(n,i){var a=t.length,r=new Array(t.length);0===a&&n([]),t.forEach(function(t,c){(function(e,t){return new Promise(function(t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){return t(i.response)},i.onerror=function(e){return n(e)},i.send()})})(t).then(function(t){return function(e,t){return new Promise(function(n,i){e.decodeAudioData(t,function(e){return n(e)},function(e){return i(e)})})}(e,t)}).then(function(e){r[c]=e,0==--a&&n(r)}).catch(function(e){return i(e)})})})}}]),n}(U)).\u0275fac=function(e){return new(e||B)(S.Yb(M.a))},B.\u0275prov=S.Kb({token:B,factory:B.\u0275fac}),B),I=s("RDYl"),R=s("rDax"),D=s("0IaG"),j=s("wZkO"),N=s("1jcm"),F=s("bTqV"),z=s("NFeN"),X=s("5RNC"),q=s("jaxi"),G=s("f0Cb");function W(e,t){if(1&e&&(S.Ub(0,"mat-icon",8),S.Bc(1),S.Tb(),S.Bc(2," Game Sounds ")),2&e){var n=S.fc();S.Cb(1),S.Cc(n.settings.state.enableSound?"volume_up":"volume_off")}}function Y(e,t){1&e&&(S.Ub(0,"mat-icon",8),S.Bc(1,"assistant"),S.Tb(),S.Bc(2," Assist level "))}function K(e,t){1&e&&(S.Ub(0,"mat-icon",8),S.Bc(1,"layers"),S.Tb(),S.Bc(2," Card Effects "))}function H(e,t){1&e&&(S.Ub(0,"mat-icon",8),S.Bc(1,"dashboard"),S.Tb(),S.Bc(2," Appearance "))}var Q,V=1e3,Z=((Q=function(){function e(t){var n=this;c(this,e),this.settings=t,this.aspectRatioMin=M.d.aspectRatio*V,this.aspectRatioMax=M.c.aspectRatio*V,this.aspectRatioStep=5,this.assistLevelMin=Math.ceil(M.d.assistLevel/V),this.assistLevelMax=Math.floor(M.c.assistLevel/V),this.assistLevelStep=5,this.aspectRatioLabel=function(e){return(100*e/V).toFixed(1)},this.assistLevelLabel=function(e){var t=(n.assistLevelMax-n.assistLevelMin)/3;return e<n.assistLevelMin+t?"low":e>n.assistLevelMax-t?"high":"norm"}}return o(e,[{key:"aspectRatioPercent",get:function(){return(100*this.settings.state.aspectRatio).toFixed(1)}},{key:"aspectRatio",get:function(){return Math.round(this.settings.state.aspectRatio*V)},set:function(e){this.settings.set({aspectRatio:+e/V})}},{key:"assistLevel",get:function(){return Math.round(this.settings.state.assistLevel/V)},set:function(e){(e=Math.max(this.assistLevelMin,Math.min(this.assistLevelMax,+e)))!==this.assistLevel&&this.settings.set({assistLevel:e*V})}},{key:"assistLevelColor",value:function(){switch(this.assistLevelLabel(this.assistLevel)){case"low":return"primary";case"high":return"warn";default:return"accent"}}},{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Q)(S.Ob(M.a))},Q.\u0275cmp=S.Ib({type:Q,selectors:[["app-freecell-settings-dialog"]],decls:74,vars:27,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-tab-label",""],[1,"tab-content"],[3,"checked","change"],[1,"pad-top"],["mat-stroked-button","",3,"disabled","click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","color","ngModelChange"],[1,"margin-right-8"],[3,"value"],["value","sidenav",3,"click"],["value","sandwich",3,"click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","ngModelChange"],["align","center"],["mat-button","",3,"click"],["mat-button","","matDialogClose","","cdkFocusInitial",""]],template:function(e,t){1&e&&(S.Ub(0,"h2",0),S.Bc(1,"Freecell Settings"),S.Tb(),S.Ub(2,"mat-dialog-content",1),S.Ub(3,"mat-tab-group"),S.Ub(4,"mat-tab"),S.zc(5,W,3,1,"ng-template",2),S.Ub(6,"div",3),S.Ub(7,"mat-slide-toggle",4),S.bc("change",function(e){return t.settings.set({enableSound:!!e.checked})}),S.Bc(8," Enable "),S.Tb(),S.Tb(),S.Tb(),S.Ub(9,"mat-tab"),S.zc(10,Y,3,0,"ng-template",2),S.Ub(11,"div",3),S.Ub(12,"p"),S.Bc(13,"The maximum number of moves the assistant will try to solve."),S.Tb(),S.Ub(14,"div",5),S.Ub(15,"button",6),S.bc("click",function(){return t.assistLevel=t.assistLevel-t.assistLevelStep}),S.Ub(16,"mat-icon"),S.Bc(17,"chevron_left"),S.Tb(),S.Tb(),S.Ub(18,"button",6),S.bc("click",function(){return t.assistLevel=t.assistLevel+t.assistLevelStep}),S.Ub(19,"mat-icon"),S.Bc(20,"chevron_right"),S.Tb(),S.Tb(),S.Ub(21,"mat-slider",7),S.bc("ngModelChange",function(e){return t.assistLevel=e}),S.Tb(),S.Bc(22),S.gc(23,"number"),S.Tb(),S.Tb(),S.Tb(),S.Ub(24,"mat-tab"),S.zc(25,K,3,0,"ng-template",2),S.Ub(26,"div",3),S.Ub(27,"div"),S.Ub(28,"mat-slide-toggle",4),S.bc("change",function(e){return t.settings.set({deckUseSvg:!!e.checked})}),S.Bc(29," Use SVG "),S.Tb(),S.Tb(),S.Ub(30,"div",5),S.Ub(31,"mat-slide-toggle",4),S.bc("change",function(e){return t.settings.set({enableRipples:!!e.checked})}),S.Bc(32," Enable Ripples "),S.Tb(),S.Tb(),S.Ub(33,"div",5),S.Ub(34,"mat-slide-toggle",4),S.bc("change",function(e){return t.settings.set({enableWinAnimation:!!e.checked})}),S.Bc(35," Enable Victory Animation "),S.Tb(),S.Tb(),S.Tb(),S.Tb(),S.Ub(36,"mat-tab"),S.zc(37,H,3,0,"ng-template",2),S.Ub(38,"div",3),S.Ub(39,"div"),S.Ub(40,"mat-icon",8),S.Bc(41,"table_chart"),S.Tb(),S.Bc(42,"Layout: "),S.Ub(43,"span"),S.Bc(44,"horizontal"),S.Tb(),S.Bc(45," or "),S.Ub(46,"span"),S.Bc(47,"vertical"),S.Tb(),S.Bc(48,". "),S.Ub(49,"mat-button-toggle-group",9),S.Ub(50,"mat-button-toggle",10),S.bc("click",function(){return t.settings.set({view:"sidenav"})}),S.Ub(51,"mat-icon"),S.Bc(52,"stay_current_landscape"),S.Tb(),S.Tb(),S.Ub(53,"mat-button-toggle",11),S.bc("click",function(){return t.settings.set({view:"sandwich"})}),S.Ub(54,"mat-icon"),S.Bc(55,"stay_current_portrait"),S.Tb(),S.Tb(),S.Tb(),S.Tb(),S.Ub(56,"div",5),S.Ub(57,"mat-icon",8),S.Bc(58,"aspect_ratio"),S.Tb(),S.Bc(59,"The playground height: "),S.Ub(60,"mat-slider",12),S.bc("ngModelChange",function(e){return t.aspectRatio=e}),S.Tb(),S.Bc(61),S.Tb(),S.Tb(),S.Tb(),S.Tb(),S.Tb(),S.Pb(62,"mat-divider"),S.Ub(63,"mat-dialog-actions",13),S.Ub(64,"button",14),S.bc("click",function(){return t.settings.restoreDefaults()}),S.Ub(65,"mat-icon"),S.Bc(66,"settings_backup_restore"),S.Tb(),S.Ub(67,"label"),S.Bc(68,"RESET"),S.Tb(),S.Tb(),S.Ub(69,"button",15),S.Ub(70,"mat-icon"),S.Bc(71,"close"),S.Tb(),S.Ub(72,"label"),S.Bc(73,"CLOSE"),S.Tb(),S.Tb(),S.Tb()),2&e&&(S.Cb(7),S.lc("checked",t.settings.state.enableSound),S.Cb(8),S.lc("disabled",t.assistLevelMin>=t.assistLevel),S.Cb(3),S.lc("disabled",t.assistLevel>=t.assistLevelMax),S.Cb(3),S.lc("displayWith",t.assistLevelLabel)("min",t.assistLevelMin)("max",t.assistLevelMax)("step",t.assistLevelStep)("ngModel",t.assistLevel)("color",t.assistLevelColor()),S.Cb(1),S.Dc(" ",S.ic(23,24,t.settings.state.assistLevel,"1.0-0")," "),S.Cb(6),S.lc("checked",t.settings.state.deckUseSvg),S.Cb(3),S.lc("checked",t.settings.state.enableRipples),S.Cb(3),S.lc("checked",t.settings.state.enableWinAnimation),S.Cb(9),S.Gb("text-selected","sidenav"===t.settings.state.view),S.Cb(3),S.Gb("text-selected","sandwich"===t.settings.state.view),S.Cb(3),S.lc("value",t.settings.state.view),S.Cb(11),S.lc("displayWith",t.aspectRatioLabel)("min",t.aspectRatioMin)("max",t.aspectRatioMax)("step",t.aspectRatioStep)("ngModel",t.aspectRatio),S.Cb(1),S.Dc(" ",t.aspectRatioPercent,"% of its width. "))},directives:[D.h,D.e,j.b,j.a,j.c,N.a,F.a,z.a,X.a,f.i,f.l,q.b,q.a,G.a,D.c,D.d],pipes:[u.e],styles:[".pad-top[_ngcontent-%COMP%], .tab-content[_ngcontent-%COMP%]{padding-top:16px}.tab-content[_ngcontent-%COMP%]{min-height:12.75rem;margin-left:10px}@media (min-aspect-ratio:8/5){.tab-content[_ngcontent-%COMP%]{min-height:9rem}}.margin-right-8[_ngcontent-%COMP%]{margin-right:8px}span.text-selected[_ngcontent-%COMP%]{font-weight:600}"]}),Q),J=s("0MNC");function $(e,t){1&e&&(S.ec(),S.Ub(0,"svg",6),S.Pb(1,"path",7),S.Pb(2,"path",8),S.Tb())}function ee(e,t){1&e&&(S.Sb(0),S.ec(),S.Ub(1,"svg",6),S.Pb(2,"path",7),S.Pb(3,"path",11),S.Tb(),S.Rb())}function te(e,t){if(1&e){var n=S.Vb();S.Ub(0,"button",9),S.bc("click",function(){S.sc(n);var e=t.$implicit;return S.fc().changeOrder(e)}),S.zc(1,ee,4,0,"ng-container",10),S.Tb()}if(2&e){var i=t.$implicit,a=S.fc(),r=S.qc(1);S.Gb("sandwich-button-move-down",a.order[1]>a.order[i])("sandwich-button-move-up",a.order[i]>a.order[1]),S.Cb(1),S.lc("ngIf",a.order[1]>a.order[i])("ngIfElse",r)}}function ne(e,t){1&e&&S.Qb(0)}var ie=function(){return{$implicit:0}};function ae(e,t){if(1&e&&(S.Ub(0,"div",12),S.jc(1,1),S.zc(2,ne,1,0,"ng-container",13),S.Tb()),2&e){var n=S.fc(),i=S.qc(3);S.wc("order",n.order[0]),S.Cb(2),S.lc("ngTemplateOutlet",i)("ngTemplateOutletContext",S.mc(4,ie))}}function re(e,t){1&e&&S.Qb(0)}var ce=function(){return{$implicit:2}};function se(e,t){if(1&e&&(S.Ub(0,"div",14),S.jc(1,2),S.zc(2,re,1,0,"ng-container",13),S.Tb()),2&e){var n=S.fc(),i=S.qc(3);S.wc("order",n.order[2]),S.Cb(2),S.lc("ngTemplateOutlet",i)("ngTemplateOutletContext",S.mc(4,ce))}}var oe=[[["","appSandwichContent",""]],[["","appSandwichHeader",""]],[["","appSandwichFooter",""]]],le=["[appSandwichContent]","[appSandwichHeader]","[appSandwichFooter]"],ue=[5,7,11,15,19,21];function de(e,t){return Math.floor(ue[e]/Math.pow(3,2-t))%3}var fe,be,he=((fe=function(){function e(){c(this,e),this.sandwichOrderChange=new S.n,this.hideHeader=!1,this.hideFooter=!1,this.order=[0,1,2],this._sandwichOrder=0}return o(e,[{key:"sandwichOrder",get:function(){return this._sandwichOrder},set:function(e){this._sandwichOrder!==e&&e>=0&&e<ue.length&&(this._sandwichOrder=e,this.order[0]=de(e,0),this.order[1]=de(e,1),this.order[2]=de(e,2))}},{key:"ngOnInit",value:function(){}},{key:"changeOrder",value:function(e){var t=n(this.order),i=t[e];if(i>t[1])for(var a=t.length;a-- >0;)t[a]===i?t[a]=i-1:t[a]===i-1&&(t[a]=i);else if(i<t[1])for(var r=t.length;r-- >0;)t[r]===i?t[r]=i+1:t[r]===i+1&&(t[r]=i);this.sandwichOrderChange.emit(ue.indexOf(3*(3*t[0]+t[1])+t[2]))}}]),e}()).\u0275fac=function(e){return new(e||fe)},fe.\u0275cmp=S.Ib({type:fe,selectors:[["app-sandwich"]],inputs:{sandwichOrder:"sandwichOrder",hideHeader:"hideHeader",hideFooter:"hideFooter"},outputs:{sandwichOrderChange:"sandwichOrderChange"},ngContentSelectors:le,decls:9,vars:4,consts:[["arrowUpward",""],["moveButton",""],[1,"sandwich-container"],["class","sandwich-header",3,"order",4,"ngIf"],[1,"sandwich-content"],["class","sandwich-footer",3,"order",4,"ngIf"],["height","24","width","24"],["d","M0 0h24v24H0V0z","fill","none"],["d","M6 6h4v4h4V6h4l-6-4zM2 15h20v-4H2v4zm2-3h2v2H4v-2z","fill","currentColor"],["mat-icon-button","",3,"click"],[4,"ngIf","ngIfElse"],["d","M18 18h-4v-4h-4v4H6l6 4zM2 13h20V9H2v4zm2-3h2v2H4v-2z","fill","currentColor"],[1,"sandwich-header"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"sandwich-footer"]],template:function(e,t){1&e&&(S.kc(oe),S.zc(0,$,3,0,"ng-template",null,0,S.Ac),S.zc(2,te,2,6,"ng-template",null,1,S.Ac),S.Ub(4,"div",2),S.zc(5,ae,3,5,"div",3),S.Ub(6,"div",4),S.jc(7),S.Tb(),S.zc(8,se,3,5,"div",5),S.Tb()),2&e&&(S.Cb(5),S.lc("ngIf",!t.hideHeader),S.Cb(1),S.wc("order",t.order[1]),S.Cb(2),S.lc("ngIf",!t.hideFooter))},directives:[u.l,F.a,u.q],styles:["div.sandwich-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch}div.sandwich-footer[_ngcontent-%COMP%], div.sandwich-header[_ngcontent-%COMP%]{position:relative;flex-grow:0;flex-shrink:0}div.sandwich-content[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:0}.sandwich-button-move-down[_ngcontent-%COMP%], .sandwich-button-move-up[_ngcontent-%COMP%]{position:absolute;right:0;color:#bccfe0}.sandwich-button-move-down[_ngcontent-%COMP%]:hover, .sandwich-button-move-up[_ngcontent-%COMP%]:hover{color:#fff}.sandwich-button-move-down[_ngcontent-%COMP%]{bottom:0}.sandwich-button-move-up[_ngcontent-%COMP%]{top:0}"]}),fe),ge=s("/t3+"),pe=s("voYn"),ve=s("STbY"),me=s("MutI"),_e=((be=function(e){d(n,e);var t=b(n);function n(e){var i;return c(this,n),(i=t.call(this))._gameService=e,i.listItem=!1,i.dealLabel="",i.isMenuOpened=!1,i.minDeal=0,i.maxDeal=2147483648,i.digitCount=i.maxDeal.toString(10).length,i}return o(n,[{key:"ngOnInit",value:function(){var e=this;this._addSubscription(this._gameService.subscribe(function(t){e.deal=t.deal,e.dealLabel="#"+(e.deal>=0?Object(pe.c)(e.deal.toString(10),e.digitCount,"0"):Object(pe.c)("",e.digitCount,"#"))}))}},{key:"setDeal",value:function(e){e>=this.minDeal&&e<=this.maxDeal&&(this._gameService.deal=e)}},{key:"setRandomDeal",value:function(){this.setDeal(Object(L.k)(this.minDeal,this.maxDeal,this.deal))}}]),n}(U)).\u0275fac=function(e){return new(e||be)(S.Ob(O.a))},be.\u0275cmp=S.Ib({type:be,selectors:[["app-freecell-deal-menu"]],inputs:{listItem:"listItem"},features:[S.zb],decls:22,vars:7,consts:[["xPosition","before"],["appMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["mat-button","",3,"matMenuTriggerFor","menuOpened","menuClosed"]],template:function(e,t){if(1&e&&(S.Ub(0,"mat-menu",0,1),S.Ub(2,"button",2),S.bc("click",function(){return t.setDeal(t.deal+1)}),S.Ub(3,"mat-icon"),S.Bc(4,"navigate_next"),S.Tb(),S.Ub(5,"span"),S.Bc(6,"Next"),S.Tb(),S.Tb(),S.Ub(7,"button",2),S.bc("click",function(){return t.setDeal(t.deal-1)}),S.Ub(8,"mat-icon"),S.Bc(9,"navigate_before"),S.Tb(),S.Ub(10,"span"),S.Bc(11,"Previous"),S.Tb(),S.Tb(),S.Ub(12,"button",3),S.bc("click",function(){return t.setRandomDeal()}),S.Ub(13,"mat-icon"),S.Bc(14,"casino"),S.Tb(),S.Ub(15,"span"),S.Bc(16,"Random"),S.Tb(),S.Tb(),S.Tb(),S.Ub(17,"button",4),S.bc("menuOpened",function(){return t.isMenuOpened=!0})("menuClosed",function(){return t.isMenuOpened=!1}),S.Ub(18,"label"),S.Bc(19),S.Tb(),S.Ub(20,"mat-icon"),S.Bc(21),S.Tb(),S.Tb()),2&e){var n=S.qc(1);S.Cb(2),S.lc("disabled",t.deal>=t.maxDeal),S.Cb(5),S.lc("disabled",t.minDeal>=t.deal),S.Cb(10),S.Gb("mat-list-item",t.listItem),S.lc("matMenuTriggerFor",n),S.Cb(2),S.Cc(t.dealLabel),S.Cb(2),S.Cc(t.isMenuOpened?"remove":"expand_more")}},directives:[ve.a,ve.b,z.a,F.a,me.b,ve.d],styles:[""]}),be),ke=s("bv9b");function ye(e,t){1&e&&S.Pb(0,"mat-progress-bar",6)}function Se(e,t){if(1&e){var n=S.Vb();S.Ub(0,"button",2),S.bc("click",function(){return S.sc(n),S.fc().actionService.undo()}),S.Ub(1,"mat-icon"),S.Bc(2,"undo"),S.Tb(),S.Ub(3,"label"),S.Bc(4,"UNDO"),S.Tb(),S.Tb(),S.Ub(5,"button",2),S.bc("click",function(){return S.sc(n),S.fc().actionService.redo()}),S.Ub(6,"mat-icon"),S.Bc(7,"redo"),S.Tb(),S.Ub(8,"label"),S.Bc(9,"REDO"),S.Tb(),S.Tb(),S.Ub(10,"button",3),S.bc("click",function(){return S.sc(n),S.fc().actionService.playNext()}),S.Ub(11,"mat-icon"),S.Bc(12,"emoji_objects"),S.Tb(),S.Ub(13,"label"),S.Bc(14,"AUTO"),S.Tb(),S.Tb(),S.Ub(15,"button",4),S.bc("click",function(){return S.sc(n),S.fc().actionService.assist()}),S.Ub(16,"mat-icon"),S.Bc(17,"assistant"),S.Tb(),S.Ub(18,"label"),S.Bc(19,"ASSIST"),S.Tb(),S.zc(20,ye,1,0,"mat-progress-bar",5),S.Tb()}if(2&e){var i=S.fc();S.lc("disabled",!i.actionService.state.canUndo),S.Cb(5),S.lc("disabled",!i.actionService.state.canRedo),S.Cb(5),S.lc("disabled",!i.actionService.state.nextMove),S.Cb(5),S.lc("disabled",!i.actionService.state.canAssist),S.Cb(5),S.lc("ngIf",i.actionService.state.assistRequest)}}function Ce(e,t){1&e&&S.Pb(0,"mat-progress-bar",6)}function Te(e,t){if(1&e){var n=S.Vb();S.Sb(0),S.Ub(1,"button",7),S.bc("click",function(){return S.sc(n),S.fc().actionService.undo()}),S.Ub(2,"mat-icon"),S.Bc(3,"undo"),S.Tb(),S.Tb(),S.Ub(4,"button",7),S.bc("click",function(){return S.sc(n),S.fc().actionService.redo()}),S.Ub(5,"mat-icon"),S.Bc(6,"redo"),S.Tb(),S.Tb(),S.Ub(7,"button",8),S.bc("click",function(){return S.sc(n),S.fc().actionService.playNext()}),S.Ub(8,"mat-icon"),S.Bc(9,"emoji_objects"),S.Tb(),S.Tb(),S.Ub(10,"button",9),S.bc("click",function(){return S.sc(n),S.fc().actionService.assist()}),S.Ub(11,"mat-icon"),S.Bc(12,"assistant"),S.Tb(),S.zc(13,Ce,1,0,"mat-progress-bar",5),S.Tb(),S.Rb()}if(2&e){var i=S.fc();S.Cb(1),S.lc("disabled",!i.actionService.state.canUndo),S.Cb(3),S.lc("disabled",!i.actionService.state.canRedo),S.Cb(3),S.lc("disabled",!i.actionService.state.nextMove),S.Cb(3),S.lc("disabled",!i.actionService.state.canAssist),S.Cb(3),S.lc("ngIf",i.actionService.state.assistRequest)}}var we,Oe=((we=function(){function e(t){c(this,e),this.actionService=t,this.noLabel=!1}return o(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||we)(S.Ob(m.a))},we.\u0275cmp=S.Ib({type:we,selectors:[["app-freecell-action-buttons"]],inputs:{noLabel:"noLabel"},decls:3,vars:2,consts:[["buttons",""],[4,"ngIf","ngIfElse"],["mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","accent",3,"disabled","click"],["mat-stroked-button","","color","warn",3,"disabled","click"],["mode","indeterminate","color","warn","style","position: absolute; left: 0; bottom: 0",4,"ngIf"],["mode","indeterminate","color","warn",2,"position","absolute","left","0","bottom","0"],["mat-icon-button","",3,"disabled","click"],["mat-icon-button","","color","accent",3,"disabled","click"],["mat-icon-button","","color","warn",3,"disabled","click"]],template:function(e,t){if(1&e&&(S.zc(0,Se,21,5,"ng-template",null,0,S.Ac),S.zc(2,Te,14,5,"ng-container",1)),2&e){var n=S.qc(1);S.Cb(2),S.lc("ngIf",t.noLabel)("ngIfElse",n)}},directives:[u.l,F.a,z.a,ke.a],styles:[""]}),we),Me=s("lPNG"),Ee=s("WxrP"),Le=s("kmnG"),Ue=s("d3UM"),Pe=s("FKr1");function xe(e,t){1&e&&(S.Ub(0,"mat-icon",4),S.Bc(1,"emoji_events"),S.Tb())}function Be(e,t){if(1&e&&(S.Ub(0,"mat-option",2),S.Ub(1,"div",5),S.Bc(2),S.Ub(3,"span"),S.Bc(4),S.Tb(),S.Bc(5,"\xa0\u2192\xa0 "),S.Ub(6,"span"),S.Bc(7),S.Tb(),S.Bc(8,"\xa0 "),S.Ub(9,"span"),S.Bc(10),S.Tb(),S.Tb(),S.Tb()),2&e){var n=t.$implicit,i=t.index;S.lc("value",i),S.Cb(2),S.Dc(" ",i+1,".\xa0 "),S.Cb(1),S.Eb(n.cardClass),S.Cb(1),S.Cc(n.cardName),S.Cb(2),S.Eb(n.takerClass),S.Cb(1),S.Cc(n.takerName),S.Cb(2),S.Eb(n.outcomeClass),S.Cb(1),S.Cc(n.outcomeName)}}var Ae,Ie=["danger-critical","danger-extreme","danger-very-high","danger-high","danger-moderate","danger-low","danger-very-low"],Re=((Ae=function(e){d(n,e);var t=b(n);function n(e){var i;return c(this,n),(i=t.call(this))._gameService=e,i.items=[],i.selection=-1,i.isSolved=!1,i.cards={},i.onMoveCallback=function(e,t,n,a){var r=i.items[a]||{};if(t!==r.giver||n!==r.taker){if(r.card=e.getCard(n,-1),r.giver=t,r.taker=n,r.outcome=e.countEmpty(),r.cardName=i.cards[r.card].cardName,r.cardClass=i.cards[r.card].className,r.outcome===e.PILE_NUM+e.CELL_NUM?(i.isSolved=!0,r.outcomeName="solved!"):r.outcomeName="free "+r.outcome,r.outcomeClass=Ie[Math.min(r.outcome,Ie.length-1)],e.getLine(n).length>1){var c=e.getCard(n,-2);r.takerName=i.cards[c].cardName,r.takerClass=i.cards[c].className}else r.takerName=function(e,t){return e.isBase(t)?"base":e.isPile(t)?"pile":e.isCell(t)?"cell":"unknown index:"+t}(e,n),r.takerClass="";i.items[a]=r}else"solved!"===r.outcomeName&&(i.isSolved=!0)},i}return o(n,[{key:"ngOnInit",value:function(){for(var e=this,t=0;t<Me.a;t++)this.cards[t]={className:"history-item-"+Object(Me.i)(t),cardName:Object(Me.f)(t)};this._addSubscription(this._gameService.subscribe(function(t){var n;(e._gameService.isFirstChange||t.deal!==(null===(n=e._gameService.previousState)||void 0===n?void 0:n.deal))&&(e.isSolved=!1,e.items.length=0),t.path&&(e.isSolved=!1,Object(Ee.b)(t,e.onMoveCallback),e.items.splice(t.path.length/2)),e.selection=t.mark-1}))}},{key:"setSelection",value:function(e){this.selection!==e&&e<=this.items.length&&e>=-1&&(this._gameService.mark=e+1)}}]),n}(U)).\u0275fac=function(e){return new(e||Ae)(S.Ob(O.a))},Ae.\u0275cmp=S.Ib({type:Ae,selectors:[["app-freecell-history"]],features:[S.zb],decls:8,vars:4,consts:[["color","accent",4,"ngIf"],[3,"value","valueChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["color","accent"],[1,"history-item"]],template:function(e,t){1&e&&(S.Ub(0,"mat-form-field"),S.Ub(1,"mat-label"),S.zc(2,xe,2,0,"mat-icon",0),S.Bc(3," Game History: "),S.Tb(),S.Ub(4,"mat-select",1),S.bc("valueChange",function(e){return t.setSelection(e)}),S.Ub(5,"mat-option",2),S.Bc(6,"Start"),S.Tb(),S.zc(7,Be,11,11,"mat-option",3),S.Tb(),S.Tb()),2&e&&(S.Cb(2),S.lc("ngIf",t.isSolved),S.Cb(2),S.lc("value",t.selection),S.Cb(1),S.lc("value",-1),S.Cb(2),S.lc("ngForOf",t.items))},directives:[Le.c,Le.g,u.l,Ue.a,Pe.h,u.k,z.a],styles:["div.history-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.history-item-diamonds[_ngcontent-%COMP%], .history-item-hearts[_ngcontent-%COMP%]{color:red}.history-item-clubs[_ngcontent-%COMP%], .history-item-spades[_ngcontent-%COMP%]{color:#000}.danger-critical[_ngcontent-%COMP%], .danger-extreme[_ngcontent-%COMP%], .danger-high[_ngcontent-%COMP%], .danger-low[_ngcontent-%COMP%], .danger-moderate[_ngcontent-%COMP%], .danger-very-high[_ngcontent-%COMP%], .danger-very-low[_ngcontent-%COMP%]{min-width:4em;padding-left:.25em;padding-right:.25em}.danger-very-low[_ngcontent-%COMP%]{background-color:#bbee90}.danger-low[_ngcontent-%COMP%]{background-color:#bbdd85}.danger-moderate[_ngcontent-%COMP%]{background-color:#bbcc80}.danger-high[_ngcontent-%COMP%]{background-color:#ffee30}.danger-very-high[_ngcontent-%COMP%]{background-color:#fc0}.danger-extreme[_ngcontent-%COMP%]{background-color:#ff9920}.danger-critical[_ngcontent-%COMP%]{background-color:#ff5540}"]}),Ae);function De(e,t){if(1&e&&S.Pb(0,"app-freecell-action-buttons",11),2&e){var n=S.fc();S.lc("noLabel",n.noLabel)}}function je(e,t){1&e&&(S.Ub(0,"div",12),S.Pb(1,"app-freecell-history"),S.Tb())}function Ne(e,t){if(1&e){var n=S.Vb();S.Ub(0,"button",13),S.bc("click",function(){S.sc(n);var e=S.fc();return e.settings.set({enableDarkMode:!e.settings.state.enableDarkMode})}),S.Ub(1,"mat-icon"),S.Bc(2),S.Tb(),S.Tb(),S.Ub(3,"button",14),S.bc("click",function(){return S.sc(n),S.fc().settingsChange.emit()}),S.Ub(4,"mat-icon"),S.Bc(5,"settings"),S.Tb(),S.Tb()}if(2&e){var i=S.fc();S.Cb(2),S.Cc(i.settings.state.enableDarkMode?"brightness_3":"brightness_7")}}function Fe(e,t){1&e&&S.Qb(0)}function ze(e,t){1&e&&S.Qb(0)}function Xe(e,t){if(1&e&&(S.zc(0,Fe,1,0,"ng-container",15),S.Pb(1,"span",16),S.zc(2,ze,1,0,"ng-container",15)),2&e){S.fc();var n=S.qc(3),i=S.qc(5);S.lc("ngTemplateOutlet",n),S.Cb(2),S.lc("ngTemplateOutlet",i)}}function qe(e,t){1&e&&S.Qb(0)}function Ge(e,t){if(1&e&&(S.Pb(0,"span",16),S.zc(1,qe,1,0,"ng-container",15),S.Pb(2,"span",16)),2&e){S.fc();var n=S.qc(1);S.Cb(1),S.lc("ngTemplateOutlet",n)}}function We(e,t){1&e&&S.Qb(0)}function Ye(e,t){1&e&&S.Qb(0)}function Ke(e,t){1&e&&S.Qb(0)}function He(e,t){if(1&e&&(S.zc(0,We,1,0,"ng-container",15),S.zc(1,Ye,1,0,"ng-container",15),S.zc(2,Ke,1,0,"ng-container",15)),2&e){S.fc();var n=S.qc(3),i=S.qc(9),a=S.qc(5);S.lc("ngTemplateOutlet",n),S.Cb(1),S.lc("ngTemplateOutlet",i),S.Cb(1),S.lc("ngTemplateOutlet",a)}}function Qe(e,t){1&e&&S.Qb(0)}function Ve(e,t){if(1&e&&(S.Sb(0),S.zc(1,Qe,1,0,"ng-container",15),S.Rb()),2&e){S.fc();var n=S.qc(11);S.Cb(1),S.lc("ngTemplateOutlet",n)}}function Ze(e,t){1&e&&S.Qb(0)}function Je(e,t){if(1&e&&(S.Sb(0),S.zc(1,Ze,1,0,"ng-container",15),S.Rb()),2&e){S.fc();var n=S.qc(9);S.Cb(1),S.lc("ngTemplateOutlet",n)}}function $e(e,t){1&e&&S.Qb(0)}function et(e,t){if(1&e&&(S.Ub(0,"mat-toolbar-row"),S.zc(1,$e,1,0,"ng-container",15),S.Tb()),2&e){S.fc();var n=S.qc(9);S.Cb(1),S.lc("ngTemplateOutlet",n)}}function tt(e,t){1&e&&S.Qb(0)}function nt(e,t){if(1&e&&(S.Ub(0,"mat-toolbar",17),S.zc(1,tt,1,0,"ng-container",15),S.Tb()),2&e){S.fc();var n=S.qc(7);S.Cb(1),S.lc("ngTemplateOutlet",n)}}var it,at=["*"],rt=J.b.XSmall,ct=J.b.Small,st=J.b.Large,ot=J.b.XLarge,lt=((it=function(e){d(n,e);var t=b(n);function n(e,i){var a;return c(this,n),(a=t.call(this)).settings=i,a.settingsChange=new S.n,a.noLabel=!1,a.rowNum=3,a._addSubscription(e.observe([rt,ct,st,ot]).subscribe(function(e){a.noLabel=e.breakpoints[rt]||e.breakpoints[ct],a.rowNum=e.breakpoints[rt]?3:e.breakpoints[st]||e.breakpoints[ot]?1:2})),a}return o(n,[{key:"ngOnInit",value:function(){}}]),n}(U)).\u0275fac=function(e){return new(e||it)(S.Ob(J.a),S.Ob(M.a))},it.\u0275cmp=S.Ib({type:it,selectors:[["app-freecell-sandwich"]],outputs:{settingsChange:"settingsChange"},features:[S.zb],ngContentSelectors:at,decls:23,vars:6,consts:[["actionButtons",""],["history",""],["settingsButtons",""],["toolbarRow3",""],["toolbarRow2",""],["toolbarRow1",""],[3,"sandwichOrder","hideFooter","sandwichOrderChange"],["appSandwichHeader","","color","primary"],[2,"margin-right","20px"],[4,"ngIf"],["appSandwichFooter","","color","primary",4,"ngIf"],[3,"noLabel"],[1,"mat-typography","padding-top-half-rem"],["mat-icon-button","",3,"click"],["mat-icon-button","",2,"margin-right","40px",3,"click"],[4,"ngTemplateOutlet"],[1,"flex-space-filler-1"],["appSandwichFooter","","color","primary"]],template:function(e,t){1&e&&(S.kc(),S.zc(0,De,1,1,"ng-template",null,0,S.Ac),S.zc(2,je,2,0,"ng-template",null,1,S.Ac),S.zc(4,Ne,6,1,"ng-template",null,2,S.Ac),S.zc(6,Xe,3,2,"ng-template",null,3,S.Ac),S.zc(8,Ge,3,1,"ng-template",null,4,S.Ac),S.zc(10,He,3,3,"ng-template",null,5,S.Ac),S.Ub(12,"app-sandwich",6),S.bc("sandwichOrderChange",function(e){return t.settings.set({sandwichOrder:e})}),S.Ub(13,"mat-toolbar",7),S.Ub(14,"mat-toolbar-row"),S.Ub(15,"span"),S.Bc(16,"Freecell"),S.Tb(),S.Pb(17,"app-freecell-deal-menu",8),S.zc(18,Ve,2,1,"ng-container",9),S.zc(19,Je,2,1,"ng-container",9),S.Tb(),S.zc(20,et,2,1,"mat-toolbar-row",9),S.Tb(),S.jc(21,0,["appSandwichContent",""]),S.zc(22,nt,2,1,"mat-toolbar",10),S.Tb()),2&e&&(S.Cb(12),S.lc("sandwichOrder",t.settings.state.sandwichOrder)("hideFooter",2>t.rowNum),S.Cb(6),S.lc("ngIf",1===t.rowNum),S.Cb(1),S.lc("ngIf",2===t.rowNum),S.Cb(1),S.lc("ngIf",t.rowNum>=3),S.Cb(2),S.lc("ngIf",t.rowNum>1))},directives:[he,ge.a,ge.c,_e,u.l,Oe,Re,F.a,z.a,u.q],styles:[".padding-top-half-rem[_ngcontent-%COMP%]{padding-top:.5rem}"]}),it),ut=s("XhcP");function dt(e,t){1&e&&S.Bc(0," Loading stuff...\n")}function ft(e,t){if(1&e){var n=S.Vb();S.Ub(0,"mat-slide-toggle",17),S.bc("change",function(e){return S.sc(n),S.fc(2).settings.set({sidenavModeSide:!!e.checked})}),S.Tb()}if(2&e){var i=S.fc(2);S.lc("checked",i.settings.state.sidenavModeSide)}}function bt(e,t){1&e&&S.Pb(0,"mat-progress-bar",18)}function ht(e,t){if(1&e){var n=S.Vb();S.Ub(0,"button",19),S.bc("click",function(){return S.sc(n),S.fc(2).settings.set({sidenavClosed:!1})}),S.Ub(1,"mat-icon"),S.Bc(2,"double_arrow"),S.Tb(),S.Tb()}if(2&e){var i=S.fc(2);S.Gb("sidenav-open-button-active",!i.sidenavOpened)}}function gt(e,t){if(1&e){var n=S.Vb();S.Ub(0,"div",2),S.Ub(1,"mat-sidenav-container",3),S.Ub(2,"mat-sidenav",4),S.bc("closedStart",function(){return S.sc(n),S.fc().settings.set({sidenavClosed:!0})})("openedChange",function(e){return S.sc(n),S.fc().sidenavOpened=e}),S.Ub(3,"mat-toolbar",5),S.Ub(4,"button",6),S.bc("click",function(){return S.sc(n),S.fc().settings.set({sidenavClosed:!0})}),S.Ub(5,"mat-icon"),S.Bc(6,"close"),S.Tb(),S.Tb(),S.Pb(7,"span",7),S.Ub(8,"span"),S.Bc(9,"Freecell"),S.Tb(),S.Pb(10,"span",7),S.zc(11,ft,1,1,"mat-slide-toggle",8),S.Tb(),S.Ub(12,"mat-action-list"),S.Pb(13,"app-freecell-deal-menu",9),S.Ub(14,"div",10),S.Bc(15,"Actions:"),S.Tb(),S.Ub(16,"button",11),S.bc("click",function(){return S.sc(n),S.fc().actionService.undo()}),S.Ub(17,"mat-icon",12),S.Bc(18,"undo"),S.Tb(),S.Bc(19," UNDO "),S.Tb(),S.Ub(20,"button",11),S.bc("click",function(){return S.sc(n),S.fc().actionService.redo()}),S.Ub(21,"mat-icon",12),S.Bc(22,"redo"),S.Tb(),S.Bc(23," REDO "),S.Tb(),S.Ub(24,"button",11),S.bc("click",function(){return S.sc(n),S.fc().actionService.playNext()}),S.Ub(25,"mat-icon",12),S.Bc(26,"emoji_objects"),S.Tb(),S.Ub(27,"span"),S.Bc(28,"AUTO"),S.Tb(),S.Tb(),S.Ub(29,"button",11),S.bc("click",function(){return S.sc(n),S.fc().actionService.assist()}),S.Ub(30,"mat-icon",12),S.Bc(31,"assistant"),S.Tb(),S.Ub(32,"span"),S.Bc(33,"ASSIST"),S.Tb(),S.zc(34,bt,1,0,"mat-progress-bar",13),S.Tb(),S.Tb(),S.Ub(35,"div",14),S.Pb(36,"app-freecell-history"),S.Tb(),S.Pb(37,"span",7),S.Pb(38,"mat-divider"),S.Ub(39,"mat-action-list"),S.Ub(40,"button",15),S.bc("click",function(){S.sc(n);var e=S.fc();return e.settings.set({enableDarkMode:!e.settings.state.enableDarkMode})}),S.Ub(41,"mat-icon"),S.Bc(42),S.Tb(),S.Ub(43,"span"),S.Bc(44,"THEME"),S.Tb(),S.Tb(),S.Ub(45,"button",15),S.bc("click",function(){return S.sc(n),S.fc().settingsChange.emit()}),S.Ub(46,"mat-icon"),S.Bc(47,"settings"),S.Tb(),S.Ub(48,"span"),S.Bc(49,"SETTINGS"),S.Tb(),S.Tb(),S.Tb(),S.Tb(),S.Ub(50,"mat-sidenav-content"),S.jc(51),S.zc(52,ht,3,2,"button",16),S.Tb(),S.Tb(),S.Tb()}if(2&e){var i=t.ngIf,a=S.fc();S.Cb(2),S.lc("mode",!a.settings.state.sidenavModeSide||i.breakpoints[a.BP_XS]?"over":"side")("opened",!a.settings.state.sidenavClosed),S.Cb(9),S.lc("ngIf",!i.breakpoints[a.BP_XS]),S.Cb(2),S.lc("listItem",!0),S.Cb(3),S.lc("disabled",!a.actionService.state.canUndo),S.Cb(1),S.lc("ngClass",a.actionService.state.canUndo?"mat-primary":"disabled-color"),S.Cb(3),S.lc("disabled",!a.actionService.state.canRedo),S.Cb(1),S.lc("ngClass",a.actionService.state.canRedo?"mat-primary":"disabled-color"),S.Cb(3),S.lc("disabled",!a.actionService.state.nextMove),S.Cb(1),S.lc("ngClass",a.actionService.state.nextMove?"mat-accent":"disabled-color"),S.Cb(4),S.lc("disabled",!a.actionService.state.canAssist),S.Cb(1),S.lc("ngClass",a.actionService.state.canAssist?"mat-warn":"disabled-color"),S.Cb(4),S.lc("ngIf",a.actionService.state.assistRequest),S.Cb(8),S.Cc(a.settings.state.enableDarkMode?"brightness_3":"brightness_7"),S.Cb(10),S.lc("ngIf",a.settings.state.sidenavClosed)}}var pt,vt=["*"],mt=J.b.XSmall,_t=J.b.Small,kt=J.b.Medium,yt=J.b.Large,St=J.b.XLarge,Ct=((pt=function(){function e(t,n,i){c(this,e),this.actionService=t,this.settings=n,this.settingsChange=new S.n,this.BP_XS=mt,this.BP_SM=_t,this.BP_MD=kt,this.BP_LG=yt,this.BP_XL=St,this.sidenavOpened=!1,this.breakpoints$=i.observe([mt,_t,kt,yt,St])}return o(e,[{key:"isXSmall",value:function(e){return e.breakpoints[J.b.XSmall]}},{key:"getSideNavMode",value:function(e){return e.breakpoints[mt]?"over":"side"}}]),e}()).\u0275fac=function(e){return new(e||pt)(S.Ob(m.a),S.Ob(M.a),S.Ob(J.a))},pt.\u0275cmp=S.Ib({type:pt,selectors:[["app-freecell-sidenav"]],outputs:{settingsChange:"settingsChange"},ngContentSelectors:vt,decls:4,vars:3,consts:[["loading",""],["class","freecell-container",4,"ngIf"],[1,"freecell-container"],[1,"freecell-sidenav-container"],[3,"mode","opened","closedStart","openedChange"],["color","primary",1,"freecell-toolbar"],["mat-icon-button","",3,"click"],[1,"flex-space-filler-1"],["color","primary",3,"checked","change",4,"ngIf"],[3,"listItem"],["mat-subheader",""],["mat-list-item","",3,"disabled","click"],[3,"ngClass"],["mode","indeterminate","color","warn",4,"ngIf"],[2,"padding","1em"],["mat-list-item","",3,"click"],["class","sidenav-open-button","mat-icon-button","","color","primary",3,"sidenav-open-button-active","click",4,"ngIf"],["color","primary",3,"checked","change"],["mode","indeterminate","color","warn"],["mat-icon-button","","color","primary",1,"sidenav-open-button",3,"click"]],template:function(e,t){1&e&&(S.kc(),S.zc(0,dt,1,0,"ng-template",null,0,S.Ac),S.zc(2,gt,53,15,"div",1),S.gc(3,"async")),2&e&&(S.Cb(2),S.lc("ngIf",S.hc(3,1,t.breakpoints$)))},directives:[u.l,ut.b,ut.a,ge.a,F.a,z.a,me.a,_e,me.d,me.b,u.j,Re,G.a,ut.c,N.a,ke.a],pipes:[u.b],styles:["button.sidenav-open-button[_ngcontent-%COMP%]{position:absolute;left:-64px;top:1px;transition:left 2s 1s}button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-12px}@media (min-width:600px) and (max-width:959.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-9px}}@media (min-width:960px) and (max-width:1279.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-6px}}@media (min-width:1280px) and (max-width:1919.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-3px}}@media (min-width:1920px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:0}}.freecell-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}.freecell-sidenav-container[_ngcontent-%COMP%]{flex:1}"]}),pt);function Tt(e,t){1&e&&S.jc(0)}function wt(e,t){if(1&e){var n=S.Vb();S.Ub(0,"app-freecell-sandwich",4),S.bc("settingsChange",function(){return S.sc(n),S.fc().openSettingsDialog()}),S.Qb(1,3),S.Tb()}if(2&e){S.fc();var i=S.qc(1);S.Cb(1),S.lc("ngTemplateOutlet",i)}}function Ot(e,t){if(1&e){var n=S.Vb();S.Ub(0,"app-freecell-sidenav",4),S.bc("settingsChange",function(){return S.sc(n),S.fc().openSettingsDialog()}),S.Qb(1,3),S.Tb()}if(2&e){S.fc();var i=S.qc(1);S.Cb(1),S.lc("ngTemplateOutlet",i)}}var Mt,Et=["*"],Lt=((Mt=function(){function e(t,n){c(this,e),this.settings=t,this.dialog=n}return o(e,[{key:"ngOnInit",value:function(){}},{key:"openSettingsDialog",value:function(){this.dialog.open(Z,{maxHeight:"100vh"})}}]),e}()).\u0275fac=function(e){return new(e||Mt)(S.Ob(M.a),S.Ob(D.b))},Mt.\u0275cmp=S.Ib({type:Mt,selectors:[["app-freecell-view"]],ngContentSelectors:Et,decls:7,vars:1,consts:[["portal",""],["sandwich",""],["sidenav",""],[3,"ngTemplateOutlet"],[3,"settingsChange"]],template:function(e,t){if(1&e&&(S.kc(),S.zc(0,Tt,1,0,"ng-template",null,0,S.Ac),S.zc(2,wt,2,1,"ng-template",null,1,S.Ac),S.zc(4,Ot,2,1,"ng-template",null,2,S.Ac),S.Qb(6,3)),2&e){var n=S.qc(3),i=S.qc(5);S.Cb(6),S.lc("ngTemplateOutlet","sidenav"===t.settings.state.view?i:n)}},directives:[u.q,lt,Ct],styles:[""]}),Mt);function Ut(e,t,n){return e+(t-e)*n}var Pt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;c(this,e),this.basis=t,this.itemWidth=a,this.itemHeight=r,this.deltaWidth=n,this.deltaHeight=i/2,this.cellStartX=n,this.cellStartY=this.deltaHeight,this.cellEndX=this.cellStartX+t.CELL_NUM*(a+n)-n,this.cellEndY=this.cellStartY+r,this.baseStartX=this.cellEndX+n,this.baseStartY=this.cellStartY,this.baseEndX=this.baseStartX+t.BASE_NUM*(a+n)-n,this.baseEndY=this.cellEndY,this.pileStartX=n,this.pileStartY=this.cellEndY+this.deltaHeight,this.pileEndX=this.pileStartX+t.PILE_NUM*(a+n)-n,this.pileEndY=this.pileStartY+4.5*r}return o(e,[{key:"width",get:function(){return this.deltaWidth+Math.max(this.baseEndX,this.cellEndX,this.pileEndX)}},{key:"height",get:function(){return this.deltaHeight+Math.max(this.baseEndY,this.cellEndY,this.pileEndY)}},{key:"getCellX",value:function(e){return Ut(this.cellStartX,this.cellEndX-this.itemWidth,e/(this.basis.CELL_NUM-1))}},{key:"getCellY",value:function(e){return this.cellStartY}},{key:"getBaseX",value:function(e){return Ut(this.baseStartX,this.baseEndX-this.itemWidth,e/(this.basis.BASE_NUM-1))}},{key:"getBaseY",value:function(e){return this.baseStartY}},{key:"getPileX",value:function(e){return Ut(this.pileStartX,this.pileEndX-this.itemWidth,e/(this.basis.PILE_NUM-1))}},{key:"getPileY",value:function(e){return this.pileStartY}},{key:"getSpotPosition",value:function(e){var t=this.basis;return t.isBase(e)?{x:this.getBaseX(e-=t.BASE_START),y:this.getBaseY(e)}:t.isCell(e)?{x:this.getCellX(e-=t.CELL_START),y:this.getCellY(e)}:t.isPile(e)?{x:this.getPileX(e-=t.PILE_START),y:this.getPileY(e)}:{x:0,y:0}}},{key:"getCardPosition",value:function(e,t,n){var i=this.basis,a=this.getSpotPosition(e);if(i.isPile(e)&&n>0){var r=Math.min((this.pileEndY-this.pileStartY-this.itemHeight)/(n-1),.4*this.itemHeight);a.y+=r*t}return a}}]),e}();function xt(e,t){if(1&e&&(S.Ub(0,"div"),S.Ub(1,"p"),S.Bc(2),S.Tb(),S.Ub(3,"p"),S.Bc(4),S.Tb(),S.Ub(5,"p"),S.Bc(6),S.Tb(),S.Tb()),2&e){var n=S.fc();S.Cb(2),S.Dc("DEAL: ",n.deal,""),S.Cb(2),S.Dc("MARK: ",n.mark,""),S.Cb(2),S.Dc("PATH: ",n.path,"")}}var Bt,At=((Bt=function(e){d(n,e);var t=b(n);function n(e,i,a){var r;return c(this,n),(r=t.call(this))._router=e,r._route=i,r._gameService=a,r.debug=!1,r._lock=!1,r}return o(n,[{key:"ngOnInit",value:function(){var e=this;this._lock=!0,this._addSubscription(this._gameService.subscribe(function(t){e._lock||e.deal===t.deal&&e.path===t.path&&e.mark===t.mark||(e.deal=t.deal,e.path=t.path,e.mark=t.mark,e.updateAddressBar(t.deal,t.path,t.mark))})),this._addSubscription(this._route.queryParams.subscribe(function(t){return e._update(t)}))}},{key:"updateAddressBar",value:function(e,t,n){return t?"number"==typeof n&&n+n===t.length&&(n=void 0):(t=void 0,n=void 0),this._router.navigate(["."],{relativeTo:this._route,queryParams:{deal:e,path:t,mark:n}})}},{key:"_update",value:function(e){var t=this,n=e.path||"",i=parseInt(e.deal,10);(isNaN(i)||i<0)&&(i=-1);var a=parseInt(e.mark,10);(isNaN(a)||a<0||a+a>n.length)&&(a=Math.floor(n.length/2)),i!==this.deal||n!==this.path||a!==this.mark?(this.deal=i,this.path=n,this.mark=a,this._lock=!0,Promise.resolve().then(function(){var e=t._gameService.state;e.deal===i&&e.path===n&&e.mark===a||t._gameService.set(i,n,a)}).finally(function(){return t._lock=!1})):this._lock=!1}}]),n}(U)).\u0275fac=function(e){return new(e||Bt)(S.Ob(h.b),S.Ob(h.a),S.Ob(O.a))},Bt.\u0275cmp=S.Ib({type:Bt,selectors:[["app-freecell-router"]],inputs:{debug:"debug"},features:[S.zb],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&S.zc(0,xt,7,3,"div",0),2&e&&S.lc("ngIf",t.debug)},directives:[u.l],styles:[""]}),Bt),It=s("zh6y"),Rt=s("dqHA"),Dt=["spot"];function jt(e,t){if(1&e){var n=S.Vb();S.Ub(0,"div",3,4),S.bc("click",function(){S.sc(n);var e=t.index,i=S.fc();return i.selectionChange.emit(i.selection===e?-1:e)}),S.Tb()}if(2&e){var i=t.$implicit,a=t.index,r=S.fc();S.Gb("freecell_selection",r.selection===a),S.lc("ngClass",i.ngClass)("ngStyle",i.ngStyle)("matRippleDisabled",!r.settings.state.enableRipples)}}function Nt(e,t){1&e&&(S.Sb(0),S.Pb(1,"object",5),S.Rb())}var Ft,zt,Xt,qt,Gt=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],Wt=["[appFreecellBackground]","[appFreecellForeground]"],Yt=((Xt=function(){function e(t,n){c(this,e),this.settings=t,this.action=n,this.selection=-1,this.selectionChange=new S.n,this.touchChange=new S.n,this.spots=[]}return o(e,[{key:"layout",set:function(e){this.spots=function(e){var t=[];if(e)for(var n=e.basis,i=e.itemWidth,a=e.itemHeight,r=Object(L.m)(i,e.width),c=Object(L.m)(a,e.height),s=0;s<n.DESK_SIZE;s++){var o=e.getSpotPosition(s),l={ngStyle:{transform:"translate(".concat(Object(L.m)(o.x,i),", ").concat(Object(L.m)(o.y,a),")"),width:r,height:c},ngClass:{}};n.isBase(s)?(l.ngClass.freecell_base=!0,l.ngClass["freecell_"+Object(Me.i)(s-n.BASE_START)]=!0):n.isCell(s)?l.ngClass.freecell_cell=!0:n.isPile(s)&&(l.ngClass.freecell_pile=!0),t.push(l)}return t}(e)}},{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Xt)(S.Ob(M.a),S.Ob(m.a))},Xt.\u0275cmp=S.Ib({type:Xt,selectors:[["app-freecell-playground"]],viewQuery:function(e,t){var n;1&e&&S.Gc(Dt,1),2&e&&S.pc(n=S.cc())&&(t.spotList=n)},inputs:{layout:"layout",selection:"selection"},outputs:{selectionChange:"selectionChange",touchChange:"touchChange"},ngContentSelectors:Wt,decls:5,vars:6,consts:[[1,"freecell_deck",3,"touchstart","touchend","touchcancel","touchmove"],["class","freecell_spot","matRipple","",3,"freecell_selection","ngClass","ngStyle","matRippleDisabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],["matRipple","",1,"freecell_spot",3,"ngClass","ngStyle","matRippleDisabled","click"],["spot",""],["type","image/svg+xml","data",S.Fc(e||(Ft=["./assets/freecell/fireworks.svg"],zt||(zt=Ft.slice(0)),e=Object.freeze(Object.defineProperties(Ft,{raw:{value:Object.freeze(zt)}})))),1,"freecell-fireworks"]],template:function(e,t){1&e&&(S.kc(Gt),S.Ub(0,"div",0),S.bc("touchstart",function(e){return t.touchChange.emit({type:"DragStart",event:e})})("touchend",function(e){return t.touchChange.emit({type:"DragStop",event:e})})("touchcancel",function(e){return t.touchChange.emit({type:"DragStop",event:e})})("touchmove",function(e){return t.touchChange.emit({type:"DragMove",event:e})}),S.jc(1),S.zc(2,jt,2,5,"div",1),S.jc(3,1),S.zc(4,Nt,2,0,"ng-container",2),S.Tb()),2&e&&(S.Gb("use-svg-background",t.settings.state.deckUseSvg)("freecell_deck_solved",t.action.state.solved&&t.settings.state.enableWinAnimation),S.Cb(2),S.lc("ngForOf",t.spots),S.Cb(2),S.lc("ngIf",t.action.state.solved&&t.settings.state.enableWinAnimation))},directives:[u.k,u.l,Pe.l,u.j,u.m],styles:[".freecell_deck{width:100%;height:100%;position:relative;background:#cfe url(bg-desk.09c80cb5354cc50b5181.jpg) repeat}.freecell_card,.freecell_spot{cursor:pointer;position:absolute;background-image:url(cards_3.f425b6710669dbc8105a.png);background-size:900% 900%;background-repeat:no-repeat;background-color:transparent}@media (min-width:600px) and (max-width:1279.99px){.freecell_card,.freecell_spot{background-image:url(cards_2.70d80d7fff9de7d2572a.png)}}@media (max-width:599.99px){.freecell_card,.freecell_spot{background-image:url(cards_1.6288bccad84dee6dc98e.png)}}div.use-svg-background .freecell_card,div.use-svg-background .freecell_spot{background-image:url(cards.042de3dc74849783db20.svg)}.freecell_spot.freecell_selection{outline-style:dotted;outline-color:#eed;outline-width:medium}.freecell_spot.freecell_selection.freecell_base{outline-color:#bb11a1}.freecell_spot.freecell_selection.freecell_cell{outline-color:#3e8181}.freecell_spot.freecell_pile{background-position:14.84375% 99.21875%}.freecell_spot.freecell_base.freecell_spades{background-position:57.03125% 85.15625%}.freecell_spot.freecell_base.freecell_diamonds{background-position:71.09375% 85.15625%}.freecell_spot.freecell_base.freecell_clubs{background-position:85.15625% 85.15625%}.freecell_spot.freecell_base.freecell_hearts{background-position:99.21875% 85.15625%}.freecell_spot.freecell_cell{background-position:.78125% 99.21875%}.freecell_card.freecell_Ace.freecell_spades{background-position:.78125% .78125%}.freecell_card.freecell_Ace.freecell_diamonds{background-position:14.84375% .78125%}.freecell_card.freecell_Ace.freecell_clubs{background-position:28.90625% .78125%}.freecell_card.freecell_Ace.freecell_hearts{background-position:42.96875% .78125%}.freecell_card.freecell_Two.freecell_spades{background-position:57.03125% .78125%}.freecell_card.freecell_Two.freecell_diamonds{background-position:71.09375% .78125%}.freecell_card.freecell_Two.freecell_clubs{background-position:85.15625% .78125%}.freecell_card.freecell_Two.freecell_hearts{background-position:99.21875% .78125%}.freecell_card.freecell_Three.freecell_spades{background-position:.78125% 14.84375%}.freecell_card.freecell_Three.freecell_diamonds{background-position:14.84375% 14.84375%}.freecell_card.freecell_Three.freecell_clubs{background-position:28.90625% 14.84375%}.freecell_card.freecell_Three.freecell_hearts{background-position:42.96875% 14.84375%}.freecell_card.freecell_Four.freecell_spades{background-position:57.03125% 14.84375%}.freecell_card.freecell_Four.freecell_diamonds{background-position:71.09375% 14.84375%}.freecell_card.freecell_Four.freecell_clubs{background-position:85.15625% 14.84375%}.freecell_card.freecell_Four.freecell_hearts{background-position:99.21875% 14.84375%}.freecell_card.freecell_Five.freecell_spades{background-position:.78125% 28.90625%}.freecell_card.freecell_Five.freecell_diamonds{background-position:14.84375% 28.90625%}.freecell_card.freecell_Five.freecell_clubs{background-position:28.90625% 28.90625%}.freecell_card.freecell_Five.freecell_hearts{background-position:42.96875% 28.90625%}.freecell_card.freecell_Six.freecell_spades{background-position:57.03125% 28.90625%}.freecell_card.freecell_Six.freecell_diamonds{background-position:71.09375% 28.90625%}.freecell_card.freecell_Six.freecell_clubs{background-position:85.15625% 28.90625%}.freecell_card.freecell_Six.freecell_hearts{background-position:99.21875% 28.90625%}.freecell_card.freecell_Seven.freecell_spades{background-position:.78125% 42.96875%}.freecell_card.freecell_Seven.freecell_diamonds{background-position:14.84375% 42.96875%}.freecell_card.freecell_Seven.freecell_clubs{background-position:28.90625% 42.96875%}.freecell_card.freecell_Seven.freecell_hearts{background-position:42.96875% 42.96875%}.freecell_card.freecell_Eight.freecell_spades{background-position:57.03125% 42.96875%}.freecell_card.freecell_Eight.freecell_diamonds{background-position:71.09375% 42.96875%}.freecell_card.freecell_Eight.freecell_clubs{background-position:85.15625% 42.96875%}.freecell_card.freecell_Eight.freecell_hearts{background-position:99.21875% 42.96875%}.freecell_card.freecell_Nine.freecell_spades{background-position:.78125% 57.03125%}.freecell_card.freecell_Nine.freecell_diamonds{background-position:14.84375% 57.03125%}.freecell_card.freecell_Nine.freecell_clubs{background-position:28.90625% 57.03125%}.freecell_card.freecell_Nine.freecell_hearts{background-position:42.96875% 57.03125%}.freecell_card.freecell_Ten.freecell_spades{background-position:57.03125% 57.03125%}.freecell_card.freecell_Ten.freecell_diamonds{background-position:71.09375% 57.03125%}.freecell_card.freecell_Ten.freecell_clubs{background-position:85.15625% 57.03125%}.freecell_card.freecell_Ten.freecell_hearts{background-position:99.21875% 57.03125%}.freecell_card.freecell_Jack.freecell_spades{background-position:.78125% 71.09375%}.freecell_card.freecell_Jack.freecell_diamonds{background-position:14.84375% 71.09375%}.freecell_card.freecell_Jack.freecell_clubs{background-position:28.90625% 71.09375%}.freecell_card.freecell_Jack.freecell_hearts{background-position:42.96875% 71.09375%}.freecell_card.freecell_Queen.freecell_spades{background-position:57.03125% 71.09375%}.freecell_card.freecell_Queen.freecell_diamonds{background-position:71.09375% 71.09375%}.freecell_card.freecell_Queen.freecell_clubs{background-position:85.15625% 71.09375%}.freecell_card.freecell_Queen.freecell_hearts{background-position:99.21875% 71.09375%}.freecell_card.freecell_King.freecell_spades{background-position:.78125% 85.15625%}.freecell_card.freecell_King.freecell_diamonds{background-position:14.84375% 85.15625%}.freecell_card.freecell_King.freecell_clubs{background-position:28.90625% 85.15625%}.freecell_card.freecell_King.freecell_hearts{background-position:42.96875% 85.15625%}@-webkit-keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@-webkit-keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}@keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}.freecell_deck_solved .freecell_card{-webkit-animation-name:animation-card;animation-name:animation-card;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}.freecell_deck_solved .freecell_card.freecell_Ace{-webkit-animation-delay:1.7s;animation-delay:1.7s;-webkit-animation-duration:1.6s;animation-duration:1.6s}.freecell_deck_solved .freecell_card.freecell_Two{-webkit-animation-delay:1.6s;animation-delay:1.6s;-webkit-animation-duration:1.8s;animation-duration:1.8s}.freecell_deck_solved .freecell_card.freecell_Three{-webkit-animation-delay:1.5s;animation-delay:1.5s;-webkit-animation-duration:2s;animation-duration:2s}.freecell_deck_solved .freecell_card.freecell_Four{-webkit-animation-delay:1.4s;animation-delay:1.4s;-webkit-animation-duration:2.2s;animation-duration:2.2s}.freecell_deck_solved .freecell_card.freecell_Five{-webkit-animation-delay:1.3s;animation-delay:1.3s;-webkit-animation-duration:2.4s;animation-duration:2.4s}.freecell_deck_solved .freecell_card.freecell_Six{-webkit-animation-delay:1.2s;animation-delay:1.2s;-webkit-animation-duration:2.6s;animation-duration:2.6s}.freecell_deck_solved .freecell_card.freecell_Seven{-webkit-animation-delay:1.1s;animation-delay:1.1s;-webkit-animation-duration:2.8s;animation-duration:2.8s}.freecell_deck_solved .freecell_card.freecell_Eight{-webkit-animation-delay:1s;animation-delay:1s;-webkit-animation-duration:3s;animation-duration:3s}.freecell_deck_solved .freecell_card.freecell_Nine{-webkit-animation-delay:.9s;animation-delay:.9s;-webkit-animation-duration:3.2s;animation-duration:3.2s}.freecell_deck_solved .freecell_card.freecell_Ten{-webkit-animation-delay:.8s;animation-delay:.8s;-webkit-animation-duration:3.4s;animation-duration:3.4s}.freecell_deck_solved .freecell_card.freecell_Jack{-webkit-animation-delay:.7s;animation-delay:.7s;-webkit-animation-duration:3.6s;animation-duration:3.6s}.freecell_deck_solved .freecell_card.freecell_Queen{-webkit-animation-delay:.6s;animation-delay:.6s;-webkit-animation-duration:3.8s;animation-duration:3.8s}.freecell_deck_solved .freecell_card.freecell_King{-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s}.freecell_deck_solved .freecell_spot{-webkit-animation-name:animation-spot;animation-name:animation-spot;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s}.freecell-fireworks{width:100%;height:100%;background-color:transparent}.app-dark-theme .freecell_deck{background:teal url(bg-desk-dark.be1fcb326a55804c8741.jpg) repeat}.app-dark-theme .freecell_spot.freecell_selection.freecell_cell{outline-color:#aaecec}"],encapsulation:2}),Xt),Kt=s("g/AF"),Ht=((qt=function(){function e(){c(this,e),this.userGesture=new S.n}return o(e,[{key:"handle",value:function(e){this.userGesture.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||qt)},qt.\u0275dir=S.Jb({type:qt,selectors:[["","appGesture",""]],hostBindings:function(e,t){1&e&&S.bc("keydown",function(e){return t.handle(e)},!1,S.rc)("touchstart",function(e){return t.handle(e)},!1,S.rc)("mousedown",function(e){return t.handle(e)},!1,S.rc)("click",function(e){return t.handle(e)},!1,S.rc)},outputs:{userGesture:"userGesture"}}),qt),Qt=["cards"];function Vt(e,t){if(1&e){var n=S.Vb();S.Ub(0,"div",5),S.bc("userGesture",function(e){return S.sc(n),S.fc().activateOnGesture(e)}),S.Tb()}}function Zt(e,t){if(1&e){var n=S.Vb();S.Ub(0,"div",6,7),S.bc("mousedown",function(e){S.sc(n);var i=t.index;return S.fc().onMouseDown(e,i)}),S.Tb()}if(2&e){var i=t.$implicit,a=S.fc();S.lc("matRippleDisabled",!a.settings.state.enableRipples)("ngClass",i.ngClass)("ngStyle",i.ngStyle)}}var Jt=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],$t=["[appFreecellBackground]","[appFreecellForeground]"],en=["transition_deal","transition_norm","transition_fast"];function tn(e,t){var n,a=i(en);try{for(a.s();!(n=a.n()).done;){var r=n.value;e[r]=r===t}}catch(c){a.e(c)}finally{a.f()}}function nn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"px";return"translate(".concat(e).concat(n,", ").concat(t).concat(n,")")}var an,rn=((an=function(e){d(a,e);var n=b(a);function a(e,t,i,r,s){var o;return c(this,a),(o=n.call(this)).settings=e,o.soundService=t,o._renderer=i,o._playService=r,o._gameService=s,o.lineChange=new S.n,o.cards=[],o.spotSelection=-1,o._dragListener=new Rt.a,o._emptySpotCount=0,o}return o(a,[{key:"layout",get:function(){return this._layout},set:function(e){this._layout!==e&&(this._layout=e,this.layout&&(this.cards=this.createCards(),this.onDeal()))}},{key:"isTouchDisabled",get:function(){return!(this.settings.state.inputMode&M.b.Touch)}},{key:"isMouseDisabled",get:function(){return!(this.settings.state.inputMode&M.b.Mouse)}},{key:"ngOnInit",value:function(){var e=this;this._addSubscription(this._gameService.subscribe(function(t){var n;e.layout&&(e._gameService.isFirstChange||t.deal!==(null===(n=e._gameService.previousState)||void 0===n?void 0:n.deal)?e.onDeal():e.onCardMove())})),this._addSubscription(this._dragListener.dragChange.subscribe(function(t){switch(t){case"DragStart":e._onDragStart();break;case"DragMove":e._onDragMove();break;case"DragStop":e._onDragStop()}}))}},{key:"trackByIndex",value:function(e){return e}},{key:"getTransforms",value:function(e){for(var t=100,n=[],i=this.cardList.toArray(),a=i[e[0]].nativeElement.parentElement.getBoundingClientRect(),r=i[e[0]].nativeElement.getBoundingClientRect(),c=r.left-a.left,s=r.top-a.top,o=r.height/3,l=e.length;l-- >0;){var u=Math.round((c+0*l)*t)/t,d=Math.round((s+o*l)*t)/t;n[l]={x:u,y:d}}return n}},{key:"onTouch",value:function(e){var t=e.type,n=e.event;if(!this.isTouchDisabled)switch(t){case"DragStart":if(n.targetTouches.length>0){var i=n.targetTouches[0],a=this.getCardIndex(i.clientX,i.clientY);if(a>=0){var r=this._gameService.game,c=r.asTablaeu(a),s=this.getTransforms(c);this._dragListener.touchStart(n,{game:r,tableau:c,transforms:s})}}break;case"DragMove":this._dragListener.isTouchDragging&&this._dragListener.touchMove(n);break;case"DragStop":this._dragListener.isTouchDragging&&this._dragListener.stop(n)}}},{key:"onMouseDown",value:function(e,t){if(!this.isMouseDisabled&&(this._playService.stop(),0===e.button)){var n=this._gameService.game,i=n.asTablaeu(t),a=this.getTransforms(i);this._dragListener.mouseStart(e,this._renderer,{game:n,tableau:i,transforms:a})}}},{key:"onDeal",value:function(){this.spotSelection=-1;var e=this._gameService.game;this._emptySpotCount=Math.max(e.CELL_NUM,e.countEmpty());for(var t=e.DESK_SIZE;t-- >0;){var n,a=i(e.getLine(t));try{for(a.s();!(n=a.n()).done;){var r=n.value;this.bringToFront(r)}}catch(c){a.e(c)}finally{a.f()}this.updateLine(e,t,"transition_deal")}this.updateZIndex(),this.soundService.play("deal")}},{key:"updateZIndex",value:function(){if(this.cards.length>1)for(var e=1,t=this.cards[0].list.head;t;t=t.next)this.cards[t.card].ngStyle.zIndex=e++}},{key:"bringToFront",value:function(e){var t=this.cards[e],n=t.list;n&&n.tail&&n.tail!==t&&Object(It.a)(n.tail,t)}},{key:"onCardMove",value:function(){this.spotSelection=-1;var e=this._gameService.state,t=this._gameService.previousState||e,n=t.path.substring(0,2*t.mark),a=e.path.substring(0,2*e.mark),r=new Set,c=Object(Kt.a)(n,a),s=[];t.mark>c&&(Object(Ee.c)(t,function(e,t,n,i){i>=c&&(r.add(t),r.add(n),s.push(e.getCard(n,-1)))}),s.reverse()),e.mark>c&&Object(Ee.c)(e,function(e,t,n,i){i>=c&&(r.add(t),r.add(n),s.push(e.getCard(n,-1)))});for(var o=0,l=s;o<l.length;o++){var u=l[o];this.bringToFront(u)}this.updateZIndex();var d,f=r.size>2?"transition_fast":"transition_norm",b=this._gameService.game,h=i(r.keys());try{for(h.s();!(d=h.n()).done;){var g=d.value;this.updateLine(b,g,f)}}catch(v){h.e(v)}finally{h.f()}"transition_fast"===f?this.soundService.play("shuffle"):"transition_norm"===f&&this.soundService.play("card");var p=b.countEmpty();p>this._emptySpotCount&&(this._emptySpotCount=p,this.soundService.play("victory"))}},{key:"createCards",value:function(){var e=[],n=this.layout;if(n){for(var i=Object(L.m)(n.itemWidth,n.width),a=Object(L.m)(n.itemHeight,n.height),r=0;r<Me.a;r++){var c,s={card:r,ngStyle:{width:i,height:a,zIndex:r},ngClass:(c={freecell_card:!0},t(c,"freecell_"+Object(Me.i)(r),!0),t(c,"freecell_"+Object(Me.g)(r),!0),c)};e.push(s)}Object(It.b).apply(void 0,e)}return e}},{key:"getCardTransform",value:function(e,t,n){var i=this.layout.getCardPosition(t,e.toSpot(n),e.getLine(t).length);return"translate(".concat(Object(L.m)(i.x,this.layout.itemWidth),", ").concat(Object(L.m)(i.y,this.layout.itemHeight),")")}},{key:"updateLine",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"transition_norm",r=i(e.getLine(t));try{for(r.s();!(n=r.n()).done;){var c=n.value,s=this.cards[c];s.ngStyle.transform=this.getCardTransform(e,t,c),tn(s.ngClass,a)}}catch(o){r.e(o)}finally{r.f()}}},{key:"getDestination",value:function(e,t){var n,i=0,a=-1;if(t.length>0&&this.cardList){for(var r=this.cardList.toArray(),c=r[t[0]].nativeElement.getBoundingClientRect(),s=r.length;s-- >0;)if(t.indexOf(s)<0){var o=r[s].nativeElement.getBoundingClientRect(),l=Object(L.j)(c,o);l>i&&(i=l,a=e.toLine(s))}if(null===(n=this.playground)||void 0===n?void 0:n.spotList)for(var u=this.playground.spotList.toArray(),d=u.length;d-- >0;){var f=u[d].nativeElement.getBoundingClientRect(),b=Object(L.j)(c,f);b>i&&(i=b,a=d)}}return a}},{key:"getCardIndex",value:function(e,t){var n=-1;if(this.cardList)for(var i=this.cardList.toArray(),a=i.length;a-- >0;){var r=i[a].nativeElement.getBoundingClientRect();r.left<=e&&e<=r.right&&r.top<=t&&t<=r.bottom&&(n<0||this.cards[n].ngStyle.zIndex<this.cards[a].ngStyle.zIndex)&&(n=a)}return n}},{key:"activateOnGesture",value:function(e){e.isTrusted&&this.soundService.activate()}},{key:"_onDragStart",value:function(){this._playService.stop();for(var e=this._dragListener.data,t=e.tableau,n=e.transforms,i=t.length;i-- >0;){var a=this.cards[t[i]];a.ngStyle.zIndex+=Me.a,a.ngStyle.transform=nn(n[i].x,n[i].y),a.ngClass.grabbing=!0,tn(a.ngClass)}}},{key:"_onDragMove",value:function(){for(var e=this._dragListener.data,t=e.tableau,n=e.transforms,i=this._dragListener.pageDeltaX,a=this._dragListener.pageDeltaY,r=t.length;r-- >0;){var c=this.cards[t[r]];c.ngClass.dragging=!0,c.ngStyle.transform=nn(n[r].x+i,n[r].y+a)}(Math.abs(i)>4||Math.abs(a)>4)&&(this._dragListener.data.dragged=!0)}},{key:"_onDragStop",value:function(){var e,t=this._dragListener.data,n=t.game,a=t.tableau,r=t.dragged,c=i(a);try{for(c.s();!(e=c.n()).done;){var s=e.value,o=this.cards[s];o.ngStyle.zIndex-=Me.a,o.ngStyle.transform=this.getCardTransform(n,n.toLine(s),s),delete o.ngClass.grabbing,delete o.ngClass.dragging,tn(o.ngClass,"transition_fast")}}catch(f){c.e(f)}finally{c.f()}if(r){var l=this.getDestination(n,a);if(l>=0){var u=n.toLine(a[0]);u!==l&&this.lineChange.emit({source:u,destination:l,tableau:a})}}else{var d=n.toLine(a[0]);this.lineChange.emit({source:d,destination:this.spotSelection>=0?this.spotSelection:void 0,tableau:a})}}}]),a}(U)).\u0275fac=function(e){return new(e||an)(S.Ob(M.a),S.Ob(A),S.Ob(S.F),S.Ob(_.a),S.Ob(O.a))},an.\u0275cmp=S.Ib({type:an,selectors:[["app-freecell-deck"]],viewQuery:function(e,t){var n;1&e&&(S.Gc(Yt,1),S.Gc(Qt,1)),2&e&&(S.pc(n=S.cc())&&(t.playground=n.first),S.pc(n=S.cc())&&(t.cardList=n))},inputs:{layout:"layout"},outputs:{lineChange:"lineChange"},features:[S.zb],ngContentSelectors:$t,decls:7,vars:5,consts:[["appGesture","",3,"userGesture",4,"ngIf"],[3,"layout","selection","selectionChange","touchChange"],["appFreecellBackground",""],["appFreecellForeground",""],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],["appGesture","",3,"userGesture"],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown"],["cards",""]],template:function(e,t){1&e&&(S.kc(Jt),S.zc(0,Vt,1,0,"div",0),S.Ub(1,"app-freecell-playground",1),S.bc("selectionChange",function(e){return t.spotSelection=e})("touchChange",function(e){return t.onTouch(e)}),S.Sb(2,2),S.jc(3),S.Rb(),S.Sb(4,3),S.zc(5,Zt,2,3,"div",4),S.jc(6,1),S.Rb(),S.Tb()),2&e&&(S.lc("ngIf",t.soundService.enabled&&!t.soundService.activated),S.Cb(1),S.lc("layout",t.layout)("selection",t.spotSelection),S.Cb(4),S.lc("ngForOf",t.cards)("ngForTrackBy",t.trackByIndex))},directives:[u.l,Yt,u.k,Ht,Pe.l,u.j,u.m],styles:[".freecell_card.transition_deal[_ngcontent-%COMP%]{transition:transform 1.5s cubic-bezier(.6,-.5,.25,1.5)}.freecell_card.transition_norm[_ngcontent-%COMP%]{transition:transform .5s ease-out}.freecell_card.transition_fast[_ngcontent-%COMP%]{transition:transform .25s linear}.freecell_card.grabbing[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing;transition:transform .15s ease-in-out}.freecell_card.grabbing.dragging[_ngcontent-%COMP%]{transition:none;opacity:.75}"]}),an);function cn(e,t){if(1&e){var n=S.Vb();S.Ub(0,"app-freecell-deck",4),S.bc("lineChange",function(e){return S.sc(n),S.fc().onLineChange(e)}),S.Sb(1,5),S.jc(2),S.Rb(),S.Tb()}if(2&e){var i=S.fc();S.lc("layout",i.layout)}}var sn,on,ln,un=["*"],dn=((sn=function(e){d(n,e);var t=b(n);function n(e,i,a,r){var s;return c(this,n),(s=t.call(this)).settings=e,s._gameService=i,s._playService=a,s._addSubscription(r.subscribe(function(e){return s.layout=new Pt(r.basis)})),s}return o(n,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){l(g(n.prototype),"ngOnDestroy",this).call(this)}},{key:"onLineChange",value:function(e){var t=this;this._playService.stop();var n=this._gameService.game,i="";(i=void 0===e.destination?n.solveFor(e.tableau,e.source):n.getBestPath(e.tableau,e.destination))&&(this._gameService.move(i.charCodeAt(0),i.charCodeAt(1)),(i=i.substring(2))&&this._playService.play(function(){return t._gameService.move(i.charCodeAt(0),i.charCodeAt(1)),(i=i.substring(2)).length>0}))}}]),n}(U)).\u0275fac=function(e){return new(e||sn)(S.Ob(M.a),S.Ob(O.a),S.Ob(_.a),S.Ob(k.a))},sn.\u0275cmp=S.Ib({type:sn,selectors:[["app-freecell-main"]],features:[S.zb],ngContentSelectors:un,decls:5,vars:3,consts:[[1,"freecell-content"],[1,"freecell-content-outer"],[1,"freecell-content-inner"],[3,"layout","lineChange",4,"ngIf"],[3,"layout","lineChange"],["appFreecellBackground",""]],template:function(e,t){1&e&&(S.kc(),S.Pb(0,"app-freecell-router"),S.Ub(1,"div",0),S.Ub(2,"div",1),S.Ub(3,"div",2),S.zc(4,cn,3,1,"app-freecell-deck",3),S.Tb(),S.Tb(),S.Tb()),2&e&&(S.Cb(1),S.wc("padding-top",100*t.settings.state.aspectRatio,"%"),S.Cb(3),S.lc("ngIf",t.layout))},directives:[At,u.l,rn],styles:[".freecell-content[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;padding:1px}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]   .freecell-content-inner[_ngcontent-%COMP%]{width:100%;height:100%}"]}),sn),fn=[{path:"",component:(on=function(e){d(n,e);var t=b(n);function n(e,i,a,r){var s;c(this,n),(s=t.call(this)).settings=e,s.info="".concat(I.a," ver.").concat(I.b),e.subscribe(function(t){var n,i=null===(n=e.previousState)||void 0===n?void 0:n.enableDarkMode,a=t.enableDarkMode;i!==a&&(a?r.getContainerElement().classList.add("app-dark-theme"):r.getContainerElement().classList.remove("app-dark-theme"))});var o=a.snapshot.queryParams;return(void 0===o.deal||isNaN(parseInt(o.deal,10)))&&i.navigate(["."],{relativeTo:a,queryParams:{deal:Date.now()%2147483648}}),s}return o(n,[{key:"ngOnInit",value:function(){}}]),n}(U),on.\u0275fac=function(e){return new(e||on)(S.Ob(M.a),S.Ob(h.b),S.Ob(h.a),S.Ob(R.e))},on.\u0275cmp=S.Ib({type:on,selectors:[["app-freecell-demo"]],features:[S.zb],decls:4,vars:3,consts:[[1,"version-info"]],template:function(e,t){1&e&&(S.Ub(0,"app-freecell-view"),S.Ub(1,"app-freecell-main"),S.Ub(2,"div",0),S.Bc(3),S.Tb(),S.Tb(),S.Tb()),2&e&&(S.Gb("app-dark-theme",t.settings.state.enableDarkMode),S.Cb(3),S.Cc(t.info))},directives:[Lt,dn],styles:[".version-info[_ngcontent-%COMP%]{font-size:small;position:absolute;bottom:0;right:0}"]}),on)}],bn=((ln=o(function e(){c(this,e)})).\u0275fac=function(e){return new(e||ln)},ln.\u0275mod=S.Mb({type:ln}),ln.\u0275inj=S.Lb({providers:[m.a,_.a,k.a,w,A,O.a,M.a],imports:[[h.c.forChild(fn),u.c,f.d,p.a,v.a],h.c]}),ln)},RDYl:function(e){e.exports=JSON.parse('{"a":"freecell-demo","b":"0.2.3"}')},WxrP:function(e,a,r){"use strict";r.d(a,"b",function(){return k}),r.d(a,"c",function(){return y}),r.d(a,"a",function(){return S});var s=r("g/AF"),u=r("Bd3B"),f=r("lPNG"),h=r("2MXh"),p=function(e){d(n,e);var t=b(n);function n(e,i,a){var r;c(this,n),(r=t.call(this,e,i,a)).desk=[];for(var s=0;s<r.DESK_SIZE;s++)r.desk.push([]);return r}return o(n,[{key:"toArray",value:function(){return Object(u.a)(this.desk)}},{key:"clear",value:function(){for(var e=this.desk.length;e-- >0;)this.desk[e].length=0}},{key:"addCard",value:function(e,t){this.desk[e].push(t)}},{key:"getCard",value:function(e,t){var n=this.desk[e];return t<0&&(t=n.length+t),t>=0&&t<n.length?n[t]:-1}},{key:"getLine",value:function(e){return this.desk[e]}},{key:"getTableauAt",value:function(e){var t=[],n=this.desk[e],i=n.length;if(i>0)for(t.push(n[i-1]);--i>0&&Object(f.e)(n[i-1],n[i])&&Object(f.h)(n[i-1])>0;)t.push(n[i-1]);return t.reverse(),t}},{key:"countEmptyCells",value:function(){for(var e=0,t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmptyPiles",value:function(){for(var e=0,t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}},{key:"isSolved",value:function(){for(var e=this.BASE_START;e<this.BASE_END;e++)if(this.desk[e].length<f.b)return!1;return!0}},{key:"countEmpty",value:function(){return this.countEmptyCells()+this.countEmptyPiles()}},{key:"getEmptyCell",value:function(){for(var e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getEmptyPile",value:function(){for(var e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getBase",value:function(e){for(var t=Object(f.j)(e),n=Object(f.h)(e),i=0;i<this.BASE_NUM;i++)if(Object(f.j)(i)===t&&this.desk[i+this.BASE_START].length===n)return i+this.BASE_START;return-1}},{key:"deal",value:function(e){var t=Object(f.d)(e);this.clear();for(var n=0;n<t.length;n++)this.addCard(this.PILE_START+n%this.PILE_NUM,t[n]);return t}},{key:"isMoveValid",value:function(e,t){if(e===t)return!1;if(e<0||e>=this.DESK_SIZE)return!1;if(t<0||t>=this.DESK_SIZE)return!1;var n=this.desk[e].length;if(n<=0)return!1;var i=this.desk[t].length;if(this.isCell(t))return 0===i;var a=this.desk[e][n-1];if(this.isPile(t))return 0===i||Object(f.e)(this.desk[t][i-1],a);if(this.isBase(t)){var r=Object(f.j)(a),c=Object(f.h)(a);return Object(f.j)(t-this.BASE_START)===r&&i===c}return!1}},{key:"moveCard",value:function(e,t){this.addCard(t,this.desk[e].pop())}},{key:"getMoves",value:function(){for(var e=[],t=this.DESK_SIZE;t-- >0;)for(var n=t;n-- >0;)this.isMoveValid(t,n)&&e.push({giver:t,taker:n}),this.isMoveValid(n,t)&&e.push({giver:n,taker:t});return e}}]),n}(h.a),v=o(function e(t){c(this,e),this.success=t}),m=function(e){d(a,e);var t=b(a);function a(e,n,i,r){var s;return c(this,a),(s=t.call(this,e,n,i)).desk=r,s.cardToWatch=-1,s.searchTime=500,s.done=new Set,s.buffers=[[],[]],s.iteration=0,s.path="",s.onMove=function(e,t,n){},s}return o(a,[{key:"doneSize",get:function(){return this.done.size}},{key:"stop",value:function(e){throw new v(e)}},{key:"getAllPaths",value:function(){return this.buffers[this.iteration%2]}},{key:"getPath",value:function(){var e=this.buffers[this.iteration%2];return e[e.length-1]}},{key:"clear",value:function(){this.done.clear(),this.buffers[0].length=0,this.buffers[1].length=0,this.iteration=0,this.path=""}},{key:"prepare",value:function(){this.clear(),this.done.add(this.toKey()),this.buffers[0][0]=""}},{key:"nextIteration",value:function(){var e=this.buffers[this.iteration%2];if(this.iteration++,e.length<=0)return!1;var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.skipForward(a),this.findMoves(),this.skipBackward()}}catch(r){n.e(r)}finally{n.f()}return e.length=0,this.buffers[this.iteration%2].length>0}},{key:"solve",value:function(){this.prepare();var e=Date.now();try{for(;this.nextIteration();)Date.now()-e>this.searchTime&&this.stop(!1)}catch(t){if(t instanceof v)return t.success;throw t}return!1}},{key:"skipForward",value:function(e){for(var t=0;t<e.length;t+=2)this.desk[e.charCodeAt(t+1)].push(this.desk[e.charCodeAt(t)].pop());this.path=e}},{key:"skipBackward",value:function(){for(var e=this.path,t=e.length;t>0;t-=2)this.desk[e.charCodeAt(t-2)].push(this.desk[e.charCodeAt(t-1)].pop())}},{key:"move",value:function(e,t,n){this.desk[n].push(this.desk[t].pop());var i=this.toKey();this.done.has(i)||(this.done.add(i),this.buffers[this.iteration%2].push(this.path+String.fromCharCode(t,n)),!(this.cardToWatch<0||this.cardToWatch===e)||this.cardFilter&&!this.cardFilter[e]||this.destinationFilter&&!this.destinationFilter[n]||this.onMove(e,t,n)),this.desk[t].push(this.desk[n].pop())}},{key:"findMoves",value:function(){for(var e=this.cardFilter,t=this.getEmptyCell(),n=this.getEmptyPile(),i=0;i<this.DESK_SIZE;i++){var a=this.desk[i];if(a.length>0){var r=a[a.length-1];if(!e||e[r]){if(!this.isBase(i)){var c=this.getBase(r);c>=0&&this.move(r,i,c)}for(var s=this.PILE_START;s<this.PILE_END;s++)if(s!==i){var o=this.desk[s];o.length>0&&Object(f.e)(o[o.length-1],r)&&this.move(r,i,s)}t>=0&&(this.isCell(i)||this.move(r,i,t)),n>=0&&(!this.isPile(i)||a.length>1)&&this.move(r,i,n)}}}}},{key:"baseToString",value:function(){for(var e="",t=this.BASE_START;t<this.BASE_END;t++)e+=String.fromCharCode(this.desk[t].length);return e}},{key:"pileToString",value:function(){for(var e=[],t=this.PILE_START;t<this.PILE_END;t++)e.push(String.fromCharCode.apply(String,n(this.desk[t])));return e.sort(),e.join(String.fromCharCode(f.a))}},{key:"toKey",value:function(){return this.baseToString()+this.pileToString()}},{key:"getEmptyCell",value:function(){for(var e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getEmptyPile",value:function(){for(var e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"countEmptyCells",value:function(){for(var e=0,t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmptyPiles",value:function(){for(var e=0,t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmpty",value:function(){return this.countEmptyCells()+this.countEmptyPiles()}},{key:"countCardsInBases",value:function(){for(var e=0,t=this.BASE_START;t<this.BASE_END;t++)e+=this.desk[t].length;return e}},{key:"getBase",value:function(e){for(var t=Object(f.j)(e),n=Object(f.h)(e),i=this.BASE_START+t;i<this.BASE_END;i+=f.c)if(this.desk[i].length===n)return i;return-1}}]),a}(h.a),_=function(e){d(i,e);var n=b(i);function i(e,t,a){var r;return c(this,i),(r=n.call(this,e,t,a)).lineMap=[],r.spotMap=[],r}return o(i,[{key:"toLine",value:function(e){return this.lineMap[e]}},{key:"toSpot",value:function(e){return this.spotMap[e]}},{key:"clear",value:function(){l(g(i.prototype),"clear",this).call(this),this.lineMap.length=0,this.spotMap.length=0}},{key:"addCard",value:function(e,t){l(g(i.prototype),"addCard",this).call(this,e,t),this.lineMap[t]=e,this.spotMap[t]=this.getLine(e).length-1}},{key:"asTablaeu",value:function(e){var t=this.getTableauAt(this.lineMap[e]),n=t.indexOf(e);return n<0?t=[e]:n>0&&t.splice(0,n),t}},{key:"getBestPath",value:function(e,n){if(e.length<=0)return"";var i=e[e.length-1],a=this.lineMap[i];if(this.getCard(a,-1)!==i)return"";if(1===e.length)return this.isMoveValid(a,n)?String.fromCharCode(a,n):"";var r=new m(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray());if(r.cardToWatch=i,r.cardFilter=e.reduce(function(e,t){return e[t]=!0,e},{}),r.destinationFilter=t({},n,!0),this.isPile(n)&&0===this.getLine(n).length)for(var c=this.PILE_START;c<this.PILE_END;c++)0===this.getLine(c).length&&(r.destinationFilter[c]=!0);if(r.onMove=function(t,n,i){Object(u.b)(r.desk[i],e)&&r.stop(!0)},r.solve()){var s=r.getPath(),o=s.charCodeAt(s.length-1);return o!==n&&(s=function(e,t,n){for(var i=[],a=0;a<e.length;a++){var r=e.charCodeAt(a);r===n?r=t:r===t&&(r=n),i.push(r)}return String.fromCharCode.apply(String,i)}(s,n,o)),s}return""}},{key:"solveFor",value:function(e,n){if(this.getLine(n).length<=0)return"";if(e.length<=0)return"";var i=e[e.length-1];if(this.getCard(n,-1)!==i)return"";var a=new m(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray()),r="",c=0;return a.cardToWatch=this.getCard(n,-1),a.cardFilter=t({},a.cardToWatch,!0),a.onMove=function(){r||(r=a.getPath(),c=1)},a.findMoves(),r?(this.isBase(r.charCodeAt(1))||e.length>1&&(a.cardFilter=e.reduce(function(e,t){return e[t]=!0,e},{}),a.onMove=function(t,i,s){if(s!==n){var o=Object(u.e)(a.desk[s],e);Object(u.e)(a.desk[n],e,0,o)+o===e.length&&c<o&&(r=a.getPath(),(c=o)===e.length&&a.stop(!0))}},a.solve()),r):r}}]),i}(p);function k(e,t,n){var i=new _(e.pile,e.cell,e.base);i.deal(e.deal);for(var a=0;a+1<e.path.length;a+=2){var r=Object(s.c)(e.path,a),c=Object(s.c)(e.path,a+1);if(!i.isMoveValid(r,c)){n&&n(i,r,c,a/2);break}i.moveCard(r,c),t&&t(i,r,c,a/2)}return i}function y(e,t,n){return k(Object.assign(Object.assign({},e),{path:e.path.substring(0,2*e.mark)}),t,n)}function S(e){var t="";return k(e,function(e,n,i,a){t=Object(s.b)(t,t.length/2,n,i)},function(t,n,i,a){console.warn("Invalid subpath:",e.path.substring(a+a))}),t}},afNV:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){d(n,e);var t=b(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return c(this,n),(e=t.call(this,i))._subscriptions=a,e}return o(n,[{key:"ngOnDestroy",value:function(){this._subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"_addSubscription",value:function(e){this._subscriptions.push(e)}}]),n}(n("SeXe").a)},dkWW:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fKvJ"),a=n("fXoL"),r=function(){var e=function(e){d(n,e);var t=b(n);function n(){return c(this,n),t.call(this,200)}return o(n)}(i.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac}),e}()},"g/AF":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return s});var i=n("voYn"),a=n("dPmG");function r(e,t){return Math.floor(Object(i.a)(e,t).length/2)}function c(e,t){return Object(a.e)(e.charCodeAt(t))}function s(e,t,n,i){return t>0&&i===function(e,t){return c(e,t+t-2)}(e,t)&&n===function(e,t){return c(e,t+t-1)}(e,t)?e.substring(0,t+t-2):e.substring(0,t+t)+function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.c)(t)}(n,i)}},jZWl:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var i=n("SeXe"),a=n("2MXh"),r=n("fXoL"),s={base:4,cell:4,pile:8},u=function(){var e=function(e){d(n,e);var t=b(n);function n(){var e;return c(this,n),(e=t.call(this,s))._basis=new a.a(s.pile,s.cell,s.base),e}return o(n,[{key:"basis",get:function(){return this._basis}},{key:"set",value:function(e){return this._set(e)}},{key:"_validate",value:function(e){return e.base>0&&e.cell>0&&e.pile>0&&(e=l(g(n.prototype),"_validate",this).call(this,e))?(this._basis=new a.a(e.pile,e.cell,e.base),e):null}}]),n}(i.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Kb({token:e,factory:e.\u0275fac}),e}()},lPNG:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return l}),n.d(t,"h",function(){return u}),n.d(t,"j",function(){return d}),n.d(t,"f",function(){return f}),n.d(t,"i",function(){return b}),n.d(t,"g",function(){return h}),n.d(t,"d",function(){return g}),n.d(t,"e",function(){return p}),Array.from("SDCH");var i=["\u2660","\u2666","\u2663","\u2665"],a=["spades","diamonds","clubs","hearts"],r=(Array.from("A23456789TJQK"),["A","2","3","4","5","6","7","8","9","10","J","Q","K"]),c=["Ace","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Jack","Queen","King"],s="SDCH".length,o="A23456789TJQK".length,l=s*o;function u(e){return Math.floor(e/s)}function d(e){return e%s}function f(e){return r[u(e)]+i[d(e)]}function b(e){return a[d(e)]}function h(e){return c[u(e)]}function g(e){for(var t=[],n=0;n<l;n++)t[n]=n;if(e>=0)for(var i=0;i<l;i++){var a=(e=(1103515245*e+12345)%2147483648)%l;if(i!==a){var r=t[i];t[i]=t[a],t[a]=r}}return t}function p(e,t){return u(e)===u(t)+1&&d(e)%2!=d(t)%2}},tt9D:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"d",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return v});var i=n("SeXe"),a=n("fXoL"),r=["sidenav","sandwich"],s=function(e){return e[e.Mouse=1]="Mouse",e[e.Touch=2]="Touch",e[e.Keyboard=4]="Keyboard",e[e.All=7]="All",e}({}),u={view:r[0],aspectRatio:.56,sandwichOrder:0,sidenavModeSide:!0,sidenavClosed:!0,deckUseSvg:!1,enableSound:!1,enableRipples:!0,enableWinAnimation:!0,enableDarkMode:!1,assistLevel:1e6,inputMode:s.All},f={aspectRatio:.4,assistLevel:2e4,sandwichOrder:0,inputMode:1},h={aspectRatio:.8,assistLevel:2e6,sandwichOrder:5,inputMode:s.All},p="[FreecellSettingsState]",v=function(){var e=function(e){d(n,e);var t=b(n);function n(){var e;return c(this,n),(e=t.call(this,u)).loadLocal(p,u),e}return o(n,[{key:"restoreDefaults",value:function(){this.set(u)}},{key:"set",value:function(e){var t=this._set(e);return t&&this.saveLocal(p),t}},{key:"_validate",value:function(e){r.indexOf(e.view)<0&&(e.view=u.view);for(var t=0,i=Object.keys(f);t<i.length;t++){var a=i[t];e[a]=Math.max(f[a],Math.min(h[a],e[a]))}return l(g(n.prototype),"_validate",this).call(this,e)}}]),n}(i.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac}),e}()}}])}();
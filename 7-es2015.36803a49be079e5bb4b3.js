(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1ROQ":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var s=n("afNV"),i=n("jZWl"),a=n("g/AF"),c=n("WxrP"),r=n("fXoL");const o=Object.assign(Object.assign({},i.b),{deal:-1,mark:0,path:""});let l=(()=>{class e extends s.a{constructor(e){super(o),this._game=null,this._addSubscription(e.subscribe(e=>{this._set(Object.assign({},e))}))}get deal(){return this.state.deal}set deal(e){if(this.deal!==e){const{path:t,mark:n}=o;this._set({deal:e,path:t,mark:n})}}get mark(){return this.state.mark}set mark(e){this.mark!==e&&this._set({mark:e})}get path(){return this.state.path}set path(e){this.path!==e&&this._set({path:e})}get game(){return this._game||(this._game=Object(c.c)(this.state))}move(e,t){const n=this.state,s=Object(a.b)(n.path,n.mark,e,t);this._set({mark:s.length/2,path:n.path.startsWith(s)?n.path:s})}set(e,t,n){const s=this.state;e===s.deal&&t===s.path&&n===s.mark||this._set({deal:e,path:t,mark:n})}_validate(e){const t=Object(c.a)(e);return e.path!==t&&(console.warn("Replacing path with:",t),e.path=t),e.mark=Math.max(0,Math.min(e.path.length/2,e.mark)),(e=super._validate(e))&&(this._game=null),e}}return e.\u0275fac=function(t){return new(t||e)(r.Yb(i.a))},e.\u0275prov=r.Kb({token:e,factory:e.\u0275fac}),e})()},"2MXh":function(e,t,n){"use strict";n.d(t,"a",function(){return s});class s{constructor(e,t,n){this.PILE_NUM=e,this.CELL_NUM=t,this.BASE_NUM=n,this.PILE_START=0,this.DESK_SIZE=e+t+n,this.PILE_END=this.BASE_START=this.PILE_START+this.PILE_NUM,this.BASE_END=this.CELL_START=this.BASE_START+this.BASE_NUM,this.CELL_END=this.CELL_START+this.CELL_NUM}isPile(e){return e>=this.PILE_START&&e<this.PILE_END}isBase(e){return e>=this.BASE_START&&e<this.BASE_END}isCell(e){return e>=this.CELL_START&&e<this.CELL_END}getSpotName(e){return this.isBase(e)?"base "+(e-this.BASE_START):this.isPile(e)?"pile "+(e-this.PILE_START):this.isCell(e)?"cell "+(e-this.CELL_START):"unknown "+e}}},"9fNZ":function(e,t,n){e.exports=n.p+"0-es2015.a0ae342ad01dce847149.worker.js"},GPiM:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var s=n("afNV"),i=n("fXoL"),a=n("1ROQ"),c=n("dkWW"),r=n("tt9D"),o=n("dNgK");const l={solved:!1,canAssist:!1,canUndo:!1,canRedo:!1,nextMove:null,assistRequest:null},d=String.fromCharCode(215);let u=(()=>{class t extends s.a{constructor(e,t,n,s){super(l),this._gameService=e,this._playService=t,this._settings=n,this._snackBar=s,this._worker=null,this._createWorker(),this._addSubscription(this._gameService.subscribe(e=>{const t=Object.assign({},l),n=this._gameService.game;if(t.solved=n.isSolved(),!t.solved){const e=n.countEmpty();if(e<n.PILE_NUM+n.CELL_NUM){const s=n.getMoves();t.canAssist=!!this._worker&&s.length>0&&e<=n.CELL_NUM;for(const e of s)if(n.isBase(e.taker)){t.nextMove=e;break}}}t.canUndo=e.mark>0,t.canRedo=2*e.mark<e.path.length,this.state.assistRequest&&(this.cancelAssist(),this._snackBar.open("Assist was canceled.",d,{duration:1e3})),Promise.resolve().then(()=>this._set(t))}))}undo(){const e=this._gameService.state.mark-1;e>=0&&(this._gameService.mark=e)}redo(){const e=this._gameService.state.mark+1;e+e<=this._gameService.state.path.length&&(this._gameService.mark=e)}next(){const e=this.state.nextMove;e&&this._gameService.move(e.giver,e.taker)}playNext(){this._playService.play(()=>(this.next(),!!this.state.nextMove))}play(e){this._playService.play(()=>{if(e.length>1){const t=e.charCodeAt(0),n=e.charCodeAt(1);e=e.substring(2),this._gameService.move(t,n)}return e.length>1})}assist(){if(!this._worker||!this.state.canAssist)return;const e=this._gameService.game,t={base:e.BASE_NUM,cell:e.CELL_NUM,pile:e.PILE_NUM,desk:e.toArray()},n=JSON.stringify(t);this._worker.postMessage({requestId:n,desk:t,searchThreshold:this._settings.state.assistLevel}),this._set({assistRequest:n,canAssist:!1});const s=this._snackBar.open("Thinking...",d).onAction().subscribe(()=>{s.unsubscribe(),this.cancelAssist(),this._set({assistRequest:null,canAssist:!0})})}cancelAssist(){this._worker&&this._worker.postMessage({requestId:null})}_createWorker(){"undefined"!=typeof Worker&&(this._worker=new Worker(e,void 0),this._worker.onmessage=e=>{const t=e.data;if(t.requestId===this.state.assistRequest){let e="Unable to assist ;-(";t.path&&(e="Assisting...",this.play(t.path)),this._snackBar.open(e,d,{duration:2e3}),this._set({assistRequest:l.assistRequest})}})}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(a.a),i.Yb(c.a),i.Yb(r.a),i.Yb(o.a))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})()}).call(this,n("9fNZ"))},LGbN:function(e,t,n){"use strict";n.r(t),n.d(t,"FreecellModule",function(){return Rt});var s=n("ofXK"),i=n("3Pt+"),a=n("tyNb"),c=n("hctd"),r=n("pKmL"),o=n("GPiM"),l=n("dkWW"),d=n("jZWl"),u=n("bgvp"),h=n("fXoL");function b(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>n(e.error.message)})}let f=(()=>{class e{constructor(){this._openPromise=new Promise((e,t)=>{const n=window.indexedDB.open("freecell-db",1);n.onerror=e=>{this.onOpenError(n),t(n.error.message)},n.onupgradeneeded=e=>this.onUpgradeNeeded(n),n.onsuccess=t=>{this.onOpenSuccess(n),e()}})}get isOpen(){return!!this._db}onOpenSuccess(e){this._db=e.result,console.log("DB open success:",e.result.name)}onOpenError(e){this.openError="DB open error: "+e.error.message,console.error("DB Error:",e.error)}onUpgradeNeeded(e){this._db=e.result,this._db.createObjectStore("game",{keyPath:"deal",autoIncrement:!1}).createIndex("date","date",{unique:!1})}getGame(e){return this._getStore("game","readonly").then(t=>b(t.get(e)))}setGame(e){return e.date||(e.date=Object(u.a)()),this._getStore("game","readwrite").then(t=>b(t.put(e)))}_createTransaction(e,t="readonly"){return this._openPromise.then(()=>this._db.transaction(e,t))}_getStore(e,t="readonly"){return this._createTransaction([e],t).then(t=>t.objectStore(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})();var g=n("1ROQ"),p=n("tt9D");function m(e,t,n,s){return new(n||(n=Promise))(function(i,a){function c(e){try{o(s.next(e))}catch(t){a(t)}}function r(e){try{o(s.throw(e))}catch(t){a(t)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,r)}o((s=s.apply(e,t||[])).next())})}var _=n("dPmG");let v=class{constructor(e=[]){this._subscriptions=e}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}_addSubscription(e){this._subscriptions.push(e)}};var k=function(e){return e[e.card=0]="card",e[e.deal=1]="deal",e[e.shuffle=2]="shuffle",e[e.aplause_001=3]="aplause_001",e[e.aplause_002=4]="aplause_002",e[e.aplause_003=5]="aplause_003",e[e.aplause_004=6]="aplause_004",e[e.aplause_005=7]="aplause_005",e[e.aplause_006=8]="aplause_006",e[e.aplause_007=9]="aplause_007",e[e.length=10]="length",e}({});function C(e,t,n,s=1,i=0){const a=e.createBufferSource();a.buffer=n;let c=a;if(1!==s){const t=e.createGain();t.gain.value=s,c.connect(t),c=t}if(0!==i){const t=e.createStereoPanner();t.pan.value=i,c.connect(t),c=t}return c.connect(t),a}let S=(()=>{class e extends v{constructor(e){super(),this._enabled=!1,this._activated=!1,this._sounds=null,this._nextState=Promise.resolve(),this._addSubscription(e.subscribe(e=>{e.enableSound?this.enable():this.disable()}))}get enabled(){return this._enabled}get activated(){return this._activated}activate(){this._activated=!0}disable(){this._next(()=>m(this,void 0,void 0,function*(){return this._enabled=!1}))}enable(){this._next(()=>m(this,void 0,void 0,function*(){if(!this._sounds){this._context||(this._context=new AudioContext);const e=yield this._getBuffers();this._sounds=function(e,t){const n=function(e){const t=e.createDynamicsCompressor();return t.connect(e.destination),t}(e),s={deal:()=>{C(e,n,t[k.deal],1).start()},shuffle:()=>{C(e,n,t[k.shuffle],1.5).start()}};let i=0;return s.card=()=>{0==i++&&setTimeout(()=>{(1===i?C(e,n,t[k.card],.8):C(e,n,t[k.shuffle],1)).start(),i=0})},s.victory=()=>{const s=k.aplause_001,i=k.aplause_007,a=e.currentTime;for(let c=0,r=Object(_.k)(1,4);c<r;c++){const c=C(e,n,t[Object(_.k)(s,i+1)],Object(_.l)(.75,1.75),Object(_.k)(-100,101)/100);c.playbackRate.value=Object(_.l)(.85,1.75),c.start(a+3*Math.random())}},s}(this._context,e)}this._enabled=!0}))}play(e){return m(this,void 0,void 0,function*(){if(yield this._nextState,this._enabled&&this._activated&&this._sounds){const t=this._sounds[e];"function"==typeof t&&("suspended"===this._context.state&&(yield this._context.resume()),t())}})}_next(e){return m(this,void 0,void 0,function*(){try{yield this._nextState}finally{this._nextState=e()}})}_getBuffers(){return this._buffers||(this._buffers=this._loadAll()),this._buffers}_loadAll(){const e=[];for(let s=0;s<k.length;s++)e.push("./assets/freecell/sounds/"+k[s]+".mp3");return t=this._context,n=e,new Promise((e,s)=>{let i=n.length;const a=new Array(n.length);0===i&&e([]),n.forEach((n,c)=>{(function(e,t){return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=()=>t(s.response),s.onerror=e=>n(e),s.send()})})(n).then(e=>function(e,t){return new Promise((n,s)=>{e.decodeAudioData(t,e=>n(e),e=>s(e))})}(t,e)).then(t=>{a[c]=t,0==--i&&e(a)}).catch(e=>s(e))})});var t,n}}return e.\u0275fac=function(t){return new(t||e)(h.Yb(p.a))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})();var T=n("RDYl"),y=n("rDax"),w=n("0IaG"),O=n("wZkO"),M=n("1jcm"),L=n("bTqV"),U=n("NFeN"),E=n("5RNC"),P=n("jaxi"),x=n("f0Cb");function B(e,t){if(1&e&&(h.Ub(0,"mat-icon",8),h.Bc(1),h.Tb(),h.Bc(2," Game Sounds ")),2&e){const e=h.fc();h.Cb(1),h.Cc(e.settings.state.enableSound?"volume_up":"volume_off")}}function A(e,t){1&e&&(h.Ub(0,"mat-icon",8),h.Bc(1,"assistant"),h.Tb(),h.Bc(2," Assist level "))}function I(e,t){1&e&&(h.Ub(0,"mat-icon",8),h.Bc(1,"layers"),h.Tb(),h.Bc(2," Card Effects "))}function D(e,t){1&e&&(h.Ub(0,"mat-icon",8),h.Bc(1,"dashboard"),h.Tb(),h.Bc(2," Appearance "))}const R=1e3;let N=(()=>{class e{constructor(e){this.settings=e,this.aspectRatioMin=p.d.aspectRatio*R,this.aspectRatioMax=p.c.aspectRatio*R,this.aspectRatioStep=5,this.assistLevelMin=Math.ceil(p.d.assistLevel/R),this.assistLevelMax=Math.floor(p.c.assistLevel/R),this.assistLevelStep=5,this.aspectRatioLabel=e=>(e/R).toFixed(3),this.assistLevelLabel=e=>{const t=(this.assistLevelMax-this.assistLevelMin)/3;return e<this.assistLevelMin+t?"low":e>this.assistLevelMax-t?"high":"norm"}}get aspectRatio(){return Math.round(this.settings.state.aspectRatio*R)}set aspectRatio(e){this.settings.set({aspectRatio:+e/R})}get assistLevel(){return Math.round(this.settings.state.assistLevel/R)}set assistLevel(e){(e=Math.max(this.assistLevelMin,Math.min(this.assistLevelMax,+e)))!==this.assistLevel&&this.settings.set({assistLevel:e*R})}assistLevelColor(){switch(this.assistLevelLabel(this.assistLevel)){case"low":return"primary";case"high":return"warn";default:return"accent"}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(p.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-settings-dialog"]],decls:75,vars:30,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-tab-label",""],[1,"tab-content"],[3,"checked","change"],[1,"pad-top"],["mat-stroked-button","",3,"disabled","click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","color","ngModelChange"],[1,"margin-right-8"],[3,"value"],["value","sidenav",3,"click"],["value","sandwich",3,"click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","ngModelChange"],["align","center"],["mat-button","",3,"click"],["mat-button","","matDialogClose","","cdkFocusInitial",""]],template:function(e,t){1&e&&(h.Ub(0,"h2",0),h.Bc(1,"Freecell Settings"),h.Tb(),h.Ub(2,"mat-dialog-content",1),h.Ub(3,"mat-tab-group"),h.Ub(4,"mat-tab"),h.zc(5,B,3,1,"ng-template",2),h.Ub(6,"div",3),h.Ub(7,"mat-slide-toggle",4),h.bc("change",function(e){return t.settings.set({enableSound:!!e.checked})}),h.Bc(8," Enable "),h.Tb(),h.Tb(),h.Tb(),h.Ub(9,"mat-tab"),h.zc(10,A,3,0,"ng-template",2),h.Ub(11,"div",3),h.Ub(12,"p"),h.Bc(13,"The maximum number of moves the assistant will try to solve."),h.Tb(),h.Ub(14,"div",5),h.Ub(15,"button",6),h.bc("click",function(){return t.assistLevel=t.assistLevel-t.assistLevelStep}),h.Ub(16,"mat-icon"),h.Bc(17,"chevron_left"),h.Tb(),h.Tb(),h.Ub(18,"button",6),h.bc("click",function(){return t.assistLevel=t.assistLevel+t.assistLevelStep}),h.Ub(19,"mat-icon"),h.Bc(20,"chevron_right"),h.Tb(),h.Tb(),h.Ub(21,"mat-slider",7),h.bc("ngModelChange",function(e){return t.assistLevel=e}),h.Tb(),h.Bc(22),h.gc(23,"number"),h.Tb(),h.Tb(),h.Tb(),h.Ub(24,"mat-tab"),h.zc(25,I,3,0,"ng-template",2),h.Ub(26,"div",3),h.Ub(27,"div"),h.Ub(28,"mat-slide-toggle",4),h.bc("change",function(e){return t.settings.set({deckUseSvg:!!e.checked})}),h.Bc(29," Use SVG "),h.Tb(),h.Tb(),h.Ub(30,"div",5),h.Ub(31,"mat-slide-toggle",4),h.bc("change",function(e){return t.settings.set({enableRipples:!!e.checked})}),h.Bc(32," Enable Ripples "),h.Tb(),h.Tb(),h.Ub(33,"div",5),h.Ub(34,"mat-slide-toggle",4),h.bc("change",function(e){return t.settings.set({enableWinAnimation:!!e.checked})}),h.Bc(35," Enable Victory Animation "),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(36,"mat-tab"),h.zc(37,D,3,0,"ng-template",2),h.Ub(38,"div",3),h.Ub(39,"div"),h.Ub(40,"mat-icon",8),h.Bc(41,"table_chart"),h.Tb(),h.Bc(42,"Layout: "),h.Ub(43,"span"),h.Bc(44,"horizontal"),h.Tb(),h.Bc(45," or "),h.Ub(46,"span"),h.Bc(47,"vertical"),h.Tb(),h.Bc(48,". "),h.Ub(49,"mat-button-toggle-group",9),h.Ub(50,"mat-button-toggle",10),h.bc("click",function(){return t.settings.set({view:"sidenav"})}),h.Ub(51,"mat-icon"),h.Bc(52,"stay_current_landscape"),h.Tb(),h.Tb(),h.Ub(53,"mat-button-toggle",11),h.bc("click",function(){return t.settings.set({view:"sandwich"})}),h.Ub(54,"mat-icon"),h.Bc(55,"stay_current_portrait"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(56,"div",5),h.Ub(57,"mat-icon",8),h.Bc(58,"aspect_ratio"),h.Tb(),h.Bc(59,"Aspect ratio. The playground width divided by its height. "),h.Ub(60,"mat-slider",12),h.bc("ngModelChange",function(e){return t.aspectRatio=e}),h.Tb(),h.Bc(61),h.gc(62,"number"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Pb(63,"mat-divider"),h.Ub(64,"mat-dialog-actions",13),h.Ub(65,"button",14),h.bc("click",function(){return t.settings.restoreDefaults()}),h.Ub(66,"mat-icon"),h.Bc(67,"settings_backup_restore"),h.Tb(),h.Ub(68,"label"),h.Bc(69,"RESET"),h.Tb(),h.Tb(),h.Ub(70,"button",15),h.Ub(71,"mat-icon"),h.Bc(72,"close"),h.Tb(),h.Ub(73,"label"),h.Bc(74,"CLOSE"),h.Tb(),h.Tb(),h.Tb()),2&e&&(h.Cb(7),h.lc("checked",t.settings.state.enableSound),h.Cb(8),h.lc("disabled",t.assistLevelMin>=t.assistLevel),h.Cb(3),h.lc("disabled",t.assistLevel>=t.assistLevelMax),h.Cb(3),h.lc("displayWith",t.assistLevelLabel)("min",t.assistLevelMin)("max",t.assistLevelMax)("step",t.assistLevelStep)("ngModel",t.assistLevel)("color",t.assistLevelColor()),h.Cb(1),h.Dc(" ",h.ic(23,24,t.settings.state.assistLevel,"1.0-0")," "),h.Cb(6),h.lc("checked",t.settings.state.deckUseSvg),h.Cb(3),h.lc("checked",t.settings.state.enableRipples),h.Cb(3),h.lc("checked",t.settings.state.enableWinAnimation),h.Cb(9),h.Gb("text-selected","sidenav"===t.settings.state.view),h.Cb(3),h.Gb("text-selected","sandwich"===t.settings.state.view),h.Cb(3),h.lc("value",t.settings.state.view),h.Cb(11),h.lc("displayWith",t.aspectRatioLabel)("min",t.aspectRatioMin)("max",t.aspectRatioMax)("step",t.aspectRatioStep)("ngModel",t.aspectRatio),h.Cb(1),h.Dc(" ",h.ic(62,27,t.settings.state.aspectRatio,"1.3-3")," "))},directives:[w.h,w.e,O.b,O.a,O.c,M.a,L.a,U.a,E.a,i.i,i.l,P.b,P.a,x.a,w.c,w.d],pipes:[s.e],styles:[".pad-top[_ngcontent-%COMP%], .tab-content[_ngcontent-%COMP%]{padding-top:16px}.tab-content[_ngcontent-%COMP%]{min-height:12.75rem;margin-left:10px}@media (min-aspect-ratio:8/5){.tab-content[_ngcontent-%COMP%]{min-height:9rem}}.margin-right-8[_ngcontent-%COMP%]{margin-right:8px}span.text-selected[_ngcontent-%COMP%]{font-weight:500}"]}),e})();var j=n("0MNC");function F(e,t){1&e&&(h.ec(),h.Ub(0,"svg",6),h.Pb(1,"path",7),h.Pb(2,"path",8),h.Tb())}function z(e,t){1&e&&(h.Sb(0),h.ec(),h.Ub(1,"svg",6),h.Pb(2,"path",7),h.Pb(3,"path",11),h.Tb(),h.Rb())}function X(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",9),h.bc("click",function(){h.sc(e);const n=t.$implicit;return h.fc().changeOrder(n)}),h.zc(1,z,4,0,"ng-container",10),h.Tb()}if(2&e){const e=t.$implicit,n=h.fc(),s=h.qc(1);h.Gb("sandwich-button-move-down",n.order[1]>n.order[e])("sandwich-button-move-up",n.order[e]>n.order[1]),h.Cb(1),h.lc("ngIf",n.order[1]>n.order[e])("ngIfElse",s)}}function q(e,t){1&e&&h.Qb(0)}const G=function(){return{$implicit:0}};function W(e,t){if(1&e&&(h.Ub(0,"div",12),h.jc(1,1),h.zc(2,q,1,0,"ng-container",13),h.Tb()),2&e){const e=h.fc(),t=h.qc(3);h.wc("order",e.order[0]),h.Cb(2),h.lc("ngTemplateOutlet",t)("ngTemplateOutletContext",h.mc(4,G))}}function Y(e,t){1&e&&h.Qb(0)}const K=function(){return{$implicit:2}};function H(e,t){if(1&e&&(h.Ub(0,"div",14),h.jc(1,2),h.zc(2,Y,1,0,"ng-container",13),h.Tb()),2&e){const e=h.fc(),t=h.qc(3);h.wc("order",e.order[2]),h.Cb(2),h.lc("ngTemplateOutlet",t)("ngTemplateOutletContext",h.mc(4,K))}}const Q=[[["","appSandwichContent",""]],[["","appSandwichHeader",""]],[["","appSandwichFooter",""]]],V=["[appSandwichContent]","[appSandwichHeader]","[appSandwichFooter]"],$=[5,7,11,15,19,21];function Z(e,t){return Math.floor($[e]/Math.pow(3,2-t))%3}let J=(()=>{class e{constructor(){this.sandwichOrderChange=new h.n,this.hideHeader=!1,this.hideFooter=!1,this.order=[0,1,2],this._sandwichOrder=0}get sandwichOrder(){return this._sandwichOrder}set sandwichOrder(e){this._sandwichOrder!==e&&e>=0&&e<$.length&&(this._sandwichOrder=e,this.order[0]=Z(e,0),this.order[1]=Z(e,1),this.order[2]=Z(e,2))}ngOnInit(){}changeOrder(e){const t=[...this.order],n=t[e];if(n>t[1])for(let s=t.length;s-- >0;)t[s]===n?t[s]=n-1:t[s]===n-1&&(t[s]=n);else if(n<t[1])for(let s=t.length;s-- >0;)t[s]===n?t[s]=n+1:t[s]===n+1&&(t[s]=n);this.sandwichOrderChange.emit($.indexOf(3*(3*t[0]+t[1])+t[2]))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ib({type:e,selectors:[["app-sandwich"]],inputs:{sandwichOrder:"sandwichOrder",hideHeader:"hideHeader",hideFooter:"hideFooter"},outputs:{sandwichOrderChange:"sandwichOrderChange"},ngContentSelectors:V,decls:9,vars:4,consts:[["arrowUpward",""],["moveButton",""],[1,"sandwich-container"],["class","sandwich-header",3,"order",4,"ngIf"],[1,"sandwich-content"],["class","sandwich-footer",3,"order",4,"ngIf"],["height","24","width","24"],["d","M0 0h24v24H0V0z","fill","none"],["d","M6 6h4v4h4V6h4l-6-4zM2 15h20v-4H2v4zm2-3h2v2H4v-2z","fill","currentColor"],["mat-icon-button","",3,"click"],[4,"ngIf","ngIfElse"],["d","M18 18h-4v-4h-4v4H6l6 4zM2 13h20V9H2v4zm2-3h2v2H4v-2z","fill","currentColor"],[1,"sandwich-header"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"sandwich-footer"]],template:function(e,t){1&e&&(h.kc(Q),h.zc(0,F,3,0,"ng-template",null,0,h.Ac),h.zc(2,X,2,6,"ng-template",null,1,h.Ac),h.Ub(4,"div",2),h.zc(5,W,3,5,"div",3),h.Ub(6,"div",4),h.jc(7),h.Tb(),h.zc(8,H,3,5,"div",5),h.Tb()),2&e&&(h.Cb(5),h.lc("ngIf",!t.hideHeader),h.Cb(1),h.wc("order",t.order[1]),h.Cb(2),h.lc("ngIf",!t.hideFooter))},directives:[s.l,L.a,s.q],styles:["div.sandwich-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch}div.sandwich-footer[_ngcontent-%COMP%], div.sandwich-header[_ngcontent-%COMP%]{position:relative;flex-grow:0;flex-shrink:0}div.sandwich-content[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:0}.sandwich-button-move-down[_ngcontent-%COMP%], .sandwich-button-move-up[_ngcontent-%COMP%]{position:absolute;right:0;color:#bccfe0}.sandwich-button-move-down[_ngcontent-%COMP%]:hover, .sandwich-button-move-up[_ngcontent-%COMP%]:hover{color:#fff}.sandwich-button-move-down[_ngcontent-%COMP%]{bottom:0}.sandwich-button-move-up[_ngcontent-%COMP%]{top:0}"]}),e})();var ee=n("/t3+"),te=n("voYn"),ne=n("STbY"),se=n("MutI");let ie=(()=>{class e extends v{constructor(e){super(),this._gameService=e,this.listItem=!1,this.dealLabel="",this.isMenuOpened=!1,this.minDeal=0,this.maxDeal=2147483648,this.digitCount=this.maxDeal.toString(10).length}ngOnInit(){this._addSubscription(this._gameService.subscribe(e=>{this.deal=e.deal,this.dealLabel="#"+(this.deal>=0?Object(te.c)(this.deal.toString(10),this.digitCount,"0"):Object(te.c)("",this.digitCount,"#"))}))}setDeal(e){e>=this.minDeal&&e<=this.maxDeal&&(this._gameService.deal=e)}setRandomDeal(){this.setDeal(Object(_.k)(this.minDeal,this.maxDeal,this.deal))}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(g.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-deal-menu"]],inputs:{listItem:"listItem"},features:[h.zb],decls:22,vars:7,consts:[["xPosition","before"],["appMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["mat-button","",3,"matMenuTriggerFor","menuOpened","menuClosed"]],template:function(e,t){if(1&e&&(h.Ub(0,"mat-menu",0,1),h.Ub(2,"button",2),h.bc("click",function(){return t.setDeal(t.deal+1)}),h.Ub(3,"mat-icon"),h.Bc(4,"navigate_next"),h.Tb(),h.Ub(5,"span"),h.Bc(6,"Next"),h.Tb(),h.Tb(),h.Ub(7,"button",2),h.bc("click",function(){return t.setDeal(t.deal-1)}),h.Ub(8,"mat-icon"),h.Bc(9,"navigate_before"),h.Tb(),h.Ub(10,"span"),h.Bc(11,"Previous"),h.Tb(),h.Tb(),h.Ub(12,"button",3),h.bc("click",function(){return t.setRandomDeal()}),h.Ub(13,"mat-icon"),h.Bc(14,"casino"),h.Tb(),h.Ub(15,"span"),h.Bc(16,"Random"),h.Tb(),h.Tb(),h.Tb(),h.Ub(17,"button",4),h.bc("menuOpened",function(){return t.isMenuOpened=!0})("menuClosed",function(){return t.isMenuOpened=!1}),h.Ub(18,"label"),h.Bc(19),h.Tb(),h.Ub(20,"mat-icon"),h.Bc(21),h.Tb(),h.Tb()),2&e){const e=h.qc(1);h.Cb(2),h.lc("disabled",t.deal>=t.maxDeal),h.Cb(5),h.lc("disabled",t.minDeal>=t.deal),h.Cb(10),h.Gb("mat-list-item",t.listItem),h.lc("matMenuTriggerFor",e),h.Cb(2),h.Cc(t.dealLabel),h.Cb(2),h.Cc(t.isMenuOpened?"remove":"expand_more")}},directives:[ne.a,ne.b,U.a,L.a,se.b,ne.d],styles:[""]}),e})();var ae=n("bv9b");function ce(e,t){1&e&&h.Pb(0,"mat-progress-bar",6)}function re(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",2),h.bc("click",function(){return h.sc(e),h.fc().actionService.undo()}),h.Ub(1,"mat-icon"),h.Bc(2,"undo"),h.Tb(),h.Ub(3,"label"),h.Bc(4,"UNDO"),h.Tb(),h.Tb(),h.Ub(5,"button",2),h.bc("click",function(){return h.sc(e),h.fc().actionService.redo()}),h.Ub(6,"mat-icon"),h.Bc(7,"redo"),h.Tb(),h.Ub(8,"label"),h.Bc(9,"REDO"),h.Tb(),h.Tb(),h.Ub(10,"button",3),h.bc("click",function(){return h.sc(e),h.fc().actionService.playNext()}),h.Ub(11,"mat-icon"),h.Bc(12,"emoji_objects"),h.Tb(),h.Ub(13,"label"),h.Bc(14,"AUTO"),h.Tb(),h.Tb(),h.Ub(15,"button",4),h.bc("click",function(){return h.sc(e),h.fc().actionService.assist()}),h.Ub(16,"mat-icon"),h.Bc(17,"assistant"),h.Tb(),h.Ub(18,"label"),h.Bc(19,"ASSIST"),h.Tb(),h.zc(20,ce,1,0,"mat-progress-bar",5),h.Tb()}if(2&e){const e=h.fc();h.lc("disabled",!e.actionService.state.canUndo),h.Cb(5),h.lc("disabled",!e.actionService.state.canRedo),h.Cb(5),h.lc("disabled",!e.actionService.state.nextMove),h.Cb(5),h.lc("disabled",!e.actionService.state.canAssist),h.Cb(5),h.lc("ngIf",e.actionService.state.assistRequest)}}function oe(e,t){1&e&&h.Pb(0,"mat-progress-bar",6)}function le(e,t){if(1&e){const e=h.Vb();h.Sb(0),h.Ub(1,"button",7),h.bc("click",function(){return h.sc(e),h.fc().actionService.undo()}),h.Ub(2,"mat-icon"),h.Bc(3,"undo"),h.Tb(),h.Tb(),h.Ub(4,"button",7),h.bc("click",function(){return h.sc(e),h.fc().actionService.redo()}),h.Ub(5,"mat-icon"),h.Bc(6,"redo"),h.Tb(),h.Tb(),h.Ub(7,"button",8),h.bc("click",function(){return h.sc(e),h.fc().actionService.playNext()}),h.Ub(8,"mat-icon"),h.Bc(9,"emoji_objects"),h.Tb(),h.Tb(),h.Ub(10,"button",9),h.bc("click",function(){return h.sc(e),h.fc().actionService.assist()}),h.Ub(11,"mat-icon"),h.Bc(12,"assistant"),h.Tb(),h.zc(13,oe,1,0,"mat-progress-bar",5),h.Tb(),h.Rb()}if(2&e){const e=h.fc();h.Cb(1),h.lc("disabled",!e.actionService.state.canUndo),h.Cb(3),h.lc("disabled",!e.actionService.state.canRedo),h.Cb(3),h.lc("disabled",!e.actionService.state.nextMove),h.Cb(3),h.lc("disabled",!e.actionService.state.canAssist),h.Cb(3),h.lc("ngIf",e.actionService.state.assistRequest)}}let de=(()=>{class e{constructor(e){this.actionService=e,this.noLabel=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(o.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-action-buttons"]],inputs:{noLabel:"noLabel"},decls:3,vars:2,consts:[["buttons",""],[4,"ngIf","ngIfElse"],["mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","accent",3,"disabled","click"],["mat-stroked-button","","color","warn",3,"disabled","click"],["mode","indeterminate","color","warn","style","position: absolute; left: 0; bottom: 0",4,"ngIf"],["mode","indeterminate","color","warn",2,"position","absolute","left","0","bottom","0"],["mat-icon-button","",3,"disabled","click"],["mat-icon-button","","color","accent",3,"disabled","click"],["mat-icon-button","","color","warn",3,"disabled","click"]],template:function(e,t){if(1&e&&(h.zc(0,re,21,5,"ng-template",null,0,h.Ac),h.zc(2,le,14,5,"ng-container",1)),2&e){const e=h.qc(1);h.Cb(2),h.lc("ngIf",t.noLabel)("ngIfElse",e)}},directives:[s.l,L.a,U.a,ae.a],styles:[""]}),e})();var ue=n("lPNG"),he=n("WxrP"),be=n("kmnG"),fe=n("d3UM"),ge=n("FKr1");function pe(e,t){1&e&&(h.Ub(0,"mat-icon",4),h.Bc(1,"emoji_events"),h.Tb())}function me(e,t){if(1&e&&(h.Ub(0,"mat-option",2),h.Ub(1,"div",5),h.Bc(2),h.Ub(3,"span"),h.Bc(4),h.Tb(),h.Bc(5,"\xa0\u2192\xa0 "),h.Ub(6,"span"),h.Bc(7),h.Tb(),h.Bc(8,"\xa0 "),h.Ub(9,"span"),h.Bc(10),h.Tb(),h.Tb(),h.Tb()),2&e){const e=t.$implicit,n=t.index;h.lc("value",n),h.Cb(2),h.Dc(" ",n+1,".\xa0 "),h.Cb(1),h.Eb(e.cardClass),h.Cb(1),h.Cc(e.cardName),h.Cb(2),h.Eb(e.takerClass),h.Cb(1),h.Cc(e.takerName),h.Cb(2),h.Eb(e.outcomeClass),h.Cb(1),h.Cc(e.outcomeName)}}const _e=["danger-critical","danger-extreme","danger-very-high","danger-high","danger-moderate","danger-low","danger-very-low"];let ve=(()=>{class e extends v{constructor(e){super(),this._gameService=e,this.items=[],this.selection=-1,this.isSolved=!1,this.cards={},this.onMoveCallback=(e,t,n,s)=>{const i=this.items[s]||{};if(t!==i.giver||n!==i.taker){if(i.card=e.getCard(n,-1),i.giver=t,i.taker=n,i.outcome=e.countEmpty(),i.cardName=this.cards[i.card].cardName,i.cardClass=this.cards[i.card].className,i.outcome===e.PILE_NUM+e.CELL_NUM?(this.isSolved=!0,i.outcomeName="solved!"):i.outcomeName="free "+i.outcome,i.outcomeClass=_e[Math.min(i.outcome,_e.length-1)],e.getLine(n).length>1){const t=e.getCard(n,-2);i.takerName=this.cards[t].cardName,i.takerClass=this.cards[t].className}else i.takerName=function(e,t){return e.isBase(t)?"base":e.isPile(t)?"pile":e.isCell(t)?"cell":"unknown index:"+t}(e,n),i.takerClass="";this.items[s]=i}else"solved!"===i.outcomeName&&(this.isSolved=!0)}}ngOnInit(){for(let e=0;e<ue.a;e++)this.cards[e]={className:"history-item-"+Object(ue.i)(e),cardName:Object(ue.f)(e)};this._addSubscription(this._gameService.subscribe(e=>{var t;(this._gameService.isFirstChange||e.deal!==(null===(t=this._gameService.previousState)||void 0===t?void 0:t.deal))&&(this.isSolved=!1,this.items.length=0),e.path&&(this.isSolved=!1,Object(he.b)(e,this.onMoveCallback),this.items.splice(e.path.length/2)),this.selection=e.mark-1}))}setSelection(e){this.selection!==e&&e<=this.items.length&&e>=-1&&(this._gameService.mark=e+1)}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(g.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-history"]],features:[h.zb],decls:8,vars:4,consts:[["color","accent",4,"ngIf"],[3,"value","valueChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["color","accent"],[1,"history-item"]],template:function(e,t){1&e&&(h.Ub(0,"mat-form-field"),h.Ub(1,"mat-label"),h.zc(2,pe,2,0,"mat-icon",0),h.Bc(3," Game History: "),h.Tb(),h.Ub(4,"mat-select",1),h.bc("valueChange",function(e){return t.setSelection(e)}),h.Ub(5,"mat-option",2),h.Bc(6,"Start"),h.Tb(),h.zc(7,me,11,11,"mat-option",3),h.Tb(),h.Tb()),2&e&&(h.Cb(2),h.lc("ngIf",t.isSolved),h.Cb(2),h.lc("value",t.selection),h.Cb(1),h.lc("value",-1),h.Cb(2),h.lc("ngForOf",t.items))},directives:[be.c,be.g,s.l,fe.a,ge.h,s.k,U.a],styles:["div.history-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.history-item-diamonds[_ngcontent-%COMP%], .history-item-hearts[_ngcontent-%COMP%]{color:red}.history-item-clubs[_ngcontent-%COMP%], .history-item-spades[_ngcontent-%COMP%]{color:#000}.danger-critical[_ngcontent-%COMP%], .danger-extreme[_ngcontent-%COMP%], .danger-high[_ngcontent-%COMP%], .danger-low[_ngcontent-%COMP%], .danger-moderate[_ngcontent-%COMP%], .danger-very-high[_ngcontent-%COMP%], .danger-very-low[_ngcontent-%COMP%]{min-width:4em;padding-left:.25em;padding-right:.25em}.danger-very-low[_ngcontent-%COMP%]{background-color:#bbee90}.danger-low[_ngcontent-%COMP%]{background-color:#bbdd85}.danger-moderate[_ngcontent-%COMP%]{background-color:#bbcc80}.danger-high[_ngcontent-%COMP%]{background-color:#ffee30}.danger-very-high[_ngcontent-%COMP%]{background-color:#fc0}.danger-extreme[_ngcontent-%COMP%]{background-color:#ff9920}.danger-critical[_ngcontent-%COMP%]{background-color:#ff5540}"]}),e})();function ke(e,t){if(1&e&&h.Pb(0,"app-freecell-action-buttons",11),2&e){const e=h.fc();h.lc("noLabel",e.noLabel)}}function Ce(e,t){1&e&&(h.Ub(0,"div",12),h.Pb(1,"app-freecell-history"),h.Tb())}function Se(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",13),h.bc("click",function(){h.sc(e);const t=h.fc();return t.settings.set({enableDarkMode:!t.settings.state.enableDarkMode})}),h.Ub(1,"mat-icon"),h.Bc(2),h.Tb(),h.Tb(),h.Ub(3,"button",14),h.bc("click",function(){return h.sc(e),h.fc().settingsChange.emit()}),h.Ub(4,"mat-icon"),h.Bc(5,"settings"),h.Tb(),h.Tb()}if(2&e){const e=h.fc();h.Cb(2),h.Cc(e.settings.state.enableDarkMode?"brightness_3":"brightness_7")}}function Te(e,t){1&e&&h.Qb(0)}function ye(e,t){1&e&&h.Qb(0)}function we(e,t){if(1&e&&(h.zc(0,Te,1,0,"ng-container",15),h.Pb(1,"span",16),h.zc(2,ye,1,0,"ng-container",15)),2&e){h.fc();const e=h.qc(3),t=h.qc(5);h.lc("ngTemplateOutlet",e),h.Cb(2),h.lc("ngTemplateOutlet",t)}}function Oe(e,t){1&e&&h.Qb(0)}function Me(e,t){if(1&e&&(h.Pb(0,"span",16),h.zc(1,Oe,1,0,"ng-container",15),h.Pb(2,"span",16)),2&e){h.fc();const e=h.qc(1);h.Cb(1),h.lc("ngTemplateOutlet",e)}}function Le(e,t){1&e&&h.Qb(0)}function Ue(e,t){1&e&&h.Qb(0)}function Ee(e,t){1&e&&h.Qb(0)}function Pe(e,t){if(1&e&&(h.zc(0,Le,1,0,"ng-container",15),h.zc(1,Ue,1,0,"ng-container",15),h.zc(2,Ee,1,0,"ng-container",15)),2&e){h.fc();const e=h.qc(3),t=h.qc(9),n=h.qc(5);h.lc("ngTemplateOutlet",e),h.Cb(1),h.lc("ngTemplateOutlet",t),h.Cb(1),h.lc("ngTemplateOutlet",n)}}function xe(e,t){1&e&&h.Qb(0)}function Be(e,t){if(1&e&&(h.Sb(0),h.zc(1,xe,1,0,"ng-container",15),h.Rb()),2&e){h.fc();const e=h.qc(11);h.Cb(1),h.lc("ngTemplateOutlet",e)}}function Ae(e,t){1&e&&h.Qb(0)}function Ie(e,t){if(1&e&&(h.Sb(0),h.zc(1,Ae,1,0,"ng-container",15),h.Rb()),2&e){h.fc();const e=h.qc(9);h.Cb(1),h.lc("ngTemplateOutlet",e)}}function De(e,t){1&e&&h.Qb(0)}function Re(e,t){if(1&e&&(h.Ub(0,"mat-toolbar-row"),h.zc(1,De,1,0,"ng-container",15),h.Tb()),2&e){h.fc();const e=h.qc(9);h.Cb(1),h.lc("ngTemplateOutlet",e)}}function Ne(e,t){1&e&&h.Qb(0)}function je(e,t){if(1&e&&(h.Ub(0,"mat-toolbar",17),h.zc(1,Ne,1,0,"ng-container",15),h.Tb()),2&e){h.fc();const e=h.qc(7);h.Cb(1),h.lc("ngTemplateOutlet",e)}}const Fe=["*"],ze=j.b.XSmall,Xe=j.b.Small,qe=j.b.Large,Ge=j.b.XLarge;let We=(()=>{class e extends v{constructor(e,t){super(),this.settings=t,this.settingsChange=new h.n,this.noLabel=!1,this.rowNum=3,this._addSubscription(e.observe([ze,Xe,qe,Ge]).subscribe(e=>{this.noLabel=e.breakpoints[ze]||e.breakpoints[Xe],this.rowNum=e.breakpoints[ze]?3:e.breakpoints[qe]||e.breakpoints[Ge]?1:2}))}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(j.a),h.Ob(p.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-sandwich"]],outputs:{settingsChange:"settingsChange"},features:[h.zb],ngContentSelectors:Fe,decls:23,vars:6,consts:[["actionButtons",""],["history",""],["settingsButtons",""],["toolbarRow3",""],["toolbarRow2",""],["toolbarRow1",""],[3,"sandwichOrder","hideFooter","sandwichOrderChange"],["appSandwichHeader","","color","primary"],[2,"margin-right","20px"],[4,"ngIf"],["appSandwichFooter","","color","primary",4,"ngIf"],[3,"noLabel"],[1,"mat-typography","padding-top-half-rem"],["mat-icon-button","",3,"click"],["mat-icon-button","",2,"margin-right","40px",3,"click"],[4,"ngTemplateOutlet"],[1,"flex-space-filler-1"],["appSandwichFooter","","color","primary"]],template:function(e,t){1&e&&(h.kc(),h.zc(0,ke,1,1,"ng-template",null,0,h.Ac),h.zc(2,Ce,2,0,"ng-template",null,1,h.Ac),h.zc(4,Se,6,1,"ng-template",null,2,h.Ac),h.zc(6,we,3,2,"ng-template",null,3,h.Ac),h.zc(8,Me,3,1,"ng-template",null,4,h.Ac),h.zc(10,Pe,3,3,"ng-template",null,5,h.Ac),h.Ub(12,"app-sandwich",6),h.bc("sandwichOrderChange",function(e){return t.settings.set({sandwichOrder:e})}),h.Ub(13,"mat-toolbar",7),h.Ub(14,"mat-toolbar-row"),h.Ub(15,"span"),h.Bc(16,"Freecell"),h.Tb(),h.Pb(17,"app-freecell-deal-menu",8),h.zc(18,Be,2,1,"ng-container",9),h.zc(19,Ie,2,1,"ng-container",9),h.Tb(),h.zc(20,Re,2,1,"mat-toolbar-row",9),h.Tb(),h.jc(21,0,["appSandwichContent",""]),h.zc(22,je,2,1,"mat-toolbar",10),h.Tb()),2&e&&(h.Cb(12),h.lc("sandwichOrder",t.settings.state.sandwichOrder)("hideFooter",2>t.rowNum),h.Cb(6),h.lc("ngIf",1===t.rowNum),h.Cb(1),h.lc("ngIf",2===t.rowNum),h.Cb(1),h.lc("ngIf",t.rowNum>=3),h.Cb(2),h.lc("ngIf",t.rowNum>1))},directives:[J,ee.a,ee.c,ie,s.l,de,ve,L.a,U.a,s.q],styles:[".padding-top-half-rem[_ngcontent-%COMP%]{padding-top:.5rem}"]}),e})();var Ye=n("XhcP");function Ke(e,t){1&e&&h.Bc(0," Loading stuff...\n")}function He(e,t){if(1&e){const e=h.Vb();h.Ub(0,"mat-slide-toggle",17),h.bc("change",function(t){return h.sc(e),h.fc(2).settings.set({sidenavModeSide:!!t.checked})}),h.Tb()}if(2&e){const e=h.fc(2);h.lc("checked",e.settings.state.sidenavModeSide)}}function Qe(e,t){1&e&&h.Pb(0,"mat-progress-bar",18)}function Ve(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",19),h.bc("click",function(){return h.sc(e),h.fc(2).settings.set({sidenavClosed:!1})}),h.Ub(1,"mat-icon"),h.Bc(2,"double_arrow"),h.Tb(),h.Tb()}if(2&e){const e=h.fc(2);h.Gb("sidenav-open-button-active",!e.sidenavOpened)}}function $e(e,t){if(1&e){const e=h.Vb();h.Ub(0,"div",2),h.Ub(1,"mat-sidenav-container",3),h.Ub(2,"mat-sidenav",4),h.bc("closedStart",function(){return h.sc(e),h.fc().settings.set({sidenavClosed:!0})})("openedChange",function(t){return h.sc(e),h.fc().sidenavOpened=t}),h.Ub(3,"mat-toolbar",5),h.Ub(4,"button",6),h.bc("click",function(){return h.sc(e),h.fc().settings.set({sidenavClosed:!0})}),h.Ub(5,"mat-icon"),h.Bc(6,"close"),h.Tb(),h.Tb(),h.Pb(7,"span",7),h.Ub(8,"span"),h.Bc(9,"Freecell"),h.Tb(),h.Pb(10,"span",7),h.zc(11,He,1,1,"mat-slide-toggle",8),h.Tb(),h.Ub(12,"mat-action-list"),h.Pb(13,"app-freecell-deal-menu",9),h.Ub(14,"div",10),h.Bc(15,"Actions:"),h.Tb(),h.Ub(16,"button",11),h.bc("click",function(){return h.sc(e),h.fc().actionService.undo()}),h.Ub(17,"mat-icon",12),h.Bc(18,"undo"),h.Tb(),h.Bc(19," UNDO "),h.Tb(),h.Ub(20,"button",11),h.bc("click",function(){return h.sc(e),h.fc().actionService.redo()}),h.Ub(21,"mat-icon",12),h.Bc(22,"redo"),h.Tb(),h.Bc(23," REDO "),h.Tb(),h.Ub(24,"button",11),h.bc("click",function(){return h.sc(e),h.fc().actionService.playNext()}),h.Ub(25,"mat-icon",12),h.Bc(26,"emoji_objects"),h.Tb(),h.Ub(27,"span"),h.Bc(28,"AUTO"),h.Tb(),h.Tb(),h.Ub(29,"button",11),h.bc("click",function(){return h.sc(e),h.fc().actionService.assist()}),h.Ub(30,"mat-icon",12),h.Bc(31,"assistant"),h.Tb(),h.Ub(32,"span"),h.Bc(33,"ASSIST"),h.Tb(),h.zc(34,Qe,1,0,"mat-progress-bar",13),h.Tb(),h.Tb(),h.Ub(35,"div",14),h.Pb(36,"app-freecell-history"),h.Tb(),h.Pb(37,"span",7),h.Pb(38,"mat-divider"),h.Ub(39,"mat-action-list"),h.Ub(40,"button",15),h.bc("click",function(){h.sc(e);const t=h.fc();return t.settings.set({enableDarkMode:!t.settings.state.enableDarkMode})}),h.Ub(41,"mat-icon"),h.Bc(42),h.Tb(),h.Ub(43,"span"),h.Bc(44,"THEME"),h.Tb(),h.Tb(),h.Ub(45,"button",15),h.bc("click",function(){return h.sc(e),h.fc().settingsChange.emit()}),h.Ub(46,"mat-icon"),h.Bc(47,"settings"),h.Tb(),h.Ub(48,"span"),h.Bc(49,"SETTINGS"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(50,"mat-sidenav-content"),h.jc(51),h.zc(52,Ve,3,2,"button",16),h.Tb(),h.Tb(),h.Tb()}if(2&e){const e=t.ngIf,n=h.fc();h.Cb(2),h.lc("mode",!n.settings.state.sidenavModeSide||e.breakpoints[n.BP_XS]?"over":"side")("opened",!n.settings.state.sidenavClosed),h.Cb(9),h.lc("ngIf",!e.breakpoints[n.BP_XS]),h.Cb(2),h.lc("listItem",!0),h.Cb(3),h.lc("disabled",!n.actionService.state.canUndo),h.Cb(1),h.lc("ngClass",n.actionService.state.canUndo?"mat-primary":"disabled-color"),h.Cb(3),h.lc("disabled",!n.actionService.state.canRedo),h.Cb(1),h.lc("ngClass",n.actionService.state.canRedo?"mat-primary":"disabled-color"),h.Cb(3),h.lc("disabled",!n.actionService.state.nextMove),h.Cb(1),h.lc("ngClass",n.actionService.state.nextMove?"mat-accent":"disabled-color"),h.Cb(4),h.lc("disabled",!n.actionService.state.canAssist),h.Cb(1),h.lc("ngClass",n.actionService.state.canAssist?"mat-warn":"disabled-color"),h.Cb(4),h.lc("ngIf",n.actionService.state.assistRequest),h.Cb(8),h.Cc(n.settings.state.enableDarkMode?"brightness_3":"brightness_7"),h.Cb(10),h.lc("ngIf",n.settings.state.sidenavClosed)}}const Ze=["*"],Je=j.b.XSmall,et=j.b.Small,tt=j.b.Medium,nt=j.b.Large,st=j.b.XLarge;let it=(()=>{class e{constructor(e,t,n){this.actionService=e,this.settings=t,this.settingsChange=new h.n,this.BP_XS=Je,this.BP_SM=et,this.BP_MD=tt,this.BP_LG=nt,this.BP_XL=st,this.sidenavOpened=!1,this.breakpoints$=n.observe([Je,et,tt,nt,st])}isXSmall(e){return e.breakpoints[j.b.XSmall]}getSideNavMode(e){return e.breakpoints[Je]?"over":"side"}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(o.a),h.Ob(p.a),h.Ob(j.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-sidenav"]],outputs:{settingsChange:"settingsChange"},ngContentSelectors:Ze,decls:4,vars:3,consts:[["loading",""],["class","freecell-container",4,"ngIf"],[1,"freecell-container"],[1,"freecell-sidenav-container"],[3,"mode","opened","closedStart","openedChange"],["color","primary",1,"freecell-toolbar"],["mat-icon-button","",3,"click"],[1,"flex-space-filler-1"],["color","primary",3,"checked","change",4,"ngIf"],[3,"listItem"],["mat-subheader",""],["mat-list-item","",3,"disabled","click"],[3,"ngClass"],["mode","indeterminate","color","warn",4,"ngIf"],[2,"padding","1em"],["mat-list-item","",3,"click"],["class","sidenav-open-button","mat-icon-button","","color","primary",3,"sidenav-open-button-active","click",4,"ngIf"],["color","primary",3,"checked","change"],["mode","indeterminate","color","warn"],["mat-icon-button","","color","primary",1,"sidenav-open-button",3,"click"]],template:function(e,t){1&e&&(h.kc(),h.zc(0,Ke,1,0,"ng-template",null,0,h.Ac),h.zc(2,$e,53,15,"div",1),h.gc(3,"async")),2&e&&(h.Cb(2),h.lc("ngIf",h.hc(3,1,t.breakpoints$)))},directives:[s.l,Ye.b,Ye.a,ee.a,L.a,U.a,se.a,ie,se.d,se.b,s.j,ve,x.a,Ye.c,M.a,ae.a],pipes:[s.b],styles:["button.sidenav-open-button[_ngcontent-%COMP%]{position:absolute;left:-64px;top:1px;transition:left 2s 1s}button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-12px}@media (min-width:600px) and (max-width:959.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-9px}}@media (min-width:960px) and (max-width:1279.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-6px}}@media (min-width:1280px) and (max-width:1919.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-3px}}@media (min-width:1920px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:0}}.freecell-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}.freecell-sidenav-container[_ngcontent-%COMP%]{flex:1}"]}),e})();function at(e,t){1&e&&h.jc(0)}function ct(e,t){if(1&e){const e=h.Vb();h.Ub(0,"app-freecell-sandwich",4),h.bc("settingsChange",function(){return h.sc(e),h.fc().openSettingsDialog()}),h.Qb(1,3),h.Tb()}if(2&e){h.fc();const e=h.qc(1);h.Cb(1),h.lc("ngTemplateOutlet",e)}}function rt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"app-freecell-sidenav",4),h.bc("settingsChange",function(){return h.sc(e),h.fc().openSettingsDialog()}),h.Qb(1,3),h.Tb()}if(2&e){h.fc();const e=h.qc(1);h.Cb(1),h.lc("ngTemplateOutlet",e)}}const ot=["*"];let lt=(()=>{class e{constructor(e,t){this.settings=e,this.dialog=t}ngOnInit(){}openSettingsDialog(){this.dialog.open(N,{maxHeight:"100vh"})}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(p.a),h.Ob(w.b))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-view"]],ngContentSelectors:ot,decls:7,vars:1,consts:[["portal",""],["sandwich",""],["sidenav",""],[3,"ngTemplateOutlet"],[3,"settingsChange"]],template:function(e,t){if(1&e&&(h.kc(),h.zc(0,at,1,0,"ng-template",null,0,h.Ac),h.zc(2,ct,2,1,"ng-template",null,1,h.Ac),h.zc(4,rt,2,1,"ng-template",null,2,h.Ac),h.Qb(6,3)),2&e){const e=h.qc(3),n=h.qc(5);h.Cb(6),h.lc("ngTemplateOutlet","sidenav"===t.settings.state.view?n:e)}},directives:[s.q,We,it],styles:[""]}),e})();function dt(e,t,n){return e+(t-e)*n}class ut{constructor(e,t=1,n=1,s=2,i=2){this.basis=e,this.itemWidth=s,this.itemHeight=i,this.deltaWidth=t,this.deltaHeight=n/2,this.cellStartX=t,this.cellStartY=this.deltaHeight,this.cellEndX=this.cellStartX+e.CELL_NUM*(s+t)-t,this.cellEndY=this.cellStartY+i,this.baseStartX=this.cellEndX+t,this.baseStartY=this.cellStartY,this.baseEndX=this.baseStartX+e.BASE_NUM*(s+t)-t,this.baseEndY=this.cellEndY,this.pileStartX=t,this.pileStartY=this.cellEndY+this.deltaHeight,this.pileEndX=this.pileStartX+e.PILE_NUM*(s+t)-t,this.pileEndY=this.pileStartY+4.5*i}get width(){return this.deltaWidth+Math.max(this.baseEndX,this.cellEndX,this.pileEndX)}get height(){return this.deltaHeight+Math.max(this.baseEndY,this.cellEndY,this.pileEndY)}getCellX(e){return dt(this.cellStartX,this.cellEndX-this.itemWidth,e/(this.basis.CELL_NUM-1))}getCellY(e){return this.cellStartY}getBaseX(e){return dt(this.baseStartX,this.baseEndX-this.itemWidth,e/(this.basis.BASE_NUM-1))}getBaseY(e){return this.baseStartY}getPileX(e){return dt(this.pileStartX,this.pileEndX-this.itemWidth,e/(this.basis.PILE_NUM-1))}getPileY(e){return this.pileStartY}getSpotPosition(e){const t=this.basis;return t.isBase(e)?{x:this.getBaseX(e-=t.BASE_START),y:this.getBaseY(e)}:t.isCell(e)?{x:this.getCellX(e-=t.CELL_START),y:this.getCellY(e)}:t.isPile(e)?{x:this.getPileX(e-=t.PILE_START),y:this.getPileY(e)}:{x:0,y:0}}getCardPosition(e,t,n){const s=this.basis,i=this.getSpotPosition(e);if(s.isPile(e)&&n>0){const e=Math.min((this.pileEndY-this.pileStartY-this.itemHeight)/(n-1),.4*this.itemHeight);i.y+=e*t}return i}}function ht(e,t){if(1&e&&(h.Ub(0,"div"),h.Ub(1,"p"),h.Bc(2),h.Tb(),h.Ub(3,"p"),h.Bc(4),h.Tb(),h.Ub(5,"p"),h.Bc(6),h.Tb(),h.Tb()),2&e){const e=h.fc();h.Cb(2),h.Dc("DEAL: ",e.deal,""),h.Cb(2),h.Dc("MARK: ",e.mark,""),h.Cb(2),h.Dc("PATH: ",e.path,"")}}let bt=(()=>{class e extends v{constructor(e,t,n){super(),this._router=e,this._route=t,this._gameService=n,this.debug=!1,this._lock=!1}ngOnInit(){this._lock=!0,this._addSubscription(this._gameService.subscribe(e=>{this._lock||this.deal===e.deal&&this.path===e.path&&this.mark===e.mark||(this.deal=e.deal,this.path=e.path,this.mark=e.mark,this.updateAddressBar(e.deal,e.path,e.mark))})),this._addSubscription(this._route.queryParams.subscribe(e=>this._update(e)))}updateAddressBar(e,t,n){return t?"number"==typeof n&&n+n===t.length&&(n=void 0):(t=void 0,n=void 0),this._router.navigate(["."],{relativeTo:this._route,queryParams:{deal:e,path:t,mark:n}})}_update(e){const t=e.path||"";let n=parseInt(e.deal,10);(isNaN(n)||n<0)&&(n=-1);let s=parseInt(e.mark,10);(isNaN(s)||s<0||s+s>t.length)&&(s=Math.floor(t.length/2)),n!==this.deal||t!==this.path||s!==this.mark?(this.deal=n,this.path=t,this.mark=s,this._lock=!0,Promise.resolve().then(()=>{const e=this._gameService.state;e.deal===n&&e.path===t&&e.mark===s||this._gameService.set(n,t,s)}).finally(()=>this._lock=!1)):this._lock=!1}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(a.b),h.Ob(a.a),h.Ob(g.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-router"]],inputs:{debug:"debug"},features:[h.zb],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&h.zc(0,ht,7,3,"div",0),2&e&&h.lc("ngIf",t.debug)},directives:[s.l],styles:[""]}),e})();var ft=n("zh6y"),gt=n("dqHA");const pt=["spot"];function mt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"div",3,4),h.bc("click",function(){h.sc(e);const n=t.index,s=h.fc();return s.selectionChange.emit(s.selection===n?-1:n)}),h.Tb()}if(2&e){const e=t.$implicit,n=t.index,s=h.fc();h.Gb("freecell_selection",s.selection===n),h.lc("ngClass",e.ngClass)("ngStyle",e.ngStyle)("matRippleDisabled",!s.settings.state.enableRipples)}}function _t(e,t){1&e&&(h.Sb(0),h.Pb(1,"object",5),h.Rb())}const vt=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],kt=["[appFreecellBackground]","[appFreecellForeground]"];let Ct=(()=>{class e{constructor(e,t){this.settings=e,this.action=t,this.selection=-1,this.selectionChange=new h.n,this.touchChange=new h.n,this.spots=[]}set layout(e){this.spots=function(e){const t=[];if(e){const n=e.basis,s=e.itemWidth,i=e.itemHeight,a=Object(_.m)(s,e.width),c=Object(_.m)(i,e.height);for(let r=0;r<n.DESK_SIZE;r++){const o=e.getSpotPosition(r),l={ngStyle:{transform:`translate(${Object(_.m)(o.x,s)}, ${Object(_.m)(o.y,i)})`,width:a,height:c},ngClass:{}};n.isBase(r)?(l.ngClass.freecell_base=!0,l.ngClass["freecell_"+Object(ue.i)(r-n.BASE_START)]=!0):n.isCell(r)?l.ngClass.freecell_cell=!0:n.isPile(r)&&(l.ngClass.freecell_pile=!0),t.push(l)}}return t}(e)}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(p.a),h.Ob(o.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-playground"]],viewQuery:function(e,t){if(1&e&&h.Gc(pt,1),2&e){let e;h.pc(e=h.cc())&&(t.spotList=e)}},inputs:{layout:"layout",selection:"selection"},outputs:{selectionChange:"selectionChange",touchChange:"touchChange"},ngContentSelectors:kt,decls:5,vars:6,consts:[[1,"freecell_deck",3,"touchstart","touchend","touchcancel","touchmove"],["class","freecell_spot","matRipple","",3,"freecell_selection","ngClass","ngStyle","matRippleDisabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],["matRipple","",1,"freecell_spot",3,"ngClass","ngStyle","matRippleDisabled","click"],["spot",""],["type","image/svg+xml","data",h.Fc`./assets/freecell/fireworks.svg`,1,"freecell-fireworks"]],template:function(e,t){1&e&&(h.kc(vt),h.Ub(0,"div",0),h.bc("touchstart",function(e){return t.touchChange.emit({type:"DragStart",event:e})})("touchend",function(e){return t.touchChange.emit({type:"DragStop",event:e})})("touchcancel",function(e){return t.touchChange.emit({type:"DragStop",event:e})})("touchmove",function(e){return t.touchChange.emit({type:"DragMove",event:e})}),h.jc(1),h.zc(2,mt,2,5,"div",1),h.jc(3,1),h.zc(4,_t,2,0,"ng-container",2),h.Tb()),2&e&&(h.Gb("use-svg-background",t.settings.state.deckUseSvg)("freecell_deck_solved",t.action.state.solved&&t.settings.state.enableWinAnimation),h.Cb(2),h.lc("ngForOf",t.spots),h.Cb(2),h.lc("ngIf",t.action.state.solved&&t.settings.state.enableWinAnimation))},directives:[s.k,s.l,ge.l,s.j,s.m],styles:[".freecell_deck{width:100%;height:100%;position:relative;background:#cfe url(bg-desk.09c80cb5354cc50b5181.jpg) repeat}.freecell_card,.freecell_spot{cursor:pointer;position:absolute;background-image:url(cards_3.f425b6710669dbc8105a.png);background-size:900% 900%;background-repeat:no-repeat;background-color:transparent}@media (min-width:600px) and (max-width:1279.99px){.freecell_card,.freecell_spot{background-image:url(cards_2.70d80d7fff9de7d2572a.png)}}@media (max-width:599.99px){.freecell_card,.freecell_spot{background-image:url(cards_1.6288bccad84dee6dc98e.png)}}div.use-svg-background .freecell_card,div.use-svg-background .freecell_spot{background-image:url(cards.ebd91e0b7d767203a0cd.svg)}.freecell_spot.freecell_selection{outline-style:dotted;outline-color:#eed;outline-width:medium}.freecell_spot.freecell_selection.freecell_base{outline-color:#bb11a1}.freecell_spot.freecell_selection.freecell_cell{outline-color:#3e8181}.freecell_spot.freecell_pile{background-position:14.84375% 99.21875%}.freecell_spot.freecell_base.freecell_spades{background-position:57.03125% 85.15625%}.freecell_spot.freecell_base.freecell_diamonds{background-position:71.09375% 85.15625%}.freecell_spot.freecell_base.freecell_clubs{background-position:85.15625% 85.15625%}.freecell_spot.freecell_base.freecell_hearts{background-position:99.21875% 85.15625%}.freecell_spot.freecell_cell{background-position:.78125% 99.21875%}.freecell_card.freecell_Ace.freecell_spades{background-position:.78125% .78125%}.freecell_card.freecell_Ace.freecell_diamonds{background-position:14.84375% .78125%}.freecell_card.freecell_Ace.freecell_clubs{background-position:28.90625% .78125%}.freecell_card.freecell_Ace.freecell_hearts{background-position:42.96875% .78125%}.freecell_card.freecell_Two.freecell_spades{background-position:57.03125% .78125%}.freecell_card.freecell_Two.freecell_diamonds{background-position:71.09375% .78125%}.freecell_card.freecell_Two.freecell_clubs{background-position:85.15625% .78125%}.freecell_card.freecell_Two.freecell_hearts{background-position:99.21875% .78125%}.freecell_card.freecell_Three.freecell_spades{background-position:.78125% 14.84375%}.freecell_card.freecell_Three.freecell_diamonds{background-position:14.84375% 14.84375%}.freecell_card.freecell_Three.freecell_clubs{background-position:28.90625% 14.84375%}.freecell_card.freecell_Three.freecell_hearts{background-position:42.96875% 14.84375%}.freecell_card.freecell_Four.freecell_spades{background-position:57.03125% 14.84375%}.freecell_card.freecell_Four.freecell_diamonds{background-position:71.09375% 14.84375%}.freecell_card.freecell_Four.freecell_clubs{background-position:85.15625% 14.84375%}.freecell_card.freecell_Four.freecell_hearts{background-position:99.21875% 14.84375%}.freecell_card.freecell_Five.freecell_spades{background-position:.78125% 28.90625%}.freecell_card.freecell_Five.freecell_diamonds{background-position:14.84375% 28.90625%}.freecell_card.freecell_Five.freecell_clubs{background-position:28.90625% 28.90625%}.freecell_card.freecell_Five.freecell_hearts{background-position:42.96875% 28.90625%}.freecell_card.freecell_Six.freecell_spades{background-position:57.03125% 28.90625%}.freecell_card.freecell_Six.freecell_diamonds{background-position:71.09375% 28.90625%}.freecell_card.freecell_Six.freecell_clubs{background-position:85.15625% 28.90625%}.freecell_card.freecell_Six.freecell_hearts{background-position:99.21875% 28.90625%}.freecell_card.freecell_Seven.freecell_spades{background-position:.78125% 42.96875%}.freecell_card.freecell_Seven.freecell_diamonds{background-position:14.84375% 42.96875%}.freecell_card.freecell_Seven.freecell_clubs{background-position:28.90625% 42.96875%}.freecell_card.freecell_Seven.freecell_hearts{background-position:42.96875% 42.96875%}.freecell_card.freecell_Eight.freecell_spades{background-position:57.03125% 42.96875%}.freecell_card.freecell_Eight.freecell_diamonds{background-position:71.09375% 42.96875%}.freecell_card.freecell_Eight.freecell_clubs{background-position:85.15625% 42.96875%}.freecell_card.freecell_Eight.freecell_hearts{background-position:99.21875% 42.96875%}.freecell_card.freecell_Nine.freecell_spades{background-position:.78125% 57.03125%}.freecell_card.freecell_Nine.freecell_diamonds{background-position:14.84375% 57.03125%}.freecell_card.freecell_Nine.freecell_clubs{background-position:28.90625% 57.03125%}.freecell_card.freecell_Nine.freecell_hearts{background-position:42.96875% 57.03125%}.freecell_card.freecell_Ten.freecell_spades{background-position:57.03125% 57.03125%}.freecell_card.freecell_Ten.freecell_diamonds{background-position:71.09375% 57.03125%}.freecell_card.freecell_Ten.freecell_clubs{background-position:85.15625% 57.03125%}.freecell_card.freecell_Ten.freecell_hearts{background-position:99.21875% 57.03125%}.freecell_card.freecell_Jack.freecell_spades{background-position:.78125% 71.09375%}.freecell_card.freecell_Jack.freecell_diamonds{background-position:14.84375% 71.09375%}.freecell_card.freecell_Jack.freecell_clubs{background-position:28.90625% 71.09375%}.freecell_card.freecell_Jack.freecell_hearts{background-position:42.96875% 71.09375%}.freecell_card.freecell_Queen.freecell_spades{background-position:57.03125% 71.09375%}.freecell_card.freecell_Queen.freecell_diamonds{background-position:71.09375% 71.09375%}.freecell_card.freecell_Queen.freecell_clubs{background-position:85.15625% 71.09375%}.freecell_card.freecell_Queen.freecell_hearts{background-position:99.21875% 71.09375%}.freecell_card.freecell_King.freecell_spades{background-position:.78125% 85.15625%}.freecell_card.freecell_King.freecell_diamonds{background-position:14.84375% 85.15625%}.freecell_card.freecell_King.freecell_clubs{background-position:28.90625% 85.15625%}.freecell_card.freecell_King.freecell_hearts{background-position:42.96875% 85.15625%}@-webkit-keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@-webkit-keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}@keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}.freecell_deck_solved .freecell_card{-webkit-animation-name:animation-card;animation-name:animation-card;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}.freecell_deck_solved .freecell_card.freecell_Ace{-webkit-animation-delay:1.7s;animation-delay:1.7s;-webkit-animation-duration:1.6s;animation-duration:1.6s}.freecell_deck_solved .freecell_card.freecell_Two{-webkit-animation-delay:1.6s;animation-delay:1.6s;-webkit-animation-duration:1.8s;animation-duration:1.8s}.freecell_deck_solved .freecell_card.freecell_Three{-webkit-animation-delay:1.5s;animation-delay:1.5s;-webkit-animation-duration:2s;animation-duration:2s}.freecell_deck_solved .freecell_card.freecell_Four{-webkit-animation-delay:1.4s;animation-delay:1.4s;-webkit-animation-duration:2.2s;animation-duration:2.2s}.freecell_deck_solved .freecell_card.freecell_Five{-webkit-animation-delay:1.3s;animation-delay:1.3s;-webkit-animation-duration:2.4s;animation-duration:2.4s}.freecell_deck_solved .freecell_card.freecell_Six{-webkit-animation-delay:1.2s;animation-delay:1.2s;-webkit-animation-duration:2.6s;animation-duration:2.6s}.freecell_deck_solved .freecell_card.freecell_Seven{-webkit-animation-delay:1.1s;animation-delay:1.1s;-webkit-animation-duration:2.8s;animation-duration:2.8s}.freecell_deck_solved .freecell_card.freecell_Eight{-webkit-animation-delay:1s;animation-delay:1s;-webkit-animation-duration:3s;animation-duration:3s}.freecell_deck_solved .freecell_card.freecell_Nine{-webkit-animation-delay:.9s;animation-delay:.9s;-webkit-animation-duration:3.2s;animation-duration:3.2s}.freecell_deck_solved .freecell_card.freecell_Ten{-webkit-animation-delay:.8s;animation-delay:.8s;-webkit-animation-duration:3.4s;animation-duration:3.4s}.freecell_deck_solved .freecell_card.freecell_Jack{-webkit-animation-delay:.7s;animation-delay:.7s;-webkit-animation-duration:3.6s;animation-duration:3.6s}.freecell_deck_solved .freecell_card.freecell_Queen{-webkit-animation-delay:.6s;animation-delay:.6s;-webkit-animation-duration:3.8s;animation-duration:3.8s}.freecell_deck_solved .freecell_card.freecell_King{-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s}.freecell_deck_solved .freecell_spot{-webkit-animation-name:animation-spot;animation-name:animation-spot;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s}.freecell-fireworks{width:100%;height:100%;background-color:transparent}.app-dark-theme .freecell_deck{background:teal url(bg-desk-dark.be1fcb326a55804c8741.jpg) repeat}.app-dark-theme .freecell_spot.freecell_selection.freecell_cell{outline-color:#aaecec}"],encapsulation:2}),e})();var St=n("g/AF");let Tt=(()=>{class e{constructor(){this.userGesture=new h.n}handle(e){this.userGesture.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=h.Jb({type:e,selectors:[["","appGesture",""]],hostBindings:function(e,t){1&e&&h.bc("keydown",function(e){return t.handle(e)},!1,h.rc)("touchstart",function(e){return t.handle(e)},!1,h.rc)("mousedown",function(e){return t.handle(e)},!1,h.rc)("click",function(e){return t.handle(e)},!1,h.rc)},outputs:{userGesture:"userGesture"}}),e})();const yt=["cards"];function wt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"div",5),h.bc("userGesture",function(t){return h.sc(e),h.fc().activateOnGesture(t)}),h.Tb()}}function Ot(e,t){if(1&e){const e=h.Vb();h.Ub(0,"div",6,7),h.bc("mousedown",function(n){h.sc(e);const s=t.index;return h.fc().onMouseDown(n,s)}),h.Tb()}if(2&e){const e=t.$implicit,n=h.fc();h.lc("matRippleDisabled",!n.settings.state.enableRipples)("ngClass",e.ngClass)("ngStyle",e.ngStyle)}}const Mt=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],Lt=["[appFreecellBackground]","[appFreecellForeground]"],Ut=["transition_deal","transition_norm","transition_fast"];function Et(e,t){for(const n of Ut)e[n]=n===t}function Pt(e,t,n="px"){return`translate(${e}${n}, ${t}${n})`}let xt=(()=>{class e extends v{constructor(e,t,n,s,i){super(),this.settings=e,this.soundService=t,this._renderer=n,this._playService=s,this._gameService=i,this.lineChange=new h.n,this.cards=[],this.spotSelection=-1,this._dragListener=new gt.a,this._emptySpotCount=0}get layout(){return this._layout}set layout(e){this._layout!==e&&(this._layout=e,this.layout&&(this.cards=this.createCards(),this.onDeal()))}get isTouchDisabled(){return!(this.settings.state.inputMode&p.b.Touch)}get isMouseDisabled(){return!(this.settings.state.inputMode&p.b.Mouse)}ngOnInit(){this._addSubscription(this._gameService.subscribe(e=>{var t;this.layout&&(this._gameService.isFirstChange||e.deal!==(null===(t=this._gameService.previousState)||void 0===t?void 0:t.deal)?this.onDeal():this.onCardMove())})),this._addSubscription(this._dragListener.dragChange.subscribe(e=>{switch(e){case"DragStart":this._onDragStart();break;case"DragMove":this._onDragMove();break;case"DragStop":this._onDragStop()}}))}trackByIndex(e){return e}getTransforms(e){const t=100,n=[],s=this.cardList.toArray(),i=s[e[0]].nativeElement.parentElement.getBoundingClientRect(),a=s[e[0]].nativeElement.getBoundingClientRect(),c=a.left-i.left,r=a.top-i.top,o=a.height/3;for(let l=e.length;l-- >0;){const e=Math.round((c+0*l)*t)/t,s=Math.round((r+o*l)*t)/t;n[l]={x:e,y:s}}return n}onTouch({type:e,event:t}){if(!this.isTouchDisabled)switch(e){case"DragStart":if(t.targetTouches.length>0){const e=t.targetTouches[0],n=this.getCardIndex(e.clientX,e.clientY);if(n>=0){const e=this._gameService.game,s=e.asTablaeu(n),i=this.getTransforms(s);this._dragListener.touchStart(t,{game:e,tableau:s,transforms:i})}}break;case"DragMove":this._dragListener.isTouchDragging&&this._dragListener.touchMove(t);break;case"DragStop":this._dragListener.isTouchDragging&&this._dragListener.stop(t)}}onMouseDown(e,t){if(this.isMouseDisabled)return;if(this._playService.stop(),0!==e.button)return;const n=this._gameService.game,s=n.asTablaeu(t),i=this.getTransforms(s);this._dragListener.mouseStart(e,this._renderer,{game:n,tableau:s,transforms:i})}onDeal(){this.spotSelection=-1;const e=this._gameService.game;this._emptySpotCount=Math.max(e.CELL_NUM,e.countEmpty());for(let t=e.DESK_SIZE;t-- >0;){for(const n of e.getLine(t))this.bringToFront(n);this.updateLine(e,t,"transition_deal")}this.updateZIndex(),this.soundService.play("deal")}updateZIndex(){if(this.cards.length>1){let e=1;for(let t=this.cards[0].list.head;t;t=t.next)this.cards[t.card].ngStyle.zIndex=e++}}bringToFront(e){const t=this.cards[e],n=t.list;n&&n.tail&&n.tail!==t&&Object(ft.a)(n.tail,t)}onCardMove(){this.spotSelection=-1;const e=this._gameService.state,t=this._gameService.previousState||e,n=t.path.substring(0,2*t.mark),s=e.path.substring(0,2*e.mark),i=new Set,a=Object(St.a)(n,s),c=[];t.mark>a&&(Object(he.c)(t,(e,t,n,s)=>{s>=a&&(i.add(t),i.add(n),c.push(e.getCard(n,-1)))}),c.reverse()),e.mark>a&&Object(he.c)(e,(e,t,n,s)=>{s>=a&&(i.add(t),i.add(n),c.push(e.getCard(n,-1)))});for(const d of c)this.bringToFront(d);this.updateZIndex();const r=i.size>2?"transition_fast":"transition_norm",o=this._gameService.game;for(const d of i.keys())this.updateLine(o,d,r);"transition_fast"===r?this.soundService.play("shuffle"):"transition_norm"===r&&this.soundService.play("card");const l=o.countEmpty();l>this._emptySpotCount&&(this._emptySpotCount=l,this.soundService.play("victory"))}createCards(){const e=[],t=this.layout;if(t){const n=Object(_.m)(t.itemWidth,t.width),s=Object(_.m)(t.itemHeight,t.height);for(let t=0;t<ue.a;t++){const i={card:t,ngStyle:{width:n,height:s,zIndex:t},ngClass:{freecell_card:!0,["freecell_"+Object(ue.i)(t)]:!0,["freecell_"+Object(ue.g)(t)]:!0}};e.push(i)}Object(ft.b)(...e)}return e}getCardTransform(e,t,n){const s=this.layout.getCardPosition(t,e.toSpot(n),e.getLine(t).length);return`translate(${Object(_.m)(s.x,this.layout.itemWidth)}, ${Object(_.m)(s.y,this.layout.itemHeight)})`}updateLine(e,t,n="transition_norm"){for(const s of e.getLine(t)){const i=this.cards[s];i.ngStyle.transform=this.getCardTransform(e,t,s),Et(i.ngClass,n)}}getDestination(e,t){var n;let s=0,i=-1;if(t.length>0&&this.cardList){const a=this.cardList.toArray(),c=a[t[0]].nativeElement.getBoundingClientRect();for(let n=a.length;n-- >0;)if(t.indexOf(n)<0){const t=a[n].nativeElement.getBoundingClientRect(),r=Object(_.j)(c,t);r>s&&(s=r,i=e.toLine(n))}if(null===(n=this.playground)||void 0===n?void 0:n.spotList){const e=this.playground.spotList.toArray();for(let t=e.length;t-- >0;){const n=e[t].nativeElement.getBoundingClientRect(),a=Object(_.j)(c,n);a>s&&(s=a,i=t)}}}return i}getCardIndex(e,t){let n=-1;if(this.cardList){const s=this.cardList.toArray();for(let i=s.length;i-- >0;){const a=s[i].nativeElement.getBoundingClientRect();a.left<=e&&e<=a.right&&a.top<=t&&t<=a.bottom&&(n<0||this.cards[n].ngStyle.zIndex<this.cards[i].ngStyle.zIndex)&&(n=i)}}return n}activateOnGesture(e){e.isTrusted&&this.soundService.activate()}_onDragStart(){this._playService.stop();const{tableau:e,transforms:t}=this._dragListener.data;for(let n=e.length;n-- >0;){const s=this.cards[e[n]];s.ngStyle.zIndex+=ue.a,s.ngStyle.transform=Pt(t[n].x,t[n].y),s.ngClass.grabbing=!0,Et(s.ngClass)}}_onDragMove(){const{tableau:e,transforms:t}=this._dragListener.data,n=this._dragListener.pageDeltaX,s=this._dragListener.pageDeltaY;for(let i=e.length;i-- >0;){const a=this.cards[e[i]];a.ngClass.dragging=!0,a.ngStyle.transform=Pt(t[i].x+n,t[i].y+s)}(Math.abs(n)>4||Math.abs(s)>4)&&(this._dragListener.data.dragged=!0)}_onDragStop(){const{game:e,tableau:t,dragged:n}=this._dragListener.data;for(const s of t){const t=this.cards[s];t.ngStyle.zIndex-=ue.a,t.ngStyle.transform=this.getCardTransform(e,e.toLine(s),s),delete t.ngClass.grabbing,delete t.ngClass.dragging,Et(t.ngClass,"transition_fast")}if(n){const n=this.getDestination(e,t);if(n>=0){const s=e.toLine(t[0]);s!==n&&this.lineChange.emit({source:s,destination:n,tableau:t})}}else{const n=e.toLine(t[0]);this.lineChange.emit({source:n,destination:this.spotSelection>=0?this.spotSelection:void 0,tableau:t})}}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(p.a),h.Ob(S),h.Ob(h.F),h.Ob(l.a),h.Ob(g.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-deck"]],viewQuery:function(e,t){if(1&e&&(h.Gc(Ct,1),h.Gc(yt,1)),2&e){let e;h.pc(e=h.cc())&&(t.playground=e.first),h.pc(e=h.cc())&&(t.cardList=e)}},inputs:{layout:"layout"},outputs:{lineChange:"lineChange"},features:[h.zb],ngContentSelectors:Lt,decls:7,vars:5,consts:[["appGesture","",3,"userGesture",4,"ngIf"],[3,"layout","selection","selectionChange","touchChange"],["appFreecellBackground",""],["appFreecellForeground",""],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],["appGesture","",3,"userGesture"],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown"],["cards",""]],template:function(e,t){1&e&&(h.kc(Mt),h.zc(0,wt,1,0,"div",0),h.Ub(1,"app-freecell-playground",1),h.bc("selectionChange",function(e){return t.spotSelection=e})("touchChange",function(e){return t.onTouch(e)}),h.Sb(2,2),h.jc(3),h.Rb(),h.Sb(4,3),h.zc(5,Ot,2,3,"div",4),h.jc(6,1),h.Rb(),h.Tb()),2&e&&(h.lc("ngIf",t.soundService.enabled&&!t.soundService.activated),h.Cb(1),h.lc("layout",t.layout)("selection",t.spotSelection),h.Cb(4),h.lc("ngForOf",t.cards)("ngForTrackBy",t.trackByIndex))},directives:[s.l,Ct,s.k,Tt,ge.l,s.j,s.m],styles:[".freecell_card.transition_deal[_ngcontent-%COMP%]{transition:transform 1.5s cubic-bezier(.6,-.5,.25,1.5)}.freecell_card.transition_norm[_ngcontent-%COMP%]{transition:transform .5s ease-out}.freecell_card.transition_fast[_ngcontent-%COMP%]{transition:transform .25s linear}.freecell_card.grabbing[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing;transition:transform .15s ease-in-out}.freecell_card.grabbing.dragging[_ngcontent-%COMP%]{transition:none;opacity:.75}"]}),e})();function Bt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"app-freecell-deck",4),h.bc("lineChange",function(t){return h.sc(e),h.fc().onLineChange(t)}),h.Sb(1,5),h.jc(2),h.Rb(),h.Tb()}if(2&e){const e=h.fc();h.lc("layout",e.layout)}}const At=["*"];let It=(()=>{class e extends v{constructor(e,t,n,s){super(),this.settings=e,this._gameService=t,this._playService=n,this._addSubscription(s.subscribe(e=>this.layout=new ut(s.basis)))}ngOnInit(){}ngOnDestroy(){super.ngOnDestroy()}onLineChange(e){this._playService.stop();const t=this._gameService.game;let n="";n=void 0===e.destination?t.solveFor(e.tableau,e.source):t.getBestPath(e.tableau,e.destination),n&&(this._gameService.move(n.charCodeAt(0),n.charCodeAt(1)),n=n.substring(2),n&&this._playService.play(()=>(this._gameService.move(n.charCodeAt(0),n.charCodeAt(1)),n=n.substring(2),n.length>0)))}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(p.a),h.Ob(g.a),h.Ob(l.a),h.Ob(d.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-main"]],features:[h.zb],ngContentSelectors:At,decls:5,vars:3,consts:[[1,"freecell-content"],[1,"freecell-content-outer"],[1,"freecell-content-inner"],[3,"layout","lineChange",4,"ngIf"],[3,"layout","lineChange"],["appFreecellBackground",""]],template:function(e,t){1&e&&(h.kc(),h.Pb(0,"app-freecell-router"),h.Ub(1,"div",0),h.Ub(2,"div",1),h.Ub(3,"div",2),h.zc(4,Bt,3,1,"app-freecell-deck",3),h.Tb(),h.Tb(),h.Tb()),2&e&&(h.Cb(1),h.wc("padding-top",100*t.settings.state.aspectRatio,"%"),h.Cb(3),h.lc("ngIf",t.layout))},directives:[bt,s.l,xt],styles:[".freecell-content[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;padding:1px}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]   .freecell-content-inner[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();const Dt=[{path:"",component:(()=>{class e extends v{constructor(e,t,n,s){super(),this.settings=e,this.info=`${T.a} ver.${T.b}`,e.subscribe(t=>{var n;const i=null===(n=e.previousState)||void 0===n?void 0:n.enableDarkMode,a=t.enableDarkMode;i!==a&&(a?s.getContainerElement().classList.add("app-dark-theme"):s.getContainerElement().classList.remove("app-dark-theme"))});const i=n.snapshot.queryParams;(void 0===i.deal||isNaN(parseInt(i.deal,10)))&&t.navigate(["."],{relativeTo:n,queryParams:{deal:Date.now()%2147483648}})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(p.a),h.Ob(a.b),h.Ob(a.a),h.Ob(y.e))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-freecell-demo"]],features:[h.zb],decls:4,vars:3,consts:[[1,"version-info"]],template:function(e,t){1&e&&(h.Ub(0,"app-freecell-view"),h.Ub(1,"app-freecell-main"),h.Ub(2,"div",0),h.Bc(3),h.Tb(),h.Tb(),h.Tb()),2&e&&(h.Gb("app-dark-theme",t.settings.state.enableDarkMode),h.Cb(3),h.Cc(t.info))},directives:[lt,It],styles:[".version-info[_ngcontent-%COMP%]{font-size:small;position:absolute;bottom:0;right:0}"]}),e})()}];let Rt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({providers:[o.a,l.a,d.a,f,S,g.a,p.a],imports:[[a.c.forChild(Dt),s.c,i.d,c.a,r.a],a.c]}),e})()},RDYl:function(e){e.exports=JSON.parse('{"a":"freecell-demo","b":"0.2.3"}')},WxrP:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return b});var s=n("g/AF"),i=n("Bd3B"),a=n("lPNG"),c=n("2MXh");class r extends c.a{constructor(e,t,n){super(e,t,n),this.desk=[];for(let s=0;s<this.DESK_SIZE;s++)this.desk.push([])}toArray(){return Object(i.a)(this.desk)}clear(){for(let e=this.desk.length;e-- >0;)this.desk[e].length=0}addCard(e,t){this.desk[e].push(t)}getCard(e,t){const n=this.desk[e];return t<0&&(t=n.length+t),t>=0&&t<n.length?n[t]:-1}getLine(e){return this.desk[e]}getTableauAt(e){const t=[],n=this.desk[e];let s=n.length;if(s>0)for(t.push(n[s-1]);--s>0&&Object(a.e)(n[s-1],n[s])&&Object(a.h)(n[s-1])>0;)t.push(n[s-1]);return t.reverse(),t}countEmptyCells(){let e=0;for(let t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}countEmptyPiles(){let e=0;for(let t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}isSolved(){for(let e=this.BASE_START;e<this.BASE_END;e++)if(this.desk[e].length<a.b)return!1;return!0}countEmpty(){return this.countEmptyCells()+this.countEmptyPiles()}getEmptyCell(){for(let e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}getEmptyPile(){for(let e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}getBase(e){const t=Object(a.j)(e),n=Object(a.h)(e);for(let s=0;s<this.BASE_NUM;s++)if(Object(a.j)(s)===t&&this.desk[s+this.BASE_START].length===n)return s+this.BASE_START;return-1}deal(e){const t=Object(a.d)(e);this.clear();for(let n=0;n<t.length;n++)this.addCard(this.PILE_START+n%this.PILE_NUM,t[n]);return t}isMoveValid(e,t){if(e===t)return!1;if(e<0||e>=this.DESK_SIZE)return!1;if(t<0||t>=this.DESK_SIZE)return!1;const n=this.desk[e].length;if(n<=0)return!1;const s=this.desk[t].length;if(this.isCell(t))return 0===s;const i=this.desk[e][n-1];if(this.isPile(t))return 0===s||Object(a.e)(this.desk[t][s-1],i);if(this.isBase(t)){const e=Object(a.j)(i),n=Object(a.h)(i);return Object(a.j)(t-this.BASE_START)===e&&s===n}return!1}moveCard(e,t){this.addCard(t,this.desk[e].pop())}getMoves(){const e=[];for(let t=this.DESK_SIZE;t-- >0;)for(let n=t;n-- >0;)this.isMoveValid(t,n)&&e.push({giver:t,taker:n}),this.isMoveValid(n,t)&&e.push({giver:n,taker:t});return e}}class o{constructor(e){this.success=e}}class l extends c.a{constructor(e,t,n,s){super(e,t,n),this.desk=s,this.cardToWatch=-1,this.searchTime=500,this.done=new Set,this.buffers=[[],[]],this.iteration=0,this.path="",this.onMove=(e,t,n)=>{}}get doneSize(){return this.done.size}stop(e){throw new o(e)}getAllPaths(){return this.buffers[this.iteration%2]}getPath(){const e=this.buffers[this.iteration%2];return e[e.length-1]}clear(){this.done.clear(),this.buffers[0].length=0,this.buffers[1].length=0,this.iteration=0,this.path=""}prepare(){this.clear(),this.done.add(this.toKey()),this.buffers[0][0]=""}nextIteration(){const e=this.buffers[this.iteration%2];if(this.iteration++,e.length<=0)return!1;for(const t of e)this.skipForward(t),this.findMoves(),this.skipBackward();return e.length=0,this.buffers[this.iteration%2].length>0}solve(){this.prepare();const e=Date.now();try{for(;this.nextIteration();)Date.now()-e>this.searchTime&&this.stop(!1)}catch(t){if(t instanceof o)return t.success;throw t}return!1}skipForward(e){for(let t=0;t<e.length;t+=2)this.desk[e.charCodeAt(t+1)].push(this.desk[e.charCodeAt(t)].pop());this.path=e}skipBackward(){const e=this.path;for(let t=e.length;t>0;t-=2)this.desk[e.charCodeAt(t-2)].push(this.desk[e.charCodeAt(t-1)].pop())}move(e,t,n){this.desk[n].push(this.desk[t].pop());const s=this.toKey();this.done.has(s)||(this.done.add(s),this.buffers[this.iteration%2].push(this.path+String.fromCharCode(t,n)),!(this.cardToWatch<0||this.cardToWatch===e)||this.cardFilter&&!this.cardFilter[e]||this.destinationFilter&&!this.destinationFilter[n]||this.onMove(e,t,n)),this.desk[t].push(this.desk[n].pop())}findMoves(){const e=this.cardFilter,t=this.getEmptyCell(),n=this.getEmptyPile();for(let s=0;s<this.DESK_SIZE;s++){const i=this.desk[s];if(i.length>0){const c=i[i.length-1];if(!e||e[c]){if(!this.isBase(s)){const e=this.getBase(c);e>=0&&this.move(c,s,e)}for(let e=this.PILE_START;e<this.PILE_END;e++)if(e!==s){const t=this.desk[e];t.length>0&&Object(a.e)(t[t.length-1],c)&&this.move(c,s,e)}t>=0&&(this.isCell(s)||this.move(c,s,t)),n>=0&&(!this.isPile(s)||i.length>1)&&this.move(c,s,n)}}}}baseToString(){let e="";for(let t=this.BASE_START;t<this.BASE_END;t++)e+=String.fromCharCode(this.desk[t].length);return e}pileToString(){const e=[];for(let t=this.PILE_START;t<this.PILE_END;t++)e.push(String.fromCharCode(...this.desk[t]));return e.sort(),e.join(String.fromCharCode(a.a))}toKey(){return this.baseToString()+this.pileToString()}getEmptyCell(){for(let e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}getEmptyPile(){for(let e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}countEmptyCells(){let e=0;for(let t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}countEmptyPiles(){let e=0;for(let t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}countEmpty(){return this.countEmptyCells()+this.countEmptyPiles()}countCardsInBases(){let e=0;for(let t=this.BASE_START;t<this.BASE_END;t++)e+=this.desk[t].length;return e}getBase(e){const t=Object(a.j)(e),n=Object(a.h)(e);for(let s=this.BASE_START+t;s<this.BASE_END;s+=a.c)if(this.desk[s].length===n)return s;return-1}}class d extends r{constructor(e,t,n){super(e,t,n),this.lineMap=[],this.spotMap=[]}toLine(e){return this.lineMap[e]}toSpot(e){return this.spotMap[e]}clear(){super.clear(),this.lineMap.length=0,this.spotMap.length=0}addCard(e,t){super.addCard(e,t),this.lineMap[t]=e,this.spotMap[t]=this.getLine(e).length-1}asTablaeu(e){let t=this.getTableauAt(this.lineMap[e]);const n=t.indexOf(e);return n<0?t=[e]:n>0&&t.splice(0,n),t}getBestPath(e,t){if(e.length<=0)return"";const n=e[e.length-1],s=this.lineMap[n];if(this.getCard(s,-1)!==n)return"";if(1===e.length)return this.isMoveValid(s,t)?String.fromCharCode(s,t):"";const a=new l(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray());if(a.cardToWatch=n,a.cardFilter=e.reduce((e,t)=>(e[t]=!0,e),{}),a.destinationFilter={[t]:!0},this.isPile(t)&&0===this.getLine(t).length)for(let i=this.PILE_START;i<this.PILE_END;i++)0===this.getLine(i).length&&(a.destinationFilter[i]=!0);if(a.onMove=(t,n,s)=>{Object(i.b)(a.desk[s],e)&&a.stop(!0)},a.solve()){let e=a.getPath();const n=e.charCodeAt(e.length-1);return n!==t&&(e=function(e,t,n){const s=[];for(let i=0;i<e.length;i++){let a=e.charCodeAt(i);a===n?a=t:a===t&&(a=n),s.push(a)}return String.fromCharCode(...s)}(e,t,n)),e}return""}solveFor(e,t){if(this.getLine(t).length<=0)return"";if(e.length<=0)return"";const n=e[e.length-1];if(this.getCard(t,-1)!==n)return"";const s=new l(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray());let a="",c=0;return s.cardToWatch=this.getCard(t,-1),s.cardFilter={[s.cardToWatch]:!0},s.onMove=()=>{a||(a=s.getPath(),c=1)},s.findMoves(),a?(this.isBase(a.charCodeAt(1))||e.length>1&&(s.cardFilter=e.reduce((e,t)=>(e[t]=!0,e),{}),s.onMove=(n,r,o)=>{if(o!==t){const n=Object(i.e)(s.desk[o],e);Object(i.e)(s.desk[t],e,0,n)+n===e.length&&c<n&&(a=s.getPath(),c=n,c===e.length&&s.stop(!0))}},s.solve()),a):a}}function u(e,t,n){const i=new d(e.pile,e.cell,e.base);i.deal(e.deal);for(let a=0;a+1<e.path.length;a+=2){const c=Object(s.c)(e.path,a),r=Object(s.c)(e.path,a+1);if(!i.isMoveValid(c,r)){n&&n(i,c,r,a/2);break}i.moveCard(c,r),t&&t(i,c,r,a/2)}return i}function h(e,t,n){return u(Object.assign(Object.assign({},e),{path:e.path.substring(0,2*e.mark)}),t,n)}function b(e){let t="";return u(e,(e,n,i,a)=>{t=Object(s.b)(t,t.length/2,n,i)},(t,n,s,i)=>{console.warn("Invalid subpath:",e.path.substring(i+i))}),t}},afNV:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var s=n("SeXe");let i=class extends s.a{constructor(e=null,t=[]){super(e),this._subscriptions=t}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}_addSubscription(e){this._subscriptions.push(e)}}},dkWW:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var s=n("fKvJ"),i=n("fXoL");let a=(()=>{class e extends s.a{constructor(){super(200)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Kb({token:e,factory:e.\u0275fac}),e})()},"g/AF":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return r});var s=n("voYn"),i=n("dPmG");function a(e,t){return Math.floor(Object(s.a)(e,t).length/2)}function c(e,t){return Object(i.e)(e.charCodeAt(t))}function r(e,t,n,s){return t>0&&s===function(e,t){return c(e,t+t-2)}(e,t)&&n===function(e,t){return c(e,t+t-1)}(e,t)?e.substring(0,t+t-2):e.substring(0,t+t)+function(...e){return Object(i.c)(e)}(n,s)}},jZWl:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return r});var s=n("SeXe"),i=n("2MXh"),a=n("fXoL");const c={base:4,cell:4,pile:8};let r=(()=>{class e extends s.a{constructor(){super(c),this._basis=new i.a(c.pile,c.cell,c.base)}get basis(){return this._basis}set(e){return this._set(e)}_validate(e){return e.base>0&&e.cell>0&&e.pile>0&&(e=super._validate(e))?(this._basis=new i.a(e.pile,e.cell,e.base),e):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac}),e})()},lPNG:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"j",function(){return u}),n.d(t,"f",function(){return h}),n.d(t,"i",function(){return b}),n.d(t,"g",function(){return f}),n.d(t,"d",function(){return g}),n.d(t,"e",function(){return p}),Array.from("SDCH");const s=["\u2660","\u2666","\u2663","\u2665"],i=["spades","diamonds","clubs","hearts"],a=(Array.from("A23456789TJQK"),["A","2","3","4","5","6","7","8","9","10","J","Q","K"]),c=["Ace","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Jack","Queen","King"],r="SDCH".length,o="A23456789TJQK".length,l=r*o;function d(e){return Math.floor(e/r)}function u(e){return e%r}function h(e){return a[d(e)]+s[u(e)]}function b(e){return i[u(e)]}function f(e){return c[d(e)]}function g(e){const t=[];for(let n=0;n<l;n++)t[n]=n;if(e>=0){const n=2147483648,s=1103515245,i=12345;for(let a=0;a<l;a++){const c=(e=(s*e+i)%n)%l;if(a!==c){const e=t[a];t[a]=t[c],t[c]=e}}}return t}function p(e,t){return d(e)===d(t)+1&&u(e)%2!=u(t)%2}},tt9D:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return u});var s=n("SeXe"),i=n("fXoL");const a=["sidenav","sandwich"];var c=function(e){return e[e.Mouse=1]="Mouse",e[e.Touch=2]="Touch",e[e.Keyboard=4]="Keyboard",e[e.All=7]="All",e}({});const r={view:a[0],aspectRatio:.56,sandwichOrder:0,sidenavModeSide:!0,sidenavClosed:!0,deckUseSvg:!1,enableSound:!1,enableRipples:!0,enableWinAnimation:!0,enableDarkMode:!1,assistLevel:1e6,inputMode:c.All},o={aspectRatio:.4,assistLevel:2e4,sandwichOrder:0,inputMode:1},l={aspectRatio:.7,assistLevel:2e6,sandwichOrder:5,inputMode:c.All},d="[FreecellSettingsState]";let u=(()=>{class e extends s.a{constructor(){super(r),this.loadLocal(d,r)}restoreDefaults(){this.set(r)}set(e){const t=this._set(e);return t&&this.saveLocal(d),t}_validate(e){a.indexOf(e.view)<0&&(e.view=r.view);for(const t of Object.keys(o))e[t]=Math.max(o[t],Math.min(l[t],e[t]));return super._validate(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Kb({token:e,factory:e.\u0275fac}),e})()}}]);
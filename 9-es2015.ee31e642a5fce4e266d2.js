(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{mUt8:function(t,e,n){"use strict";n.r(e),n.d(e,"SvgPathEditorModule",function(){return Tn});var i=n("ofXK"),o=n("tyNb"),s=n("3Pt+"),a=n("tk/3"),c=n("pKmL"),r=n("hctd"),l=n("fXoL");const b="[svg-path-editor.background-image]";let h=(()=>{class t{constructor(){this._imageData="",this._imageData=this.loadSavedImage()}get imageData(){return this._imageData}loadImage(t){const e=t.target;if(e&&e.files[0]){const t=e.files[0];if(t.type.startsWith("image")){const e=new FileReader;e.onload=t=>{"string"==typeof e.result&&(this._imageData=e.result,this._imageData.length<65535?this.saveImage():this.clearSavedImage())},e.readAsDataURL(t)}}}clearImage(){this._imageData="",this.clearSavedImage()}clearSavedImage(){try{localStorage.removeItem(b)}catch(t){console.warn("localStorage error:",t)}}saveImage(){try{localStorage.setItem(b,this._imageData)}catch(t){console.warn("localStorage error:",t)}}loadSavedImage(){try{const t=null===localStorage||void 0===localStorage?void 0:localStorage.getItem(b);if("string"==typeof t)return t}catch(t){console.warn("localStorage error:",t)}return""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac}),t})();var u=n("SeXe");const g={identity:"1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0",invert:"-1 0 0 0 1 0 -1 0 0 1 0 0 -1 0 1 0 0 0 1 0",blue:"0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0",gray:"0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 1 0",green:"0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1 0",magenta:"1 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0",red:"1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0",yellow:"1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1 0",darken:".5 0 0 0 0 0 .5 0 0 0 0 0 .5 0 0 0 0 0 1 0",lighten:"1.5 0 0 0 0 0 1.5 0 0 0 0 0 1.5 0 0 0 0 0 1 0"},m=["to integer","#.#","#.##","#.###","%.4f","%.5f","%.6f"],d={viewBoxPadding:1,xOffset:0,yOffset:0,width:1024,height:1024,zoom:100,backgroundImageZoom:100,backgroundImageColorMatrixName:"identity",isBackgroundImageHidden:!1,isControlPoints:!0,controlPointFillColor:"#ffff00",controlPointSize:10,isPathStroke:!0,pathStrokeColor:"#ff00ff",isPathFill:!1,pathFillColor:"#04040f",sidenavModeSide:!1,sidenavClosed:!0,darkMode:!1,backgroundColor:"#282828",maximumFractionDigits:2},p={viewBoxPadding:0,xOffset:Number.MIN_SAFE_INTEGER,yOffset:Number.MIN_SAFE_INTEGER,width:1,height:1,zoom:25,backgroundImageZoom:1,maximumFractionDigits:0,controlPointSize:2},f={viewBoxPadding:Number.MAX_SAFE_INTEGER,xOffset:Number.MAX_SAFE_INTEGER,yOffset:Number.MAX_SAFE_INTEGER,width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER,zoom:400,backgroundImageZoom:1e4,maximumFractionDigits:m.length-1,controlPointSize:32};let x=(()=>{class t extends u.a{constructor(){super(d),this.loadLocal("[svg-path-editor.settings]",d)}get imageColorMatrix(){return g[this.state.backgroundImageColorMatrixName]||g.identity}restoreDefaults(){this.set(d)}set(t){const e=this._set(t);return e&&(this._timerId&&clearTimeout(this._timerId),this._timerId=setTimeout(()=>{this._timerId=null,this.saveLocal("[svg-path-editor.settings]")},1e3)),e}_validate(t){for(const e of Object.keys(p))t[e]=Math.max(p[e],Math.min(f[e],t[e]||0));return t.backgroundImageColorMatrixName in g||(t.backgroundImageColorMatrixName="identity"),super._validate(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac}),t})();const C={data:"",prev:null,next:null};let v=(()=>{class t extends u.a{constructor(){super(C),this.saveDelay=3e4,this._save=()=>{this._timerId=null;try{localStorage.setItem("[svg-path-editor.path-data]",this.state.data)}catch(t){console.warn("localStorage error:",t)}};try{const t=null===localStorage||void 0===localStorage?void 0:localStorage.getItem("[svg-path-editor.path-data]");t&&this._set({data:t})}catch(t){console.warn("localStorage error:",t)}}get pathData(){return this.state.data}set pathData(t){const e=this.state;e.data!==t&&this._set({data:t,prev:e,next:null})}get canUndo(){return!!this.state.prev}get canRedo(){return!!this.state.next}get hasLink(){return!(!this.state.prev&&!this.state.next)}restoreDefaults(){this._set(C)}undo(){const t=this.state,e=t.prev;e&&this._set({data:e.data,prev:e.prev,next:t})}redo(){const t=this.state,e=t.next;e&&this._set({data:e.data,prev:t,next:e.next})}unlink(){const t=this.state;(t.next||t.prev)&&this._set({data:t.data,prev:null,next:null})}_set(t){const e=super._set(t);return e&&(this._timerId||(this._timerId=setTimeout(this._save,this.saveDelay))),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac}),t})(),y=(()=>{class t{constructor(){this._items=[],this._timerID=setInterval(()=>{var t;(null===(t=this._popupRef)||void 0===t?void 0:t.closed)&&this.clear()},6e5)}next(t,e){const n=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="${t}" width="100%" height="100%">\n  <title>SVG File - ${(new Date).toUTCString()}</title>\n  <path d="${e}" />\n</svg>`,i=new Blob([n],{type:"image/svg+xml"}),o=URL.createObjectURL(i);let s=this._popupRef;s&&!s.closed?(s.location.assign(o),s.focus()):(this.clear(),s=this._popupRef=window.open(o,"svg-file-window","toolbar=yes,scrollbars=yes,resizable=yes")),this._items.push({blob:i,url:o})}clear(){for(const t of this._items)URL.revokeObjectURL(t.url);this._items.length=0,this._popupRef=void 0}close(){clearInterval(this._timerID),this._timerID=void 0,this.clear()}ngOnDestroy(){this.close()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac}),t})();var M=n("dPmG");function T(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d&&0===t.e&&0===t.f}function U(t){const e=Number.isFinite||(t=>"number"==typeof t&&isFinite(t));return e(t.a)&&e(t.b)&&e(t.c)&&e(t.d)&&e(t.e)&&e(t.f)}var k=n("0IaG"),I=n("bTqV"),w=n("NFeN"),O=n("Bgxr");function S(t,e){if(1&t&&(l.Ub(0,"div"),l.Ub(1,"mat-icon"),l.Bc(2,"sentiment_very_dissatisfied"),l.Tb(),l.Bc(3),l.Tb()),2&t){const t=l.fc();l.Cb(3),l.Dc(" ",t.errorMessage," ")}}function P(t,e){1&t&&(l.Ub(0,"div"),l.Bc(1,"Loading..."),l.Tb())}function _(t,e){if(1&t&&l.zc(0,P,2,0,"div",8),2&t){const t=l.fc(),e=l.qc(1);l.lc("ngIf",!t.errorMessage)("ngIfElse",e)}}function B(t,e){if(1&t){const t=l.Vb();l.Ub(0,"button",12),l.bc("click",function(){l.sc(t);const n=e.index;return l.fc(2).onItemClick(n)}),l.Ub(1,"div"),l.ec(),l.Ub(2,"svg",13),l.Pb(3,"path"),l.Tb(),l.Tb(),l.dc(),l.Ub(4,"span"),l.Bc(5),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit,n=e.index,i=l.fc(2);l.Gb("sample-dialog-selection",n===i.selection),l.Cb(3),l.Db("d",i.getPathAt(n)),l.Cb(2),l.Cc(t)}}function F(t,e){if(1&t){const t=l.Vb();l.Ub(0,"app-tab-group",9),l.bc("selectionChange",function(e){return l.sc(t),l.fc().onTabSelectionChange(e)}),l.Ub(1,"div",10),l.zc(2,B,6,4,"button",11),l.Tb(),l.Tb()}if(2&t){const t=l.fc();l.lc("items",t.tabNames)("selection",t.tabSelection),l.Cb(2),l.lc("ngForOf",t.tabItems)("ngForTrackBy",t.trackByIndex)}}let A=(()=>{class t{constructor(t){this._http=t,this.tabSelection=-1,this.selection=-1}get selectedPath(){return this.samples&&this.selection>=0?this.getPathAt(this.selection):""}ngOnInit(){this._http.get("assets/svg-path-editor/samples.json").subscribe(t=>{this.tabNames=Object.keys(t),this.samples=t,this.onTabSelectionChange(0)},t=>{this.errorMessage="HTTP load failed!",console.error("HTTP load error:",t)})}onItemClick(t){this.selection=this.selection===t?-1:t}onTabSelectionChange(t){this.tabSelection!==t&&(this.tabSelection=t,this.tabItems=Object.keys(this.samples[this.tabNames[t]]),this.selection=-1)}trackByIndex(t){return t}getPathAt(t){const e=this.samples[this.tabNames[this.tabSelection]];return e?e[this.tabItems[t]]:""}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(a.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-sample-dialog"]],decls:13,vars:4,consts:[["templateError",""],["templateLoading",""],["mat-dialog-title",""],[1,"mat-typography"],[3,"items","selection","selectionChange",4,"ngIf","ngIfElse"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close","disabled"],[4,"ngIf","ngIfElse"],[3,"items","selection","selectionChange"],[1,"sample-dialog-body"],[3,"sample-dialog-selection","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],["viewBox","0 0 1024 1024"]],template:function(t,e){if(1&t&&(l.zc(0,S,4,1,"ng-template",null,0,l.Ac),l.zc(2,_,1,2,"ng-template",null,1,l.Ac),l.Ub(4,"h2",2),l.Bc(5,"SVG Path Samples"),l.Tb(),l.Ub(6,"mat-dialog-content",3),l.zc(7,F,3,4,"app-tab-group",4),l.Tb(),l.Ub(8,"mat-dialog-actions",5),l.Ub(9,"button",6),l.Bc(10,"Cancel"),l.Tb(),l.Ub(11,"button",7),l.Bc(12,"Import"),l.Tb(),l.Tb()),2&t){const t=l.qc(3);l.Cb(7),l.lc("ngIf",e.samples)("ngIfElse",t),l.Cb(4),l.lc("mat-dialog-close",e.selectedPath)("disabled",0>e.selection)}},directives:[k.h,k.e,i.l,k.c,I.a,k.d,w.a,O.a,i.k],styles:[".sample-dialog-body[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.sample-dialog-body[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{cursor:pointer;width:18em;height:12em;padding:.5em;margin:2px}.sample-dialog-body[_ngcontent-%COMP%] > button.sample-dialog-selection[_ngcontent-%COMP%]{background-color:rgba(0,0,255,.125)}.sample-dialog-body[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;width:10em;height:10em;margin:.25em}.sample-dialog-body[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{vertical-align:top}"]}),t})();var z=n("kmnG"),R=n("qFsG"),j=n("bSwM"),D=n("5RNC");function $(t,e){if(1&t&&(l.Ub(0,"mat-hint"),l.Bc(1),l.Tb()),2&t){const t=l.fc();l.Cb(1),l.Ec("From ",t.min," to ",t.max,"")}}let X=(()=>{class t{constructor(){this.label="Index",this.min=0,this.max=-1,this.selection=-1,this.selectionChange=new l.n}get disabled(){return this.max<this.min}requestSelectionChange(t){t!==this.selection&&t>=this.min&&t<=this.max&&this.selectionChange.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-index-selector"]],inputs:{label:"label",min:"min",max:"max",selection:"selection"},outputs:{selectionChange:"selectionChange"},decls:22,vars:14,consts:[[1,"index-selector"],[1,"index-selector-input"],["matInput","","type","number","step","1",3,"min","max","disabled","ngModel","ngModelChange"],[4,"ngIf"],[1,"index-selector-slider"],["step","1",3,"min","max","disabled","ngModel","input"],[1,"index-selector-buttons"],["mat-icon-button","",3,"disabled","click"],[1,"flex-space-filler-1"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"mat-form-field",1),l.Ub(2,"mat-label"),l.Bc(3),l.Tb(),l.Ub(4,"input",2),l.bc("ngModelChange",function(t){return e.requestSelectionChange(+t)}),l.Tb(),l.zc(5,$,2,2,"mat-hint",3),l.Tb(),l.Ub(6,"div",4),l.Ub(7,"mat-slider",5),l.bc("input",function(t){return e.requestSelectionChange(t.value)}),l.Tb(),l.Ub(8,"div",6),l.Ub(9,"button",7),l.bc("click",function(){return e.requestSelectionChange(e.min)}),l.Ub(10,"mat-icon"),l.Bc(11,"first_page"),l.Tb(),l.Tb(),l.Ub(12,"button",7),l.bc("click",function(){return e.requestSelectionChange(e.selection-1)}),l.Ub(13,"mat-icon"),l.Bc(14,"chevron_left"),l.Tb(),l.Tb(),l.Pb(15,"div",8),l.Ub(16,"button",7),l.bc("click",function(){return e.requestSelectionChange(e.selection+1)}),l.Ub(17,"mat-icon"),l.Bc(18,"chevron_right"),l.Tb(),l.Tb(),l.Ub(19,"button",7),l.bc("click",function(){return e.requestSelectionChange(e.max)}),l.Ub(20,"mat-icon"),l.Bc(21,"last_page"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(3),l.Cc(e.label),l.Cb(1),l.lc("min",e.min)("max",e.max)("disabled",e.disabled)("ngModel",e.selection),l.Cb(1),l.lc("ngIf",!e.disabled),l.Cb(2),l.lc("min",e.min)("max",e.max)("disabled",e.disabled)("ngModel",e.selection),l.Cb(2),l.lc("disabled",e.min>=e.selection),l.Cb(3),l.lc("disabled",e.min>=e.selection),l.Cb(4),l.lc("disabled",e.selection>=e.max),l.Cb(3),l.lc("disabled",e.selection>=e.max))},directives:[z.c,z.g,R.a,s.n,s.b,s.i,s.l,i.l,D.a,I.a,w.a,z.f],styles:[".index-selector[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.index-selector[_ngcontent-%COMP%]   .index-selector-input[_ngcontent-%COMP%]{min-width:5em;max-width:8em;flex:1 1 5em}.index-selector[_ngcontent-%COMP%]   .index-selector-slider[_ngcontent-%COMP%]{flex:1;max-width:40em;display:flex;flex-direction:column}.index-selector[_ngcontent-%COMP%]   .index-selector-slider[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{flex:1;margin-bottom:16px}.index-selector[_ngcontent-%COMP%]   .index-selector-slider[_ngcontent-%COMP%]   div.index-selector-buttons[_ngcontent-%COMP%]{display:flex;width:100%}"]}),t})();var N=n("STbY");function V(t,e){if(1&t){const t=l.Vb();l.Ub(0,"button",6),l.bc("click",function(){l.sc(t);const n=e.$implicit,i=l.fc(2);return i.requestPageChange(n,i.pageSize*i.pageIndex)}),l.Bc(1),l.Tb()}if(2&t){const t=e.$implicit,n=l.fc(2);l.lc("disabled",t===n.pageSize),l.Cb(1),l.Cc(t)}}function Y(t,e){if(1&t&&(l.Sb(0),l.Ub(1,"button",2),l.Ub(2,"mat-icon"),l.Bc(3,"more_vert"),l.Tb(),l.Tb(),l.Ub(4,"mat-menu",null,3),l.Ub(6,"div",4),l.Bc(7,"Items per page:"),l.Tb(),l.zc(8,V,2,2,"button",5),l.Tb(),l.Rb()),2&t){const t=l.qc(5),e=l.fc();l.Cb(1),l.lc("matMenuTriggerFor",t),l.Cb(7),l.lc("ngForOf",e.pageSizeOptions)}}let E=(()=>{class t{constructor(){this.itemCount=0,this.pageSize=1,this.pageIndex=0,this.pageChange=new l.n}get pageCount(){return this.pageSize>0?Math.ceil(this.itemCount/this.pageSize):0}requestPageChange(t,e){const n=Math.floor(e/t);this.pageIndex===n&&this.pageSize===t||this.pageChange.emit({pageIndex:n,pageSize:t})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-page-selector"]],inputs:{itemCount:"itemCount",pageSize:"pageSize",pageIndex:"pageIndex",pageSizeOptions:"pageSizeOptions"},outputs:{pageChange:"pageChange"},decls:2,vars:4,consts:[[4,"ngIf"],["label","Page",3,"min","max","selection","selectionChange"],["mat-icon-button","",1,"page-selector-menu-button",3,"matMenuTriggerFor"],["menu","matMenu"],[1,"page-selector-menu-label"],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"disabled","click"]],template:function(t,e){1&t&&(l.zc(0,Y,9,2,"ng-container",0),l.Ub(1,"app-index-selector",1),l.bc("selectionChange",function(t){return e.requestPageChange(e.pageSize,e.pageSize*(t-1))}),l.Tb()),2&t&&(l.lc("ngIf",(null==e.pageSizeOptions?null:e.pageSizeOptions.length)>1),l.Cb(1),l.lc("min",1)("max",e.pageCount)("selection",e.pageIndex+1))},directives:[i.l,X,I.a,N.d,w.a,N.a,i.k,N.b],styles:[".page-selector-menu-button[_ngcontent-%COMP%]{float:right}.page-selector-menu-label[_ngcontent-%COMP%]{margin-left:1em;margin-right:1em;padding-bottom:.5em;border-bottom:1px solid rgba(0,0,0,.25)}"]}),t})(),L=(()=>{class t{transform(t,e=0){return{*[Symbol.iterator](){const n=e+t;for(let t=e;t<n;t++)yield t}}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=l.Nb({name:"xrange",type:t,pure:!0}),t})();const q=["pathRef"];function G(t,e){if(1&t&&(l.Ub(0,"div"),l.Bc(1),l.Tb()),2&t){const t=l.fc();l.Cb(1),l.Cc(t.status)}}function H(t,e){if(1&t){const t=l.Vb();l.Ub(0,"button",16),l.bc("click",function(){return l.sc(t),l.fc(3).setSelectionInput("")}),l.Ub(1,"mat-icon"),l.Bc(2,"close"),l.Tb(),l.Tb()}}function Q(t,e){if(1&t){const t=l.Vb();l.Ub(0,"mat-checkbox",17),l.bc("ngModelChange",function(n){l.sc(t);const i=e.$implicit;return l.fc(3).setSelectionItem(i,n)}),l.Bc(1),l.Tb()}if(2&t){const t=e.$implicit,n=l.fc(3);l.wc("visibility",n.getVisibility(t)),l.lc("ngModel",n.getSelectionItem(t)),l.Cb(1),l.Dc("",n.pageSize*n.pageIndex+t+1,". ")}}function Z(t,e){if(1&t){const t=l.Vb();l.Ub(0,"app-page-selector",18),l.bc("pageChange",function(e){return l.sc(t),l.fc(3).setPage(e.pageSize,e.pageIndex)}),l.Tb()}if(2&t){const t=l.fc(3);l.lc("pageSize",t.pageSize)("pageIndex",t.pageIndex)("itemCount",t.items.length)("pageSizeOptions",t.pageSizeOptions)}}function W(t,e){if(1&t){const t=l.Vb();l.ec(),l.dc(),l.Sb(0),l.Ub(1,"div"),l.Bc(2),l.Tb(),l.Ub(3,"mat-form-field"),l.Ub(4,"mat-label"),l.Bc(5,"Selection"),l.Tb(),l.Ub(6,"input",11),l.bc("ngModelChange",function(e){return l.sc(t),l.fc(2).setSelectionInput(e)}),l.Tb(),l.zc(7,H,3,0,"button",12),l.Tb(),l.Ub(8,"div",13),l.zc(9,Q,2,4,"mat-checkbox",14),l.gc(10,"xrange"),l.Tb(),l.zc(11,Z,1,4,"app-page-selector",15),l.Rb()}if(2&t){const t=l.fc(2);l.Cb(2),l.Dc("Path Count: ",t.items.length,""),l.Cb(4),l.lc("ngModel",t.selectionInput),l.Cb(1),l.lc("ngIf",t.selectionInput),l.Cb(2),l.lc("ngForOf",l.hc(10,6,t.pageSize))("ngForTrackBy",t.trackByIndex),l.Cb(2),l.lc("ngIf",t.pageSizeOptions.length>1)}}function K(t,e){if(1&t&&(l.Ub(0,"div",6),l.Ub(1,"div",7),l.ec(),l.Ub(2,"svg",8),l.Pb(3,"path",null,9),l.Tb(),l.Tb(),l.zc(5,W,12,8,"ng-container",10),l.Tb()),2&t){const t=l.fc();l.Cb(2),l.Db("viewBox",t.viewBox),l.Cb(1),l.Db("d",t.selectedPath),l.Cb(2),l.lc("ngIf",t.items.length>1)}}let J=(()=>{class t{constructor(t){this.data=t,this.pageIndex=0,this.pageSize=0,this.pageSizeOptions=[5,10,20,30,40,50],this.items=[],this.viewBox="0 0 100 100",this.selectionInput="",this.selectedPath="",this.status="Loading..."}ngOnInit(){const t=this.data,e=new FileReader;e.onload=t=>{if(this.status="Could not find any SVG path data.","string"==typeof e.result){const t=/[\s\"\']d=\"([^\"]+)\"/,n=e.result.match(/\<path([^>]+)/g);if(n){const e=new Set;for(const i of n){const n=i.match(t);n&&n[1]&&e.add(n[1])}for(const t of e.values())this.items.push({value:t});if(1===this.items.length)this.setSelectionItem(0,!0);else if(this.items.length>1){const t=this.pageSizeOptions.findIndex(t=>t>=this.items.length);t>=0&&t+1<this.pageSizeOptions.length&&(this.pageSizeOptions=this.pageSizeOptions.slice(0,t+1));const e=Math.min(1,this.pageSizeOptions.length-1);this.setPage(this.pageSizeOptions[e],0)}}}},e.onerror=t=>{this.status="Error reading from file. Verify that the file exists and that you can access it."},e.readAsText(t)}adjustViewBox(){setTimeout(()=>{const t=this.selectedPathRef.nativeElement;if(t&&"function"==typeof t.getBBox){const e=t.getBBox(),n=2,i=Math.floor(e.x)-n,o=Math.floor(e.y)-n,s=Math.ceil(e.width)+2*n,a=Math.ceil(e.height)+2*n;s>0&&a>0&&(this.viewBox=`${i} ${o} ${s} ${a}`)}},1)}setPage(t,e){this.pageSize=t,this.pageIndex=e}trackByIndex(t){return t}setSelectionInput(t){this.selectionInput!==t&&(this.selectionInput=t,this.onInputChange())}getIndex(t){return this.pageSize*this.pageIndex+t}getVisibility(t){var e;const n=this.getIndex(t);return n>=0&&n<(null===(e=this.items)||void 0===e?void 0:e.length)?"visible":"hidden"}getSelectionItem(t){var e;const n=this.getIndex(t);return null===(e=this.items[n])||void 0===e?void 0:e.selected}setSelectionItem(t,e){const n=this.getIndex(t),i=this.items[n];i&&!i.selected!=!e&&(i.selected=e,this.onSelectionItemChange())}onSelectionItemChange(){const t=[];let e=0,n=-1;for(let o=0;o<this.items.length;o++)this.items[o].selected?n=o:(n>=e&&t.push({first:e,last:n}),e=o+1);n>=e&&t.push({first:e,last:n});let i="";for(const o of t)i+=","+(o.first+1),o.last>o.first&&(i+=(o.last===o.first+1?",":"-")+(o.last+1));this.selectionInput=i.substring(",".length),this.onSelectionChange()}onSelectionChange(){const t=this.items.filter(t=>t.selected).map(t=>t.value.replace(/NaN/gi," 0 ")).join("");t!==this.selectedPath&&(this.selectedPath=t,this.adjustViewBox())}onInputChange(){const t=this.items.length,e=function(t,e){const n=new Array(t),i=(e||"").replace(/\s+/g,"");if(i){const e=/^\d+$/;for(const o of i.split(","))if(e.test(o)){const e=+o;e>0&&e<=t&&(n[e-1]=!0)}else{const e=o.split("-"),i=+e[0],s=+e[1];if(i>=1&&s>=i){const e=Math.min(s,t);for(let t=i-1;t<e;t++)n[t]=!0}}}return n}(t,this.selectionInput);for(let n=0;n<t;n++)this.items[n].selected=e[n];this.onSelectionChange()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(k.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-svg-open-dialog"]],viewQuery:function(t,e){if(1&t&&l.Gc(q,1),2&t){let t;l.pc(t=l.cc())&&(e.selectedPathRef=t.first)}},decls:12,vars:5,consts:[["templateStatus",""],["mat-dialog-title","",2,"margin","0"],["class","svg-open-dialog-content",4,"ngIf","ngIfElse"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close","disabled"],[1,"svg-open-dialog-content"],[1,"svg-open-dialog-preview"],["width","100%","height","100%"],["pathRef",""],[4,"ngIf"],["matInput","","type","text",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"svg-open-dialog-items"],[3,"visibility","ngModel","ngModelChange",4,"ngFor","ngForOf","ngForTrackBy"],[3,"pageSize","pageIndex","itemCount","pageSizeOptions","pageChange",4,"ngIf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"ngModel","ngModelChange"],[3,"pageSize","pageIndex","itemCount","pageSizeOptions","pageChange"]],template:function(t,e){if(1&t&&(l.zc(0,G,2,1,"ng-template",null,0,l.Ac),l.Ub(2,"h2",1),l.Bc(3,"SVG Path"),l.Tb(),l.Ub(4,"div"),l.Bc(5),l.Tb(),l.zc(6,K,6,3,"div",2),l.Ub(7,"mat-dialog-actions",3),l.Ub(8,"button",4),l.Bc(9,"Cancel"),l.Tb(),l.Ub(10,"button",5),l.Bc(11,"Import"),l.Tb(),l.Tb()),2&t){const t=l.qc(1);l.Cb(5),l.Cc(e.data.name),l.Cb(1),l.lc("ngIf",e.items.length>0)("ngIfElse",t),l.Cb(4),l.lc("mat-dialog-close",e.selectedPath)("disabled",!e.selectedPath)}},directives:[k.h,i.l,k.c,I.a,k.d,z.c,z.g,R.a,s.b,s.i,s.l,i.k,z.h,w.a,j.a,E],pipes:[L],styles:[".svg-open-dialog-items[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;max-width:52em;padding:1em}.svg-open-dialog-items[_ngcontent-%COMP%] > mat-checkbox[_ngcontent-%COMP%]{display:inline-block;min-width:5em}.svg-open-dialog-content[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.25);overflow-y:auto;min-width:42vmin;min-height:42vmin;max-height:80vh}.svg-open-dialog-preview[_ngcontent-%COMP%]{width:40vmin;height:40vmin}@media (max-height:480px){.svg-open-dialog-content[_ngcontent-%COMP%]{max-height:60vh}}"]}),t})();var tt=n("zh6y");function et(t){return"M"===t.name}function nt(t){return"L"===t.name}function it(t){return"H"===t.name}function ot(t){return"V"===t.name}function st(t){return"Z"===t.name}function at(t){return"C"===t.name}function ct(t){return"S"===t.name}function rt(t){return"Q"===t.name}function lt(t){return"T"===t.name}function bt(t){return"A"===t.name}function ht(t){return at(t)||rt(t)}function ut(t){return at(t)||ct(t)}const gt={M:"MoveTo",L:"LineTo",H:"Horizontal LineTo",V:"Vertical LineTo",C:"Cubic B\xe9zier Curve",S:"Smooth Cubic B\xe9zier Curve",Q:"Quadratic B\xe9zier Curve",T:"Smooth Quadratic B\xe9zier Curve",A:"Elliptical Arc Curve",Z:"ClosePath"};function mt(t,e){return" "+(e<0?t.toString():Object(M.f)(t,e))}function dt(t,e,n,i){let o="";return st(t)||(ht(t)&&(o+=mt(t.x1-e,i),o+=mt(t.y1-n,i)),ut(t)&&(o+=mt(t.x2-e,i),o+=mt(t.y2-n,i)),bt(t)&&(o+=mt(t.rx,i),o+=mt(t.ry,i),o+=mt(t.angle,i),o+=" "+(t.largeArcFlag?"1":"0")+(t.sweepFlag?"1":"0")),ot(t)||(o+=mt(t.x-e,i)),it(t)||(o+=mt(t.y-n,i))),o}function pt(t,e=-1){return t.name+dt(t,0,0,e)}function ft(t,e,n){st(t)||(ot(t)||(t.x+=e),it(t)||(t.y+=n),ht(t)&&(t.x1+=e,t.y1+=n),ut(t)&&(t.x2+=e,t.y2+=n))}var xt=function(t){return t[t.NorthWest=0]="NorthWest",t[t.North=1]="North",t[t.NorthEast=2]="NorthEast",t[t.West=3]="West",t[t.Center=4]="Center",t[t.East=5]="East",t[t.SouthWest=6]="SouthWest",t[t.South=7]="South",t[t.SouthEast=8]="SouthEast",t}({});function Ct(t,e){let n,i;return n=function(t){return t===xt.NorthWest||t===xt.West||t===xt.SouthWest}(e)?t.left:function(t){return t===xt.NorthEast||t===xt.East||t===xt.SouthEast}(e)?t.right:(t.left+t.right)/2,i=function(t){return t===xt.NorthWest||t===xt.North||t===xt.NorthEast}(e)?t.top:function(t){return t===xt.SouthWest||t===xt.South||t===xt.SouthEast}(e)?t.bottom:(t.top+t.bottom)/2,{x:n,y:i}}function vt(t,e){return{left:t,top:e,right:t,bottom:e}}function yt(t,e){t.left=Math.min(t.left,e),t.right=Math.max(t.right,e)}function Mt(t,e){t.top=Math.min(t.top,e),t.bottom=Math.max(t.bottom,e)}function Tt(t,e,n){yt(t,e),Mt(t,n)}function Ut(t,e){yt(t,e.left),yt(t,e.right),Mt(t,e.top),Mt(t,e.bottom)}function kt(t,e,n,i){const o=Math.atan2(e,t),s=Math.atan2(i,n),a=s-o,c=a+(s>o?-1:1)*Math.PI*2;return Math.abs(c)<Math.abs(a)?c:a}function It(t,e,n){switch(t){case"Z":return{name:t,prev:n};case"H":return{name:t,x:+e[0],prev:n};case"V":return{name:t,y:+e[0],prev:n};case"M":case"L":case"T":return{name:t,x:+e[0],y:+e[1],prev:n};case"Q":return{name:t,x1:+e[0],y1:+e[1],x:+e[2],y:+e[3],prev:n};case"S":return{name:t,x2:+e[0],y2:+e[1],x:+e[2],y:+e[3],prev:n};case"C":return{name:t,x1:+e[0],y1:+e[1],x2:+e[2],y2:+e[3],x:+e[4],y:+e[5],prev:n};case"A":return{name:t,rx:+e[0],ry:+e[1],angle:+e[2],largeArcFlag:1==+e[3],sweepFlag:1==+e[4],x:+e[5],y:+e[6],prev:n}}}function wt(t){for(let e=t;e;e=e.prev)if(et(e))return e}function Ot(t){return t?st(t)?Ot(wt(t.prev)):ot(t)?Ot(t.prev):t.x:0}function St(t){return t?st(t)?St(wt(t.prev)):it(t)?St(t.prev):t.y:0}function Pt(t){return ht(t)?t.x1:Ft(t)}function _t(t){return ht(t)?t.y1:At(t)}function Bt(t,e){return e.name===t.name||at(e)&&ct(t)||rt(e)&&lt(t)}function Ft(t){const e=t.prev;let n=Ot(e);return e&&Bt(t,e)&&(n+=n-function(t){return ut(t)?t.x2:rt(t)?t.x1:Ft(t)}(e)),n}function At(t){const e=t.prev;let n=St(e);return e&&Bt(t,e)&&(n+=n-function(t){return ut(t)?t.y2:rt(t)?t.y1:At(t)}(e)),n}function zt(t){const e=Ot(t.prev),n=St(t.prev),i=t.x,o=t.y,s=t.largeArcFlag,a=t.sweepFlag,c=t.angle*Math.PI/180;let r=Math.abs(t.rx),l=Math.abs(t.ry);if(0===r||0===l)return{cx:(e+i)/2,cy:(n+o)/2,rx:r,ry:l,phi:c};const b=Math.cos(c),h=Math.sin(c),u=(e-i)/2,g=(n-o)/2,m=b*u+h*g,d=-h*u+b*g,p=(m*m*l*l+d*d*r*r)/(r*r*l*l);p>1&&(r*=Math.sqrt(p),l*=Math.sqrt(p));const f=(s===a?-1:1)*Math.sqrt(Math.max(r*r*l*l-r*r*d*d-l*l*m*m,0)/(r*r*d*d+l*l*m*m)),x=f*r*d/l,C=f*-l*m/r,v=b*x-h*C||0,y=h*x+b*C||0,M=(m-x)/r,T=(d-C)/l,U=-(m+x)/r,k=-(d+C)/l,I=kt(1,0,M,T)||0;let w=kt(M,T,U,k)||0;return a?w<0&&(w+=2*Math.PI):w>0&&(w-=2*Math.PI),{cx:v+(e+i)/2,cy:y+(n+o)/2,rx:r,ry:l,phi:c,theta:I,deltaTheta:w}}function Rt(t,e){const n=Math.cos(t.phi),i=Math.sin(t.phi),o=t.rx*Math.cos(e),s=t.ry*Math.sin(e);return{x:n*o-i*s+t.cx,y:i*o+n*s+t.cy}}function jt(t,e){const n=Math.cos(t.phi),i=Math.sin(t.phi),o=-t.rx*Math.sin(e),s=t.ry*Math.cos(e);return{x:n*o-i*s,y:i*o+n*s}}function Dt(t,e,n,i,o,s,a,c){const r=jt(o,s),l=jt(o,a),b=4*Math.tan((a-s)/4)/3,h=n-b*l.x,u=i-b*l.y;return c?{name:"S",x2:h,y2:u,x:n,y:i}:{name:"C",x1:t+b*r.x,y1:e+b*r.y,x2:h,y2:u,x:n,y:i}}function $t(t){const e=zt(t);if(e.rx<=0||e.ry<=0||!e.deltaTheta)return[{name:"L",x:t.x,y:t.y}];const n=Ot(t.prev),i=St(t.prev),{theta:o,deltaTheta:s}=e;if(Math.abs(s)>4*Math.PI/3){const a=o+s/3,c=o+2*s/3,r=o+s,l=Rt(e,a),b=Rt(e,c);return[Dt(n,i,l.x,l.y,e,o,a),Dt(l.x,l.y,b.x,b.y,e,a,c,!0),Dt(b.x,b.y,t.x,t.y,e,c,r,!0)]}if(Math.abs(s)>2*Math.PI/3){const a=o+s/2,c=o+s,r=Rt(e,a);return[Dt(n,i,r.x,r.y,e,o,a),Dt(r.x,r.y,t.x,t.y,e,a,c,!0)]}return[Dt(n,i,t.x,t.y,e,o,o+s)]}function Xt(t,e){return t.name.toLowerCase()+dt(t,Ot(t.prev),St(t.prev),e)}function Nt(t){if(bt(t))return function(t){const e=vt(t.x,t.y);Tt(e,Ot(t.prev),St(t.prev));const n=zt(t);if(0===n.rx||0===n.ry||0===n.deltaTheta)return e;const i=n.theta+Math.min(n.deltaTheta,0),o=n.theta+Math.max(n.deltaTheta,0);let s=-Math.atan2(n.ry*Math.tan(n.phi),n.rx);for(;s>i;s-=Math.PI);for(;s<o;s+=Math.PI)if(s>i){const t=Rt(n,s);Tt(e,t.x,t.y)}let a=Math.atan2(n.ry,Math.tan(n.phi)*n.rx);for(;a>i;a-=Math.PI);for(;a<o;a+=Math.PI)if(a>i){const t=Rt(n,a);Tt(e,t.x,t.y)}return e}(t);if(rt(t)||lt(t))return function(t){const e=Ot(t.prev),n=St(t.prev),i=Pt(t),o=_t(t),s=t.x,a=t.y,c=vt(e,n);if(Tt(c,s,a),b=o,(l=i)<(r=c).left||l>r.right||b<r.top||b>r.bottom){const t=Object(M.d)((e-i)/(e-2*i+s)||0,0,1),r=Object(M.a)(e,i,s,t),l=Object(M.d)((n-o)/(n-2*o+a)||0,0,1);Tt(c,r,Object(M.a)(n,o,a,l))}var r,l,b;return c}(t);if(at(t)||ct(t))return function(t){const e=Ot(t.prev),n=St(t.prev),i=Pt(t),o=_t(t),s=t.x2,a=t.y2,c=t.x,r=t.y,l=vt(e,n);Tt(l,c,r);const b=-e+i,h=e-2*i+s;let u=h*h-b*(3*i-e-3*s+c);if(u>0){u=Math.sqrt(u);let t=-b/(h+u);t>0&&t<1&&yt(l,Object(M.b)(e,i,s,c,t)),t=-b/(h-u),t>0&&t<1&&yt(l,Object(M.b)(e,i,s,c,t))}const g=-n+o,m=n-2*o+a;let d=m*m-g*(3*o-n-3*a+r);if(d>0){d=Math.sqrt(d);let t=-g/(m+d);t>0&&t<1&&Mt(l,Object(M.b)(n,o,a,r,t)),t=-g/(m-d),t>0&&t<1&&Mt(l,Object(M.b)(n,o,a,r,t))}return l}(t);{const e=vt(Ot(t),St(t));return et(t)||Tt(e,Ot(t.prev),St(t.prev)),e}}function Vt(t,e,n){return t.a*e+t.c*n+t.e}function Yt(t,e,n){return t.b*e+t.d*n+t.f}function Et(t){let e=0;for(const n of t)n.selected&&e++;return e}function Lt(t){const e=[];for(let n=0;n<t.length;n++)t[n].selected&&e.push(n);return e}function qt(t){for(let e=0;e<t.length;e++)if(t[e].selected)return e;return-1}function Gt(t){for(let e=t.length;e-- >0;)if(t[e].selected)return e;return-1}function Ht(t){return qt(t)>=0}function Qt(t){for(const e of t)if(!e.selected)return!1;return!0}function Zt(t){const e=Et(t);return e>0&&e<t.length}function Wt(t,e,n){const i=t[e];i&&(i.selected=n)}function Kt(t,e){for(const n of t)n.selected=e}function Jt(t,e,n){Kt(t,!n),Wt(t,e,n)}function te(t,e){return t.outputAsRelative?Xt(t,e):pt(t,e)}const ee=/([MLHVZCSQTA])/gi,ne=/[01]/,ie=/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/,oe=/[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/,se={M:[ie,ie],L:[ie,ie],H:[ie],V:[ie],Z:[],C:[ie,ie,ie,ie,ie,ie],S:[ie,ie,ie,ie],Q:[ie,ie,ie,ie],T:[ie,ie],A:[oe,oe,ie,ne,ne,ie,ie]};class ae{constructor(){this._data=""}set data(t){this._data=t.trim()}get data(){return this._data}moveTo(t){this.data=this.data.slice(t)}read(t){t.lastIndex=0;const e=t.exec(this.data);if(null!==e){const t=e[0];return this.moveTo(e.index+t.length),t}return null}readAll(t){const e=[];for(const n of t){const t=this.read(n);if(null===t)return null;e.push(t)}return e}}function ce(t){const e=[];let n;const i=t.split(ee),o=new ae;for(let s=2;s<i.length;s+=2){let t=i[s-1];for(o.data=i[s];;){const i=t.toUpperCase(),s=o.readAll(se[i]);if(null===s)break;if(n=Object(tt.a)(n,It(i,s)).tail,t.toLowerCase()===t&&(ft(n,Ot(n.prev),St(n.prev)),n.outputAsRelative=!0),e.push(n),!o.data||0===s.length)break;"M"===t?t="L":"m"===t&&(t="l")}}return e}function re(t,e,n){n||(n={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY});const i=!e;for(const o of t)(i||o.selected)&&Ut(n,Nt(o));return n}function le(t){return Object.assign(Object.assign({},t),{prev:void 0,next:void 0,list:void 0})}function be(t){if(t.prev&&!t.prev.selected!=!t.selected){if(ct(t)){const e=Ft(t),n=At(t);return Object.assign(Object.assign({},t),{name:"C",x1:e,y1:n,prev:void 0,next:void 0,list:void 0})}if(lt(t)){const e=Ft(t),n=At(t);return Object.assign(Object.assign({},t),{name:"Q",x1:e,y1:n,prev:void 0,next:void 0,list:void 0})}}return le(t)}function he(t,e){const n=void 0,i=void 0,o=void 0;if(it(t)){const s=Object(M.i)(Ot(t.prev),t.x,e);return[Object.assign(Object.assign({},t),{x:s,prev:n,next:i,list:o}),le(t)]}if(ot(t)){const s=Object(M.i)(St(t.prev),t.y,e);return[Object.assign(Object.assign({},t),{y:s,prev:n,next:i,list:o}),le(t)]}if(nt(t)){const s=Object(M.i)(Ot(t.prev),t.x,e),a=Object(M.i)(St(t.prev),t.y,e);return[Object.assign(Object.assign({},t),{x:s,y:a,prev:n,next:i,list:o}),le(t)]}if(at(t)||ct(t)){const s=Ot(t.prev),a=St(t.prev),c=Pt(t),r=_t(t),l=t.x2,b=t.y2,h=Object(M.i)(c,l,e),u=Object(M.i)(r,b,e),g=t.x,m=t.y,d=Object(M.i)(l,g,e),p=Object(M.i)(b,m,e),f=Object(M.i)(h,d,e),x=Object(M.i)(u,p,e),C=Object(M.i)(s,c,e),v=Object(M.i)(a,r,e),y=Object(M.i)(C,h,e),T=Object(M.i)(v,u,e),U=Object(M.i)(y,f,e),k=Object(M.i)(T,x,e);return[Object.assign(Object.assign({},t),{name:"C",x1:C,y1:v,x2:y,y2:T,x:U,y:k,prev:n,next:i,list:o}),Object.assign(Object.assign({},t),{name:"S",x2:d,y2:p,x:g,y:m,prev:n,next:i,list:o})]}if(rt(t)||lt(t)){const s=Ot(t.prev),a=St(t.prev),c=Pt(t),r=_t(t),l=t.x,b=t.y,h=Object(M.i)(c,l,e),u=Object(M.i)(r,b,e),g=Object(M.i)(s,c,e),m=Object(M.i)(a,r,e),d=Object(M.i)(g,h,e),p=Object(M.i)(m,u,e);return[Object.assign(Object.assign({},t),{name:"Q",x1:g,y1:m,x:d,y:p,prev:n,next:i,list:o}),Object.assign(Object.assign({},t),{name:"T",x:l,y:b,prev:n,next:i,list:o})]}if(bt(t)){const{cx:s,cy:a,rx:c,ry:r,phi:l,theta:b,deltaTheta:h}=zt(t);if(h){const u=Object(M.i)(0,h,e),g=Rt({cx:s,cy:a,rx:c,ry:r,phi:l},b+u),m=Math.abs(u)>Math.PI,d=Math.abs(h-u)>Math.PI;return[Object.assign(Object.assign({},t),{rx:c,ry:r,largeArcFlag:m,x:g.x,y:g.y,prev:n,next:i,list:o}),Object.assign(Object.assign({},t),{rx:c,ry:r,largeArcFlag:d,prev:n,next:i,list:o})]}{const s=Object(M.i)(Ot(t.prev),t.x,e),a=Object(M.i)(St(t.prev),t.y,e);return[Object.assign(Object.assign({},t),{x:s,y:a,prev:n,next:i,list:o}),le(t)]}}return[le(t)]}function ue(t){return Object(tt.b)(...t),t}function ge(t,e){const n=!Ht(t);return ue(t.map(t=>{const i=n||t.selected?function(t,e){if(st(e))return{name:e.name};if(it(e)){const n=St(e.prev);return{name:"L",x:Vt(t,e.x,n),y:Yt(t,e.x,n)}}if(ot(e)){const n=Ot(e.prev);return{name:"L",x:Vt(t,n,e.y),y:Yt(t,n,e.y)}}{const n=Vt(t,e.x,e.y),i=Yt(t,e.x,e.y);if(rt(e)){const o=Vt(t,e.x1,e.y1),s=Yt(t,e.x1,e.y1);return{name:e.name,x1:o,y1:s,x:n,y:i}}if(ct(e)){const o=Vt(t,e.x2,e.y2),s=Yt(t,e.x2,e.y2);return{name:e.name,x2:o,y2:s,x:n,y:i}}if(at(e)){const o=Vt(t,e.x1,e.y1),s=Yt(t,e.x1,e.y1),a=Vt(t,e.x2,e.y2),c=Yt(t,e.x2,e.y2);return{name:e.name,x1:o,y1:s,x2:a,y2:c,x:n,y:i}}return bt(e)?Object.assign(Object.assign({name:e.name},function(t,e){const n=e.angle*Math.PI/180,i=Math.sin(n),o=Math.cos(n),s=1/(e.rx*e.rx),a=1/(e.ry*e.ry),c=o*o*s+i*i*a,r=2*o*i*(s-a),l=i*i*s+o*o*a,b=c*t.d*t.d-r*t.b*t.d+l*t.b*t.b,h=r*(t.a*t.d+t.b*t.c)-2*(c*t.c*t.d+l*t.a*t.b),u=c*t.c*t.c-r*t.a*t.c+l*t.a*t.a,g=t.a*t.d-t.b*t.c,m=(Math.atan2(h,b-u)+Math.PI)%Math.PI/2,d=Math.sin(m),p=Math.cos(m);return{rx:Math.abs(g)/Math.sqrt(b*p*p+h*d*p+u*d*d)||0,ry:Math.abs(g)/Math.sqrt(b*d*d-h*d*p+u*p*p)||0,angle:180*m/Math.PI||0,largeArcFlag:e.largeArcFlag,sweepFlag:0>g?!e.sweepFlag:e.sweepFlag}}(t,e)),{x:n,y:i}):{name:e.name,x:n,y:i}}}(e,t):be(t);return i.outputAsRelative=t.outputAsRelative,i.selected=t.selected,i}))}function me(t,e,...n){const i=t.map(le),o=n.map(le);return i.splice(e,0,...o),ue(i)}function de(t,e,n){const i=t[e],{outputAsRelative:o,selected:s}=i,a=Ot(i.prev),c=St(i.prev);if(bt(i))n.push({name:"A",rx:i.rx,ry:i.ry,angle:i.angle,largeArcFlag:i.largeArcFlag,sweepFlag:!i.sweepFlag,x:a,y:c,outputAsRelative:o,selected:s});else if(nt(i))n.push({name:"L",x:a,y:c,outputAsRelative:o,selected:s});else if(it(i))n.push({name:"H",x:a,outputAsRelative:o,selected:s});else if(ot(i))n.push({name:"V",y:c,outputAsRelative:o,selected:s});else if(at(i))i.next&&ct(i.next)?n.push({name:"S",x2:i.x1,y2:i.y1,x:a,y:c,outputAsRelative:o,selected:s}):n.push({name:"C",x1:i.x2,y1:i.y2,x2:i.x1,y2:i.y1,x:a,y:c,outputAsRelative:o,selected:s});else if(rt(i))i.next&&lt(i.next)?n.push({name:"T",x:a,y:c,outputAsRelative:o,selected:s}):n.push({name:"Q",x1:i.x1,y1:i.y1,x:a,y:c,outputAsRelative:o,selected:s});else if(ct(i))i.next&&ct(i.next)?n.push({name:"S",x2:Ft(i),y2:At(i),x:a,y:c,outputAsRelative:o,selected:s}):n.push({name:"C",x1:i.x2,y1:i.y2,x2:Ft(i),y2:At(i),x:a,y:c,outputAsRelative:o,selected:s});else if(lt(i))i.next&&lt(i.next)?n.push({name:"T",x:a,y:c,outputAsRelative:o,selected:s}):n.push({name:"Q",x1:Ft(i),y1:At(i),x:a,y:c,outputAsRelative:o,selected:s});else{const r=Ot(i),l=St(i);et(i)?(function(t,e){for(;e<t.length;){const n=t[e];if(st(n))return!0;if(et(n))return!1;e++}return!1}(t,e+1)&&n.push({name:"Z",outputAsRelative:o,selected:s}),!i.prev||r===a&&l===c||n.push({name:"M",x:a,y:c,outputAsRelative:i.prev.outputAsRelative,selected:i.prev.selected})):st(i)&&(r!==a?n.push(l!==c?{name:"L",x:a,y:c,outputAsRelative:o,selected:s}:{name:"H",x:a,outputAsRelative:o,selected:s}):l!==c&&n.push({name:"V",y:c,outputAsRelative:o,selected:s}))}}function pe(t){const e=[];let n=t.length;if(n>0){const i=t[n-1];for(e.push({name:"M",x:Ot(i),y:St(i),outputAsRelative:i.outputAsRelative,selected:i.selected});n-- >0;)de(t,n,e)}return ue(e)}function fe(t){return function(t){return it(t)||ot(t)}(t)||nt(t)||lt(t)}function xe(t){return fe(t)||rt(t)||ct(t)}var Ce=n("rDax"),ve=n("XhcP"),ye=n("/t3+"),Me=n("1jcm"),Te=n("7EHt"),Ue=n("d3UM"),ke=n("f0Cb"),Ie=n("FKr1");function we(t,e){if(1&t){const t=l.Vb();l.Ub(0,"button",5),l.bc("click",function(){l.sc(t);const n=e.index,i=l.fc().index;return l.fc().requestLocation(i,n)}),l.Ub(1,"mat-icon"),l.Bc(2),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit;l.Cb(2),l.Cc(t)}}function Oe(t,e){if(1&t&&(l.Ub(0,"div"),l.zc(1,we,3,1,"button",4),l.Tb()),2&t){const t=e.$implicit;l.Cb(1),l.lc("ngForOf",t)}}let Se=(()=>{class t{constructor(){this.disabled=!1,this.locationChange=new l.n,this.locationIcons=[["north_west","north","north_east"],["west","trip_origin","east"],["south_west","south","south_east"]]}ngOnInit(){}requestLocation(t,e){this.locationChange.emit(3*t+e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-location-adjuster"]],inputs:{disabled:"disabled"},outputs:{locationChange:"locationChange"},decls:7,vars:3,consts:[["mat-icon-button","",3,"matMenuTriggerFor","disabled"],["menu","matMenu"],[1,"location-adjuster-menu"],[4,"ngFor","ngForOf"],["mat-icon-button","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","",3,"click"]],template:function(t,e){if(1&t&&(l.Ub(0,"button",0),l.Ub(1,"mat-icon"),l.Bc(2,"pin_drop"),l.Tb(),l.Tb(),l.Ub(3,"mat-menu",null,1),l.Ub(5,"div",2),l.zc(6,Oe,2,1,"div",3),l.Tb(),l.Tb()),2&t){const t=l.qc(4);l.lc("matMenuTriggerFor",t)("disabled",e.disabled),l.Cb(6),l.lc("ngForOf",e.locationIcons)}},directives:[I.a,N.d,w.a,N.a,i.k],styles:[".location-adjuster-menu[_ngcontent-%COMP%]{padding:.5em}"]}),t})();function Pe(t,e){if(1&t&&(l.Ub(0,"mat-option",14),l.Bc(1),l.Tb()),2&t){const t=e.$implicit,n=l.fc();l.lc("value",t),l.Cb(1),l.Cc(n.transforms[t])}}function _e(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",15),l.Ub(1,"mat-form-field"),l.Ub(2,"mat-label"),l.Bc(3,"Horizontal \u2192 "),l.Ub(4,"span",16),l.Bc(5,"px"),l.Tb(),l.Tb(),l.Ub(6,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setTranslate(+e,n.translateY)}),l.Tb(),l.Tb(),l.Ub(7,"mat-form-field"),l.Ub(8,"mat-label"),l.Bc(9,"Vertical \u2193 "),l.Ub(10,"span",16),l.Bc(11,"px"),l.Tb(),l.Tb(),l.Ub(12,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setTranslate(n.translateX,+e)}),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.fc();l.Cb(6),l.lc("ngModel",t.translateX),l.Cb(6),l.lc("ngModel",t.translateY)}}function Be(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",18),l.Ub(1,"mat-form-field"),l.Ub(2,"mat-label"),l.Bc(3,"Width \u2194 "),l.Ub(4,"span",16),l.Bc(5,"%"),l.Tb(),l.Tb(),l.Ub(6,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setScale(+e,n.scaleProportionally?+e:n.scaleFactorY,n.scaleX,n.scaleY)}),l.Tb(),l.Tb(),l.Ub(7,"button",19),l.bc("click",function(){l.sc(t);const e=l.fc();return e.setScaleProportionally(!e.scaleProportionally)}),l.Ub(8,"mat-icon"),l.Bc(9),l.Tb(),l.Tb(),l.Ub(10,"mat-form-field"),l.Ub(11,"mat-label"),l.Bc(12,"Height \u2195 "),l.Ub(13,"span",16),l.Bc(14,"%"),l.Tb(),l.Tb(),l.Ub(15,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setScale(n.scaleProportionally?+e:n.scaleFactorX,+e,n.scaleX,n.scaleY)}),l.Tb(),l.Tb(),l.Ub(16,"mat-form-field"),l.Ub(17,"mat-label"),l.Bc(18,"Center x "),l.Ub(19,"span",16),l.Bc(20,"px"),l.Tb(),l.Tb(),l.Ub(21,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setScale(n.scaleFactorX,n.scaleFactorY,+e,n.scaleY)}),l.Tb(),l.Tb(),l.Ub(22,"app-location-adjuster",20),l.bc("locationChange",function(e){return l.sc(t),l.fc().setScaleOrigin(e)}),l.Tb(),l.Ub(23,"mat-form-field"),l.Ub(24,"mat-label"),l.Bc(25,"Center y "),l.Ub(26,"span",16),l.Bc(27,"px"),l.Tb(),l.Tb(),l.Ub(28,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setScale(n.scaleFactorX,n.scaleFactorY,n.scaleX,+e)}),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.fc();l.Cb(6),l.lc("ngModel",t.scaleFactorX),l.Cb(3),l.Cc(t.scaleProportionally?"lock":"lock_open"),l.Cb(6),l.lc("ngModel",t.scaleFactorY),l.Cb(6),l.lc("ngModel",t.scaleX),l.Cb(1),l.lc("disabled",!t.boundingRect),l.Cb(6),l.lc("ngModel",t.scaleY)}}function Fe(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",21),l.Ub(1,"mat-form-field"),l.Ub(2,"mat-label"),l.Bc(3,"Angle \u21b7 "),l.Ub(4,"span",16),l.Bc(5,"\xb0"),l.Tb(),l.Tb(),l.Ub(6,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setRotate(+e,n.rotateX,n.rotateY)}),l.Tb(),l.Tb(),l.Pb(7,"span",22),l.Ub(8,"mat-form-field"),l.Ub(9,"mat-label"),l.Bc(10,"Center x "),l.Ub(11,"span",16),l.Bc(12,"px"),l.Tb(),l.Tb(),l.Ub(13,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setRotate(n.rotateAngle,+e,n.rotateY)}),l.Tb(),l.Tb(),l.Ub(14,"app-location-adjuster",20),l.bc("locationChange",function(e){return l.sc(t),l.fc().setRotateOrigin(e)}),l.Tb(),l.Ub(15,"mat-form-field"),l.Ub(16,"mat-label"),l.Bc(17,"Center y "),l.Ub(18,"span",16),l.Bc(19,"px"),l.Tb(),l.Tb(),l.Ub(20,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setRotate(n.rotateAngle,n.rotateX,+e)}),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.fc();l.Cb(6),l.lc("ngModel",t.rotateAngle),l.Cb(7),l.lc("ngModel",t.rotateX),l.Cb(1),l.lc("disabled",!t.boundingRect),l.Cb(6),l.lc("ngModel",t.rotateY)}}function Ae(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",23),l.Ub(1,"mat-form-field"),l.Ub(2,"mat-label"),l.Bc(3,"Horizontal \u21c6 "),l.Ub(4,"span",16),l.Bc(5,"\xb0"),l.Tb(),l.Tb(),l.Ub(6,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setSkew(+e,n.skewYAngle,n.skewX,n.skewY)}),l.Tb(),l.Tb(),l.Ub(7,"mat-form-field"),l.Ub(8,"mat-label"),l.Bc(9,"Vertical \u21c5 "),l.Ub(10,"span",16),l.Bc(11,"\xb0"),l.Tb(),l.Tb(),l.Ub(12,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setSkew(n.skewXAngle,+e,n.skewX,n.skewY)}),l.Tb(),l.Tb(),l.Ub(13,"mat-form-field"),l.Ub(14,"mat-label"),l.Bc(15,"Center x "),l.Ub(16,"span",16),l.Bc(17,"px"),l.Tb(),l.Tb(),l.Ub(18,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setSkew(n.skewXAngle,n.skewYAngle,+e,n.skewY)}),l.Tb(),l.Tb(),l.Ub(19,"app-location-adjuster",20),l.bc("locationChange",function(e){return l.sc(t),l.fc().setSkewOrigin(e)}),l.Tb(),l.Ub(20,"mat-form-field"),l.Ub(21,"mat-label"),l.Bc(22,"Center y "),l.Ub(23,"span",16),l.Bc(24,"px"),l.Tb(),l.Tb(),l.Ub(25,"input",17),l.bc("ngModelChange",function(e){l.sc(t);const n=l.fc();return n.setSkew(n.skewXAngle,n.skewYAngle,n.skewX,+e)}),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.fc();l.Cb(6),l.lc("ngModel",t.skewXAngle),l.Cb(6),l.lc("ngModel",t.skewYAngle),l.Cb(6),l.lc("ngModel",t.skewX),l.Cb(1),l.lc("disabled",!t.boundingRect),l.Cb(6),l.lc("ngModel",t.skewY)}}function ze(t,e){if(1&t){const t=l.Vb();l.Ub(0,"mat-form-field"),l.Ub(1,"mat-label"),l.Bc(2),l.Tb(),l.Ub(3,"input",17),l.bc("ngModelChange",function(n){l.sc(t);const i=e.$implicit;return l.fc(2).setMatrix(i,+n)}),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit,n=l.fc(2);l.Cb(2),l.Dc("",t,":"),l.Cb(1),l.lc("ngModel",n.matrix[t])}}function Re(t,e){if(1&t&&(l.Ub(0,"div",24),l.zc(1,ze,4,2,"mat-form-field",25),l.Tb()),2&t){const t=l.fc();l.Cb(1),l.lc("ngForOf",t.matrixNames)}}const je={move:"Move",scale:"Scale",rotate:"Rotate",skew:"Skew",matrix:"Matrix"};let De=(()=>{class t{constructor(){this.transformChange=new l.n,this.preview=!1,this.selection="move",this.translateX=0,this.translateY=0,this.scaleFactorX=100,this.scaleFactorY=100,this.scaleX=0,this.scaleY=0,this.scaleProportionally=!1,this.skewXAngle=0,this.skewYAngle=0,this.skewX=0,this.skewY=0,this.rotateAngle=0,this.rotateX=0,this.rotateY=0,this.matrix={a:1,b:0,c:0,d:1,e:0,f:0},this.transforms=je,this.transformNames=Object.keys(je),this.matrixNames=Object.keys(this.matrix)}ngOnInit(){}updatePreview(){this.preview&&this.emitPreview()}setSelection(t){t!==this.selection&&(this.selection=t,this.updatePreview())}setTranslate(t,e){t===this.translateX&&e===this.translateY||(this.translateX=t,this.translateY=e,this.updatePreview())}setScale(t,e,n,i){t===this.scaleFactorX&&e===this.scaleFactorY&&n===this.scaleX&&i===this.scaleY||(this.scaleFactorX=t,this.scaleFactorY=e,this.scaleX=n,this.scaleY=i,this.updatePreview())}setScaleOrigin(t){if(this.boundingRect){const e=Ct(this.boundingRect,t);this.setScale(this.scaleFactorX,this.scaleFactorY,e.x,e.y)}}setSkew(t,e,n,i){t===this.skewXAngle&&e===this.skewYAngle&&n===this.skewX&&i===this.skewY||(this.skewXAngle=t,this.skewYAngle=e,this.skewX=n,this.skewY=i,this.updatePreview())}setSkewOrigin(t){if(this.boundingRect){const e=Ct(this.boundingRect,t);this.setSkew(this.skewXAngle,this.skewYAngle,e.x,e.y)}}setRotate(t,e,n){t===this.rotateAngle&&e===this.rotateX&&n===this.rotateY||(this.rotateAngle=t,this.rotateX=e,this.rotateY=n,this.updatePreview())}setRotateOrigin(t){if(this.boundingRect){const e=Ct(this.boundingRect,t);this.setRotate(this.rotateAngle,e.x,e.y)}}setMatrix(t,e){t in this.matrix&&this.matrix[t]!==e&&(this.matrix[t]=e,this.updatePreview())}emitTransform(){const t=this.getSelectedMatrix();U(t)&&(this.preview=!1,this.transformChange.emit({transformName:this.selection,matrix:t}))}emitPreview(){let t;if(this.preview){const e=this.getSelectedMatrix();U(e)&&(t=e)}this.transformChange.emit({transformName:this.selection,matrix:t,preview:!0})}getSelectedMatrix(){switch(this.selection){case"move":return{a:1,b:0,c:0,d:1,e:this.translateX,f:this.translateY};case"scale":return this.scaleX||this.scaleY?{a:i=this.scaleFactorX/100,b:0,c:0,d:o=this.scaleFactorY/100,e:this.scaleX*(1-i),f:this.scaleY*(1-o)}:function(t,e){return{a:t,b:0,c:0,d:e,e:0,f:0}}(this.scaleFactorX/100,this.scaleFactorY/100);case"skew":return this.skewX||this.skewY?function(t,e,n,i){const o=Math.tan(e),s=Math.tan(t);return{a:1,b:o,c:s,d:1,e:-s*i,f:-o*n}}(this.skewXAngle*Math.PI/180,this.skewYAngle*Math.PI/180,this.skewX,this.skewY):(e=this.skewXAngle*Math.PI/180,n=this.skewYAngle*Math.PI/180,{a:1,b:Math.tan(n),c:Math.tan(e),d:1,e:0,f:0});case"rotate":return this.rotateX||this.rotateY?function(t,e,n){const i=Math.cos(t),o=Math.sin(t);return{a:i,b:o,c:-o,d:i,e:(1-i)*e+o*n,f:(1-i)*n-o*e}}(this.rotateAngle*Math.PI/180,this.rotateX,this.rotateY):(t=this.rotateAngle*Math.PI/180,{a:Math.cos(t),b:Math.sin(t),c:-Math.sin(t),d:Math.cos(t),e:0,f:0})}var t,e,n,i,o;return Object.assign({},this.matrix)}setScaleProportionally(t){this.scaleProportionally=t,t&&this.setScale(this.scaleFactorX,this.scaleFactorX,this.scaleX,this.scaleY)}addTransform(){const t={a:(e=this.getSelectedMatrix()).a*(n=this.matrix).a+e.c*n.b,b:e.b*n.a+e.d*n.b,c:e.a*n.c+e.c*n.d,d:e.b*n.c+e.d*n.d,e:e.a*n.e+e.c*n.f+e.e,f:e.b*n.e+e.d*n.f+e.f};var e,n;U(t)&&(this.matrix=t),"matrix"!==this.selection?this.setSelection("matrix"):this.updatePreview()}clearTransform(){switch(this.selection){case"move":this.setTranslate(0,0);break;case"scale":this.setScale(100,100,0,0);break;case"skew":this.setSkew(0,0,0,0);break;case"rotate":this.setRotate(0,0,0);break;default:T(this.matrix)||(this.matrix={a:1,b:0,c:0,d:1,e:0,f:0},this.updatePreview())}}togglePreview(){this.preview=!this.preview,this.emitPreview()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-menu-transform"]],inputs:{boundingRect:"boundingRect"},outputs:{transformChange:"transformChange"},decls:28,vars:8,consts:[[1,"menu-transform-function"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","",3,"color","click"],["class","menu-transform-move",4,"ngIf"],["class","menu-transform-scale",4,"ngIf"],["class","menu-transform-angle",4,"ngIf"],["class","menu-transform-skew",4,"ngIf"],["class","menu-transform-matrix",4,"ngIf"],[2,"display","flex"],["mat-stroked-button","","color","warn",3,"click"],[1,"flex-space-filler-1"],["mat-stroked-button","",3,"click"],[3,"value"],[1,"menu-transform-move"],[1,"label-units"],["matInput","","type","number","step","any",3,"ngModel","ngModelChange"],[1,"menu-transform-scale"],["mat-icon-button","",3,"click"],[3,"disabled","locationChange"],[1,"menu-transform-angle"],[2,"flex-basis","100%"],[1,"menu-transform-skew"],[1,"menu-transform-matrix"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"mat-form-field"),l.Ub(2,"mat-label"),l.Bc(3,"Transform function"),l.Tb(),l.Ub(4,"mat-select",1),l.bc("valueChange",function(t){return e.setSelection(t)}),l.zc(5,Pe,2,2,"mat-option",2),l.Tb(),l.Tb(),l.Ub(6,"button",3),l.bc("click",function(){return e.emitTransform()}),l.Ub(7,"mat-icon"),l.Bc(8,"play_for_work"),l.Tb(),l.Bc(9,"Apply "),l.Tb(),l.Ub(10,"button",4),l.bc("click",function(){return e.togglePreview()}),l.Ub(11,"mat-icon"),l.Bc(12,"preview"),l.Tb(),l.Tb(),l.Tb(),l.zc(13,_e,13,2,"div",5),l.zc(14,Be,29,6,"div",6),l.zc(15,Fe,21,4,"div",7),l.zc(16,Ae,26,5,"div",8),l.zc(17,Re,2,1,"div",9),l.Ub(18,"div",10),l.Ub(19,"button",11),l.bc("click",function(){return e.clearTransform()}),l.Ub(20,"mat-icon"),l.Bc(21,"clear"),l.Tb(),l.Bc(22,"Clear "),l.Tb(),l.Pb(23,"span",12),l.Ub(24,"button",13),l.bc("click",function(){return e.addTransform()}),l.Ub(25,"mat-icon"),l.Bc(26,"functions"),l.Tb(),l.Bc(27,"Add To Matrix "),l.Tb(),l.Tb()),2&t&&(l.Cb(4),l.lc("value",e.selection),l.Cb(1),l.lc("ngForOf",e.transformNames),l.Cb(5),l.lc("color",e.preview?"accent":"primary"),l.Cb(3),l.lc("ngIf","move"===e.selection),l.Cb(1),l.lc("ngIf","scale"===e.selection),l.Cb(1),l.lc("ngIf","rotate"===e.selection),l.Cb(1),l.lc("ngIf","skew"===e.selection),l.Cb(1),l.lc("ngIf","matrix"===e.selection))},directives:[z.c,z.g,Ue.a,i.k,I.a,w.a,i.l,Ie.h,R.a,s.n,s.b,s.i,s.l,Se],styles:[".menu-transform-function[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.menu-transform-function[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{width:30%;flex-grow:1;margin-right:1em}.menu-transform-angle[_ngcontent-%COMP%], .menu-transform-matrix[_ngcontent-%COMP%], .menu-transform-move[_ngcontent-%COMP%], .menu-transform-scale[_ngcontent-%COMP%], .menu-transform-skew[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:8.5em}.menu-transform-angle[_ngcontent-%COMP%], .menu-transform-move[_ngcontent-%COMP%], .menu-transform-scale[_ngcontent-%COMP%], .menu-transform-skew[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between}.menu-transform-angle[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%], .menu-transform-move[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%], .menu-transform-scale[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%], .menu-transform-skew[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{max-width:40%}.menu-transform-matrix[_ngcontent-%COMP%]{flex-direction:column}.menu-transform-matrix[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{max-width:30%;flex:1 1 4em}.label-units[_ngcontent-%COMP%]{float:right}"]}),t})();var $e=n("dqHA");function Xe(t){return at(t)?`M${Ot(t.prev)} ${St(t.prev)}L${t.x1} ${t.y1}M${t.x2} ${t.y2}L${t.x} ${t.y}`:ct(t)?`M${t.x2} ${t.y2}L${t.x} ${t.y}`:`M${Ot(t.prev)} ${St(t.prev)}L${t.x1} ${t.y1}L${t.x} ${t.y}`}function Ne(t){return ct(t)?`M${Ot(t.prev)} ${St(t.prev)}L${Ft(t)} ${At(t)}`:`M${Ot(t.prev)} ${St(t.prev)}L${Ft(t)} ${At(t)}L${t.x} ${t.y}`}function Ve(t){const{cx:e,cy:n,phi:i}=zt(t),o=`M${t.x} ${t.y}L${e} ${n}L${Ot(t.prev)} ${St(t.prev)}`+pt(Object.assign(Object.assign({},t),{largeArcFlag:!t.largeArcFlag,sweepFlag:!t.sweepFlag}),-1),s=Math.cos(i),a=Math.sin(i);let c=s*t.rx,r=a*t.rx;const l=`M${e-c} ${n-r}l${2*c} ${2*r}`;return c=-a*t.ry,r=s*t.ry,o+l+`M${e-c} ${n-r}l${2*c} ${2*r}`}const Ye=["pathRef"];function Ee(t,e){if(1&t&&(l.ec(),l.Pb(0,"image",11)),2&t){const t=e.ngIf,n=l.fc();l.Db("visibility",n.backgroundImageVisibility)("width",n.backgroundImageZoom)("href",t)}}function Le(t,e){if(1&t){const t=l.Vb();l.ec(),l.Ub(0,"use",17),l.bc("mousedown",function(n){l.sc(t);const i=e.index;return l.fc(2).controlPointMouseDown(n,i)}),l.Tb()}if(2&t){const t=e.$implicit,n=l.fc(2);l.Db("visibility",n.getVisibility(t.item))("x",t.x)("y",t.y)}}function qe(t,e){if(1&t&&(l.ec(),l.Ub(0,"g"),l.Ub(1,"g",12),l.Pb(2,"path"),l.Pb(3,"path",13),l.Pb(4,"path",14),l.Pb(5,"path",13),l.Tb(),l.Ub(6,"g",15),l.zc(7,Le,1,3,"use",16),l.Tb(),l.Tb()),2&t){const t=l.fc();l.Cb(2),l.Db("d",t.curveControlHandles),l.Cb(1),l.Db("d",t.reflectedControlHandles),l.Cb(1),l.Db("d",t.pathTransformOrigin),l.Cb(1),l.Db("d",t.pathDragData)("stroke",t.settingsState.controlPointFillColor),l.Cb(1),l.Db("fill",t.settingsState.controlPointFillColor),l.Cb(1),l.lc("ngForOf",t.controls)("ngForTrackBy",t.trackByIndex)}}class Ge{constructor(t,e){this.itemIndex=t,this.item=e,this.type="move"}get x(){return Ot(this.item)}get y(){return St(this.item)}}class He{constructor(t,e){this.itemIndex=t,this.item=e,this.type="curve1"}get x(){return this.item.x1}get y(){return this.item.y1}}class Qe{constructor(t,e){this.itemIndex=t,this.item=e,this.type="curve2"}get x(){return this.item.x2}get y(){return this.item.y2}}let Ze=(()=>{class t{constructor(t,e,n,i){this.settings=t,this.background=e,this._archive=n,this._renderer2=i,this.controlDrag=new l.n,this.controls=[],this.settingsState=d,this.styles={},this._dragListener=new $e.a,this._subscriptions=[],this._items=[]}set pathItems(t){this._items=t,this._createControls()}get viewBox(){const t=this.settingsState;return`${t.xOffset} ${t.yOffset} ${t.width} ${t.height}`}get pathStrokeColor(){const t=this.settingsState;return t.isPathStroke?t.pathStrokeColor:"none"}get pathFillColor(){const t=this.settingsState;return t.isPathFill?t.pathFillColor:"none"}get pathSelectionColor(){return this.settingsState.controlPointFillColor}get pathData(){return this.format(this._items)}get pathSelectionData(){const t=[];for(const e of this._items)if(e.selected){const n=e.prev,i=!(null==n?void 0:n.selected);i&&t.push({name:"M",x:Ot(n),y:St(n)}),i&&ct(e)?t.push(Object.assign(Object.assign({},e),{name:"C",x1:Ft(e),y1:At(e)})):i&&lt(e)?t.push(Object.assign(Object.assign({},e),{name:"Q",x1:Ft(e),y1:At(e)})):st(e)||et(e)?t.push({name:"L",x:Ot(e),y:St(e)}):t.push(e)}return this.format(t)}get pathPreviewData(){const t=this.previewMatrix;return t&&!T(t)?this.format(ge(this._items,t)):""}get pathTransformOrigin(){let t="";if(this.previewMatrix){const e=function(t){const{b:e,c:n,e:i,f:o}=t,s=t.a-1,a=t.d-1,c=e*n-s*a;if(!Object(M.h)(c))return{x:(a*i-n*o)/(e*n-s*a),y:(s*o-e*i)/(e*n-s*a)};if(Object(M.h)(s)&&Object(M.h)(e))if(Object(M.h)(n)){if(!Object(M.h)(a))return{x:NaN,y:-o/a}}else if(Object(M.h)(a)){if(!Object(M.h)(n))return{x:NaN,y:-i/n}}else{const t=-i/n,e=-o/a;if(Object(M.g)(t,e))return{x:NaN,y:t}}if(Object(M.h)(n)&&Object(M.h)(a))if(Object(M.h)(s)){if(!Object(M.h)(e))return{x:-o/e,y:NaN}}else if(Object(M.h)(e)){if(!Object(M.h)(s))return{x:-i/s,y:NaN}}else{const t=-i/s,n=-o/e;if(Object(M.g)(t,n))return{x:t,y:NaN}}}(this.previewMatrix);if(e){const n=this.settingsState;isFinite(e.x)&&(t+=`M${e.x} ${n.yOffset}v${n.height}`),isFinite(e.y)&&(t+=`M${n.xOffset} ${e.y}h${n.width}`)}}return t}get pathDragData(){if(this._dragListener.isDragging){const{startX:t,startY:e}=this._dragListener.data,{x:n,y:i}=this._dragListener.data.point;if(t!==n||e!==i)return`M${t} ${e}L${n} ${i}m-3 0h6m-3-3v6`}return""}get backgroundImageVisibility(){return this.settingsState.isBackgroundImageHidden?"hidden":"visible"}get backgroundImageZoom(){return`${this.settingsState.backgroundImageZoom}%`}get curveControlHandles(){return this._items.filter(t=>at(t)||ct(t)||rt(t)).map(Xe).join("")}get reflectedControlHandles(){return this.getReflectedCurveTangentLines()+this.getReflectedEllipticalArcs()}get isDragging(){return this._dragListener.isDragging}get boundingRect(){const t=this.pathRef.nativeElement;if(t&&"function"==typeof t.getBBox){const e=t.getBBox();return{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height}}return re(ce(this.pathData))}ngOnInit(){this._subscriptions.push(this.settings.subscribe(t=>{this.settingsState=t,this.styles={width:`${(t.width*t.zoom/100).toFixed(2)}px`,height:`${(t.height*t.zoom/100).toFixed(2)}px`,"background-color":t.backgroundColor}})),this._subscriptions.push(this._dragListener.dragChange.subscribe(t=>{const e=this._dragListener.data,n=this.settingsState.zoom,i=e.startX+Math.round(100*this._dragListener.pageDeltaX/n)-e.point.x,o=e.startY+Math.round(100*this._dragListener.pageDeltaY/n)-e.point.y;this.controlDrag.emit(Object.assign(Object.assign({},e),{name:t,deltaX:i,deltaY:o}))}))}ngOnDestroy(){this._dragListener.stop();for(const t of this._subscriptions)t.unsubscribe();this._subscriptions.length=0}controlPointMouseDown(t,e){if(0!==t.button)return;const n=this.controls[e];this._dragListener.mouseStart(t,this._renderer2,{point:n,startX:n.x,startY:n.y})}onTouchStart(t,e){if(e&&t.targetTouches.length>0){const n=t.targetTouches[0],i=e.getBoundingClientRect(),o=this.getControlPointIndex(n.clientX-i.left,n.clientY-i.top);if(o>=0){const e=this.controls[o];this._dragListener.touchStart(t,{point:e,startX:e.x,startY:e.y})}}}onTouchStop(t){this._dragListener.isTouchDragging&&this._dragListener.stop(t)}onTouchMove(t){this._dragListener.isTouchDragging&&this._dragListener.touchMove(t)}getControlPointIndex(t,e){const{xOffset:n,yOffset:i,zoom:o}=this.settingsState,s=100*t/o+n,a=100*e/o+i;let c=this.controls.length;for(;c-- >0;){const t=this.controls[c],e=t.x-s,n=t.y-a;if(e*e+n*n<=25&&"visible"===this.getVisibility(t.item))break}return c}trackByIndex(t){return t}adjustViewBox(t=!1){setTimeout(()=>{const e=this.boundingRect;if(t)for(const t of this.controls)Tt(e,t.x,t.y);const n=this.settings.state.viewBoxPadding,i=Math.floor(e.left)-n,o=Math.floor(e.top)-n,s=Math.ceil(e.right)+n-i,a=Math.ceil(e.bottom)+n-o;s>0&&a>0&&this.settings.set({xOffset:i,yOffset:o,width:s,height:a})},1)}toArchive(){this._archive.next(this.viewBox,this.pathData)}format(t){const e=this.settingsState.maximumFractionDigits;return t.map(t=>pt(t,e)).join("")}getReflectedEllipticalArcs(){return this._items.filter(t=>bt(t)).map(Ve).join("")}getReflectedCurveTangentLines(){return this._items.filter(t=>ct(t)||lt(t)).map(Ne).join("")}getVisibility(t){return this.activeItem&&this.activeItem!==t?"hidden":"visible"}_createControls(){const t=[];for(let e=0;e<this._items.length;e++){const n=this._items[e];ht(n)&&t.push(new He(e,n)),ut(n)&&t.push(new Qe(e,n)),st(n)||t.push(new Ge(e,n))}this.controls=t}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(x),l.Ob(h),l.Ob(y),l.Ob(l.F))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-svg-view"]],viewQuery:function(t,e){if(1&t&&l.Gc(Ye,1),2&t){let t;l.pc(t=l.cc())&&(e.pathRef=t.first)}},inputs:{pathItems:"pathItems",activeItem:"activeItem",previewMatrix:"previewMatrix"},outputs:{controlDrag:"controlDrag"},decls:12,vars:16,consts:[[3,"ngStyle","touchstart","touchend","touchcancel","touchmove"],["svgRef",""],["id","filterBackgroundImage"],["in","SourceGraphic","type","matrix"],["id","circleControlPoint","cx","0","cy","0"],["x","0","y","0","filter","url(#filterBackgroundImage)",4,"ngIf"],["opacity","0.9","stroke-width","1"],["pathRef",""],["opacity","0.6","fill","none","stroke-dasharray","4 1","stroke-width","2"],["pointer-events","none","opacity","0.5","stroke-width","1","stroke-dasharray","2 1"],[4,"ngIf"],["x","0","y","0","filter","url(#filterBackgroundImage)"],["opacity","0.6","stroke-width","0.8","stroke","lightgrey","fill","none"],["stroke-dasharray","2"],["stroke-dasharray","10 4 2 4"],[1,"control-points"],["href","#circleControlPoint",3,"mousedown",4,"ngFor","ngForOf","ngForTrackBy"],["href","#circleControlPoint",3,"mousedown"]],template:function(t,e){if(1&t){const t=l.Vb();l.ec(),l.Ub(0,"svg",0,1),l.bc("touchstart",function(n){l.sc(t);const i=l.qc(1);return e.onTouchStart(n,i)})("touchend",function(t){return e.onTouchStop(t)})("touchcancel",function(t){return e.onTouchStop(t)})("touchmove",function(t){return e.onTouchMove(t)}),l.Ub(2,"defs"),l.Ub(3,"filter",2),l.Pb(4,"feColorMatrix",3),l.Tb(),l.Pb(5,"circle",4),l.Tb(),l.zc(6,Ee,1,3,"image",5),l.Pb(7,"path",6,7),l.Pb(9,"path",8),l.Pb(10,"path",9),l.zc(11,qe,8,8,"g",10),l.Tb()}2&t&&(l.Gb("dragging",e.isDragging),l.lc("ngStyle",e.styles),l.Db("viewBox",e.viewBox),l.Cb(4),l.Db("values",e.settings.imageColorMatrix),l.Cb(1),l.Db("r",e.settingsState.controlPointSize/2),l.Cb(1),l.lc("ngIf",e.background.imageData),l.Cb(1),l.Db("stroke",e.pathStrokeColor)("fill",e.pathFillColor)("d",e.pathData),l.Cb(2),l.Db("stroke",e.pathSelectionColor)("d",e.pathSelectionData),l.Cb(1),l.Db("stroke",e.pathStrokeColor)("fill",e.pathFillColor)("d",e.pathPreviewData),l.Cb(1),l.lc("ngIf",e.settingsState.isControlPoints))},directives:[i.m,i.l,i.k],styles:["svg[_ngcontent-%COMP%]{margin:1px;border:1px solid #fff;transition:width .2s ease-out,height .2s ease-out}svg[_ngcontent-%COMP%]   g.control-points[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{cursor:pointer;stroke:#000;stroke-opacity:.75;fill-opacity:.5}svg.dragging[_ngcontent-%COMP%]{cursor:none}svg.dragging[_ngcontent-%COMP%]   g.control-points[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{cursor:none;stroke:#f0f;stroke-opacity:.5;fill-opacity:0}"]}),t})();function We(t,e){if(1&t){const t=l.Vb();l.Ub(0,"span",6),l.bc("click",function(){l.sc(t);const n=e.index;return l.fc(2).onItemClick(n)}),l.Bc(1),l.Tb()}if(2&t){const t=e.$implicit;l.Gb("selected",t.selected),l.Cb(1),l.Cc(t.name)}}function Ke(t,e){if(1&t&&l.zc(0,We,2,3,"span",5),2&t){const t=l.fc();l.lc("ngForOf",t.items)("ngForTrackBy",t.trackByIndex)}}function Je(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div"),l.Ub(1,"span",6),l.bc("click",function(){return l.sc(t),l.fc().hideItems=!1}),l.Bc(2),l.Tb(),l.Tb()}if(2&t){const t=l.fc();l.Cb(1),l.Gb("selected",t.selectedCount===t.items.length),l.Cb(1),l.Dc("",t.items[0].name,"\u2026")}}function tn(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",7),l.bc("click",function(){l.sc(t);const e=l.fc();return e.hideItems=!e.hideItems}),l.Bc(1),l.Tb()}if(2&t){const t=l.fc();l.Cb(1),l.Dc(" ",t.hideItems?"\u2192":"\u2190","")}}let en=(()=>{class t{constructor(){this.hideItems=!0}get selectedCount(){let t=0;for(const e of this.items)e.selected&&t++;return t}ngOnInit(){}onItemClick(t){const e=this.items[t];e&&(e.selected=!e.selected)}setAll(t){for(const e of this.items)e.selected=t}trackByIndex(t){return t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-path-group"]],inputs:{items:"items"},decls:6,vars:5,consts:[["templatePathItems",""],[1,"path-group"],[2,"margin-right","0.5em",3,"checked","indeterminate","change"],[4,"ngIf","ngIfElse"],["style","cursor: pointer; margin-left: 0.05em",3,"click",4,"ngIf"],[3,"selected","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],[2,"cursor","pointer","margin-left","0.05em",3,"click"]],template:function(t,e){if(1&t&&(l.zc(0,Ke,1,2,"ng-template",null,0,l.Ac),l.Ub(2,"div",1),l.Ub(3,"mat-checkbox",2),l.bc("change",function(t){return e.setAll(t.checked)}),l.Tb(),l.zc(4,Je,3,3,"div",3),l.zc(5,tn,2,1,"div",4),l.Tb()),2&t){const t=l.qc(1);l.Cb(3),l.lc("checked",e.selectedCount===e.items.length)("indeterminate",e.selectedCount>0&&e.selectedCount!==e.items.length),l.Cb(1),l.lc("ngIf",e.hideItems&&e.items.length>1)("ngIfElse",t),l.Cb(1),l.lc("ngIf",e.items.length>1)}},directives:[j.a,i.l,i.k],styles:[".path-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.path-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;min-width:1.125em;height:1.125em;text-align:center}.path-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#00f;-webkit-text-decoration:underline #00f;text-decoration:underline #00f}.path-group[_ngcontent-%COMP%]   span.selected[_ngcontent-%COMP%]{color:#00c;background-color:#ff0;text-transform:lowercase}"]}),t})(),nn=(()=>{class t{constructor(){this.inputChange=new l.n}get path(){return te(this.item,this.maximumFractionDigits)}get info(){return`${gt[this.item.name]}`}get dx(){return this.item.outputAsRelative?Ot(this.item.prev):0}get dy(){return this.item.outputAsRelative?St(this.item.prev):0}get x(){return Ot(this.item)-this.dx}get y(){return St(this.item)-this.dy}get x1(){return ht(this.item)?this.item.x1-this.dx:ct(this.item)||lt(this.item)?Ft(this.item)-this.dx:0}get y1(){return ht(this.item)?this.item.y1-this.dy:ct(this.item)||lt(this.item)?At(this.item)-this.dy:0}get x2(){return ut(this.item)?this.item.x2-this.dx:0}get y2(){return ut(this.item)?this.item.y2-this.dy:0}get rx(){return bt(this.item)?this.item.rx:0}get ry(){return bt(this.item)?this.item.ry:0}get angle(){return bt(this.item)?this.item.angle:0}get largeArcFlag(){return!!bt(this.item)&&this.item.largeArcFlag}get sweepFlag(){return!!bt(this.item)&&this.item.sweepFlag}get hasX(){return!(st(this.item)||ot(this.item))}get hasY(){return!(st(this.item)||it(this.item))}get isBezierCurve(){return at(t=this.item)||ct(t)||rt(t)||lt(t);var t}get hasControlPoint1(){return ht(this.item)}get hasControlPoint2(){return ut(this.item)}get isEllipticalArc(){return bt(this.item)}get isRelative(){return this.item.outputAsRelative}ngOnInit(){}setRelative(t){this.item.outputAsRelative!==t&&(this.item.outputAsRelative=t,this.inputChange.emit({name:"outputAsRelative",value:t}))}setX(t){st(this.item)||ot(this.item)||this.item.x!==(t+=this.dx)&&(this.item.x=t,this.inputChange.emit({name:"x",value:t}))}setY(t){st(this.item)||it(this.item)||this.item.y!==(t+=this.dy)&&(this.item.y=t,this.inputChange.emit({name:"y",value:t}))}setX1(t){ht(this.item)&&this.item.x1!==(t+=this.dx)&&(this.item.x1=t,this.inputChange.emit({name:"x1",value:t}))}setY1(t){ht(this.item)&&this.item.y1!==(t+=this.dy)&&(this.item.y1=t,this.inputChange.emit({name:"y1",value:t}))}setX2(t){ut(this.item)&&this.item.x2!==(t+=this.dx)&&(this.item.x2=t,this.inputChange.emit({name:"x2",value:t}))}setY2(t){ut(this.item)&&this.item.y2!==(t+=this.dy)&&(this.item.y2=t,this.inputChange.emit({name:"y2",value:t}))}setRx(t){bt(this.item)&&this.item.rx!==t&&t>0&&(this.item.rx=t,this.inputChange.emit({name:"rx",value:t}))}setRy(t){bt(this.item)&&this.item.ry!==t&&t>0&&(this.item.ry=t,this.inputChange.emit({name:"ry",value:t}))}setAngle(t){bt(this.item)&&this.item.angle!==t&&(this.item.angle=t,this.inputChange.emit({name:"angle",value:t}))}setLargeArcFlag(t){bt(this.item)&&this.item.largeArcFlag!==t&&(this.item.largeArcFlag=t,this.inputChange.emit({name:"largeArcFlag",value:t}))}setSweepFlag(t){bt(this.item)&&this.item.sweepFlag!==t&&(this.item.sweepFlag=t,this.inputChange.emit({name:"sweepFlag",value:t}))}format(t){return Object(M.f)(t,this.maximumFractionDigits)}getFormatted(t){return this.format(this[t])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-path-item"]],inputs:{item:"item",maximumFractionDigits:"maximumFractionDigits"},outputs:{inputChange:"inputChange"},decls:58,vars:30,consts:[[1,"path-item-info"],[2,"float","right",3,"checked","change"],[1,"path-item-data"],[1,"path-item-group"],["matInput","","type","number","min","0","step","any",3,"ngModel","ngModelChange"],["matInput","","type","number","step","any",3,"ngModel","ngModelChange"],[3,"checked","change"],["matInput","","type","number","step","any",3,"disabled","ngModel","ngModelChange"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Bc(1),l.Ub(2,"mat-checkbox",1),l.bc("change",function(t){return e.setRelative(t.checked)}),l.Bc(3," Relative "),l.Tb(),l.Tb(),l.Ub(4,"div",2),l.Bc(5),l.Tb(),l.Ub(6,"div",3),l.Ub(7,"div"),l.Bc(8,"Ellipse Shape:"),l.Tb(),l.Ub(9,"mat-form-field"),l.Ub(10,"mat-label"),l.Bc(11,"rx"),l.Tb(),l.Ub(12,"input",4),l.bc("ngModelChange",function(t){return e.setRx(+t)}),l.Tb(),l.Tb(),l.Ub(13,"mat-form-field"),l.Ub(14,"mat-label"),l.Bc(15,"ry"),l.Tb(),l.Ub(16,"input",4),l.bc("ngModelChange",function(t){return e.setRy(+t)}),l.Tb(),l.Tb(),l.Ub(17,"mat-form-field"),l.Ub(18,"mat-label"),l.Bc(19,"angle \u21b7"),l.Tb(),l.Ub(20,"input",5),l.bc("ngModelChange",function(t){return e.setAngle(+t)}),l.Tb(),l.Tb(),l.Ub(21,"mat-checkbox",6),l.bc("change",function(t){return e.setLargeArcFlag(t.checked)}),l.Bc(22,"Large "),l.Tb(),l.Ub(23,"mat-checkbox",6),l.bc("change",function(t){return e.setSweepFlag(t.checked)}),l.Bc(24,"Sweep"),l.Tb(),l.Tb(),l.Ub(25,"div",3),l.Ub(26,"div"),l.Bc(27,"First Control Point:"),l.Tb(),l.Ub(28,"mat-form-field"),l.Ub(29,"mat-label"),l.Bc(30),l.Tb(),l.Ub(31,"input",7),l.bc("ngModelChange",function(t){return e.setX1(+t)}),l.Tb(),l.Tb(),l.Ub(32,"mat-form-field"),l.Ub(33,"mat-label"),l.Bc(34),l.Tb(),l.Ub(35,"input",7),l.bc("ngModelChange",function(t){return e.setY1(+t)}),l.Tb(),l.Tb(),l.Tb(),l.Ub(36,"div",3),l.Ub(37,"div"),l.Bc(38,"Second Control Point:"),l.Tb(),l.Ub(39,"mat-form-field"),l.Ub(40,"mat-label"),l.Bc(41),l.Tb(),l.Ub(42,"input",5),l.bc("ngModelChange",function(t){return e.setX2(+t)}),l.Tb(),l.Tb(),l.Ub(43,"mat-form-field"),l.Ub(44,"mat-label"),l.Bc(45),l.Tb(),l.Ub(46,"input",5),l.bc("ngModelChange",function(t){return e.setY2(+t)}),l.Tb(),l.Tb(),l.Tb(),l.Ub(47,"div",3),l.Ub(48,"div"),l.Bc(49,"Stop Point:"),l.Tb(),l.Ub(50,"mat-form-field"),l.Ub(51,"mat-label"),l.Bc(52),l.Tb(),l.Ub(53,"input",7),l.bc("ngModelChange",function(t){return e.setX(+t)}),l.Tb(),l.Tb(),l.Ub(54,"mat-form-field"),l.Ub(55,"mat-label"),l.Bc(56),l.Tb(),l.Ub(57,"input",7),l.bc("ngModelChange",function(t){return e.setY(+t)}),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(1),l.Dc(" ",e.info," "),l.Cb(1),l.lc("checked",e.isRelative),l.Cb(3),l.Cc(e.path),l.Cb(1),l.Gb("hidden",!e.isEllipticalArc),l.Cb(6),l.lc("ngModel",e.getFormatted("rx")),l.Cb(4),l.lc("ngModel",e.getFormatted("ry")),l.Cb(4),l.lc("ngModel",e.getFormatted("angle")),l.Cb(1),l.lc("checked",e.largeArcFlag),l.Cb(2),l.lc("checked",e.sweepFlag),l.Cb(2),l.Gb("hidden",!e.isBezierCurve),l.Cb(5),l.Cc(e.item.outputAsRelative?"dx1":"x1"),l.Cb(1),l.lc("disabled",!e.hasControlPoint1)("ngModel",e.getFormatted("x1")),l.Cb(3),l.Cc(e.item.outputAsRelative?"dy1":"y1"),l.Cb(1),l.lc("disabled",!e.hasControlPoint1)("ngModel",e.getFormatted("y1")),l.Cb(1),l.Gb("hidden",!e.hasControlPoint2),l.Cb(5),l.Cc(e.item.outputAsRelative?"dx2":"x2"),l.Cb(1),l.lc("ngModel",e.getFormatted("x2")),l.Cb(3),l.Cc(e.item.outputAsRelative?"dy2":"y2"),l.Cb(1),l.lc("ngModel",e.getFormatted("y2")),l.Cb(6),l.Cc(e.item.outputAsRelative?"dx":"x"),l.Cb(1),l.lc("disabled",!e.hasX)("ngModel",e.getFormatted("x")),l.Cb(3),l.Cc(e.item.outputAsRelative?"dy":"y"),l.Cb(1),l.lc("disabled",!e.hasY)("ngModel",e.getFormatted("y")))},directives:[j.a,z.c,z.g,R.a,s.n,s.b,s.i,s.l],styles:[".path-item-info[_ngcontent-%COMP%]{padding-top:8px}.path-item-data[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.25);margin-bottom:1em}.path-item-group.hidden[_ngcontent-%COMP%]{display:none}.path-item-group[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{max-width:40%}.path-item-group[_ngcontent-%COMP%] > mat-checkbox[_ngcontent-%COMP%]:nth-of-type(odd), .path-item-group[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]:nth-of-type(odd){margin-right:1em}"]}),t})();var on=n("jaxi");function sn(t,e){if(1&t){const t=l.Vb();l.Ub(0,"mat-button-toggle",12),l.bc("click",function(){l.sc(t);const n=e.$implicit;return l.fc(2).zoom=n.value}),l.Bc(1),l.Tb()}if(2&t){const t=e.$implicit;l.lc("value",t.value),l.Cb(1),l.Dc("",t.label," ")}}function an(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",8),l.Ub(1,"mat-form-field"),l.Ub(2,"mat-label"),l.Bc(3,"%"),l.Tb(),l.Ub(4,"input",9),l.bc("ngModelChange",function(e){return l.sc(t),l.fc().zoom=e}),l.Tb(),l.Tb(),l.Ub(5,"mat-button-toggle-group",10),l.zc(6,sn,2,2,"mat-button-toggle",11),l.Tb(),l.Tb()}if(2&t){const t=l.fc();l.Cb(4),l.lc("ngModel",t.zoom),l.Cb(1),l.lc("value",t.zoom),l.Cb(1),l.lc("ngForOf",t.zooms)}}function cn(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",13),l.Ub(1,"p"),l.Bc(2,"The position and dimension, in user space, of an SVG viewport."),l.Tb(),l.Ub(3,"mat-form-field"),l.Ub(4,"mat-label"),l.Bc(5,"x:"),l.Tb(),l.Ub(6,"input",14),l.bc("ngModelChange",function(e){return l.sc(t),l.fc().settings.set({xOffset:+e})}),l.Tb(),l.Tb(),l.Ub(7,"mat-form-field"),l.Ub(8,"mat-label"),l.Bc(9,"y:"),l.Tb(),l.Ub(10,"input",14),l.bc("ngModelChange",function(e){return l.sc(t),l.fc().settings.set({yOffset:+e})}),l.Tb(),l.Tb(),l.Ub(11,"mat-form-field"),l.Ub(12,"mat-label"),l.Bc(13,"width:"),l.Tb(),l.Ub(14,"input",14),l.bc("ngModelChange",function(e){return l.sc(t),l.fc().settings.set({width:+e})}),l.Tb(),l.Tb(),l.Ub(15,"mat-form-field"),l.Ub(16,"mat-label"),l.Bc(17,"height:"),l.Tb(),l.Ub(18,"input",14),l.bc("ngModelChange",function(e){return l.sc(t),l.fc().settings.set({height:+e})}),l.Tb(),l.Tb(),l.Ub(19,"button",15),l.bc("click",function(){return l.sc(t),l.fc().requestSmallestViewBox.emit(!1)}),l.Ub(20,"mat-icon"),l.Bc(21,"border_outer"),l.Tb(),l.Bc(22,"Fit In "),l.Tb(),l.Ub(23,"button",15),l.bc("click",function(){return l.sc(t),l.fc().requestSmallestViewBox.emit(!0)}),l.Ub(24,"mat-icon"),l.Bc(25,"border_inner"),l.Tb(),l.Bc(26,"Fit Controls "),l.Tb(),l.Ub(27,"mat-form-field"),l.Ub(28,"mat-label"),l.Bc(29,"padding:"),l.Tb(),l.Ub(30,"input",14),l.bc("ngModelChange",function(e){return l.sc(t),l.fc().settings.set({viewBoxPadding:+e})}),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.fc();l.Cb(6),l.lc("ngModel",t.settings.state.xOffset),l.Cb(4),l.lc("ngModel",t.settings.state.yOffset),l.Cb(4),l.lc("ngModel",t.settings.state.width),l.Cb(4),l.lc("ngModel",t.settings.state.height),l.Cb(12),l.lc("ngModel",t.settings.state.viewBoxPadding)}}function rn(t,e){if(1&t&&(l.Ub(0,"mat-option",10),l.Bc(1),l.Tb()),2&t){const t=e.$implicit;l.lc("value",t),l.Cb(1),l.Cc(t)}}function ln(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",16),l.Ub(1,"mat-form-field"),l.Ub(2,"mat-label"),l.Bc(3,"Color"),l.Tb(),l.Ub(4,"input",17),l.bc("ngModelChange",function(e){return l.sc(t),l.fc().settings.set({backgroundColor:e})}),l.Tb(),l.Tb(),l.Ub(5,"div"),l.Ub(6,"label"),l.Ub(7,"mat-icon"),l.Bc(8,"photo_library"),l.Tb(),l.Bc(9,"Upload image: "),l.Ub(10,"input",18),l.bc("change",function(e){return l.sc(t),l.fc().background.loadImage(e)}),l.Tb(),l.Tb(),l.Tb(),l.Ub(11,"div"),l.Ub(12,"mat-form-field"),l.Ub(13,"mat-label"),l.Bc(14,"width (%):"),l.Tb(),l.Ub(15,"input",19),l.bc("ngModelChange",function(e){return l.sc(t),l.fc().settings.set({backgroundImageZoom:+e})}),l.Tb(),l.Tb(),l.Tb(),l.Ub(16,"div"),l.Ub(17,"mat-slide-toggle",2),l.bc("ngModelChange",function(e){return l.sc(t),l.fc().settings.set({isBackgroundImageHidden:e})}),l.Bc(18,"Hide"),l.Tb(),l.Tb(),l.Ub(19,"div"),l.Ub(20,"mat-form-field"),l.Ub(21,"mat-label"),l.Bc(22,"Color Matrix"),l.Tb(),l.Ub(23,"mat-select",20),l.bc("valueChange",function(e){return l.sc(t),l.fc().settings.set({backgroundImageColorMatrixName:e})}),l.zc(24,rn,2,2,"mat-option",21),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.fc();l.Cb(4),l.lc("ngModel",t.settings.state.backgroundColor),l.Cb(6),l.lc("multiple",!1),l.Cb(5),l.lc("ngModel",t.settings.state.backgroundImageZoom),l.Cb(2),l.lc("ngModel",t.settings.state.isBackgroundImageHidden),l.Cb(6),l.lc("value",t.settings.state.backgroundImageColorMatrixName),l.Cb(1),l.lc("ngForOf",t.imageColorMatrixNames)}}let bn=(()=>{class t{constructor(t,e){this.settings=t,this.background=e,this.requestSmallestViewBox=new l.n,this.tabSelection=0,this.zooms=[{label:"1:4",value:25},{label:"1:2",value:50},{label:"1:1",value:100},{label:"2:1",value:200},{label:"4:1",value:400}],this.controlPointMinSize=p.controlPointSize,this.controlPointMaxSize=f.controlPointSize,this.imageColorMatrixNames=Object.keys(g)}get zoom(){return this.settings.state.zoom}set zoom(t){this.settings.set({zoom:t})}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(x),l.Ob(h))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-menu-view"]],outputs:{requestSmallestViewBox:"requestSmallestViewBox"},decls:24,vars:16,consts:[[1,"menu-view-path"],["matInput","","type","color","placeholder","color",3,"disabled","ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["label","Control point size",3,"min","max","selection","selectionChange"],["items","Zoom|Viewbox|Background",3,"selection","selectionChange"],["class","menu-view-zoom",4,"ngIf"],["class","menu-view-viewbox",4,"ngIf"],["class","menu-view-background",4,"ngIf"],[1,"menu-view-zoom"],["matInput","","name","fZoom","type","number","step","any","min","25","max","400",3,"ngModel","ngModelChange"],[3,"value"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],[1,"menu-view-viewbox"],["matInput","","type","number","step","any",3,"ngModel","ngModelChange"],["mat-stroked-button","",3,"click"],[1,"menu-view-background"],["matInput","","type","color","placeholder","color",3,"ngModel","ngModelChange"],["type","file","placeholder","file...",3,"multiple","change"],["matInput","","type","number","min","1","step","any",3,"ngModel","ngModelChange"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"mat-form-field"),l.Ub(2,"mat-label"),l.Bc(3,"Color"),l.Tb(),l.Ub(4,"input",1),l.bc("ngModelChange",function(t){return e.settings.set({pathStrokeColor:t})}),l.Tb(),l.Tb(),l.Ub(5,"mat-slide-toggle",2),l.bc("ngModelChange",function(t){return e.settings.set({isPathStroke:t})}),l.Bc(6," Path Stroke "),l.Tb(),l.Ub(7,"mat-form-field"),l.Ub(8,"mat-label"),l.Bc(9,"Color"),l.Tb(),l.Ub(10,"input",1),l.bc("ngModelChange",function(t){return e.settings.set({pathFillColor:t})}),l.Tb(),l.Tb(),l.Ub(11,"mat-slide-toggle",2),l.bc("ngModelChange",function(t){return e.settings.set({isPathFill:t})}),l.Bc(12," Path Fill "),l.Tb(),l.Ub(13,"mat-form-field"),l.Ub(14,"mat-label"),l.Bc(15,"Color"),l.Tb(),l.Ub(16,"input",1),l.bc("ngModelChange",function(t){return e.settings.set({controlPointFillColor:t})}),l.Tb(),l.Tb(),l.Ub(17,"mat-slide-toggle",2),l.bc("ngModelChange",function(t){return e.settings.set({isControlPoints:t})}),l.Bc(18,"Control Points"),l.Tb(),l.Ub(19,"app-index-selector",3),l.bc("selectionChange",function(t){return e.settings.set({controlPointSize:+t})}),l.Tb(),l.Tb(),l.Ub(20,"app-tab-group",4),l.bc("selectionChange",function(t){return e.tabSelection=t}),l.zc(21,an,7,3,"div",5),l.zc(22,cn,31,5,"div",6),l.zc(23,ln,25,6,"div",7),l.Tb()),2&t&&(l.Cb(4),l.lc("disabled",!e.settings.state.isPathStroke)("ngModel",e.settings.state.pathStrokeColor),l.Cb(1),l.lc("ngModel",e.settings.state.isPathStroke),l.Cb(5),l.lc("disabled",!e.settings.state.isPathFill)("ngModel",e.settings.state.pathFillColor),l.Cb(1),l.lc("ngModel",e.settings.state.isPathFill),l.Cb(5),l.lc("disabled",!e.settings.state.isControlPoints)("ngModel",e.settings.state.controlPointFillColor),l.Cb(1),l.lc("ngModel",e.settings.state.isControlPoints),l.Cb(2),l.lc("min",e.controlPointMinSize)("max",e.controlPointMaxSize)("selection",e.settings.state.controlPointSize),l.Cb(1),l.lc("selection",e.tabSelection),l.Cb(1),l.lc("ngIf",0===e.tabSelection),l.Cb(1),l.lc("ngIf",1===e.tabSelection),l.Cb(1),l.lc("ngIf",2===e.tabSelection))},directives:[z.c,z.g,R.a,s.b,s.i,s.l,Me.a,X,O.a,i.l,s.n,on.b,i.k,on.a,I.a,w.a,Ue.a,Ie.h],styles:["div.menu-view-path[_ngcontent-%COMP%]{margin-bottom:1em}div.menu-view-path[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{max-width:40%;margin-right:1em}div.menu-view-path[_ngcontent-%COMP%] > mat-slide-toggle[_ngcontent-%COMP%]{min-width:50%}div.menu-view-path[_ngcontent-%COMP%] > mat-slide-toggle[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.04)}div.menu-view-background[_ngcontent-%COMP%], div.menu-view-viewbox[_ngcontent-%COMP%], div.menu-view-zoom[_ngcontent-%COMP%]{padding:12px 16px}div.menu-view-viewbox[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%], div.menu-view-zoom[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{max-width:40%;margin-right:1em}div.menu-view-viewbox[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-top:1em}div.menu-view-background[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-top:1em}"]}),t})();function hn(t,e){1&t&&l.Pb(0,"app-path-group",45),2&t&&l.lc("items",e.$implicit)}function un(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div"),l.Ub(1,"div",39),l.Ub(2,"mat-checkbox",40),l.bc("change",function(e){return l.sc(t),l.fc().onSelectAll(e.checked)}),l.Bc(3,"Select All"),l.Tb(),l.Pb(4,"span",3),l.Ub(5,"button",41),l.bc("click",function(){return l.sc(t),l.fc().onInvertSelection()}),l.Ub(6,"mat-icon"),l.Bc(7,"swap_horiz"),l.Tb(),l.Tb(),l.Ub(8,"button",42),l.bc("click",function(){return l.sc(t),l.fc().onSelectAll(!1)}),l.Ub(9,"mat-icon"),l.Bc(10,"clear"),l.Tb(),l.Tb(),l.Tb(),l.Ub(11,"div",43),l.zc(12,hn,1,1,"app-path-group",44),l.Tb(),l.Tb()}if(2&t){const t=l.fc();l.Cb(2),l.lc("checked",t.isAllSelected)("indeterminate",t.isSomeSelected),l.Cb(6),l.lc("disabled",!t.hasSelection),l.Cb(4),l.lc("ngForOf",t.groups)("ngForTrackBy",t.trackByIndex)}}function gn(t,e){if(1&t){const t=l.Vb();l.Ub(0,"app-path-item",49),l.bc("inputChange",function(){return l.sc(t),l.fc(2).onSingleParameterChange()}),l.Tb()}if(2&t){const t=e.ngIf,n=l.fc(2);l.lc("item",t)("maximumFractionDigits",n.settings.state.maximumFractionDigits)}}function mn(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",46),l.Ub(1,"app-index-selector",47),l.bc("selectionChange",function(e){return l.sc(t),l.fc().onSingleSelectionChange(e-1)}),l.Tb(),l.zc(2,gn,1,2,"app-path-item",48),l.Tb()}if(2&t){const t=l.fc();l.Cb(1),l.lc("min",1)("max",t.path.length)("selection",t.firstSelectionIndex+1),l.Cb(1),l.lc("ngIf",t.activeItem)}}function dn(t,e){if(1&t&&(l.Ub(0,"mat-option",50),l.Bc(1),l.Tb()),2&t){const t=e.index;l.lc("value",t),l.Cb(1),l.Cc(t)}}function pn(t,e){if(1&t){const t=l.Vb();l.Ub(0,"button",28),l.bc("click",function(){l.sc(t);const n=e.$implicit;return l.fc().onAppend(n)}),l.Bc(1),l.Tb()}if(2&t){const t=e.$implicit,n=l.fc();l.Cb(1),l.Cc(t+": "+n.commandNames[t])}}function fn(t,e){if(1&t&&(l.Ub(0,"button",29),l.Bc(1),l.Tb()),2&t){const t=l.fc(),e=l.qc(81);l.lc("matMenuTriggerFor",e),l.Cb(1),l.Dc("Edit ",t.selectMode,"")}}function xn(t,e){if(1&t){const t=l.Vb();l.Ub(0,"app-menu-view",51),l.bc("requestSmallestViewBox",function(e){return l.sc(t),l.fc(),l.qc(126).adjustViewBox(e)}),l.Tb(),l.Ub(1,"button",52),l.bc("click",function(){l.sc(t);const e=l.fc();return e.settings.set({darkMode:!e.settings.state.darkMode})}),l.Ub(2,"mat-icon"),l.Bc(3),l.Tb(),l.Ub(4,"span"),l.Bc(5,"MODE"),l.Tb(),l.Tb()}if(2&t){const t=l.fc();l.Cb(3),l.Cc(t.settings.state.darkMode?"brightness_3":"brightness_7")}}function Cn(t,e){if(1&t){const t=l.Vb();l.Ub(0,"button",53),l.bc("click",function(){return l.sc(t),l.fc().settings.set({sidenavClosed:!1})}),l.Ub(1,"mat-icon"),l.Bc(2,"double_arrow"),l.Tb(),l.Tb()}}const vn={M:[25,25],L:[25,25],H:[25],V:[25],Z:[],C:[25,0,0,25,25,25],S:[0,25,25,25],Q:[25,0,25,25],T:[25,25],A:[25,25,0,0,0,25,25]};function yn(t){return t.replace(/\s*([MLHVZCSQTA])\s*/gim,"$1").replace(/\s+(\-)/gim,"$1")}const Mn=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o){this.settings=t,this.history=e,this.background=n,this._dialog=i,this._overlayContainer=o,this.editMode=0,this.singleSelectionIndex=0,this.groupSelectionIndices=[],this.path=[],this.pathInput="",this.decimalFormats=m,this.commandNames=gt,this.commands=Object.keys(gt)}get activeItem(){return this.path[this.firstSelectionIndex]}get selectMode(){const t=Et(this.path);return 1===t?"Single Item":0===t||t===this.path.length?"All":"Selection"}get isAllSelected(){return Qt(this.path)}get isSomeSelected(){return Zt(this.path)}get groups(){return function(t){const e=[];let n;for(const i of t)n&&"M"!==i.name?n.push(i):(n&&e.push(n),n=[i]),"Z"===i.name&&(e.push(n),n=void 0);return n&&e.push(n),e}(this.path)}get firstSelectionIndex(){return qt(this.path)}get hasArc(){const t=!Ht(this.path);return!!this.path.find(e=>(t||e.selected)&&bt(e))}get hasSelection(){return Ht(this.path)}get canPromoteToCurve(){const t=!Ht(this.path);return!!this.path.find(e=>(t||e.selected)&&xe(e))}get canPromoteToQCurve(){const t=!Ht(this.path);return!!this.path.find(e=>(t||e.selected)&&fe(e))}get selectionBoundingRect(){const t=this.path;return t.length>0?re(t,Ht(t)):void 0}onDrag(t){if("DragMove"===t.name)switch(t.point.type){case"curve1":!function(t,e,n,i){const o=t[e];o&&(0!==n||0!==i)&&ht(o)&&(o.x1+=n,o.y1+=i)}(this.path,t.point.itemIndex,t.deltaX,t.deltaY);break;case"curve2":!function(t,e,n,i){const o=t[e];o&&(0!==n||0!==i)&&ut(o)&&(o.x2+=n,o.y2+=i)}(this.path,t.point.itemIndex,t.deltaX,t.deltaY);break;case"move":!function(t,e,n,i){const o=t[e];if(o&&(0!==n||0!==i))if(o.selected){const s=Ot(o),a=St(o);if(ft(o,n,i),n=Ot(o)-s,i=St(o)-a,0!==n||0!==i)for(let o=e+1;o<t.length;o++){const e=t[o];e.selected&&ft(e,n,i)}}else!function(t,e,n){st(t)||(ot(t)||(t.x+=e),it(t)||(t.y+=n))}(o,n,i)}(this.path,t.point.itemIndex,t.deltaX,t.deltaY)}else"DragStop"===t.name&&(t.startX===t.point.x&&t.startY===t.point.y||this.onPathModelChange("transform"))}selectTab(t){if(t!==this.editMode)switch(1===this.editMode?this.groupSelectionIndices=Lt(this.path):2===this.editMode&&(this.singleSelectionIndex=this.firstSelectionIndex),t){case 0:Kt(this.path,!1),this.editMode=0;break;case 1:!function(t,e,n){Kt(t,!1);for(const i of e)Wt(t,i,!0)}(this.path,this.groupSelectionIndices),this.editMode=1;break;case 2:this.singleSelectionIndex=Math.min(Math.max(this.singleSelectionIndex,0),this.path.length-1),Jt(this.path,this.singleSelectionIndex,!0),this.editMode=2}}onSingleSelectionChange(t){this.singleSelectionIndex!==t&&(this.singleSelectionIndex=t,Jt(this.path,t,!0))}onDelete(){Zt(this.path)?(this.path=ue(this.path.filter(t=>!t.selected).map(be)),2===this.editMode&&(this.singleSelectionIndex=Math.min(Math.max(this.singleSelectionIndex,0),this.path.length-1),Jt(this.path,this.singleSelectionIndex,!0)),this.onPathModelChange()):this.onInputChange("M0 0")}onSingleParameterChange(){this.onPathModelChange("transform")}ngOnInit(){this.path=ce(this.history.pathData||"m205 698c-17-194 169-280 169-408s-24-259 127-274s177 84 174 243s218 217 164 452c43 15 31 74 55 97s50 71-18 97s-75 47-107 77s-129 64-154-28c-45 7-47-8-95-7s-59 10-108 13c-35 78-151 26-174 13s-94-9-124-25s-23-52-12-83s-26-87 30-107s40-29 73-60zm-9 30c-20 39-66 34-76 51s-12 23-4 64s-18 40-7 78s104 16 156 50s139 24 141-36s-70-102-90-157s-74-120-120-50zm103-60c-56-80 35-193 26-195s-63 84-59 160s86 96 111 126s59 83-4 85q20 22 31 40a150 100-8 00 217-10c33-30 4-182 71-192c-4-74 116-10 116 7s4 21 10 16s12-38-59-66c20-83-54-183-71-182s85 65 51 175q-9-4-22-3c-21-119-82-163-117-316q-12 18-37 30t-30 15q-55 33-90 4t-40-28c-5 121-100 220-104 334zm390 28c-44 17-26 115-47 172s-23 102 16 124s80 6 119-34s68-55 102-69q57-20 4-74c-30-41-15-64-32-82s-28-14-50-12q-88 76-112-25zm9-3c12 73 93 20 85-3s-89-65-85 3m-100-403c-5-29-46-27-77-47s-66-11-84 6s-48 34-48 50s16 25 43 45s41 39 90 11s79-30 76-65zm-14-29a51 65 2 10-86-34l24 9a23 36 0 11 37 17zm-120-34a38 56-1 10-55 38l15-11a16 28-4 11 18-17zm-61 65c81 80 122 15 173-2v5c-52 27-103 80-174 3z"),this.onPathModelChange(),this.settings.subscribe(t=>{var e;const n=null===(e=this.settings.previousState)||void 0===e?void 0:e.darkMode,i=t.darkMode;n!==i&&(i?this._overlayContainer.getContainerElement().classList.add("app-dark-theme"):this._overlayContainer.getContainerElement().classList.remove("app-dark-theme"))})}convertInput(t){!function(t,e){const n=!Ht(t);for(const i of t)(n||i.selected)&&(i.outputAsRelative=e)}(this.path,t),this.formatInput()}compactInput(){const t=this.settings.state.maximumFractionDigits,e=this.path.map(e=>({abs:yn(pt(e,t)),rel:yn(Xt(e,t))}));for(let i=this.path.length;i-- >1;){const t=this.path[i],n=this.path[i-1];(t.name===n.name||et(n)&&nt(t))&&(e[i-1].abs=yn(e[i-1].abs+" "+e[i].abs.substring(1)),e[i-1].rel=yn(e[i-1].rel+" "+e[i].rel.substring(1)),e.splice(i,1))}const n=e.map(t=>t.rel.length<t.abs.length?t.rel:t.abs);this.pathInput=yn(n.join(""))}formatInput(){var t,e;this.pathInput=(t=this.path,e=this.settings.state.maximumFractionDigits,t.map(t=>te(t,e))).join("\n")}onFormatChange(t){this.settings.set({maximumFractionDigits:t})&&this.formatInput()}onInputChange(t){t!==this.pathInput&&(this.pathInput=t,this.path=ce(t),this.onPathModelChange("input"))}onUndo(){this.history.canUndo&&(this.history.undo(),this.onHistoryChange())}onRedo(){this.history.canRedo&&(this.history.redo(),this.onHistoryChange())}onHistoryChange(){const t=this.path,e=ce(this.history.pathData);if(Qt(t))Kt(e,!0);else if(Zt(t))for(let n=Math.min(t.length,e.length);n-- >0;)e[n].outputAsRelative=t[n].outputAsRelative,e[n].selected=t[n].selected;this.singleSelectionIndex>=e.length&&(this.singleSelectionIndex=e.length-1),this.path=e,this.onPathModelChange("history")}openSampleDialog(){this._dialog.open(A).afterClosed().subscribe(t=>{"string"==typeof t&&t.length>0&&this.onInputChange(t)})}trackByIndex(t){return t}applyTransform(t){if(t.preview)this.previewMatrix=t.matrix;else{this.previewMatrix=void 0;const e=t.matrix;e&&!T(e)&&(this.path=ge(this.path,e),this.onPathModelChange("transform"))}}onPathModelChange(t){"input"!==t&&this.formatInput(),"history"!==t&&(this.history.pathData=yn(this.path.map(t=>pt(t,-1)).join("")))}loadSvg(t){const e=t.target;if(e&&e.files[0]){const t=e.files[0];e.value="",this._dialog.open(J,{data:t}).afterClosed().subscribe(t=>{"string"==typeof t&&t.length>0&&this.onInputChange(t)})}}onPathReverse(){this.path=pe(this.path),this.onPathModelChange()}onSelectAll(t){Kt(this.path,t)}onInvertSelection(){!function(t){for(const e of t)e.selected=!e.selected}(this.path)}onAppend(t){let e=Gt(this.path);e<0&&(e=this.path.length-1);const n=this.path[e],i=It(t,vn[t]);ft(i,Ot(n),St(n)),i.outputAsRelative=!0;const o=e+1;this.path=me(this.path,o,i),2!==this.editMode&&1!==this.editMode||(this.singleSelectionIndex=o,Jt(this.path,o,!0)),this.onPathModelChange()}onSplit(){const t=this.path,e=qt(t);this.path=e>=0?function(t,e=.5){const n=[];for(const i of t)i.selected?n.push(...he(i,e)):n.push(be(i));return ue(n)}(t):function(t,e=.5){return ue(t.map(t=>he(t,e)).reduce((t,e)=>t.concat(e),[]))}(t),2===this.editMode&&(this.singleSelectionIndex=e,Jt(this.path,e,!0)),this.onPathModelChange()}onEllipticalArcAppriximation(){const t=this.path,e=qt(t);this.path=function(t,e){const n=[],i=!e;for(const o of t)if(bt(o)&&(i||o.selected)){const t=$t(o);for(const e of t)e.selected=o.selected,e.outputAsRelative=o.outputAsRelative,n.push(e)}else n.push(le(o));return ue(n)}(t,e>=0),2===this.editMode&&(this.singleSelectionIndex=e,Jt(this.path,e,!0)),this.onPathModelChange()}onPromoteToCurve(){this.path=function(t,e){const n=[],i=!e;for(const o of t)if(xe(o)&&(i||o.selected)){const{outputAsRelative:t,selected:e}=o;if(ct(o)){const i=Ft(o),s=At(o);n.push({name:"C",x1:i,y1:s,x2:o.x2,y2:o.y2,x:o.x,y:o.y,outputAsRelative:t,selected:e})}else{const i=Ot(o.prev),s=St(o.prev);if(rt(o)||lt(o)){const a=2*Pt(o),c=2*_t(o);n.push({name:"C",x1:(i+a)/3,y1:(s+c)/3,x2:(o.x+a)/3,y2:(o.y+c)/3,x:o.x,y:o.y,outputAsRelative:t,selected:e})}else{const a=Ot(o),c=St(o);n.push({name:"C",x1:i+(a-i)/4,y1:s+(c-s)/4,x2:i+3*(a-i)/4,y2:s+3*(c-s)/4,x:a,y:c,outputAsRelative:t,selected:e})}}}else n.push(lt(o)?be(o):le(o));return ue(n)}(this.path,Ht(this.path)),this.onPathModelChange()}onPromoteToQCurve(){this.path=function(t,e){const n=[],i=!e;for(const o of t)if(fe(o)&&(i||o.selected)){const{outputAsRelative:t,selected:e}=o;if(lt(o)){const i=Ft(o),s=At(o);n.push({name:"Q",x1:i,y1:s,x:o.x,y:o.y,outputAsRelative:t,selected:e})}else{const i=Ot(o.prev),s=St(o.prev),a=Ot(o),c=St(o);n.push({name:"Q",x1:(i+a)/2,y1:(s+c)/2,x:a,y:c,outputAsRelative:t,selected:e})}}else n.push(le(o));return ue(n)}(this.path,Ht(this.path)),this.onPathModelChange()}onClone(t){const e=this.path;let n=Gt(e);n<0&&(n=e.length-1);let i=Ht(e)?function(t){const e=t[qt(t)],n=t.filter(t=>t.selected).map(be);return e&&et(e)||n.splice(0,0,{name:"M",x:Ot(null==e?void 0:e.prev),y:St(null==e?void 0:e.prev),selected:!0}),ue(n)}(e):ue(e.map(le));t&&(i=pe(i));const o=n+1,s=me(e,o,...i);if(2===this.editMode)this.singleSelectionIndex=o,Jt(s,o,!0);else if(1===this.editMode){Kt(s,!1);for(let t=o;t<o+i.length;t++)Wt(s,t,!0);this.groupSelectionIndices=Lt(s)}this.path=s,this.onPathModelChange()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(x),l.Ob(v),l.Ob(h),l.Ob(k.b),l.Ob(Ce.e))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-svg-path-editor"]],decls:128,vars:30,consts:[[3,"mode","opened","openedChange"],["color","primary"],["mat-icon-button","",3,"click"],[1,"flex-space-filler-1"],["color","primary",3,"checked","change"],["type","file","multiple","false","accept",".svg,.txt",2,"display","none",3,"change"],["inputSvgFile",""],["mat-stroked-button","",3,"click"],[2,"margin-bottom","1em"],["mat-stroked-button","",2,"float","right",3,"disabled","click"],["mat-stroked-button","",3,"disabled","click"],["items","Raw Data|Selector|Inspector",3,"selection","selectionChange"],[2,"padding-top","1em"],[2,"padding","0 0.5em"],[2,"width","100%"],["matInput","","rows","15","placeholder","Place any SVG path data here",2,"resize","none","overflow-x","hidden","padding","0","margin","0",3,"ngModel","ngModelChange"],[4,"ngIf"],["style","padding-left: 1em; padding-right: 1em;",4,"ngIf"],[2,"margin-top","1em"],[2,"max-width","5em","margin-right","1em"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",3,"click"],["mat-icon-button","","color","primary",2,"float","right",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["menuReplace","matMenu"],["mat-menu-item","",3,"disabled","click"],["menuConvert","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"matMenuTriggerFor"],["menuAppend","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["menu","matMenu"],["mat-menu-item","",3,"matMenuTriggerFor",4,"ngIf"],[3,"boundingRect","transformChange"],["matExpansionPanelContent",""],[3,"pathItems","activeItem","previewMatrix","controlDrag"],["svgView",""],["class","sidenav-open-button","mat-icon-button","","color","primary","style","position: absolute; left: 0; top: 0",3,"click",4,"ngIf"],[1,"edit-group-head"],[3,"checked","indeterminate","change"],["mat-icon-button","","aria-label","Invert selection",3,"click"],["mat-icon-button","","aria-label","Clear selection",3,"disabled","click"],[1,"edit-group-body"],[3,"items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"items"],[2,"padding-left","1em","padding-right","1em"],[3,"min","max","selection","selectionChange"],[3,"item","maximumFractionDigits","inputChange",4,"ngIf"],[3,"item","maximumFractionDigits","inputChange"],[3,"value"],[3,"requestSmallestViewBox"],["mat-stroked-button","",2,"margin-top","1em",3,"click"],["mat-icon-button","","color","primary",1,"sidenav-open-button",2,"position","absolute","left","0","top","0",3,"click"]],template:function(t,e){if(1&t){const t=l.Vb();l.Ub(0,"mat-sidenav-container"),l.Ub(1,"mat-sidenav",0),l.bc("openedChange",function(t){return e.settings.set({sidenavClosed:!t})}),l.Ub(2,"mat-toolbar",1),l.Ub(3,"button",2),l.bc("click",function(){return e.settings.set({sidenavClosed:!0})}),l.Ub(4,"mat-icon"),l.Bc(5,"close"),l.Tb(),l.Tb(),l.Pb(6,"span",3),l.Ub(7,"span"),l.Bc(8,"SVG Path Editor"),l.Tb(),l.Pb(9,"span",3),l.Ub(10,"mat-slide-toggle",4),l.bc("change",function(t){return e.settings.set({sidenavModeSide:t.checked})}),l.Tb(),l.Tb(),l.Ub(11,"mat-accordion"),l.Ub(12,"mat-expansion-panel"),l.Ub(13,"mat-expansion-panel-header"),l.Ub(14,"mat-icon"),l.Bc(15,"import_export"),l.Tb(),l.Bc(16,"File "),l.Tb(),l.Ub(17,"input",5,6),l.bc("change",function(t){return e.loadSvg(t)}),l.Tb(),l.Ub(19,"button",7),l.bc("click",function(){return l.sc(t),l.qc(18).click()}),l.Ub(20,"mat-icon"),l.Bc(21,"open_in_browser"),l.Tb(),l.Bc(22,"Open "),l.Tb(),l.Ub(23,"button",7),l.bc("click",function(){return l.sc(t),l.qc(126).toArchive()}),l.Ub(24,"mat-icon"),l.Bc(25,"archive"),l.Tb(),l.Bc(26,"To SVG "),l.Tb(),l.Ub(27,"button",7),l.bc("click",function(){return e.openSampleDialog()}),l.Ub(28,"mat-icon"),l.Bc(29,"developer_board"),l.Tb(),l.Bc(30,"Samples "),l.Tb(),l.Tb(),l.Ub(31,"mat-expansion-panel"),l.Ub(32,"mat-expansion-panel-header"),l.Ub(33,"mat-icon"),l.Bc(34,"design_services"),l.Tb(),l.Bc(35,"Edit "),l.Tb(),l.Ub(36,"div",8),l.Ub(37,"button",9),l.bc("click",function(){return e.history.unlink()}),l.Ub(38,"mat-icon"),l.Bc(39,"link_off"),l.Tb(),l.Bc(40,"Unlink "),l.Tb(),l.Ub(41,"button",10),l.bc("click",function(){return e.onUndo()}),l.Ub(42,"mat-icon"),l.Bc(43,"undo"),l.Tb(),l.Bc(44,"Undo "),l.Tb(),l.Ub(45,"button",10),l.bc("click",function(){return e.onRedo()}),l.Ub(46,"mat-icon"),l.Bc(47,"redo"),l.Tb(),l.Bc(48,"Redo "),l.Tb(),l.Tb(),l.Ub(49,"app-tab-group",11),l.bc("selectionChange",function(t){return e.selectTab(t)}),l.Ub(50,"div",12),l.Ub(51,"div",13),l.Ub(52,"mat-form-field",14),l.Ub(53,"mat-label"),l.Bc(54,"SVG path data:"),l.Tb(),l.Ub(55,"textarea",15),l.bc("ngModelChange",function(t){return e.onInputChange(t)}),l.Tb(),l.Tb(),l.Tb(),l.zc(56,un,13,5,"div",16),l.zc(57,mn,3,4,"div",17),l.Tb(),l.Tb(),l.Ub(58,"div",18),l.Ub(59,"mat-form-field",19),l.Ub(60,"mat-label"),l.Bc(61,"Decimal digits"),l.Tb(),l.Ub(62,"mat-select",20),l.bc("ngModelChange",function(t){return e.onFormatChange(+t)}),l.zc(63,dn,2,2,"mat-option",21),l.Tb(),l.Tb(),l.Ub(64,"button",22),l.bc("click",function(){return e.formatInput()}),l.Bc(65,"Pretty"),l.Tb(),l.Ub(66,"button",22),l.bc("click",function(){return e.compactInput()}),l.Bc(67,"Compact"),l.Tb(),l.Ub(68,"button",23,24),l.Ub(70,"mat-icon"),l.Bc(71),l.Tb(),l.Tb(),l.Ub(72,"mat-menu",null,25),l.Ub(74,"button",26),l.bc("click",function(){return e.onEllipticalArcAppriximation()}),l.Bc(75,"Arc to Curves Approximation"),l.Tb(),l.Ub(76,"button",26),l.bc("click",function(){return e.onPromoteToCurve()}),l.Bc(77,"Promote to Cubic B\xe9zier Curve"),l.Tb(),l.Ub(78,"button",26),l.bc("click",function(){return e.onPromoteToQCurve()}),l.Bc(79,"Promote to Quadratic B\xe9zier Curve"),l.Tb(),l.Tb(),l.Ub(80,"mat-menu",null,27),l.Ub(82,"button",28),l.bc("click",function(){return e.convertInput(!1)}),l.Bc(83,"Convert to Absolute"),l.Tb(),l.Ub(84,"button",28),l.bc("click",function(){return e.convertInput(!0)}),l.Bc(85,"Convert to Relative"),l.Tb(),l.Ub(86,"button",28),l.bc("click",function(){return e.onClone(!1)}),l.Bc(87,"Clone"),l.Tb(),l.Ub(88,"button",28),l.bc("click",function(){return e.onClone(!0)}),l.Bc(89,"Clone Reversed"),l.Tb(),l.Ub(90,"button",28),l.bc("click",function(){return e.onSplit()}),l.Bc(91,"Bisect"),l.Tb(),l.Ub(92,"button",29),l.Bc(93,"Replace"),l.Tb(),l.Pb(94,"mat-divider"),l.Ub(95,"button",28),l.bc("click",function(){return e.onDelete()}),l.Ub(96,"mat-icon"),l.Bc(97,"clear"),l.Tb(),l.Ub(98,"span"),l.Bc(99,"Delete"),l.Tb(),l.Tb(),l.Tb(),l.Ub(100,"mat-menu",null,30),l.zc(102,pn,2,1,"button",31),l.Tb(),l.Ub(103,"mat-menu",null,32),l.Ub(105,"button",29),l.Bc(106,"Append"),l.Tb(),l.zc(107,fn,2,2,"button",33),l.Ub(108,"button",28),l.bc("click",function(){return e.onPathReverse()}),l.Bc(109,"Reverse Path Direction"),l.Tb(),l.Tb(),l.Tb(),l.Ub(110,"mat-expansion-panel"),l.Ub(111,"mat-expansion-panel-header"),l.Ub(112,"mat-panel-title"),l.Ub(113,"mat-icon"),l.Bc(114,"transform"),l.Tb(),l.Tb(),l.Ub(115,"mat-panel-description"),l.Bc(116,"Transform"),l.Tb(),l.Tb(),l.Ub(117,"app-menu-transform",34),l.bc("transformChange",function(t){return e.applyTransform(t)}),l.Tb(),l.Tb(),l.Tb(),l.Ub(118,"mat-expansion-panel"),l.Ub(119,"mat-expansion-panel-header"),l.Ub(120,"mat-icon"),l.Bc(121,"visibility"),l.Tb(),l.Bc(122,"View "),l.Tb(),l.zc(123,xn,6,1,"ng-template",35),l.Tb(),l.Tb(),l.Tb(),l.Ub(124,"mat-sidenav-content"),l.Ub(125,"app-svg-view",36,37),l.bc("controlDrag",function(t){return e.onDrag(t)}),l.Tb(),l.zc(127,Cn,3,0,"button",38),l.Tb(),l.Tb()}if(2&t){const t=l.qc(69),n=l.qc(73),i=l.qc(101),o=l.qc(104);l.Gb("app-dark-theme",e.settings.state.darkMode),l.Cb(1),l.lc("mode",e.settings.state.sidenavModeSide?"side":"over")("opened",!e.settings.state.sidenavClosed),l.Cb(9),l.lc("checked",e.settings.state.sidenavModeSide),l.Cb(27),l.lc("disabled",!e.history.hasLink),l.Cb(4),l.lc("disabled",!e.history.canUndo),l.Cb(4),l.lc("disabled",!e.history.canRedo),l.Cb(4),l.lc("selection",e.editMode),l.Cb(2),l.wc("display",0===e.editMode?"block":"none"),l.Cb(4),l.lc("ngModel",e.pathInput),l.Cb(1),l.lc("ngIf",1===e.editMode),l.Cb(1),l.lc("ngIf",2===e.editMode),l.Cb(5),l.lc("ngModel",e.settings.state.maximumFractionDigits),l.Cb(1),l.lc("ngForOf",e.decimalFormats),l.Cb(5),l.lc("matMenuTriggerFor",o),l.Cb(3),l.Cc(t.menuOpen?"menu_open":"menu"),l.Cb(3),l.lc("disabled",!e.hasArc),l.Cb(2),l.lc("disabled",!e.canPromoteToCurve),l.Cb(2),l.lc("disabled",!e.canPromoteToQCurve),l.Cb(14),l.lc("matMenuTriggerFor",n),l.Cb(10),l.lc("ngForOf",e.commands),l.Cb(3),l.lc("matMenuTriggerFor",i),l.Cb(2),l.lc("ngIf",(null==e.path?null:e.path.length)>0),l.Cb(10),l.lc("boundingRect",e.selectionBoundingRect),l.Cb(8),l.lc("pathItems",e.path)("activeItem",e.activeItem)("previewMatrix",e.previewMatrix),l.Cb(2),l.lc("ngIf",e.settings.state.sidenavClosed)}},directives:[ve.b,ve.a,ye.a,I.a,w.a,Me.a,Te.a,Te.c,Te.f,O.a,z.c,z.g,R.a,s.b,s.i,s.l,i.l,Ue.a,i.k,N.d,N.a,N.b,ke.a,Te.g,Te.e,De,Te.d,ve.c,Ze,j.a,en,X,nn,Ie.h,bn],styles:["mat-sidenav-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#282828}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:360px}@-webkit-keyframes keyframes-fade-in{0%{opacity:0}to{opacity:1}}@keyframes keyframes-fade-in{0%{opacity:0}to{opacity:1}}.sidenav-open-button[_ngcontent-%COMP%]{-webkit-animation:keyframes-fade-in 3s ease 1;animation:keyframes-fade-in 3s ease 1;background-color:#f0f8ff50}div.path-commands[_ngcontent-%COMP%]{margin-top:1em;padding:.5em;max-height:24em;overflow-y:auto}div.path-commands[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;width:1.2em;height:1.2em;border:1px solid grey;border-radius:.6em;text-align:center}div.path-commands[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:hover{border-color:#bb0;color:#bb0}div.path-commands[_ngcontent-%COMP%] > span.selected[_ngcontent-%COMP%]{background-color:#ff0}.edit-group-head[_ngcontent-%COMP%]{padding-left:16px;padding-right:4px;padding-bottom:4px;display:flex;align-items:center}.edit-group-body[_ngcontent-%COMP%]{padding-top:10px;padding-left:16px;border-top:1px solid rgba(0,0,0,.26);height:280px;overflow-y:auto}"]}),t})()}];let Tn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({providers:[h,x,v,y],imports:[[o.c.forChild(Mn),i.c,s.d,a.b,r.a,c.a],o.c]}),t})()}}]);
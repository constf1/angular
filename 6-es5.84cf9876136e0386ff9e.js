function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=_superPropBase(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,a=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"1ROQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("afNV"),i=n("jZWl"),r=n("g/AF"),c=n("WxrP"),s=n("fXoL"),o=Object.assign(Object.assign({},i.b),{deal:-1,mark:0,path:""}),l=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;return _classCallCheck(this,n),(a=t.call(this,o))._game=null,a._addSubscription(e.subscribe((function(e){a._set(Object.assign({},e))}))),a}return _createClass(n,[{key:"_validate",value:function(e){var t=Object(c.a)(e);return e.path!==t&&(console.warn("Replacing path with:",t),e.path=t),e.mark=Math.max(0,Math.min(e.path.length/2,e.mark)),(e=_get(_getPrototypeOf(n.prototype),"_validate",this).call(this,e))&&(this._game=null),e}},{key:"move",value:function(e,t){var n=this.state,a=Object(r.b)(n.path,n.mark,e,t);this._set({mark:a.length/2,path:n.path.startsWith(a)?n.path:a})}},{key:"set",value:function(e,t,n){var a=this.state;e===a.deal&&t===a.path&&n===a.mark||this._set({deal:e,path:t,mark:n})}},{key:"deal",get:function(){return this.state.deal},set:function(e){if(this.deal!==e){var t=o.path,n=o.mark;this._set({deal:e,path:t,mark:n})}}},{key:"mark",get:function(){return this.state.mark},set:function(e){this.mark!==e&&this._set({mark:e})}},{key:"path",get:function(){return this.state.path},set:function(e){this.path!==e&&this._set({path:e})}},{key:"game",get:function(){return this._game||(this._game=Object(c.c)(this.state))}}]),n}(a.a);return e.\u0275fac=function(t){return new(t||e)(s.Yb(i.a))},e.\u0275prov=s.Kb({token:e,factory:e.\u0275fac}),e}()},"2MXh":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){function e(t,n,a){_classCallCheck(this,e),this.PILE_NUM=t,this.CELL_NUM=n,this.BASE_NUM=a,this.PILE_START=0,this.DESK_SIZE=t+n+a,this.PILE_END=this.BASE_START=this.PILE_START+this.PILE_NUM,this.BASE_END=this.CELL_START=this.BASE_START+this.BASE_NUM,this.CELL_END=this.CELL_START+this.CELL_NUM}return _createClass(e,[{key:"isPile",value:function(e){return e>=this.PILE_START&&e<this.PILE_END}},{key:"isBase",value:function(e){return e>=this.BASE_START&&e<this.BASE_END}},{key:"isCell",value:function(e){return e>=this.CELL_START&&e<this.CELL_END}},{key:"getSpotName",value:function(e){return this.isBase(e)?"base "+(e-this.BASE_START):this.isPile(e)?"pile "+(e-this.PILE_START):this.isCell(e)?"cell "+(e-this.CELL_START):"unknown "+e}}]),e}()},GPiM:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var a=n("afNV"),i=n("fXoL"),r=n("1ROQ"),c=n("dkWW"),s=n("tt9D"),o=n("dNgK"),l={solved:!1,canAssist:!1,canUndo:!1,canRedo:!1,nextMove:null,assistRequest:null},u=String.fromCharCode(215),d=function(){var t=function(t){_inherits(a,t);var n=_createSuper(a);function a(e,t,i,r){var c;return _classCallCheck(this,a),(c=n.call(this,l))._gameService=e,c._playService=t,c._settings=i,c._snackBar=r,c._worker=null,c._createWorker(),c._addSubscription(c._gameService.subscribe((function(e){var t=Object.assign({},l),n=c._gameService.game;if(t.solved=n.isSolved(),!t.solved){var a=n.countEmpty();if(a<n.PILE_NUM+n.CELL_NUM){var i=n.getMoves();t.canAssist=!!c._worker&&i.length>0&&a<=n.CELL_NUM;var r,s=_createForOfIteratorHelper(i);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(n.isBase(o.taker)){t.nextMove=o;break}}}catch(d){s.e(d)}finally{s.f()}}}t.canUndo=e.mark>0,t.canRedo=2*e.mark<e.path.length,c.state.assistRequest&&(c.cancelAssist(),c._snackBar.open("Assist was canceled.",u,{duration:1e3})),Promise.resolve().then((function(){return c._set(t)}))}))),c}return _createClass(a,[{key:"undo",value:function(){var e=this._gameService.state.mark-1;e>=0&&(this._gameService.mark=e)}},{key:"redo",value:function(){var e=this._gameService.state.mark+1;e+e<=this._gameService.state.path.length&&(this._gameService.mark=e)}},{key:"next",value:function(){var e=this.state.nextMove;e&&this._gameService.move(e.giver,e.taker)}},{key:"playNext",value:function(){var e=this;this._playService.play((function(){return e.next(),!!e.state.nextMove}))}},{key:"play",value:function(e){var t=this;this._playService.play((function(){if(e.length>1){var n=e.charCodeAt(0),a=e.charCodeAt(1);e=e.substring(2),t._gameService.move(n,a)}return e.length>1}))}},{key:"assist",value:function(){var e=this;if(this._worker&&this.state.canAssist){var t=this._gameService.game,n={base:t.BASE_NUM,cell:t.CELL_NUM,pile:t.PILE_NUM,desk:t.toArray()},a=JSON.stringify(n);this._worker.postMessage({requestId:a,desk:n,searchThreshold:this._settings.state.assistLevel}),this._set({assistRequest:a,canAssist:!1});var i=this._snackBar.open("Thinking...",u).onAction().subscribe((function(){i.unsubscribe(),e.cancelAssist(),e._set({assistRequest:null,canAssist:!0})}))}}},{key:"cancelAssist",value:function(){this._worker&&this._worker.postMessage({requestId:null})}},{key:"_createWorker",value:function(){var t=this;"undefined"!=typeof Worker&&(this._worker=new Worker(e,{}),this._worker.onmessage=function(e){var n=e.data;if(n.requestId===t.state.assistRequest){var a="Unable to assist ;-(";n.path&&(a="Assisting...",t.play(n.path)),t._snackBar.open(a,u,{duration:2e3}),t._set({assistRequest:l.assistRequest})}})}}]),a}(a.a);return t.\u0275fac=function(e){return new(e||t)(i.Yb(r.a),i.Yb(c.a),i.Yb(s.a),i.Yb(o.a))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t}()}).call(this,n("Q4PV"))},LGbN:function(e,t,n){"use strict";n.r(t);var a=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),c=n("hctd"),s=n("pKmL"),o=n("GPiM"),l=n("dkWW"),u=n("jZWl"),d=n("bgvp"),f=n("fXoL");function h(e){return new Promise((function(t,n){e.onsuccess=function(){return t(e.result)},e.onerror=function(){return n(e.error.message)}}))}var b,g,p=((b=function(){function e(){var t=this;_classCallCheck(this,e),this._openPromise=new Promise((function(e,n){var a=window.indexedDB.open("freecell-db",1);a.onerror=function(e){t.onOpenError(a),n(a.error.message)},a.onupgradeneeded=function(e){return t.onUpgradeNeeded(a)},a.onsuccess=function(n){t.onOpenSuccess(a),e()}}))}return _createClass(e,[{key:"_createTransaction",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return this._openPromise.then((function(){return t._db.transaction(e,n)}))}},{key:"_getStore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return this._createTransaction([e],t).then((function(t){return t.objectStore(e)}))}},{key:"onOpenSuccess",value:function(e){this._db=e.result,console.log("DB open success:",e.result.name)}},{key:"onOpenError",value:function(e){this.openError="DB open error: "+e.error.message,console.error("DB Error:",e.error)}},{key:"onUpgradeNeeded",value:function(e){this._db=e.result,this._db.createObjectStore("game",{keyPath:"deal",autoIncrement:!1}).createIndex("date","date",{unique:!1})}},{key:"getGame",value:function(e){return this._getStore("game","readonly").then((function(t){return h(t.get(e))}))}},{key:"setGame",value:function(e){return e.date||(e.date=Object(d.a)()),this._getStore("game","readwrite").then((function(t){return h(t.put(e))}))}},{key:"isOpen",get:function(){return!!this._db}}]),e}()).\u0275fac=function(e){return new(e||b)},b.\u0275prov=f.Kb({token:b,factory:b.\u0275fac}),b),v=n("1ROQ"),_=n("tt9D"),m=n("mrSG"),k=n("dPmG"),y=((g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this._subscriptions=t}return _createClass(e,[{key:"_addSubscription",value:function(e){this._subscriptions.push(e)}},{key:"ngOnDestroy",value:function(){this._subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){f.bc()},g.\u0275dir=f.Jb({type:g}),g),S=function(e){return e[e.card=0]="card",e[e.deal=1]="deal",e[e.shuffle=2]="shuffle",e[e.aplause_001=3]="aplause_001",e[e.aplause_002=4]="aplause_002",e[e.aplause_003=5]="aplause_003",e[e.aplause_004=6]="aplause_004",e[e.aplause_005=7]="aplause_005",e[e.aplause_006=8]="aplause_006",e[e.aplause_007=9]="aplause_007",e[e.length=10]="length",e}({});function C(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=e.createBufferSource();r.buffer=n;var c=r;if(1!==a){var s=e.createGain();s.gain.value=a,c.connect(s),c=s}if(0!==i){var o=e.createStereoPanner();o.pan.value=i,c.connect(o),c=o}return c.connect(t),r}var T,w=((T=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;return _classCallCheck(this,n),(a=t.call(this))._enabled=!1,a._activated=!1,a._sounds=null,a._nextState=Promise.resolve(),a._addSubscription(e.subscribe((function(e){e.enableSound?a.enable():a.disable()}))),a}return _createClass(n,[{key:"_next",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._nextState;case 3:return t.prev=3,this._nextState=e(),t.finish(3);case 6:case"end":return t.stop()}}),t,this,[[0,,3,6]])})))}},{key:"activate",value:function(){this._activated=!0}},{key:"disable",value:function(){var e=this;this._next((function(){return Object(m.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._enabled=!1);case 1:case"end":return e.stop()}}),e,this)})))}))}},{key:"enable",value:function(){var e=this;this._next((function(){return Object(m.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._sounds){e.next=6;break}return this._context||(this._context=new AudioContext),e.next=4,this._getBuffers();case 4:t=e.sent,this._sounds=function(e,t){var n=function(e){var t=e.createDynamicsCompressor();return t.connect(e.destination),t}(e),a={deal:function(){C(e,n,t[S.deal],1).start()},shuffle:function(){C(e,n,t[S.shuffle],1.5).start()}},i=0;return a.card=function(){0==i++&&setTimeout((function(){(1===i?C(e,n,t[S.card],.8):C(e,n,t[S.shuffle],1)).start(),i=0}))},a.victory=function(){for(var a=S.aplause_001,i=S.aplause_007,r=e.currentTime,c=0,s=Object(k.d)(1,4);c<s;c++){var o=C(e,n,t[Object(k.d)(a,i+1)],Object(k.e)(.75,1.75),Object(k.d)(-100,101)/100);o.playbackRate.value=Object(k.e)(.85,1.75),o.start(r+3*Math.random())}},a}(this._context,t);case 6:this._enabled=!0;case 7:case"end":return e.stop()}}),e,this)})))}))}},{key:"_getBuffers",value:function(){return this._buffers||(this._buffers=this._loadAll()),this._buffers}},{key:"_loadAll",value:function(){for(var e,t,n=[],a=0;a<S.length;a++)n.push("./assets/freecell/sounds/"+S[a]+".mp3");return e=this._context,t=n,new Promise((function(n,a){var i=t.length,r=new Array(t.length);0===i&&n([]),t.forEach((function(t,c){(function(e,t){return new Promise((function(t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){return t(a.response)},a.onerror=function(e){return n(e)},a.send()}))})(t).then((function(t){return function(e,t){return new Promise((function(n,a){e.decodeAudioData(t,(function(e){return n(e)}),(function(e){return a(e)}))}))}(e,t)})).then((function(e){r[c]=e,0==--i&&n(r)})).catch((function(e){return a(e)}))}))}))}},{key:"play",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._nextState;case 2:if(!(this._enabled&&this._activated&&this._sounds)){t.next=11;break}if(n=this._sounds[e],t.t0="function"==typeof n,!t.t0){t.next=11;break}if(t.t1="suspended"===this._context.state,!t.t1){t.next=10;break}return t.next=10,this._context.resume();case 10:n();case 11:case"end":return t.stop()}}),t,this)})))}},{key:"enabled",get:function(){return this._enabled}},{key:"activated",get:function(){return this._activated}}]),n}(y)).\u0275fac=function(e){return new(e||T)(f.Yb(_.a))},T.\u0275prov=f.Kb({token:T,factory:T.\u0275fac}),T),O=n("RDYl"),B=n("rDax"),M=n("0IaG"),P=n("wZkO"),L=n("1jcm"),E=n("bTqV"),U=n("NFeN"),x=n("5RNC"),A=n("jaxi"),I=n("f0Cb");function D(e,t){if(1&e&&(f.Ub(0,"mat-icon",8),f.Bc(1),f.Tb(),f.Bc(2," Game Sounds ")),2&e){var n=f.gc();f.Bb(1),f.Cc(n.settings.state.enableSound?"volume_up":"volume_off")}}function R(e,t){1&e&&(f.Ub(0,"mat-icon",8),f.Bc(1,"assistant"),f.Tb(),f.Bc(2," Assist level "))}function N(e,t){1&e&&(f.Ub(0,"mat-icon",8),f.Bc(1,"layers"),f.Tb(),f.Bc(2," Card Effects "))}function j(e,t){1&e&&(f.Ub(0,"mat-icon",8),f.Bc(1,"dashboard"),f.Tb(),f.Bc(2," Appearance "))}var F,X=1e3,z=((F=function(){function e(t){var n=this;_classCallCheck(this,e),this.settings=t,this.aspectRatioMin=_.d.aspectRatio*X,this.aspectRatioMax=_.c.aspectRatio*X,this.aspectRatioStep=5,this.assistLevelMin=Math.ceil(_.d.assistLevel/X),this.assistLevelMax=Math.floor(_.c.assistLevel/X),this.assistLevelStep=5,this.aspectRatioLabel=function(e){return(e/X).toFixed(3)},this.assistLevelLabel=function(e){var t=(n.assistLevelMax-n.assistLevelMin)/3;return e<n.assistLevelMin+t?"low":e>n.assistLevelMax-t?"high":"norm"}}return _createClass(e,[{key:"assistLevelColor",value:function(){switch(this.assistLevelLabel(this.assistLevel)){case"low":return"primary";case"high":return"warn";default:return"accent"}}},{key:"ngOnInit",value:function(){}},{key:"aspectRatio",get:function(){return Math.round(this.settings.state.aspectRatio*X)},set:function(e){this.settings.set({aspectRatio:+e/X})}},{key:"assistLevel",get:function(){return Math.round(this.settings.state.assistLevel/X)},set:function(e){(e=Math.max(this.assistLevelMin,Math.min(this.assistLevelMax,+e)))!==this.assistLevel&&this.settings.set({assistLevel:e*X})}}]),e}()).\u0275fac=function(e){return new(e||F)(f.Ob(_.a))},F.\u0275cmp=f.Ib({type:F,selectors:[["app-freecell-settings-dialog"]],decls:75,vars:30,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-tab-label",""],[1,"tab-content"],[3,"checked","change"],[1,"pad-top"],["mat-stroked-button","",3,"disabled","click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","color","ngModelChange"],[1,"margin-right-8"],[3,"value"],["value","sidenav",3,"click"],["value","sandwich",3,"click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","ngModelChange"],["align","center"],["mat-button","",3,"click"],["mat-button","","matDialogClose","","cdkFocusInitial",""]],template:function(e,t){1&e&&(f.Ub(0,"h2",0),f.Bc(1,"Freecell Settings"),f.Tb(),f.Ub(2,"mat-dialog-content",1),f.Ub(3,"mat-tab-group"),f.Ub(4,"mat-tab"),f.zc(5,D,3,1,"ng-template",2),f.Ub(6,"div",3),f.Ub(7,"mat-slide-toggle",4),f.cc("change",(function(e){return t.settings.set({enableSound:!!e.checked})})),f.Bc(8," Enable "),f.Tb(),f.Tb(),f.Tb(),f.Ub(9,"mat-tab"),f.zc(10,R,3,0,"ng-template",2),f.Ub(11,"div",3),f.Ub(12,"p"),f.Bc(13,"The maximum number of moves the assistant will try to solve."),f.Tb(),f.Ub(14,"div",5),f.Ub(15,"button",6),f.cc("click",(function(){return t.assistLevel=t.assistLevel-t.assistLevelStep})),f.Ub(16,"mat-icon"),f.Bc(17,"chevron_left"),f.Tb(),f.Tb(),f.Ub(18,"button",6),f.cc("click",(function(){return t.assistLevel=t.assistLevel+t.assistLevelStep})),f.Ub(19,"mat-icon"),f.Bc(20,"chevron_right"),f.Tb(),f.Tb(),f.Ub(21,"mat-slider",7),f.cc("ngModelChange",(function(e){return t.assistLevel=e})),f.Tb(),f.Bc(22),f.hc(23,"number"),f.Tb(),f.Tb(),f.Tb(),f.Ub(24,"mat-tab"),f.zc(25,N,3,0,"ng-template",2),f.Ub(26,"div",3),f.Ub(27,"div"),f.Ub(28,"mat-slide-toggle",4),f.cc("change",(function(e){return t.settings.set({deckUseSvg:!!e.checked})})),f.Bc(29," Use SVG "),f.Tb(),f.Tb(),f.Ub(30,"div",5),f.Ub(31,"mat-slide-toggle",4),f.cc("change",(function(e){return t.settings.set({enableRipples:!!e.checked})})),f.Bc(32," Enable Ripples "),f.Tb(),f.Tb(),f.Ub(33,"div",5),f.Ub(34,"mat-slide-toggle",4),f.cc("change",(function(e){return t.settings.set({enableWinAnimation:!!e.checked})})),f.Bc(35," Enable Victory Animation "),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Ub(36,"mat-tab"),f.zc(37,j,3,0,"ng-template",2),f.Ub(38,"div",3),f.Ub(39,"div"),f.Ub(40,"mat-icon",8),f.Bc(41,"table_chart"),f.Tb(),f.Bc(42,"Layout: "),f.Ub(43,"span"),f.Bc(44,"horizontal"),f.Tb(),f.Bc(45," or "),f.Ub(46,"span"),f.Bc(47,"vertical"),f.Tb(),f.Bc(48,". "),f.Ub(49,"mat-button-toggle-group",9),f.Ub(50,"mat-button-toggle",10),f.cc("click",(function(){return t.settings.set({view:"sidenav"})})),f.Ub(51,"mat-icon"),f.Bc(52,"stay_current_landscape"),f.Tb(),f.Tb(),f.Ub(53,"mat-button-toggle",11),f.cc("click",(function(){return t.settings.set({view:"sandwich"})})),f.Ub(54,"mat-icon"),f.Bc(55,"stay_current_portrait"),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Ub(56,"div",5),f.Ub(57,"mat-icon",8),f.Bc(58,"aspect_ratio"),f.Tb(),f.Bc(59,"Aspect ratio. The playground width divided by its height. "),f.Ub(60,"mat-slider",12),f.cc("ngModelChange",(function(e){return t.aspectRatio=e})),f.Tb(),f.Bc(61),f.hc(62,"number"),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Pb(63,"mat-divider"),f.Ub(64,"mat-dialog-actions",13),f.Ub(65,"button",14),f.cc("click",(function(){return t.settings.restoreDefaults()})),f.Ub(66,"mat-icon"),f.Bc(67,"settings_backup_restore"),f.Tb(),f.Ub(68,"label"),f.Bc(69,"RESET"),f.Tb(),f.Tb(),f.Ub(70,"button",15),f.Ub(71,"mat-icon"),f.Bc(72,"close"),f.Tb(),f.Ub(73,"label"),f.Bc(74,"CLOSE"),f.Tb(),f.Tb(),f.Tb()),2&e&&(f.Bb(7),f.mc("checked",t.settings.state.enableSound),f.Bb(8),f.mc("disabled",t.assistLevelMin>=t.assistLevel),f.Bb(3),f.mc("disabled",t.assistLevel>=t.assistLevelMax),f.Bb(3),f.mc("displayWith",t.assistLevelLabel)("min",t.assistLevelMin)("max",t.assistLevelMax)("step",t.assistLevelStep)("ngModel",t.assistLevel)("color",t.assistLevelColor()),f.Bb(1),f.Dc(" ",f.jc(23,24,t.settings.state.assistLevel,"1.0-0")," "),f.Bb(6),f.mc("checked",t.settings.state.deckUseSvg),f.Bb(3),f.mc("checked",t.settings.state.enableRipples),f.Bb(3),f.mc("checked",t.settings.state.enableWinAnimation),f.Bb(9),f.Fb("text-selected","sidenav"===t.settings.state.view),f.Bb(3),f.Fb("text-selected","sandwich"===t.settings.state.view),f.Bb(3),f.mc("value",t.settings.state.view),f.Bb(11),f.mc("displayWith",t.aspectRatioLabel)("min",t.aspectRatioMin)("max",t.aspectRatioMax)("step",t.aspectRatioStep)("ngModel",t.aspectRatio),f.Bb(1),f.Dc(" ",f.jc(62,27,t.settings.state.aspectRatio,"1.3-3")," "))},directives:[M.g,M.e,P.b,P.a,P.c,L.a,E.a,U.a,x.a,i.i,i.l,A.b,A.a,I.a,M.c,M.d],pipes:[a.e],styles:[".pad-top[_ngcontent-%COMP%], .tab-content[_ngcontent-%COMP%]{padding-top:16px}.tab-content[_ngcontent-%COMP%]{min-height:12.75rem;margin-left:10px}@media (min-aspect-ratio:8/5){.tab-content[_ngcontent-%COMP%]{min-height:9rem}}.margin-right-8[_ngcontent-%COMP%]{margin-right:8px}span.text-selected[_ngcontent-%COMP%]{font-weight:500}"]}),F),Y=n("0MNC");function H(e,t){1&e&&(f.fc(),f.Ub(0,"svg",6),f.Pb(1,"path",7),f.Pb(2,"path",8),f.Tb())}function W(e,t){1&e&&(f.Sb(0),f.fc(),f.Ub(1,"svg",6),f.Pb(2,"path",7),f.Pb(3,"path",11),f.Tb(),f.Rb())}function K(e,t){if(1&e){var n=f.Vb();f.Ub(0,"button",9),f.cc("click",(function(){f.tc(n);var e=t.$implicit;return f.gc().changeOrder(e)})),f.zc(1,W,4,0,"ng-container",10),f.Tb()}if(2&e){var a=t.$implicit,i=f.gc(),r=f.rc(1);f.Fb("sandwich-button-move-down",i.order[1]>i.order[a])("sandwich-button-move-up",i.order[a]>i.order[1]),f.Bb(1),f.mc("ngIf",i.order[1]>i.order[a])("ngIfElse",r)}}function G(e,t){1&e&&f.Qb(0)}var Q=function(){return{$implicit:0}};function V(e,t){if(1&e&&(f.Ub(0,"div",12),f.kc(1,1),f.zc(2,G,1,0,"ng-container",13),f.Tb()),2&e){var n=f.gc(),a=f.rc(3);f.yc("order",n.order[0]),f.Bb(2),f.mc("ngTemplateOutlet",a)("ngTemplateOutletContext",f.nc(4,Q))}}function q(e,t){1&e&&f.Qb(0)}var J=function(){return{$implicit:2}};function Z(e,t){if(1&e&&(f.Ub(0,"div",14),f.kc(1,2),f.zc(2,q,1,0,"ng-container",13),f.Tb()),2&e){var n=f.gc(),a=f.rc(3);f.yc("order",n.order[2]),f.Bb(2),f.mc("ngTemplateOutlet",a)("ngTemplateOutletContext",f.nc(4,J))}}var $=[[["","appSandwichContent",""]],[["","appSandwichHeader",""]],[["","appSandwichFooter",""]]],ee=["[appSandwichContent]","[appSandwichHeader]","[appSandwichFooter]"],te=[5,7,11,15,19,21];function ne(e,t){return Math.floor(te[e]/Math.pow(3,2-t))%3}var ae,ie,re=((ae=function(){function e(){_classCallCheck(this,e),this.order=[0,1,2],this._sandwichOrder=0,this.sandwichOrderChange=new f.n,this.hideHeader=!1,this.hideFooter=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"changeOrder",value:function(e){var t=_toConsumableArray(this.order),n=t[e];if(n>t[1])for(var a=t.length;a-- >0;)t[a]===n?t[a]=n-1:t[a]===n-1&&(t[a]=n);else if(n<t[1])for(var i=t.length;i-- >0;)t[i]===n?t[i]=n+1:t[i]===n+1&&(t[i]=n);this.sandwichOrderChange.emit(te.indexOf(3*(3*t[0]+t[1])+t[2]))}},{key:"sandwichOrder",get:function(){return this._sandwichOrder},set:function(e){this._sandwichOrder!==e&&e>=0&&e<te.length&&(this._sandwichOrder=e,this.order[0]=ne(e,0),this.order[1]=ne(e,1),this.order[2]=ne(e,2))}}]),e}()).\u0275fac=function(e){return new(e||ae)},ae.\u0275cmp=f.Ib({type:ae,selectors:[["app-sandwich"]],inputs:{sandwichOrder:"sandwichOrder",hideHeader:"hideHeader",hideFooter:"hideFooter"},outputs:{sandwichOrderChange:"sandwichOrderChange"},ngContentSelectors:ee,decls:9,vars:4,consts:[["arrowUpward",""],["moveButton",""],[1,"sandwich-container"],["class","sandwich-header",3,"order",4,"ngIf"],[1,"sandwich-content"],["class","sandwich-footer",3,"order",4,"ngIf"],["height","24","width","24"],["d","M0 0h24v24H0V0z","fill","none"],["d","M6 6h4v4h4V6h4l-6-4zM2 15h20v-4H2v4zm2-3h2v2H4v-2z","fill","currentColor"],["mat-icon-button","",3,"click"],[4,"ngIf","ngIfElse"],["d","M18 18h-4v-4h-4v4H6l6 4zM2 13h20V9H2v4zm2-3h2v2H4v-2z","fill","currentColor"],[1,"sandwich-header"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"sandwich-footer"]],template:function(e,t){1&e&&(f.lc($),f.zc(0,H,3,0,"ng-template",null,0,f.Ac),f.zc(2,K,2,6,"ng-template",null,1,f.Ac),f.Ub(4,"div",2),f.zc(5,V,3,5,"div",3),f.Ub(6,"div",4),f.kc(7),f.Tb(),f.zc(8,Z,3,5,"div",5),f.Tb()),2&e&&(f.Bb(5),f.mc("ngIf",!t.hideHeader),f.Bb(1),f.yc("order",t.order[1]),f.Bb(2),f.mc("ngIf",!t.hideFooter))},directives:[a.l,E.a,a.q],styles:["div.sandwich-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch}div.sandwich-footer[_ngcontent-%COMP%], div.sandwich-header[_ngcontent-%COMP%]{position:relative;flex-grow:0;flex-shrink:0}div.sandwich-content[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:0}.sandwich-button-move-down[_ngcontent-%COMP%], .sandwich-button-move-up[_ngcontent-%COMP%]{position:absolute;right:0;color:#bccfe0}.sandwich-button-move-down[_ngcontent-%COMP%]:hover, .sandwich-button-move-up[_ngcontent-%COMP%]:hover{color:#fff}.sandwich-button-move-down[_ngcontent-%COMP%]{bottom:0}.sandwich-button-move-up[_ngcontent-%COMP%]{top:0}"]}),ae),ce=n("/t3+"),se=n("voYn"),oe=n("STbY"),le=n("MutI"),ue=((ie=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;return _classCallCheck(this,n),(a=t.call(this))._gameService=e,a.minDeal=0,a.maxDeal=2147483648,a.digitCount=a.maxDeal.toString(10).length,a.listItem=!1,a.dealLabel="",a.isMenuOpened=!1,a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this._addSubscription(this._gameService.subscribe((function(t){e.deal=t.deal,e.dealLabel="#"+(e.deal>=0?Object(se.b)(e.deal.toString(10),e.digitCount,"0"):Object(se.b)("",e.digitCount,"#"))})))}},{key:"setDeal",value:function(e){e>=this.minDeal&&e<=this.maxDeal&&(this._gameService.deal=e)}},{key:"setRandomDeal",value:function(){this.setDeal(Object(k.d)(this.minDeal,this.maxDeal,this.deal))}}]),n}(y)).\u0275fac=function(e){return new(e||ie)(f.Ob(v.a))},ie.\u0275cmp=f.Ib({type:ie,selectors:[["app-freecell-deal-menu"]],inputs:{listItem:"listItem"},features:[f.yb],decls:22,vars:7,consts:[["xPosition","before"],["appMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["mat-button","",3,"matMenuTriggerFor","menuOpened","menuClosed"]],template:function(e,t){if(1&e&&(f.Ub(0,"mat-menu",0,1),f.Ub(2,"button",2),f.cc("click",(function(){return t.setDeal(t.deal+1)})),f.Ub(3,"mat-icon"),f.Bc(4,"navigate_next"),f.Tb(),f.Ub(5,"span"),f.Bc(6,"Next"),f.Tb(),f.Tb(),f.Ub(7,"button",2),f.cc("click",(function(){return t.setDeal(t.deal-1)})),f.Ub(8,"mat-icon"),f.Bc(9,"navigate_before"),f.Tb(),f.Ub(10,"span"),f.Bc(11,"Previous"),f.Tb(),f.Tb(),f.Ub(12,"button",3),f.cc("click",(function(){return t.setRandomDeal()})),f.Ub(13,"mat-icon"),f.Bc(14,"casino"),f.Tb(),f.Ub(15,"span"),f.Bc(16,"Random"),f.Tb(),f.Tb(),f.Tb(),f.Ub(17,"button",4),f.cc("menuOpened",(function(){return t.isMenuOpened=!0}))("menuClosed",(function(){return t.isMenuOpened=!1})),f.Ub(18,"label"),f.Bc(19),f.Tb(),f.Ub(20,"mat-icon"),f.Bc(21),f.Tb(),f.Tb()),2&e){var n=f.rc(1);f.Bb(2),f.mc("disabled",t.deal>=t.maxDeal),f.Bb(5),f.mc("disabled",t.minDeal>=t.deal),f.Bb(10),f.Fb("mat-list-item",t.listItem),f.mc("matMenuTriggerFor",n),f.Bb(2),f.Cc(t.dealLabel),f.Bb(2),f.Cc(t.isMenuOpened?"remove":"expand_more")}},directives:[oe.d,oe.a,U.a,E.a,le.b,oe.c],styles:[""]}),ie),de=n("bv9b");function fe(e,t){1&e&&f.Pb(0,"mat-progress-bar",6)}function he(e,t){if(1&e){var n=f.Vb();f.Ub(0,"button",2),f.cc("click",(function(){return f.tc(n),f.gc().actionService.undo()})),f.Ub(1,"mat-icon"),f.Bc(2,"undo"),f.Tb(),f.Ub(3,"label"),f.Bc(4,"UNDO"),f.Tb(),f.Tb(),f.Ub(5,"button",2),f.cc("click",(function(){return f.tc(n),f.gc().actionService.redo()})),f.Ub(6,"mat-icon"),f.Bc(7,"redo"),f.Tb(),f.Ub(8,"label"),f.Bc(9,"REDO"),f.Tb(),f.Tb(),f.Ub(10,"button",3),f.cc("click",(function(){return f.tc(n),f.gc().actionService.playNext()})),f.Ub(11,"mat-icon"),f.Bc(12,"emoji_objects"),f.Tb(),f.Ub(13,"label"),f.Bc(14,"AUTO"),f.Tb(),f.Tb(),f.Ub(15,"button",4),f.cc("click",(function(){return f.tc(n),f.gc().actionService.assist()})),f.Ub(16,"mat-icon"),f.Bc(17,"assistant"),f.Tb(),f.Ub(18,"label"),f.Bc(19,"ASSIST"),f.Tb(),f.zc(20,fe,1,0,"mat-progress-bar",5),f.Tb()}if(2&e){var a=f.gc();f.mc("disabled",!a.actionService.state.canUndo),f.Bb(5),f.mc("disabled",!a.actionService.state.canRedo),f.Bb(5),f.mc("disabled",!a.actionService.state.nextMove),f.Bb(5),f.mc("disabled",!a.actionService.state.canAssist),f.Bb(5),f.mc("ngIf",a.actionService.state.assistRequest)}}function be(e,t){1&e&&f.Pb(0,"mat-progress-bar",6)}function ge(e,t){if(1&e){var n=f.Vb();f.Sb(0),f.Ub(1,"button",7),f.cc("click",(function(){return f.tc(n),f.gc().actionService.undo()})),f.Ub(2,"mat-icon"),f.Bc(3,"undo"),f.Tb(),f.Tb(),f.Ub(4,"button",7),f.cc("click",(function(){return f.tc(n),f.gc().actionService.redo()})),f.Ub(5,"mat-icon"),f.Bc(6,"redo"),f.Tb(),f.Tb(),f.Ub(7,"button",8),f.cc("click",(function(){return f.tc(n),f.gc().actionService.playNext()})),f.Ub(8,"mat-icon"),f.Bc(9,"emoji_objects"),f.Tb(),f.Tb(),f.Ub(10,"button",9),f.cc("click",(function(){return f.tc(n),f.gc().actionService.assist()})),f.Ub(11,"mat-icon"),f.Bc(12,"assistant"),f.Tb(),f.zc(13,be,1,0,"mat-progress-bar",5),f.Tb(),f.Rb()}if(2&e){var a=f.gc();f.Bb(1),f.mc("disabled",!a.actionService.state.canUndo),f.Bb(3),f.mc("disabled",!a.actionService.state.canRedo),f.Bb(3),f.mc("disabled",!a.actionService.state.nextMove),f.Bb(3),f.mc("disabled",!a.actionService.state.canAssist),f.Bb(3),f.mc("ngIf",a.actionService.state.assistRequest)}}var pe,ve=((pe=function(){function e(t){_classCallCheck(this,e),this.actionService=t,this.noLabel=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||pe)(f.Ob(o.a))},pe.\u0275cmp=f.Ib({type:pe,selectors:[["app-freecell-action-buttons"]],inputs:{noLabel:"noLabel"},decls:3,vars:2,consts:[["buttons",""],[4,"ngIf","ngIfElse"],["mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","accent",3,"disabled","click"],["mat-stroked-button","","color","warn",3,"disabled","click"],["mode","indeterminate","color","warn","style","position: absolute; left: 0; bottom: 0",4,"ngIf"],["mode","indeterminate","color","warn",2,"position","absolute","left","0","bottom","0"],["mat-icon-button","",3,"disabled","click"],["mat-icon-button","","color","accent",3,"disabled","click"],["mat-icon-button","","color","warn",3,"disabled","click"]],template:function(e,t){if(1&e&&(f.zc(0,he,21,5,"ng-template",null,0,f.Ac),f.zc(2,ge,14,5,"ng-container",1)),2&e){var n=f.rc(1);f.Bb(2),f.mc("ngIf",t.noLabel)("ngIfElse",n)}},directives:[a.l,E.a,U.a,de.a],styles:[""]}),pe),_e=n("lPNG"),me=n("WxrP"),ke=n("kmnG"),ye=n("d3UM"),Se=n("FKr1");function Ce(e,t){1&e&&(f.Ub(0,"mat-icon",4),f.Bc(1,"emoji_events"),f.Tb())}function Te(e,t){if(1&e&&(f.Ub(0,"mat-option",2),f.Ub(1,"div",5),f.Bc(2),f.Ub(3,"span"),f.Bc(4),f.Tb(),f.Bc(5,"\xa0\u2192\xa0 "),f.Ub(6,"span"),f.Bc(7),f.Tb(),f.Bc(8,"\xa0 "),f.Ub(9,"span"),f.Bc(10),f.Tb(),f.Tb(),f.Tb()),2&e){var n=t.$implicit,a=t.index;f.mc("value",a),f.Bb(2),f.Dc(" ",a+1,".\xa0 "),f.Bb(1),f.Db(n.cardClass),f.Bb(1),f.Cc(n.cardName),f.Bb(2),f.Db(n.takerClass),f.Bb(1),f.Cc(n.takerName),f.Bb(2),f.Db(n.outcomeClass),f.Bb(1),f.Cc(n.outcomeName)}}var we,Oe=["danger-critical","danger-extreme","danger-very-high","danger-high","danger-moderate","danger-low","danger-very-low"],Be=((we=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;return _classCallCheck(this,n),(a=t.call(this))._gameService=e,a.items=[],a.selection=-1,a.isSolved=!1,a.cards={},a.onMoveCallback=function(e,t,n,i){var r=a.items[i]||{};if(t!==r.giver||n!==r.taker){if(r.card=e.getCard(n,-1),r.giver=t,r.taker=n,r.outcome=e.countEmpty(),r.cardName=a.cards[r.card].cardName,r.cardClass=a.cards[r.card].className,r.outcome===e.PILE_NUM+e.CELL_NUM?(a.isSolved=!0,r.outcomeName="solved!"):r.outcomeName="free "+r.outcome,r.outcomeClass=Oe[Math.min(r.outcome,Oe.length-1)],e.getLine(n).length>1){var c=e.getCard(n,-2);r.takerName=a.cards[c].cardName,r.takerClass=a.cards[c].className}else r.takerName=function(e,t){return e.isBase(t)?"base":e.isPile(t)?"pile":e.isCell(t)?"cell":"unknown index:"+t}(e,n),r.takerClass="";a.items[i]=r}else"solved!"===r.outcomeName&&(a.isSolved=!0)},a}return _createClass(n,[{key:"ngOnInit",value:function(){for(var e=this,t=0;t<_e.a;t++)this.cards[t]={className:"history-item-"+Object(_e.i)(t),cardName:Object(_e.f)(t)};this._addSubscription(this._gameService.subscribe((function(t){var n;(e._gameService.isFirstChange||t.deal!==(null===(n=e._gameService.previousState)||void 0===n?void 0:n.deal))&&(e.isSolved=!1,e.items.length=0),t.path&&(e.isSolved=!1,Object(me.b)(t,e.onMoveCallback),e.items.splice(t.path.length/2)),e.selection=t.mark-1})))}},{key:"setSelection",value:function(e){this.selection!==e&&e<=this.items.length&&e>=-1&&(this._gameService.mark=e+1)}}]),n}(y)).\u0275fac=function(e){return new(e||we)(f.Ob(v.a))},we.\u0275cmp=f.Ib({type:we,selectors:[["app-freecell-history"]],features:[f.yb],decls:8,vars:4,consts:[["color","accent",4,"ngIf"],[3,"value","valueChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["color","accent"],[1,"history-item"]],template:function(e,t){1&e&&(f.Ub(0,"mat-form-field"),f.Ub(1,"mat-label"),f.zc(2,Ce,2,0,"mat-icon",0),f.Bc(3," Game History: "),f.Tb(),f.Ub(4,"mat-select",1),f.cc("valueChange",(function(e){return t.setSelection(e)})),f.Ub(5,"mat-option",2),f.Bc(6,"Start"),f.Tb(),f.zc(7,Te,11,11,"mat-option",3),f.Tb(),f.Tb()),2&e&&(f.Bb(2),f.mc("ngIf",t.isSolved),f.Bb(2),f.mc("value",t.selection),f.Bb(1),f.mc("value",-1),f.Bb(2),f.mc("ngForOf",t.items))},directives:[ke.b,ke.e,a.l,ye.a,Se.i,a.k,U.a],styles:["div.history-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.history-item-diamonds[_ngcontent-%COMP%], .history-item-hearts[_ngcontent-%COMP%]{color:red}.history-item-clubs[_ngcontent-%COMP%], .history-item-spades[_ngcontent-%COMP%]{color:#000}.danger-critical[_ngcontent-%COMP%], .danger-extreme[_ngcontent-%COMP%], .danger-high[_ngcontent-%COMP%], .danger-low[_ngcontent-%COMP%], .danger-moderate[_ngcontent-%COMP%], .danger-very-high[_ngcontent-%COMP%], .danger-very-low[_ngcontent-%COMP%]{min-width:4em;padding-left:.25em;padding-right:.25em}.danger-very-low[_ngcontent-%COMP%]{background-color:#bbee90}.danger-low[_ngcontent-%COMP%]{background-color:#bbdd85}.danger-moderate[_ngcontent-%COMP%]{background-color:#bbcc80}.danger-high[_ngcontent-%COMP%]{background-color:#ffee30}.danger-very-high[_ngcontent-%COMP%]{background-color:#fc0}.danger-extreme[_ngcontent-%COMP%]{background-color:#ff9920}.danger-critical[_ngcontent-%COMP%]{background-color:#ff5540}"]}),we);function Me(e,t){if(1&e&&f.Pb(0,"app-freecell-action-buttons",11),2&e){var n=f.gc();f.mc("noLabel",n.noLabel)}}function Pe(e,t){1&e&&(f.Ub(0,"div",12),f.Pb(1,"app-freecell-history"),f.Tb())}function Le(e,t){if(1&e){var n=f.Vb();f.Ub(0,"button",13),f.cc("click",(function(){f.tc(n);var e=f.gc();return e.settings.set({enableDarkMode:!e.settings.state.enableDarkMode})})),f.Ub(1,"mat-icon"),f.Bc(2),f.Tb(),f.Tb(),f.Ub(3,"button",14),f.cc("click",(function(){return f.tc(n),f.gc().settingsChange.emit()})),f.Ub(4,"mat-icon"),f.Bc(5,"settings"),f.Tb(),f.Tb()}if(2&e){var a=f.gc();f.Bb(2),f.Cc(a.settings.state.enableDarkMode?"brightness_3":"brightness_7")}}function Ee(e,t){1&e&&f.Qb(0)}function Ue(e,t){1&e&&f.Qb(0)}function xe(e,t){if(1&e&&(f.zc(0,Ee,1,0,"ng-container",15),f.Pb(1,"span",16),f.zc(2,Ue,1,0,"ng-container",15)),2&e){f.gc();var n=f.rc(3),a=f.rc(5);f.mc("ngTemplateOutlet",n),f.Bb(2),f.mc("ngTemplateOutlet",a)}}function Ae(e,t){1&e&&f.Qb(0)}function Ie(e,t){if(1&e&&(f.Pb(0,"span",16),f.zc(1,Ae,1,0,"ng-container",15),f.Pb(2,"span",16)),2&e){f.gc();var n=f.rc(1);f.Bb(1),f.mc("ngTemplateOutlet",n)}}function De(e,t){1&e&&f.Qb(0)}function Re(e,t){1&e&&f.Qb(0)}function Ne(e,t){1&e&&f.Qb(0)}function je(e,t){if(1&e&&(f.zc(0,De,1,0,"ng-container",15),f.zc(1,Re,1,0,"ng-container",15),f.zc(2,Ne,1,0,"ng-container",15)),2&e){f.gc();var n=f.rc(3),a=f.rc(9),i=f.rc(5);f.mc("ngTemplateOutlet",n),f.Bb(1),f.mc("ngTemplateOutlet",a),f.Bb(1),f.mc("ngTemplateOutlet",i)}}function Fe(e,t){1&e&&f.Qb(0)}function Xe(e,t){if(1&e&&(f.Sb(0),f.zc(1,Fe,1,0,"ng-container",15),f.Rb()),2&e){f.gc();var n=f.rc(11);f.Bb(1),f.mc("ngTemplateOutlet",n)}}function ze(e,t){1&e&&f.Qb(0)}function Ye(e,t){if(1&e&&(f.Sb(0),f.zc(1,ze,1,0,"ng-container",15),f.Rb()),2&e){f.gc();var n=f.rc(9);f.Bb(1),f.mc("ngTemplateOutlet",n)}}function He(e,t){1&e&&f.Qb(0)}function We(e,t){if(1&e&&(f.Ub(0,"mat-toolbar-row"),f.zc(1,He,1,0,"ng-container",15),f.Tb()),2&e){f.gc();var n=f.rc(9);f.Bb(1),f.mc("ngTemplateOutlet",n)}}function Ke(e,t){1&e&&f.Qb(0)}function Ge(e,t){if(1&e&&(f.Ub(0,"mat-toolbar",17),f.zc(1,Ke,1,0,"ng-container",15),f.Tb()),2&e){f.gc();var n=f.rc(7);f.Bb(1),f.mc("ngTemplateOutlet",n)}}var Qe,Ve=["*"],qe=Y.b.XSmall,Je=Y.b.Small,Ze=Y.b.Large,$e=Y.b.XLarge,et=((Qe=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a){var i;return _classCallCheck(this,n),(i=t.call(this)).settings=a,i.settingsChange=new f.n,i.noLabel=!1,i.rowNum=3,i._addSubscription(e.observe([qe,Je,Ze,$e]).subscribe((function(e){i.noLabel=e.breakpoints[qe]||e.breakpoints[Je],i.rowNum=e.breakpoints[qe]?3:e.breakpoints[Ze]||e.breakpoints[$e]?1:2}))),i}return _createClass(n,[{key:"ngOnInit",value:function(){}}]),n}(y)).\u0275fac=function(e){return new(e||Qe)(f.Ob(Y.a),f.Ob(_.a))},Qe.\u0275cmp=f.Ib({type:Qe,selectors:[["app-freecell-sandwich"]],outputs:{settingsChange:"settingsChange"},features:[f.yb],ngContentSelectors:Ve,decls:23,vars:6,consts:[["actionButtons",""],["history",""],["settingsButtons",""],["toolbarRow3",""],["toolbarRow2",""],["toolbarRow1",""],[3,"sandwichOrder","hideFooter","sandwichOrderChange"],["appSandwichHeader","","color","primary"],[2,"margin-right","20px"],[4,"ngIf"],["appSandwichFooter","","color","primary",4,"ngIf"],[3,"noLabel"],[1,"mat-typography","padding-top-half-rem"],["mat-icon-button","",3,"click"],["mat-icon-button","",2,"margin-right","40px",3,"click"],[4,"ngTemplateOutlet"],[1,"flex-space-filler-1"],["appSandwichFooter","","color","primary"]],template:function(e,t){1&e&&(f.lc(),f.zc(0,Me,1,1,"ng-template",null,0,f.Ac),f.zc(2,Pe,2,0,"ng-template",null,1,f.Ac),f.zc(4,Le,6,1,"ng-template",null,2,f.Ac),f.zc(6,xe,3,2,"ng-template",null,3,f.Ac),f.zc(8,Ie,3,1,"ng-template",null,4,f.Ac),f.zc(10,je,3,3,"ng-template",null,5,f.Ac),f.Ub(12,"app-sandwich",6),f.cc("sandwichOrderChange",(function(e){return t.settings.set({sandwichOrder:e})})),f.Ub(13,"mat-toolbar",7),f.Ub(14,"mat-toolbar-row"),f.Ub(15,"span"),f.Bc(16,"Freecell"),f.Tb(),f.Pb(17,"app-freecell-deal-menu",8),f.zc(18,Xe,2,1,"ng-container",9),f.zc(19,Ye,2,1,"ng-container",9),f.Tb(),f.zc(20,We,2,1,"mat-toolbar-row",9),f.Tb(),f.kc(21,0,["appSandwichContent",""]),f.zc(22,Ge,2,1,"mat-toolbar",10),f.Tb()),2&e&&(f.Bb(12),f.mc("sandwichOrder",t.settings.state.sandwichOrder)("hideFooter",2>t.rowNum),f.Bb(6),f.mc("ngIf",1===t.rowNum),f.Bb(1),f.mc("ngIf",2===t.rowNum),f.Bb(1),f.mc("ngIf",t.rowNum>=3),f.Bb(2),f.mc("ngIf",t.rowNum>1))},directives:[re,ce.a,ce.c,ue,a.l,ve,Be,E.a,U.a,a.q],styles:[".padding-top-half-rem[_ngcontent-%COMP%]{padding-top:.5rem}"]}),Qe),tt=n("XhcP");function nt(e,t){1&e&&f.Bc(0," Loading stuff...\n")}function at(e,t){if(1&e){var n=f.Vb();f.Ub(0,"mat-slide-toggle",17),f.cc("change",(function(e){return f.tc(n),f.gc(2).settings.set({sidenavModeSide:!!e.checked})})),f.Tb()}if(2&e){var a=f.gc(2);f.mc("checked",a.settings.state.sidenavModeSide)}}function it(e,t){1&e&&f.Pb(0,"mat-progress-bar",18)}function rt(e,t){if(1&e){var n=f.Vb();f.Ub(0,"button",19),f.cc("click",(function(){return f.tc(n),f.gc(2).settings.set({sidenavClosed:!1})})),f.Ub(1,"mat-icon"),f.Bc(2,"double_arrow"),f.Tb(),f.Tb()}if(2&e){var a=f.gc(2);f.Fb("sidenav-open-button-active",!a.sidenavOpened)}}function ct(e,t){if(1&e){var n=f.Vb();f.Ub(0,"div",2),f.Ub(1,"mat-sidenav-container",3),f.Ub(2,"mat-sidenav",4),f.cc("closedStart",(function(){return f.tc(n),f.gc().settings.set({sidenavClosed:!0})}))("openedChange",(function(e){return f.tc(n),f.gc().sidenavOpened=e})),f.Ub(3,"mat-toolbar",5),f.Ub(4,"button",6),f.cc("click",(function(){return f.tc(n),f.gc().settings.set({sidenavClosed:!0})})),f.Ub(5,"mat-icon"),f.Bc(6,"close"),f.Tb(),f.Tb(),f.Pb(7,"span",7),f.Ub(8,"span"),f.Bc(9,"Freecell"),f.Tb(),f.Pb(10,"span",7),f.zc(11,at,1,1,"mat-slide-toggle",8),f.Tb(),f.Ub(12,"mat-action-list"),f.Pb(13,"app-freecell-deal-menu",9),f.Ub(14,"div",10),f.Bc(15,"Actions:"),f.Tb(),f.Ub(16,"button",11),f.cc("click",(function(){return f.tc(n),f.gc().actionService.undo()})),f.Ub(17,"mat-icon",12),f.Bc(18,"undo"),f.Tb(),f.Bc(19," UNDO "),f.Tb(),f.Ub(20,"button",11),f.cc("click",(function(){return f.tc(n),f.gc().actionService.redo()})),f.Ub(21,"mat-icon",12),f.Bc(22,"redo"),f.Tb(),f.Bc(23," REDO "),f.Tb(),f.Ub(24,"button",11),f.cc("click",(function(){return f.tc(n),f.gc().actionService.playNext()})),f.Ub(25,"mat-icon",12),f.Bc(26,"emoji_objects"),f.Tb(),f.Ub(27,"span"),f.Bc(28,"AUTO"),f.Tb(),f.Tb(),f.Ub(29,"button",11),f.cc("click",(function(){return f.tc(n),f.gc().actionService.assist()})),f.Ub(30,"mat-icon",12),f.Bc(31,"assistant"),f.Tb(),f.Ub(32,"span"),f.Bc(33,"ASSIST"),f.Tb(),f.zc(34,it,1,0,"mat-progress-bar",13),f.Tb(),f.Tb(),f.Ub(35,"div",14),f.Pb(36,"app-freecell-history"),f.Tb(),f.Pb(37,"span",7),f.Pb(38,"mat-divider"),f.Ub(39,"mat-action-list"),f.Ub(40,"button",15),f.cc("click",(function(){f.tc(n);var e=f.gc();return e.settings.set({enableDarkMode:!e.settings.state.enableDarkMode})})),f.Ub(41,"mat-icon"),f.Bc(42),f.Tb(),f.Ub(43,"span"),f.Bc(44,"THEME"),f.Tb(),f.Tb(),f.Ub(45,"button",15),f.cc("click",(function(){return f.tc(n),f.gc().settingsChange.emit()})),f.Ub(46,"mat-icon"),f.Bc(47,"settings"),f.Tb(),f.Ub(48,"span"),f.Bc(49,"SETTINGS"),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Ub(50,"mat-sidenav-content"),f.kc(51),f.zc(52,rt,3,2,"button",16),f.Tb(),f.Tb(),f.Tb()}if(2&e){var a=t.ngIf,i=f.gc();f.Bb(2),f.mc("mode",!i.settings.state.sidenavModeSide||a.breakpoints[i.BP_XS]?"over":"side")("opened",!i.settings.state.sidenavClosed),f.Bb(9),f.mc("ngIf",!a.breakpoints[i.BP_XS]),f.Bb(2),f.mc("listItem",!0),f.Bb(3),f.mc("disabled",!i.actionService.state.canUndo),f.Bb(1),f.mc("ngClass",i.actionService.state.canUndo?"mat-primary":"disabled-color"),f.Bb(3),f.mc("disabled",!i.actionService.state.canRedo),f.Bb(1),f.mc("ngClass",i.actionService.state.canRedo?"mat-primary":"disabled-color"),f.Bb(3),f.mc("disabled",!i.actionService.state.nextMove),f.Bb(1),f.mc("ngClass",i.actionService.state.nextMove?"mat-accent":"disabled-color"),f.Bb(4),f.mc("disabled",!i.actionService.state.canAssist),f.Bb(1),f.mc("ngClass",i.actionService.state.canAssist?"mat-warn":"disabled-color"),f.Bb(4),f.mc("ngIf",i.actionService.state.assistRequest),f.Bb(8),f.Cc(i.settings.state.enableDarkMode?"brightness_3":"brightness_7"),f.Bb(10),f.mc("ngIf",i.settings.state.sidenavClosed)}}var st,ot=["*"],lt=Y.b.XSmall,ut=Y.b.Small,dt=Y.b.Medium,ft=Y.b.Large,ht=Y.b.XLarge,bt=((st=function(){function e(t,n,a){_classCallCheck(this,e),this.actionService=t,this.settings=n,this.settingsChange=new f.n,this.BP_XS=lt,this.BP_SM=ut,this.BP_MD=dt,this.BP_LG=ft,this.BP_XL=ht,this.sidenavOpened=!1,this.breakpoints$=a.observe([lt,ut,dt,ft,ht])}return _createClass(e,[{key:"isXSmall",value:function(e){return e.breakpoints[Y.b.XSmall]}},{key:"getSideNavMode",value:function(e){return e.breakpoints[lt]?"over":"side"}}]),e}()).\u0275fac=function(e){return new(e||st)(f.Ob(o.a),f.Ob(_.a),f.Ob(Y.a))},st.\u0275cmp=f.Ib({type:st,selectors:[["app-freecell-sidenav"]],outputs:{settingsChange:"settingsChange"},ngContentSelectors:ot,decls:4,vars:3,consts:[["loading",""],["class","freecell-container",4,"ngIf"],[1,"freecell-container"],[1,"freecell-sidenav-container"],[3,"mode","opened","closedStart","openedChange"],["color","primary",1,"freecell-toolbar"],["mat-icon-button","",3,"click"],[1,"flex-space-filler-1"],["color","primary",3,"checked","change",4,"ngIf"],[3,"listItem"],["mat-subheader",""],["mat-list-item","",3,"disabled","click"],[3,"ngClass"],["mode","indeterminate","color","warn",4,"ngIf"],[2,"padding","1em"],["mat-list-item","",3,"click"],["class","sidenav-open-button","mat-icon-button","","color","primary",3,"sidenav-open-button-active","click",4,"ngIf"],["color","primary",3,"checked","change"],["mode","indeterminate","color","warn"],["mat-icon-button","","color","primary",1,"sidenav-open-button",3,"click"]],template:function(e,t){1&e&&(f.lc(),f.zc(0,nt,1,0,"ng-template",null,0,f.Ac),f.zc(2,ct,53,15,"div",1),f.hc(3,"async")),2&e&&(f.Bb(2),f.mc("ngIf",f.ic(3,1,t.breakpoints$)))},directives:[a.l,tt.b,tt.a,ce.a,E.a,U.a,le.a,ue,le.d,le.b,a.j,Be,I.a,tt.c,L.a,de.a],pipes:[a.b],styles:["button.sidenav-open-button[_ngcontent-%COMP%]{position:absolute;left:-64px;top:1px;transition:left 2s 1s}button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-12px}@media (min-width:600px) and (max-width:959.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-9px}}@media (min-width:960px) and (max-width:1279.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-6px}}@media (min-width:1280px) and (max-width:1919.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-3px}}@media (min-width:1920px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:0}}.freecell-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}.freecell-sidenav-container[_ngcontent-%COMP%]{flex:1}"]}),st);function gt(e,t){1&e&&f.kc(0)}function pt(e,t){if(1&e){var n=f.Vb();f.Ub(0,"app-freecell-sandwich",4),f.cc("settingsChange",(function(){return f.tc(n),f.gc().openSettingsDialog()})),f.Qb(1,3),f.Tb()}if(2&e){f.gc();var a=f.rc(1);f.Bb(1),f.mc("ngTemplateOutlet",a)}}function vt(e,t){if(1&e){var n=f.Vb();f.Ub(0,"app-freecell-sidenav",4),f.cc("settingsChange",(function(){return f.tc(n),f.gc().openSettingsDialog()})),f.Qb(1,3),f.Tb()}if(2&e){f.gc();var a=f.rc(1);f.Bb(1),f.mc("ngTemplateOutlet",a)}}var _t,mt=["*"],kt=((_t=function(){function e(t,n){_classCallCheck(this,e),this.settings=t,this.dialog=n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openSettingsDialog",value:function(){this.dialog.open(z,{maxHeight:"100vh"})}}]),e}()).\u0275fac=function(e){return new(e||_t)(f.Ob(_.a),f.Ob(M.b))},_t.\u0275cmp=f.Ib({type:_t,selectors:[["app-freecell-view"]],ngContentSelectors:mt,decls:7,vars:1,consts:[["portal",""],["sandwich",""],["sidenav",""],[3,"ngTemplateOutlet"],[3,"settingsChange"]],template:function(e,t){if(1&e&&(f.lc(),f.zc(0,gt,1,0,"ng-template",null,0,f.Ac),f.zc(2,pt,2,1,"ng-template",null,1,f.Ac),f.zc(4,vt,2,1,"ng-template",null,2,f.Ac),f.Qb(6,3)),2&e){var n=f.rc(3),a=f.rc(5);f.Bb(6),f.mc("ngTemplateOutlet","sidenav"===t.settings.state.view?a:n)}},directives:[a.q,et,bt],styles:[""]}),_t);function yt(e,t,n){return e+(t-e)*n}var St=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;_classCallCheck(this,e),this.basis=t,this.itemWidth=i,this.itemHeight=r,this.deltaWidth=n,this.deltaHeight=a/2,this.cellStartX=n,this.cellStartY=this.deltaHeight,this.cellEndX=this.cellStartX+t.CELL_NUM*(i+n)-n,this.cellEndY=this.cellStartY+r,this.baseStartX=this.cellEndX+n,this.baseStartY=this.cellStartY,this.baseEndX=this.baseStartX+t.BASE_NUM*(i+n)-n,this.baseEndY=this.cellEndY,this.pileStartX=n,this.pileStartY=this.cellEndY+this.deltaHeight,this.pileEndX=this.pileStartX+t.PILE_NUM*(i+n)-n,this.pileEndY=this.pileStartY+4.5*r}return _createClass(e,[{key:"getCellX",value:function(e){return yt(this.cellStartX,this.cellEndX-this.itemWidth,e/(this.basis.CELL_NUM-1))}},{key:"getCellY",value:function(e){return this.cellStartY}},{key:"getBaseX",value:function(e){return yt(this.baseStartX,this.baseEndX-this.itemWidth,e/(this.basis.BASE_NUM-1))}},{key:"getBaseY",value:function(e){return this.baseStartY}},{key:"getPileX",value:function(e){return yt(this.pileStartX,this.pileEndX-this.itemWidth,e/(this.basis.PILE_NUM-1))}},{key:"getPileY",value:function(e){return this.pileStartY}},{key:"getSpotPosition",value:function(e){var t=this.basis;return t.isBase(e)?{x:this.getBaseX(e-=t.BASE_START),y:this.getBaseY(e)}:t.isCell(e)?{x:this.getCellX(e-=t.CELL_START),y:this.getCellY(e)}:t.isPile(e)?{x:this.getPileX(e-=t.PILE_START),y:this.getPileY(e)}:{x:0,y:0}}},{key:"getCardPosition",value:function(e,t,n){var a=this.basis,i=this.getSpotPosition(e);if(a.isPile(e)&&n>0){var r=Math.min((this.pileEndY-this.pileStartY-this.itemHeight)/(n-1),.4*this.itemHeight);i.y+=r*t}return i}},{key:"width",get:function(){return this.deltaWidth+Math.max(this.baseEndX,this.cellEndX,this.pileEndX)}},{key:"height",get:function(){return this.deltaHeight+Math.max(this.baseEndY,this.cellEndY,this.pileEndY)}}]),e}();function Ct(e,t){if(1&e&&(f.Ub(0,"div"),f.Ub(1,"p"),f.Bc(2),f.Tb(),f.Ub(3,"p"),f.Bc(4),f.Tb(),f.Ub(5,"p"),f.Bc(6),f.Tb(),f.Tb()),2&e){var n=f.gc();f.Bb(2),f.Dc("DEAL: ",n.deal,""),f.Bb(2),f.Dc("MARK: ",n.mark,""),f.Bb(2),f.Dc("PATH: ",n.path,"")}}var Tt,wt=((Tt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i){var r;return _classCallCheck(this,n),(r=t.call(this))._router=e,r._route=a,r._gameService=i,r.debug=!1,r._lock=!1,r}return _createClass(n,[{key:"_update",value:function(e){var t=this,n=e.path||"",a=parseInt(e.deal,10);(isNaN(a)||a<0)&&(a=-1);var i=parseInt(e.mark,10);(isNaN(i)||i<0||i+i>n.length)&&(i=Math.floor(n.length/2)),a!==this.deal||n!==this.path||i!==this.mark?(this.deal=a,this.path=n,this.mark=i,this._lock=!0,Promise.resolve().then((function(){var e=t._gameService.state;e.deal===a&&e.path===n&&e.mark===i||t._gameService.set(a,n,i)})).finally((function(){return t._lock=!1}))):this._lock=!1}},{key:"ngOnInit",value:function(){var e=this;this._lock=!0,this._addSubscription(this._gameService.subscribe((function(t){e._lock||e.deal===t.deal&&e.path===t.path&&e.mark===t.mark||(e.deal=t.deal,e.path=t.path,e.mark=t.mark,e.updateAddressBar(t.deal,t.path,t.mark))}))),this._addSubscription(this._route.queryParams.subscribe((function(t){return e._update(t)})))}},{key:"updateAddressBar",value:function(e,t,n){return t?"number"==typeof n&&n+n===t.length&&(n=void 0):(t=void 0,n=void 0),this._router.navigate(["."],{relativeTo:this._route,queryParams:{deal:e,path:t,mark:n}})}}]),n}(y)).\u0275fac=function(e){return new(e||Tt)(f.Ob(r.b),f.Ob(r.a),f.Ob(v.a))},Tt.\u0275cmp=f.Ib({type:Tt,selectors:[["app-freecell-router"]],inputs:{debug:"debug"},features:[f.yb],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&f.zc(0,Ct,7,3,"div",0),2&e&&f.mc("ngIf",t.debug)},directives:[a.l],styles:[""]}),Tt);function Ot(e,t){if(e===t)throw new Error("Node cannot be appended to itself");return(a=(n=t).list)&&(a.head===n&&(a.head=n.next),a.tail===n&&(a.tail=n.prev),a.length--,n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),n.next=null,n.prev=null,n.list=null),e?(t.prev=e,t.next=e.next,e.next=t,t.next&&(t.next.prev=t),e.list?(e.list.length++,e.list.tail===e&&(e.list.tail=t)):e.list={head:e,tail:t,length:2},t.list=e.list):t.list={head:t,tail:t,length:1};var n,a}var Bt=n("XNiG"),Mt=function(){function e(){_classCallCheck(this,e),this._listeners=[],this._events=new Bt.a,this._screenX=0,this._screenY=0,this._clientX=0,this._clientY=0,this._deltaX=0,this._deltaY=0,this._touchId=NaN}return _createClass(e,[{key:"touchStart",value:function(e,t){this.stop(),this._deltaX=this._deltaY=0;var n=e.targetTouches;if(n.length>0){var a=n[0];this._touchId=a.identifier,this._clientX=a.clientX,this._clientY=a.clientY,this._screenX=a.screenX,this._screenY=a.screenY,this.data=t,this._events.next("DragStart")}}},{key:"touchMove",value:function(e){for(var t=e.targetTouches,n=t.length;n-- >0;){var a=t[n];if(a.identifier===this._touchId){this._deltaX=a.screenX-this._screenX,this._deltaY=a.screenY-this._screenY,this._events.next("DragMove");break}}}},{key:"mouseStart",value:function(e,t,n){var a=this;this.stop(),this._deltaX=this._deltaY=0,this._clientX=e.clientX,this._clientY=e.clientY,this._screenX=e.screenX,this._screenY=e.screenY,this.data=n,this._listeners.push(t.listen("document","mousemove",(function(e){e.preventDefault(),a._deltaX=e.screenX-a._screenX,a._deltaY=e.screenY-a._screenY;var t=window.devicePixelRatio;t&&1!==t&&(a._deltaX/=t,a._deltaY/=t),a._events.next("DragMove")}))),this._listeners.push(t.listen("document","mouseup",(function(e){a.stop()}))),this._events.next("DragStart")}},{key:"stop",value:function(){if(this.isDragging){var e,t=_createForOfIteratorHelper(this._listeners);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}this._listeners.length=0,this._touchId=NaN,this._events.next("DragStop")}}},{key:"dragChange",get:function(){return this._events.asObservable()}},{key:"screenX",get:function(){return this._screenX}},{key:"screenY",get:function(){return this._screenY}},{key:"clientX",get:function(){return this._clientX}},{key:"clientY",get:function(){return this._clientY}},{key:"deltaX",get:function(){return this._deltaX}},{key:"deltaY",get:function(){return this._deltaY}},{key:"isTouchDragging",get:function(){return!isNaN(this._touchId)}},{key:"isMouseDragging",get:function(){return this._listeners.length>0}},{key:"isDragging",get:function(){return this.isTouchDragging||this.isMouseDragging}}]),e}(),Pt=["spot"];function Lt(e,t){if(1&e){var n=f.Vb();f.Ub(0,"div",3,4),f.cc("click",(function(){f.tc(n);var e=t.index,a=f.gc();return a.selectionChange.emit(a.selection===e?-1:e)})),f.Tb()}if(2&e){var a=t.$implicit,i=t.index,r=f.gc();f.Fb("freecell_selection",r.selection===i),f.mc("ngClass",a.ngClass)("ngStyle",a.ngStyle)("matRippleDisabled",!r.settings.state.enableRipples)}}function Et(e,t){1&e&&(f.Sb(0),f.Pb(1,"object",5),f.Rb())}var Ut,xt,At=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],It=["[appFreecellBackground]","[appFreecellForeground]"],Dt=((Ut=function(){function e(t,n){_classCallCheck(this,e),this.settings=t,this.action=n,this.selection=-1,this.selectionChange=new f.n,this.touchChange=new f.n,this.spots=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"layout",set:function(e){this.spots=function(e){var t=[];if(e)for(var n=e.basis,a=e.itemWidth,i=e.itemHeight,r=Object(k.f)(a,e.width),c=Object(k.f)(i,e.height),s=0;s<n.DESK_SIZE;s++){var o=e.getSpotPosition(s),l={ngStyle:{transform:"translate(".concat(Object(k.f)(o.x,a),", ").concat(Object(k.f)(o.y,i),")"),width:r,height:c},ngClass:{}};n.isBase(s)?(l.ngClass.freecell_base=!0,l.ngClass["freecell_"+Object(_e.i)(s-n.BASE_START)]=!0):n.isCell(s)?l.ngClass.freecell_cell=!0:n.isPile(s)&&(l.ngClass.freecell_pile=!0),t.push(l)}return t}(e)}}]),e}()).\u0275fac=function(e){return new(e||Ut)(f.Ob(_.a),f.Ob(o.a))},Ut.\u0275cmp=f.Ib({type:Ut,selectors:[["app-freecell-playground"]],viewQuery:function(e,t){var n;1&e&&f.Fc(Pt,!0),2&e&&f.qc(n=f.dc())&&(t.spotList=n)},inputs:{layout:"layout",selection:"selection"},outputs:{selectionChange:"selectionChange",touchChange:"touchChange"},ngContentSelectors:It,decls:5,vars:6,consts:[[1,"freecell_deck",3,"touchstart","touchend","touchcancel","touchmove"],["class","freecell_spot","matRipple","",3,"freecell_selection","ngClass","ngStyle","matRippleDisabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],["matRipple","",1,"freecell_spot",3,"ngClass","ngStyle","matRippleDisabled","click"],["spot",""],["type","image/svg+xml","data","./assets/freecell/fireworks.svg",1,"freecell-fireworks"]],template:function(e,t){1&e&&(f.lc(At),f.Ub(0,"div",0),f.cc("touchstart",(function(e){return t.touchChange.emit({type:"DragStart",event:e})}))("touchend",(function(e){return t.touchChange.emit({type:"DragStop",event:e})}))("touchcancel",(function(e){return t.touchChange.emit({type:"DragStop",event:e})}))("touchmove",(function(e){return t.touchChange.emit({type:"DragMove",event:e})})),f.kc(1),f.zc(2,Lt,2,5,"div",1),f.kc(3,1),f.zc(4,Et,2,0,"ng-container",2),f.Tb()),2&e&&(f.Fb("use-svg-background",t.settings.state.deckUseSvg)("freecell_deck_solved",t.action.state.solved&&t.settings.state.enableWinAnimation),f.Bb(2),f.mc("ngForOf",t.spots),f.Bb(2),f.mc("ngIf",t.action.state.solved&&t.settings.state.enableWinAnimation))},directives:[a.k,a.l,Se.m,a.j,a.m],styles:[".freecell_deck{width:100%;height:100%;position:relative;background:#cfe url(bg-desk.3c9aa2647fde331032ec.jpg) repeat}.freecell_card,.freecell_spot{cursor:pointer;position:absolute;background-image:url(cards_3.7ca38e54d241dbad3492.png);background-size:900% 900%;background-repeat:no-repeat;background-color:transparent}@media (min-width:600px) and (max-width:1279.99px){.freecell_card,.freecell_spot{background-image:url(cards_2.e2b08b8dc530aa9120dc.png)}}@media (max-width:599.99px){.freecell_card,.freecell_spot{background-image:url(cards_1.866b77181955891cd538.png)}}div.use-svg-background .freecell_card,div.use-svg-background .freecell_spot{background-image:url(cards.9675bf3bee250ac1fb49.svg)}.freecell_spot.freecell_selection{outline-style:dotted;outline-color:#eed;outline-width:medium}.freecell_spot.freecell_selection.freecell_base{outline-color:#bb11a1}.freecell_spot.freecell_selection.freecell_cell{outline-color:#3e8181}.freecell_spot.freecell_pile{background-position:14.84375% 99.21875%}.freecell_spot.freecell_base.freecell_spades{background-position:57.03125% 85.15625%}.freecell_spot.freecell_base.freecell_diamonds{background-position:71.09375% 85.15625%}.freecell_spot.freecell_base.freecell_clubs{background-position:85.15625% 85.15625%}.freecell_spot.freecell_base.freecell_hearts{background-position:99.21875% 85.15625%}.freecell_spot.freecell_cell{background-position:.78125% 99.21875%}.freecell_card.freecell_Ace.freecell_spades{background-position:.78125% .78125%}.freecell_card.freecell_Ace.freecell_diamonds{background-position:14.84375% .78125%}.freecell_card.freecell_Ace.freecell_clubs{background-position:28.90625% .78125%}.freecell_card.freecell_Ace.freecell_hearts{background-position:42.96875% .78125%}.freecell_card.freecell_Two.freecell_spades{background-position:57.03125% .78125%}.freecell_card.freecell_Two.freecell_diamonds{background-position:71.09375% .78125%}.freecell_card.freecell_Two.freecell_clubs{background-position:85.15625% .78125%}.freecell_card.freecell_Two.freecell_hearts{background-position:99.21875% .78125%}.freecell_card.freecell_Three.freecell_spades{background-position:.78125% 14.84375%}.freecell_card.freecell_Three.freecell_diamonds{background-position:14.84375% 14.84375%}.freecell_card.freecell_Three.freecell_clubs{background-position:28.90625% 14.84375%}.freecell_card.freecell_Three.freecell_hearts{background-position:42.96875% 14.84375%}.freecell_card.freecell_Four.freecell_spades{background-position:57.03125% 14.84375%}.freecell_card.freecell_Four.freecell_diamonds{background-position:71.09375% 14.84375%}.freecell_card.freecell_Four.freecell_clubs{background-position:85.15625% 14.84375%}.freecell_card.freecell_Four.freecell_hearts{background-position:99.21875% 14.84375%}.freecell_card.freecell_Five.freecell_spades{background-position:.78125% 28.90625%}.freecell_card.freecell_Five.freecell_diamonds{background-position:14.84375% 28.90625%}.freecell_card.freecell_Five.freecell_clubs{background-position:28.90625% 28.90625%}.freecell_card.freecell_Five.freecell_hearts{background-position:42.96875% 28.90625%}.freecell_card.freecell_Six.freecell_spades{background-position:57.03125% 28.90625%}.freecell_card.freecell_Six.freecell_diamonds{background-position:71.09375% 28.90625%}.freecell_card.freecell_Six.freecell_clubs{background-position:85.15625% 28.90625%}.freecell_card.freecell_Six.freecell_hearts{background-position:99.21875% 28.90625%}.freecell_card.freecell_Seven.freecell_spades{background-position:.78125% 42.96875%}.freecell_card.freecell_Seven.freecell_diamonds{background-position:14.84375% 42.96875%}.freecell_card.freecell_Seven.freecell_clubs{background-position:28.90625% 42.96875%}.freecell_card.freecell_Seven.freecell_hearts{background-position:42.96875% 42.96875%}.freecell_card.freecell_Eight.freecell_spades{background-position:57.03125% 42.96875%}.freecell_card.freecell_Eight.freecell_diamonds{background-position:71.09375% 42.96875%}.freecell_card.freecell_Eight.freecell_clubs{background-position:85.15625% 42.96875%}.freecell_card.freecell_Eight.freecell_hearts{background-position:99.21875% 42.96875%}.freecell_card.freecell_Nine.freecell_spades{background-position:.78125% 57.03125%}.freecell_card.freecell_Nine.freecell_diamonds{background-position:14.84375% 57.03125%}.freecell_card.freecell_Nine.freecell_clubs{background-position:28.90625% 57.03125%}.freecell_card.freecell_Nine.freecell_hearts{background-position:42.96875% 57.03125%}.freecell_card.freecell_Ten.freecell_spades{background-position:57.03125% 57.03125%}.freecell_card.freecell_Ten.freecell_diamonds{background-position:71.09375% 57.03125%}.freecell_card.freecell_Ten.freecell_clubs{background-position:85.15625% 57.03125%}.freecell_card.freecell_Ten.freecell_hearts{background-position:99.21875% 57.03125%}.freecell_card.freecell_Jack.freecell_spades{background-position:.78125% 71.09375%}.freecell_card.freecell_Jack.freecell_diamonds{background-position:14.84375% 71.09375%}.freecell_card.freecell_Jack.freecell_clubs{background-position:28.90625% 71.09375%}.freecell_card.freecell_Jack.freecell_hearts{background-position:42.96875% 71.09375%}.freecell_card.freecell_Queen.freecell_spades{background-position:57.03125% 71.09375%}.freecell_card.freecell_Queen.freecell_diamonds{background-position:71.09375% 71.09375%}.freecell_card.freecell_Queen.freecell_clubs{background-position:85.15625% 71.09375%}.freecell_card.freecell_Queen.freecell_hearts{background-position:99.21875% 71.09375%}.freecell_card.freecell_King.freecell_spades{background-position:.78125% 85.15625%}.freecell_card.freecell_King.freecell_diamonds{background-position:14.84375% 85.15625%}.freecell_card.freecell_King.freecell_clubs{background-position:28.90625% 85.15625%}.freecell_card.freecell_King.freecell_hearts{background-position:42.96875% 85.15625%}@-webkit-keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@-webkit-keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}@keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}.freecell_deck_solved .freecell_card{-webkit-animation-name:animation-card;animation-name:animation-card;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}.freecell_deck_solved .freecell_card.freecell_Ace{-webkit-animation-delay:1.7s;animation-delay:1.7s;-webkit-animation-duration:1.6s;animation-duration:1.6s}.freecell_deck_solved .freecell_card.freecell_Two{-webkit-animation-delay:1.6s;animation-delay:1.6s;-webkit-animation-duration:1.8s;animation-duration:1.8s}.freecell_deck_solved .freecell_card.freecell_Three{-webkit-animation-delay:1.5s;animation-delay:1.5s;-webkit-animation-duration:2s;animation-duration:2s}.freecell_deck_solved .freecell_card.freecell_Four{-webkit-animation-delay:1.4s;animation-delay:1.4s;-webkit-animation-duration:2.2s;animation-duration:2.2s}.freecell_deck_solved .freecell_card.freecell_Five{-webkit-animation-delay:1.3s;animation-delay:1.3s;-webkit-animation-duration:2.4s;animation-duration:2.4s}.freecell_deck_solved .freecell_card.freecell_Six{-webkit-animation-delay:1.2s;animation-delay:1.2s;-webkit-animation-duration:2.6s;animation-duration:2.6s}.freecell_deck_solved .freecell_card.freecell_Seven{-webkit-animation-delay:1.1s;animation-delay:1.1s;-webkit-animation-duration:2.8s;animation-duration:2.8s}.freecell_deck_solved .freecell_card.freecell_Eight{-webkit-animation-delay:1s;animation-delay:1s;-webkit-animation-duration:3s;animation-duration:3s}.freecell_deck_solved .freecell_card.freecell_Nine{-webkit-animation-delay:.9s;animation-delay:.9s;-webkit-animation-duration:3.2s;animation-duration:3.2s}.freecell_deck_solved .freecell_card.freecell_Ten{-webkit-animation-delay:.8s;animation-delay:.8s;-webkit-animation-duration:3.4s;animation-duration:3.4s}.freecell_deck_solved .freecell_card.freecell_Jack{-webkit-animation-delay:.7s;animation-delay:.7s;-webkit-animation-duration:3.6s;animation-duration:3.6s}.freecell_deck_solved .freecell_card.freecell_Queen{-webkit-animation-delay:.6s;animation-delay:.6s;-webkit-animation-duration:3.8s;animation-duration:3.8s}.freecell_deck_solved .freecell_card.freecell_King{-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s}.freecell_deck_solved .freecell_spot{-webkit-animation-name:animation-spot;animation-name:animation-spot;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s}.freecell-fireworks{width:100%;height:100%;background-color:transparent}.app-dark-theme .freecell_deck{background:teal url(bg-desk-dark.b79611bd97d332e93d84.jpg) repeat}.app-dark-theme .freecell_spot.freecell_selection.freecell_cell{outline-color:#aaecec}"],encapsulation:2}),Ut),Rt=n("g/AF"),Nt=((xt=function(){function e(){_classCallCheck(this,e),this.userGesture=new f.n}return _createClass(e,[{key:"handle",value:function(e){this.userGesture.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||xt)},xt.\u0275dir=f.Jb({type:xt,selectors:[["","appGesture",""]],hostBindings:function(e,t){1&e&&f.cc("keydown",(function(e){return t.handle(e)}),!1,f.sc)("touchstart",(function(e){return t.handle(e)}),!1,f.sc)("mousedown",(function(e){return t.handle(e)}),!1,f.sc)("click",(function(e){return t.handle(e)}),!1,f.sc)},outputs:{userGesture:"userGesture"}}),xt),jt=["cards"];function Ft(e,t){if(1&e){var n=f.Vb();f.Ub(0,"div",5),f.cc("userGesture",(function(e){return f.tc(n),f.gc().activateOnGesture(e)})),f.Tb()}}function Xt(e,t){if(1&e){var n=f.Vb();f.Ub(0,"div",6,7),f.cc("mousedown",(function(e){f.tc(n);var a=t.index;return f.gc().onMouseDown(e,a)})),f.Tb()}if(2&e){var a=t.$implicit,i=f.gc();f.mc("matRippleDisabled",!i.settings.state.enableRipples)("ngClass",a.ngClass)("ngStyle",a.ngStyle)}}var zt=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],Yt=["[appFreecellBackground]","[appFreecellForeground]"],Ht=["transition_deal","transition_norm","transition_fast"];function Wt(e,t){var n,a=_createForOfIteratorHelper(Ht);try{for(a.s();!(n=a.n()).done;){var i=n.value;e[i]=i===t}}catch(r){a.e(r)}finally{a.f()}}function Kt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"px";return"translate(".concat(e).concat(n,", ").concat(t).concat(n,")")}var Gt,Qt=((Gt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r,c){var s;return _classCallCheck(this,n),(s=t.call(this)).settings=e,s.soundService=a,s._renderer=i,s._playService=r,s._gameService=c,s._dragListener=new Mt,s._emptySpotCount=0,s.lineChange=new f.n,s.cards=[],s.spotSelection=-1,s}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this._addSubscription(this._gameService.subscribe((function(t){var n;e.layout&&(e._gameService.isFirstChange||t.deal!==(null===(n=e._gameService.previousState)||void 0===n?void 0:n.deal)?e.onDeal():e.onCardMove())}))),this._addSubscription(this._dragListener.dragChange.subscribe((function(t){switch(t){case"DragStart":e._onDragStart();break;case"DragMove":e._onDragMove();break;case"DragStop":e._onDragStop()}})))}},{key:"trackByIndex",value:function(e){return e}},{key:"getTransforms",value:function(e){for(var t=100,n=[],a=this.cardList.toArray(),i=a[e[0]].nativeElement.parentElement.getBoundingClientRect(),r=a[e[0]].nativeElement.getBoundingClientRect(),c=r.left-i.left,s=r.top-i.top,o=r.height/3,l=e.length;l-- >0;){var u=Math.round((c+0*l)*t)/t,d=Math.round((s+o*l)*t)/t;n[l]={x:u,y:d}}return n}},{key:"onTouch",value:function(e){if(!this.isTouchDisabled){var t=e.type,n=e.event;this._onTouch(t,n)&&n.preventDefault()}}},{key:"onMouseDown",value:function(e,t){if(!this.isMouseDisabled&&(this._playService.stop(),0===e.button)){e.preventDefault();var n=this._gameService.game,a=n.asTablaeu(t),i=this.getTransforms(a);this._dragListener.mouseStart(e,this._renderer,{game:n,tableau:a,transforms:i})}}},{key:"_onTouch",value:function(e,t){switch(e){case"DragStart":if(t.targetTouches.length>0){var n=t.targetTouches[0],a=this.getCardIndex(n.clientX,n.clientY);if(a>=0){var i=this._gameService.game,r=i.asTablaeu(a),c=this.getTransforms(r);return this._dragListener.touchStart(t,{game:i,tableau:r,transforms:c}),!0}}break;case"DragMove":if(this._dragListener.isTouchDragging)return this._dragListener.touchMove(t),!0;break;case"DragStop":if(this._dragListener.isTouchDragging)return this._dragListener.stop(),!0}return!1}},{key:"_onDragStart",value:function(){this._playService.stop();for(var e=this._dragListener.data,t=e.tableau,n=e.transforms,a=t.length;a-- >0;){var i=this.cards[t[a]];i.ngStyle.zIndex+=_e.a,i.ngStyle.transform=Kt(n[a].x,n[a].y),i.ngClass.grabbing=!0,Wt(i.ngClass)}}},{key:"_onDragMove",value:function(){for(var e=this._dragListener.data,t=e.tableau,n=e.transforms,a=this._dragListener.deltaX,i=this._dragListener.deltaY,r=t.length;r-- >0;){var c=this.cards[t[r]];c.ngClass.dragging=!0,c.ngStyle.transform=Kt(n[r].x+a,n[r].y+i)}(Math.abs(a)>4||Math.abs(i)>4)&&(this._dragListener.data.dragged=!0)}},{key:"_onDragStop",value:function(){var e,t=this._dragListener.data,n=t.game,a=t.tableau,i=t.dragged,r=_createForOfIteratorHelper(a);try{for(r.s();!(e=r.n()).done;){var c=e.value,s=this.cards[c];s.ngStyle.zIndex-=_e.a,s.ngStyle.transform=this.getCardTransform(n,n.toLine(c),c),delete s.ngClass.grabbing,delete s.ngClass.dragging,Wt(s.ngClass,"transition_fast")}}catch(d){r.e(d)}finally{r.f()}if(i){var o=this.getDestination(n,a);if(o>=0){var l=n.toLine(a[0]);l!==o&&this.lineChange.emit({source:l,destination:o,tableau:a})}}else{var u=n.toLine(a[0]);this.lineChange.emit({source:u,destination:this.spotSelection>=0?this.spotSelection:void 0,tableau:a})}}},{key:"onDeal",value:function(){this.spotSelection=-1;var e=this._gameService.game;this._emptySpotCount=Math.max(e.CELL_NUM,e.countEmpty());for(var t=e.DESK_SIZE;t-- >0;){var n,a=_createForOfIteratorHelper(e.getLine(t));try{for(a.s();!(n=a.n()).done;){var i=n.value;this.bringToFront(i)}}catch(r){a.e(r)}finally{a.f()}this.updateLine(e,t,"transition_deal")}this.updateZIndex(),this.soundService.play("deal")}},{key:"updateZIndex",value:function(){if(this.cards.length>1)for(var e=1,t=this.cards[0].list.head;t;t=t.next)this.cards[t.card].ngStyle.zIndex=e++}},{key:"bringToFront",value:function(e){var t=this.cards[e],n=t.list;n&&n.tail&&n.tail!==t&&Ot(n.tail,t)}},{key:"onCardMove",value:function(){this.spotSelection=-1;var e=this._gameService.state,t=this._gameService.previousState||e,n=t.path.substring(0,2*t.mark),a=e.path.substring(0,2*e.mark),i=new Set,r=Object(Rt.a)(n,a),c=[];t.mark>r&&(Object(me.c)(t,(function(e,t,n,a){a>=r&&(i.add(t),i.add(n),c.push(e.getCard(n,-1)))})),c.reverse()),e.mark>r&&Object(me.c)(e,(function(e,t,n,a){a>=r&&(i.add(t),i.add(n),c.push(e.getCard(n,-1)))}));for(var s=0,o=c;s<o.length;s++){var l=o[s];this.bringToFront(l)}this.updateZIndex();var u,d=i.size>2?"transition_fast":"transition_norm",f=this._gameService.game,h=_createForOfIteratorHelper(i.keys());try{for(h.s();!(u=h.n()).done;){var b=u.value;this.updateLine(f,b,d)}}catch(p){h.e(p)}finally{h.f()}"transition_fast"===d?this.soundService.play("shuffle"):"transition_norm"===d&&this.soundService.play("card");var g=f.countEmpty();g>this._emptySpotCount&&(this._emptySpotCount=g,this.soundService.play("victory"))}},{key:"createCards",value:function(){var e=[],t=this.layout;if(t){for(var n=Object(k.f)(t.itemWidth,t.width),a=Object(k.f)(t.itemHeight,t.height),i=0;i<_e.a;i++){var r,c={card:i,ngStyle:{width:n,height:a,zIndex:i},ngClass:(r={freecell_card:!0},_defineProperty(r,"freecell_"+Object(_e.i)(i),!0),_defineProperty(r,"freecell_"+Object(_e.g)(i),!0),r)};e.push(c)}(function(){for(var e=null,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var i=0,r=n;i<r.length;i++){var c=r[i];e&&Ot(e,c),e=c}}).apply(void 0,e)}return e}},{key:"getCardTransform",value:function(e,t,n){var a=this.layout.getCardPosition(t,e.toSpot(n),e.getLine(t).length);return"translate(".concat(Object(k.f)(a.x,this.layout.itemWidth),", ").concat(Object(k.f)(a.y,this.layout.itemHeight),")")}},{key:"updateLine",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"transition_norm",i=_createForOfIteratorHelper(e.getLine(t));try{for(i.s();!(n=i.n()).done;){var r=n.value,c=this.cards[r];c.ngStyle.transform=this.getCardTransform(e,t,r),Wt(c.ngClass,a)}}catch(s){i.e(s)}finally{i.f()}}},{key:"getDestination",value:function(e,t){var n,a=0,i=-1;if(t.length>0&&this.cardList){for(var r=this.cardList.toArray(),c=r[t[0]].nativeElement.getBoundingClientRect(),s=r.length;s-- >0;)if(t.indexOf(s)<0){var o=r[s].nativeElement.getBoundingClientRect(),l=Object(k.c)(c,o);l>a&&(a=l,i=e.toLine(s))}if(null===(n=this.playground)||void 0===n?void 0:n.spotList)for(var u=this.playground.spotList.toArray(),d=u.length;d-- >0;){var f=u[d].nativeElement.getBoundingClientRect(),h=Object(k.c)(c,f);h>a&&(a=h,i=d)}}return i}},{key:"getCardIndex",value:function(e,t){var n=-1;if(this.cardList)for(var a=this.cardList.toArray(),i=a.length;i-- >0;){var r=a[i].nativeElement.getBoundingClientRect();r.left<=e&&e<=r.right&&r.top<=t&&t<=r.bottom&&(n<0||this.cards[n].ngStyle.zIndex<this.cards[i].ngStyle.zIndex)&&(n=i)}return n}},{key:"activateOnGesture",value:function(e){e.isTrusted&&this.soundService.activate()}},{key:"layout",get:function(){return this._layout},set:function(e){this._layout!==e&&(this._layout=e,this.layout&&(this.cards=this.createCards(),this.onDeal()))}},{key:"isTouchDisabled",get:function(){return!(this.settings.state.inputMode&_.b.Touch)}},{key:"isMouseDisabled",get:function(){return!(this.settings.state.inputMode&_.b.Mouse)}}]),n}(y)).\u0275fac=function(e){return new(e||Gt)(f.Ob(_.a),f.Ob(w),f.Ob(f.E),f.Ob(l.a),f.Ob(v.a))},Gt.\u0275cmp=f.Ib({type:Gt,selectors:[["app-freecell-deck"]],viewQuery:function(e,t){var n;1&e&&(f.Fc(Dt,!0),f.Fc(jt,!0)),2&e&&(f.qc(n=f.dc())&&(t.playground=n.first),f.qc(n=f.dc())&&(t.cardList=n))},inputs:{layout:"layout"},outputs:{lineChange:"lineChange"},features:[f.yb],ngContentSelectors:Yt,decls:7,vars:5,consts:[["appGesture","",3,"userGesture",4,"ngIf"],[3,"layout","selection","selectionChange","touchChange"],["appFreecellBackground",""],["appFreecellForeground",""],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],["appGesture","",3,"userGesture"],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown"],["cards",""]],template:function(e,t){1&e&&(f.lc(zt),f.zc(0,Ft,1,0,"div",0),f.Ub(1,"app-freecell-playground",1),f.cc("selectionChange",(function(e){return t.spotSelection=e}))("touchChange",(function(e){return t.onTouch(e)})),f.Sb(2,2),f.kc(3),f.Rb(),f.Sb(4,3),f.zc(5,Xt,2,3,"div",4),f.kc(6,1),f.Rb(),f.Tb()),2&e&&(f.mc("ngIf",t.soundService.enabled&&!t.soundService.activated),f.Bb(1),f.mc("layout",t.layout)("selection",t.spotSelection),f.Bb(4),f.mc("ngForOf",t.cards)("ngForTrackBy",t.trackByIndex))},directives:[a.l,Dt,a.k,Nt,Se.m,a.j,a.m],styles:[".freecell_card.transition_deal[_ngcontent-%COMP%]{transition:transform 1.5s cubic-bezier(.6,-.5,.25,1.5)}.freecell_card.transition_norm[_ngcontent-%COMP%]{transition:transform .5s ease-out}.freecell_card.transition_fast[_ngcontent-%COMP%]{transition:transform .25s linear}.freecell_card.grabbing[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing;transition:transform .15s ease-in-out}.freecell_card.grabbing.dragging[_ngcontent-%COMP%]{transition:none;opacity:.75}"]}),Gt);function Vt(e,t){if(1&e){var n=f.Vb();f.Ub(0,"app-freecell-deck",4),f.cc("lineChange",(function(e){return f.tc(n),f.gc().onLineChange(e)})),f.Sb(1,5),f.kc(2),f.Rb(),f.Tb()}if(2&e){var a=f.gc();f.mc("layout",a.layout)}}var qt,Jt,Zt=["*"],$t=((Jt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r){var c;return _classCallCheck(this,n),(c=t.call(this)).settings=e,c._gameService=a,c._playService=i,c._addSubscription(r.subscribe((function(e){return c.layout=new St(r.basis)}))),c}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this)}},{key:"onLineChange",value:function(e){var t=this;this._playService.stop();var n=this._gameService.game,a="";(a=void 0===e.destination?n.solveFor(e.tableau,e.source):n.getBestPath(e.tableau,e.destination))&&(this._gameService.move(a.charCodeAt(0),a.charCodeAt(1)),(a=a.substring(2))&&this._playService.play((function(){return t._gameService.move(a.charCodeAt(0),a.charCodeAt(1)),(a=a.substring(2)).length>0})))}}]),n}(y)).\u0275fac=function(e){return new(e||Jt)(f.Ob(_.a),f.Ob(v.a),f.Ob(l.a),f.Ob(u.a))},Jt.\u0275cmp=f.Ib({type:Jt,selectors:[["app-freecell-main"]],features:[f.yb],ngContentSelectors:Zt,decls:5,vars:3,consts:[[1,"freecell-content"],[1,"freecell-content-outer"],[1,"freecell-content-inner"],[3,"layout","lineChange",4,"ngIf"],[3,"layout","lineChange"],["appFreecellBackground",""]],template:function(e,t){1&e&&(f.lc(),f.Pb(0,"app-freecell-router"),f.Ub(1,"div",0),f.Ub(2,"div",1),f.Ub(3,"div",2),f.zc(4,Vt,3,1,"app-freecell-deck",3),f.Tb(),f.Tb(),f.Tb()),2&e&&(f.Bb(1),f.yc("padding-top",100*t.settings.state.aspectRatio,"%"),f.Bb(3),f.mc("ngIf",t.layout))},directives:[wt,a.l,Qt],styles:[".freecell-content[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;padding:1px}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]   .freecell-content-inner[_ngcontent-%COMP%]{width:100%;height:100%}"]}),Jt),en=((qt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r){var c;_classCallCheck(this,n),(c=t.call(this)).settings=e,c.info="".concat(O.a," ver.").concat(O.b),e.subscribe((function(t){var n,a=null===(n=e.previousState)||void 0===n?void 0:n.enableDarkMode,i=t.enableDarkMode;a!==i&&(i?r.getContainerElement().classList.add("app-dark-theme"):r.getContainerElement().classList.remove("app-dark-theme"))}));var s=i.snapshot.queryParams;return(void 0===s.deal||isNaN(parseInt(s.deal,10)))&&a.navigate(["."],{relativeTo:i,queryParams:{deal:Date.now()%2147483648}}),c}return _createClass(n,[{key:"ngOnInit",value:function(){}}]),n}(y)).\u0275fac=function(e){return new(e||qt)(f.Ob(_.a),f.Ob(r.b),f.Ob(r.a),f.Ob(B.e))},qt.\u0275cmp=f.Ib({type:qt,selectors:[["app-freecell-demo"]],features:[f.yb],decls:4,vars:3,consts:[[1,"version-info"]],template:function(e,t){1&e&&(f.Ub(0,"app-freecell-view"),f.Ub(1,"app-freecell-main"),f.Ub(2,"div",0),f.Bc(3),f.Tb(),f.Tb(),f.Tb()),2&e&&(f.Fb("app-dark-theme",t.settings.state.enableDarkMode),f.Bb(3),f.Cc(t.info))},directives:[kt,$t],styles:[".version-info[_ngcontent-%COMP%]{font-size:small;position:absolute;bottom:0;right:0}"]}),qt);n.d(t,"FreecellModule",(function(){return an}));var tn,nn=[{path:"",component:en}],an=((tn=function e(){_classCallCheck(this,e)}).\u0275mod=f.Mb({type:tn}),tn.\u0275inj=f.Lb({factory:function(e){return new(e||tn)},providers:[o.a,l.a,u.a,p,w,v.a,_.a],imports:[[r.c.forChild(nn),a.c,i.d,c.a,s.a],r.c]}),tn)},Q4PV:function(e,t,n){e.exports=n.p+"0-es5.f326f5d0cfd4a94a0ab4.worker.js"},RDYl:function(e){e.exports=JSON.parse('{"a":"freecell-demo","b":"0.2.2"}')},SeXe:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("2Vo4"),i=function(){function e(t){_classCallCheck(this,e),this._previousState=null,this._stateSubject=new a.a(t),this._stateKeys=Object.keys(t)}return _createClass(e,[{key:"get",value:function(e){return this.state[e]}},{key:"subscribe",value:function(e,t,n){return this._stateSubject.subscribe(e,t,n)}},{key:"_validate",value:function(e){return this.equials(e)?null:e}},{key:"_set",value:function(e){var t=this._validate(Object.assign(Object.assign({},this.state),e));return!!t&&(this._previousState=this._stateSubject.value,this._stateSubject.next(t),!0)}},{key:"equials",value:function(e){var t,n=this.state,a=_createForOfIteratorHelper(this.keys);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(e[i]!==n[i])return!1}}catch(r){a.e(r)}finally{a.f()}return!0}},{key:"isFirstChange",get:function(){return!this._previousState}},{key:"stateChange",get:function(){return this._stateSubject.asObservable()}},{key:"state",get:function(){return this._stateSubject.value}},{key:"previousState",get:function(){return this._previousState}},{key:"keys",get:function(){return this._stateKeys}}]),e}()},WxrP:function(e,t,n){"use strict";var a=n("g/AF");function i(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e.length-n,r=t.length-a,c=Math.min(i,r),s=0;s<c;s++)if(e[i-1-s]!==t[r-1-s])return s;return Math.max(c,0)}var r=n("lPNG"),c=n("2MXh"),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i){var r;_classCallCheck(this,n),(r=t.call(this,e,a,i)).desk=[];for(var c=0;c<r.DESK_SIZE;c++)r.desk.push([]);return r}return _createClass(n,[{key:"toArray",value:function(){return function(e){var t,n=[],a=_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.push(_toConsumableArray(i))}}catch(r){a.e(r)}finally{a.f()}return n}(this.desk)}},{key:"clear",value:function(){for(var e=this.desk.length;e-- >0;)this.desk[e].length=0}},{key:"addCard",value:function(e,t){this.desk[e].push(t)}},{key:"getCard",value:function(e,t){var n=this.desk[e];return t<0&&(t=n.length+t),t>=0&&t<n.length?n[t]:-1}},{key:"getLine",value:function(e){return this.desk[e]}},{key:"getTableauAt",value:function(e){var t=[],n=this.desk[e],a=n.length;if(a>0)for(t.push(n[a-1]);--a>0&&Object(r.e)(n[a-1],n[a])&&Object(r.h)(n[a-1])>0;)t.push(n[a-1]);return t.reverse(),t}},{key:"countEmptyCells",value:function(){for(var e=0,t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmptyPiles",value:function(){for(var e=0,t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}},{key:"isSolved",value:function(){for(var e=this.BASE_START;e<this.BASE_END;e++)if(this.desk[e].length<r.b)return!1;return!0}},{key:"countEmpty",value:function(){return this.countEmptyCells()+this.countEmptyPiles()}},{key:"getEmptyCell",value:function(){for(var e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getEmptyPile",value:function(){for(var e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getBase",value:function(e){for(var t=Object(r.j)(e),n=Object(r.h)(e),a=0;a<this.BASE_NUM;a++)if(Object(r.j)(a)===t&&this.desk[a+this.BASE_START].length===n)return a+this.BASE_START;return-1}},{key:"deal",value:function(e){var t=Object(r.d)(e);this.clear();for(var n=0;n<t.length;n++)this.addCard(this.PILE_START+n%this.PILE_NUM,t[n]);return t}},{key:"isMoveValid",value:function(e,t){if(e===t)return!1;if(e<0||e>=this.DESK_SIZE)return!1;if(t<0||t>=this.DESK_SIZE)return!1;var n=this.desk[e].length;if(n<=0)return!1;var a=this.desk[t].length;if(this.isCell(t))return 0===a;var i=this.desk[e][n-1];if(this.isPile(t))return 0===a||Object(r.e)(this.desk[t][a-1],i);if(this.isBase(t)){var c=Object(r.j)(i),s=Object(r.h)(i);return Object(r.j)(t-this.BASE_START)===c&&a===s}return!1}},{key:"moveCard",value:function(e,t){this.addCard(t,this.desk[e].pop())}},{key:"getMoves",value:function(){for(var e=[],t=this.DESK_SIZE;t-- >0;)for(var n=t;n-- >0;)this.isMoveValid(t,n)&&e.push({giver:t,taker:n}),this.isMoveValid(n,t)&&e.push({giver:n,taker:t});return e}}]),n}(c.a),o=function e(t){_classCallCheck(this,e),this.success=t},l=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r){var c;return _classCallCheck(this,n),(c=t.call(this,e,a,i)).desk=r,c.cardToWatch=-1,c.searchTime=500,c.done=new Set,c.buffers=[[],[]],c.iteration=0,c.path="",c.onMove=function(e,t,n){},c}return _createClass(n,[{key:"stop",value:function(e){throw new o(e)}},{key:"getAllPaths",value:function(){return this.buffers[this.iteration%2]}},{key:"getPath",value:function(){var e=this.buffers[this.iteration%2];return e[e.length-1]}},{key:"clear",value:function(){this.done.clear(),this.buffers[0].length=0,this.buffers[1].length=0,this.iteration=0,this.path=""}},{key:"prepare",value:function(){this.clear(),this.done.add(this.toKey()),this.buffers[0][0]=""}},{key:"nextIteration",value:function(){var e=this.buffers[this.iteration%2];if(this.iteration++,e.length<=0)return!1;var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.skipForward(a),this.findMoves(),this.skipBackward()}}catch(i){n.e(i)}finally{n.f()}return e.length=0,this.buffers[this.iteration%2].length>0}},{key:"solve",value:function(){this.prepare();var e=Date.now();try{for(;this.nextIteration();)Date.now()-e>this.searchTime&&this.stop(!1)}catch(t){if(t instanceof o)return t.success;throw t}return!1}},{key:"skipForward",value:function(e){for(var t=0;t<e.length;t+=2)this.desk[e.charCodeAt(t+1)].push(this.desk[e.charCodeAt(t)].pop());this.path=e}},{key:"skipBackward",value:function(){for(var e=this.path,t=e.length;t>0;t-=2)this.desk[e.charCodeAt(t-2)].push(this.desk[e.charCodeAt(t-1)].pop())}},{key:"move",value:function(e,t,n){this.desk[n].push(this.desk[t].pop());var a=this.toKey();this.done.has(a)||(this.done.add(a),this.buffers[this.iteration%2].push(this.path+String.fromCharCode(t,n)),!(this.cardToWatch<0||this.cardToWatch===e)||this.cardFilter&&!this.cardFilter[e]||this.destinationFilter&&!this.destinationFilter[n]||this.onMove(e,t,n)),this.desk[t].push(this.desk[n].pop())}},{key:"findMoves",value:function(){for(var e=this.cardFilter,t=this.getEmptyCell(),n=this.getEmptyPile(),a=0;a<this.DESK_SIZE;a++){var i=this.desk[a];if(i.length>0){var c=i[i.length-1];if(!e||e[c]){if(!this.isBase(a)){var s=this.getBase(c);s>=0&&this.move(c,a,s)}for(var o=this.PILE_START;o<this.PILE_END;o++)if(o!==a){var l=this.desk[o];l.length>0&&Object(r.e)(l[l.length-1],c)&&this.move(c,a,o)}t>=0&&(this.isCell(a)||this.move(c,a,t)),n>=0&&(!this.isPile(a)||i.length>1)&&this.move(c,a,n)}}}}},{key:"baseToString",value:function(){for(var e="",t=this.BASE_START;t<this.BASE_END;t++)e+=String.fromCharCode(this.desk[t].length);return e}},{key:"pileToString",value:function(){for(var e=[],t=this.PILE_START;t<this.PILE_END;t++)e.push(String.fromCharCode.apply(String,_toConsumableArray(this.desk[t])));return e.sort(),e.join(String.fromCharCode(r.a))}},{key:"toKey",value:function(){return this.baseToString()+this.pileToString()}},{key:"getEmptyCell",value:function(){for(var e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getEmptyPile",value:function(){for(var e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"countEmptyCells",value:function(){for(var e=0,t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmptyPiles",value:function(){for(var e=0,t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmpty",value:function(){return this.countEmptyCells()+this.countEmptyPiles()}},{key:"countCardsInBases",value:function(){for(var e=0,t=this.BASE_START;t<this.BASE_END;t++)e+=this.desk[t].length;return e}},{key:"getBase",value:function(e){for(var t=Object(r.j)(e),n=Object(r.h)(e),a=this.BASE_START+t;a<this.BASE_END;a+=r.c)if(this.desk[a].length===n)return a;return-1}},{key:"doneSize",get:function(){return this.done.size}}]),n}(c.a),u=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i){var r;return _classCallCheck(this,n),(r=t.call(this,e,a,i)).lineMap=[],r.spotMap=[],r}return _createClass(n,[{key:"toLine",value:function(e){return this.lineMap[e]}},{key:"toSpot",value:function(e){return this.spotMap[e]}},{key:"clear",value:function(){_get(_getPrototypeOf(n.prototype),"clear",this).call(this),this.lineMap.length=0,this.spotMap.length=0}},{key:"addCard",value:function(e,t){_get(_getPrototypeOf(n.prototype),"addCard",this).call(this,e,t),this.lineMap[t]=e,this.spotMap[t]=this.getLine(e).length-1}},{key:"asTablaeu",value:function(e){var t=this.getTableauAt(this.lineMap[e]),n=t.indexOf(e);return n<0?t=[e]:n>0&&t.splice(0,n),t}},{key:"getBestPath",value:function(e,t){if(e.length<=0)return"";var n=e[e.length-1],a=this.lineMap[n];if(this.getCard(a,-1)!==n)return"";if(1===e.length)return this.isMoveValid(a,t)?String.fromCharCode(a,t):"";var i=new l(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray());if(i.cardToWatch=n,i.cardFilter=e.reduce((function(e,t){return e[t]=!0,e}),{}),i.destinationFilter=_defineProperty({},t,!0),this.isPile(t)&&0===this.getLine(t).length)for(var r=this.PILE_START;r<this.PILE_END;r++)0===this.getLine(r).length&&(i.destinationFilter[r]=!0);if(i.onMove=function(t,n,a){(function(e,t){var n=t.length,a=e.length-n;if(a<0)return!1;for(var i=n;i-- >0;)if(e[i+a]!==t[i])return!1;return!0})(i.desk[a],e)&&i.stop(!0)},i.solve()){var c=i.getPath(),s=c.charCodeAt(c.length-1);return s!==t&&(c=function(e,t,n){for(var a=[],i=0;i<e.length;i++){var r=e.charCodeAt(i);r===n?r=t:r===t&&(r=n),a.push(r)}return String.fromCharCode.apply(String,a)}(c,t,s)),c}return""}},{key:"solveFor",value:function(e,t){if(this.getLine(t).length<=0)return"";if(e.length<=0)return"";var n=e[e.length-1];if(this.getCard(t,-1)!==n)return"";var a=new l(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray()),r="",c=0;return a.cardToWatch=this.getCard(t,-1),a.cardFilter=_defineProperty({},a.cardToWatch,!0),a.onMove=function(){r||(r=a.getPath(),c=1)},a.findMoves(),r?(this.isBase(r.charCodeAt(1))||e.length>1&&(a.cardFilter=e.reduce((function(e,t){return e[t]=!0,e}),{}),a.onMove=function(n,s,o){if(o!==t){var l=i(a.desk[o],e);i(a.desk[t],e,0,l)+l===e.length&&c<l&&(r=a.getPath(),(c=l)===e.length&&a.stop(!0))}},a.solve()),r):r}}]),n}(s);function d(e,t,n){var i=new u(e.pile,e.cell,e.base);i.deal(e.deal);for(var r=0;r+1<e.path.length;r+=2){var c=Object(a.c)(e.path,r),s=Object(a.c)(e.path,r+1);if(!i.isMoveValid(c,s)){n&&n(i,c,s,r/2);break}i.moveCard(c,s),t&&t(i,c,s,r/2)}return i}function f(e,t,n){return d(Object.assign(Object.assign({},e),{path:e.path.substring(0,2*e.mark)}),t,n)}function h(e){var t="";return d(e,(function(e,n,i,r){t=Object(a.b)(t,t.length/2,n,i)}),(function(t,n,a,i){console.warn("Invalid subpath:",e.path.substring(i+i))})),t}n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return h}))},afNV:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("SeXe"),i=n("fXoL"),r=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return _classCallCheck(this,n),(e=t.call(this,a))._subscriptions=i,e}return _createClass(n,[{key:"_addSubscription",value:function(e){this._subscriptions.push(e)}},{key:"ngOnDestroy",value:function(){this._subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),n}(a.a);return e.\u0275fac=function(e){i.bc()},e.\u0275dir=i.Jb({type:e,features:[i.yb]}),e}()},dkWW:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("fKvJ"),i=n("fXoL"),r=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,200)}return n}(a.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Kb({token:e,factory:e.\u0275fac}),e}()},"g/AF":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s}));var a=n("voYn"),i=n("dPmG");function r(e,t){return Math.floor(Object(a.a)(e,t).length/2)}function c(e,t){return Object(i.b)(e.charCodeAt(t))}function s(e,t,n,a){return t>0&&a===function(e,t){return c(e,t+t-2)}(e,t)&&n===function(e,t){return c(e,t+t-1)}(e,t)?e.substring(0,t+t-2):e.substring(0,t+t)+function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(i.a)(t)}(n,a)}},jZWl:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var a=n("SeXe"),i=n("2MXh"),r=n("fXoL"),c={base:4,cell:4,pile:8},s=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,c))._basis=new i.a(c.pile,c.cell,c.base),e}return _createClass(n,[{key:"_validate",value:function(e){return e.base>0&&e.cell>0&&e.pile>0&&(e=_get(_getPrototypeOf(n.prototype),"_validate",this).call(this,e))?(this._basis=new i.a(e.pile,e.cell,e.base),e):null}},{key:"set",value:function(e){return this._set(e)}},{key:"basis",get:function(){return this._basis}}]),n}(a.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Kb({token:e,factory:e.\u0275fac}),e}()},lPNG:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"i",(function(){return h})),n.d(t,"g",(function(){return b})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return p})),Array.from("SDCH");var a=["\u2660","\u2666","\u2663","\u2665"],i=["spades","diamonds","clubs","hearts"],r=(Array.from("A23456789TJQK"),["A","2","3","4","5","6","7","8","9","10","J","Q","K"]),c=["Ace","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Jack","Queen","King"],s="SDCH".length,o="A23456789TJQK".length,l=s*o;function u(e){return Math.floor(e/s)}function d(e){return e%s}function f(e){return r[u(e)]+a[d(e)]}function h(e){return i[d(e)]}function b(e){return c[u(e)]}function g(e){for(var t=[],n=0;n<l;n++)t[n]=n;if(e>=0)for(var a=0;a<l;a++){var i=(e=(1103515245*e+12345)%2147483648)%l;if(a!==i){var r=t[a];t[a]=t[i],t[i]=r}}return t}function p(e,t){return u(e)===u(t)+1&&d(e)%2!=d(t)%2}},mrSG:function(e,t,n){"use strict";function a(e,t,n,a){return new(n||(n=Promise))((function(i,r){function c(e){try{o(a.next(e))}catch(t){r(t)}}function s(e){try{o(a.throw(e))}catch(t){r(t)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}o((a=a.apply(e,t||[])).next())}))}n.d(t,"a",(function(){return a}))},tt9D:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d}));var a=n("SeXe"),i=n("fXoL"),r=["sidenav","sandwich"],c=function(e){return e[e.Mouse=1]="Mouse",e[e.Touch=2]="Touch",e[e.Keyboard=4]="Keyboard",e[e.All=7]="All",e}({}),s={view:r[0],aspectRatio:.56,sandwichOrder:0,sidenavModeSide:!0,sidenavClosed:!0,deckUseSvg:!1,enableSound:!1,enableRipples:!0,enableWinAnimation:!0,enableDarkMode:!1,assistLevel:1e6,inputMode:c.All},o={aspectRatio:.4,assistLevel:2e4,sandwichOrder:0,inputMode:1},l={aspectRatio:.7,assistLevel:2e6,sandwichOrder:5,inputMode:c.All},u="[FreecellSettingsState]",d=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n),e=t.call(this,s);var a=localStorage.getItem(u);if(a){var i=JSON.parse(a);if(i){var r,c=Object.assign({},s),o=_createForOfIteratorHelper(e.keys);try{for(o.s();!(r=o.n()).done;){var l=r.value;typeof c[l]==typeof i[l]&&(c[l]=i[l])}}catch(d){o.e(d)}finally{o.f()}e._set(c)}}return e}return _createClass(n,[{key:"restoreDefaults",value:function(){this.set(s)}},{key:"_validate",value:function(e){r.indexOf(e.view)<0&&(e.view=s.view);for(var t=0,a=Object.keys(o);t<a.length;t++){var i=a[t];e[i]=Math.max(o[i],Math.min(l[i],e[i]))}return _get(_getPrototypeOf(n.prototype),"_validate",this).call(this,e)}},{key:"set",value:function(e){var t=this._set(e);if(t)try{localStorage.setItem(u,JSON.stringify(this.state))}catch(n){console.warn("localStorage error:",n)}return t}}]),n}(a.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Kb({token:e,factory:e.\u0275fac}),e}()}}]);
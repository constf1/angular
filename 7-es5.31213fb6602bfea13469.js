!function(){var e;function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1ROQ":function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("afNV"),a=n("jZWl"),r=n("g/AF"),o=n("WxrP"),d=n("fXoL"),h=Object.assign(Object.assign({},a.b),{deal:-1,mark:0,path:""}),g=function(){var e=function(e){u(n,e);var t=f(n);function n(e){var i;return c(this,n),(i=t.call(this,h))._game=null,i._addSubscription(e.subscribe(function(e){i._set(Object.assign({},e))})),i}return s(n,[{key:"deal",get:function(){return this.state.deal},set:function(e){if(this.deal!==e){var t=h.path,n=h.mark;this._set({deal:e,path:t,mark:n})}}},{key:"mark",get:function(){return this.state.mark},set:function(e){this.mark!==e&&this._set({mark:e})}},{key:"path",get:function(){return this.state.path},set:function(e){this.path!==e&&this._set({path:e})}},{key:"game",get:function(){return this._game||(this._game=Object(o.c)(this.state))}},{key:"_validate",value:function(e){var t=Object(o.a)(e);return e.path!==t&&(console.warn("Replacing path with:",t),e.path=t),e.mark=Math.max(0,Math.min(e.path.length/2,e.mark)),(e=l(b(n.prototype),"_validate",this).call(this,e))&&(this._game=null),e}},{key:"move",value:function(e,t){var n=this.state,i=Object(r.b)(n.path,n.mark,e,t);this._set({mark:i.length/2,path:n.path.startsWith(i)?n.path:i})}},{key:"set",value:function(e,t,n){var i=this.state;e===i.deal&&t===i.path&&n===i.mark||this._set({deal:e,path:t,mark:n})}}]),n}(i.a);return e.\u0275fac=function(t){return new(t||e)(d.Xb(a.a))},e.\u0275prov=d.Jb({token:e,factory:e.\u0275fac}),e}()},"2MXh":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(t,n,i){c(this,e),this.PILE_NUM=t,this.CELL_NUM=n,this.BASE_NUM=i,this.PILE_START=0,this.DESK_SIZE=t+n+i,this.PILE_END=this.BASE_START=this.PILE_START+this.PILE_NUM,this.BASE_END=this.CELL_START=this.BASE_START+this.BASE_NUM,this.CELL_END=this.CELL_START+this.CELL_NUM}return s(e,[{key:"isPile",value:function(e){return e>=this.PILE_START&&e<this.PILE_END}},{key:"isBase",value:function(e){return e>=this.BASE_START&&e<this.BASE_END}},{key:"isCell",value:function(e){return e>=this.CELL_START&&e<this.CELL_END}},{key:"getSpotName",value:function(e){return this.isBase(e)?"base "+(e-this.BASE_START):this.isPile(e)?"pile "+(e-this.PILE_START):this.isCell(e)?"cell "+(e-this.CELL_START):"unknown "+e}}]),e}()},"9fNZ":function(e,t,n){e.exports=n.p+"0-es5.a0ae342ad01dce847149.worker.js"},GPiM:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var a=n("afNV"),r=n("fXoL"),o=n("1ROQ"),l=n("dkWW"),d=n("tt9D"),h=n("dNgK"),b={solved:!1,canAssist:!1,canUndo:!1,canRedo:!1,nextMove:null,assistRequest:null},g=String.fromCharCode(215),p=function(){var t=function(t){u(a,t);var n=f(a);function a(e,t,r,o){var s;return c(this,a),(s=n.call(this,b))._gameService=e,s._playService=t,s._settings=r,s._snackBar=o,s._worker=null,s._createWorker(),s._addSubscription(s._gameService.subscribe(function(e){var t=Object.assign({},b),n=s._gameService.game;if(t.solved=n.isSolved(),!t.solved){var a=n.countEmpty();if(a<n.PILE_NUM+n.CELL_NUM){var r=n.getMoves();t.canAssist=!!s._worker&&r.length>0&&a<=n.CELL_NUM;var c,o=i(r);try{for(o.s();!(c=o.n()).done;){var l=c.value;if(n.isBase(l.taker)){t.nextMove=l;break}}}catch(u){o.e(u)}finally{o.f()}}}t.canUndo=e.mark>0,t.canRedo=2*e.mark<e.path.length,s.state.assistRequest&&(s.cancelAssist(),s._snackBar.open("Assist was canceled.",g,{duration:1e3})),Promise.resolve().then(function(){return s._set(t)})})),s}return s(a,[{key:"undo",value:function(){var e=this._gameService.state.mark-1;e>=0&&(this._gameService.mark=e)}},{key:"redo",value:function(){var e=this._gameService.state.mark+1;e+e<=this._gameService.state.path.length&&(this._gameService.mark=e)}},{key:"next",value:function(){var e=this.state.nextMove;e&&this._gameService.move(e.giver,e.taker)}},{key:"playNext",value:function(){var e=this;this._playService.play(function(){return e.next(),!!e.state.nextMove})}},{key:"play",value:function(e){var t=this;this._playService.play(function(){if(e.length>1){var n=e.charCodeAt(0),i=e.charCodeAt(1);e=e.substring(2),t._gameService.move(n,i)}return e.length>1})}},{key:"assist",value:function(){var e=this;if(this._worker&&this.state.canAssist){var t=this._gameService.game,n={base:t.BASE_NUM,cell:t.CELL_NUM,pile:t.PILE_NUM,desk:t.toArray()},i=JSON.stringify(n);this._worker.postMessage({requestId:i,desk:n,searchThreshold:this._settings.state.assistLevel}),this._set({assistRequest:i,canAssist:!1});var a=this._snackBar.open("Thinking...",g).onAction().subscribe(function(){a.unsubscribe(),e.cancelAssist(),e._set({assistRequest:null,canAssist:!0})})}}},{key:"cancelAssist",value:function(){this._worker&&this._worker.postMessage({requestId:null})}},{key:"_createWorker",value:function(){var t=this;"undefined"!=typeof Worker&&(this._worker=new Worker(e,void 0),this._worker.onmessage=function(e){var n=e.data;if(n.requestId===t.state.assistRequest){var i="Unable to assist ;-(";n.path&&(i="Assisting...",t.play(n.path)),t._snackBar.open(i,g,{duration:2e3}),t._set({assistRequest:b.assistRequest})}})}}]),a}(a.a);return t.\u0275fac=function(e){return new(e||t)(r.Xb(o.a),r.Xb(l.a),r.Xb(d.a),r.Xb(h.a))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t}()}).call(this,n("9fNZ"))},LGbN:function(a,r,o){"use strict";o.r(r),o.d(r,"FreecellModule",function(){return hn});var d=o("ofXK"),h=o("3Pt+"),g=o("tyNb"),p=o("hctd"),v=o("pKmL"),m=o("GPiM"),_=o("dkWW"),k=o("jZWl"),y=o("bgvp"),S=o("fXoL");function T(e){return new Promise(function(t,n){e.onsuccess=function(){return t(e.result)},e.onerror=function(){return n(e.error.message)}})}var w,C=((w=function(){function e(){var t=this;c(this,e),this._openPromise=new Promise(function(e,n){var i=window.indexedDB.open("freecell-db",1);i.onerror=function(e){t.onOpenError(i),n(i.error.message)},i.onupgradeneeded=function(e){return t.onUpgradeNeeded(i)},i.onsuccess=function(n){t.onOpenSuccess(i),e()}})}return s(e,[{key:"isOpen",get:function(){return!!this._db}},{key:"_createTransaction",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return this._openPromise.then(function(){return t._db.transaction(e,n)})}},{key:"_getStore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return this._createTransaction([e],t).then(function(t){return t.objectStore(e)})}},{key:"onOpenSuccess",value:function(e){this._db=e.result,console.log("DB open success:",e.result.name)}},{key:"onOpenError",value:function(e){this.openError="DB open error: "+e.error.message,console.error("DB Error:",e.error)}},{key:"onUpgradeNeeded",value:function(e){this._db=e.result,this._db.createObjectStore("game",{keyPath:"deal",autoIncrement:!1}).createIndex("date","date",{unique:!1})}},{key:"getGame",value:function(e){return this._getStore("game","readonly").then(function(t){return T(t.get(e))})}},{key:"setGame",value:function(e){return e.date||(e.date=Object(y.a)()),this._getStore("game","readwrite").then(function(t){return T(t.put(e))})}}]),e}()).\u0275fac=function(e){return new(e||w)},w.\u0275prov=S.Jb({token:w,factory:w.\u0275fac}),w),O=o("1ROQ"),A=o("tt9D");function M(e,t,n,i){return new(n||(n=Promise))(function(a,r){function c(e){try{s(i.next(e))}catch(t){r(t)}}function o(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,o)}s((i=i.apply(e,t||[])).next())})}var L=o("dPmG"),E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];c(this,e),this._subscriptions=t}return s(e,[{key:"_addSubscription",value:function(e){this._subscriptions.push(e)}},{key:"ngOnDestroy",value:function(){this._subscriptions.forEach(function(e){return e.unsubscribe()})}}]),e}(),B=function(e){return e[e.card=0]="card",e[e.deal=1]="deal",e[e.shuffle=2]="shuffle",e[e.aplause_001=3]="aplause_001",e[e.aplause_002=4]="aplause_002",e[e.aplause_003=5]="aplause_003",e[e.aplause_004=6]="aplause_004",e[e.aplause_005=7]="aplause_005",e[e.aplause_006=8]="aplause_006",e[e.aplause_007=9]="aplause_007",e[e.length=10]="length",e}({});function P(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=e.createBufferSource();r.buffer=n;var c=r;if(1!==i){var o=e.createGain();o.gain.value=i,c.connect(o),c=o}if(0!==a){var s=e.createStereoPanner();s.pan.value=a,c.connect(s),c=s}return c.connect(t),r}var x,N=((x=function(e){u(n,e);var t=f(n);function n(e){var i;return c(this,n),(i=t.call(this))._enabled=!1,i._activated=!1,i._sounds=null,i._nextState=Promise.resolve(),i._addSubscription(e.subscribe(function(e){e.enableSound?i.enable():i.disable()})),i}return s(n,[{key:"enabled",get:function(){return this._enabled}},{key:"activated",get:function(){return this._activated}},{key:"_next",value:function(e){return M(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._nextState;case 3:return t.prev=3,this._nextState=e(),t.finish(3);case 6:case"end":return t.stop()}},t,this,[[0,,3,6]])}))}},{key:"activate",value:function(){this._activated=!0}},{key:"disable",value:function(){var e=this;this._next(function(){return M(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._enabled=!1);case 1:case"end":return e.stop()}},e,this)}))})}},{key:"enable",value:function(){var e=this;this._next(function(){return M(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._sounds){e.next=6;break}return this._context||(this._context=new AudioContext),e.next=4,this._getBuffers();case 4:t=e.sent,this._sounds=function(e,t){var n=function(e){var t=e.createDynamicsCompressor();return t.connect(e.destination),t}(e),i={deal:function(){P(e,n,t[B.deal],1).start()},shuffle:function(){P(e,n,t[B.shuffle],1.5).start()}},a=0;return i.card=function(){0==a++&&setTimeout(function(){(1===a?P(e,n,t[B.card],.8):P(e,n,t[B.shuffle],1)).start(),a=0})},i.victory=function(){for(var i=B.aplause_001,a=B.aplause_007,r=e.currentTime,c=0,o=Object(L.k)(1,4);c<o;c++){var s=P(e,n,t[Object(L.k)(i,a+1)],Object(L.l)(.75,1.75),Object(L.k)(-100,101)/100);s.playbackRate.value=Object(L.l)(.85,1.75),s.start(r+3*Math.random())}},i}(this._context,t);case 6:this._enabled=!0;case 7:case"end":return e.stop()}},e,this)}))})}},{key:"_getBuffers",value:function(){return this._buffers||(this._buffers=this._loadAll()),this._buffers}},{key:"_loadAll",value:function(){for(var e,t,n=[],i=0;i<B.length;i++)n.push("./assets/freecell/sounds/"+B[i]+".mp3");return e=this._context,t=n,new Promise(function(n,i){var a=t.length,r=new Array(t.length);0===a&&n([]),t.forEach(function(t,c){(function(e,t){return new Promise(function(t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){return t(i.response)},i.onerror=function(e){return n(e)},i.send()})})(t).then(function(t){return function(e,t){return new Promise(function(n,i){e.decodeAudioData(t,function(e){return n(e)},function(e){return i(e)})})}(e,t)}).then(function(e){r[c]=e,0==--a&&n(r)}).catch(function(e){return i(e)})})})}},{key:"play",value:function(e){return M(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._nextState;case 2:if(!(this._enabled&&this._activated&&this._sounds)){t.next=11;break}if(n=this._sounds[e],t.t0="function"==typeof n,!t.t0){t.next=11;break}if(t.t1="suspended"===this._context.state,!t.t1){t.next=10;break}return t.next=10,this._context.resume();case 10:n();case 11:case"end":return t.stop()}},t,this)}))}}]),n}(E)).\u0275fac=function(e){return new(e||x)(S.Xb(A.a))},x.\u0275prov=S.Jb({token:x,factory:x.\u0275fac}),x),R=o("RDYl"),I=o("rDax"),D=o("0IaG"),j=o("wZkO"),F=o("1jcm"),U=o("bTqV"),X=o("NFeN"),H=o("5RNC"),W=o("jaxi"),z=o("f0Cb");function Y(e,t){if(1&e&&(S.Tb(0,"mat-icon",8),S.Ac(1),S.Sb(),S.Ac(2," Game Sounds ")),2&e){var n=S.ec();S.Bb(1),S.Bc(n.settings.state.enableSound?"volume_up":"volume_off")}}function G(e,t){1&e&&(S.Tb(0,"mat-icon",8),S.Ac(1,"assistant"),S.Sb(),S.Ac(2," Assist level "))}function K(e,t){1&e&&(S.Tb(0,"mat-icon",8),S.Ac(1,"layers"),S.Sb(),S.Ac(2," Card Effects "))}function q(e,t){1&e&&(S.Tb(0,"mat-icon",8),S.Ac(1,"dashboard"),S.Sb(),S.Ac(2," Appearance "))}var Q,J=1e3,Z=((Q=function(){function e(t){var n=this;c(this,e),this.settings=t,this.aspectRatioMin=A.d.aspectRatio*J,this.aspectRatioMax=A.c.aspectRatio*J,this.aspectRatioStep=5,this.assistLevelMin=Math.ceil(A.d.assistLevel/J),this.assistLevelMax=Math.floor(A.c.assistLevel/J),this.assistLevelStep=5,this.aspectRatioLabel=function(e){return(e/J).toFixed(3)},this.assistLevelLabel=function(e){var t=(n.assistLevelMax-n.assistLevelMin)/3;return e<n.assistLevelMin+t?"low":e>n.assistLevelMax-t?"high":"norm"}}return s(e,[{key:"aspectRatio",get:function(){return Math.round(this.settings.state.aspectRatio*J)},set:function(e){this.settings.set({aspectRatio:+e/J})}},{key:"assistLevel",get:function(){return Math.round(this.settings.state.assistLevel/J)},set:function(e){(e=Math.max(this.assistLevelMin,Math.min(this.assistLevelMax,+e)))!==this.assistLevel&&this.settings.set({assistLevel:e*J})}},{key:"assistLevelColor",value:function(){switch(this.assistLevelLabel(this.assistLevel)){case"low":return"primary";case"high":return"warn";default:return"accent"}}},{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Q)(S.Nb(A.a))},Q.\u0275cmp=S.Hb({type:Q,selectors:[["app-freecell-settings-dialog"]],decls:75,vars:30,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-tab-label",""],[1,"tab-content"],[3,"checked","change"],[1,"pad-top"],["mat-stroked-button","",3,"disabled","click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","color","ngModelChange"],[1,"margin-right-8"],[3,"value"],["value","sidenav",3,"click"],["value","sandwich",3,"click"],["thumbLabel","true",3,"displayWith","min","max","step","ngModel","ngModelChange"],["align","center"],["mat-button","",3,"click"],["mat-button","","matDialogClose","","cdkFocusInitial",""]],template:function(e,t){1&e&&(S.Tb(0,"h2",0),S.Ac(1,"Freecell Settings"),S.Sb(),S.Tb(2,"mat-dialog-content",1),S.Tb(3,"mat-tab-group"),S.Tb(4,"mat-tab"),S.yc(5,Y,3,1,"ng-template",2),S.Tb(6,"div",3),S.Tb(7,"mat-slide-toggle",4),S.ac("change",function(e){return t.settings.set({enableSound:!!e.checked})}),S.Ac(8," Enable "),S.Sb(),S.Sb(),S.Sb(),S.Tb(9,"mat-tab"),S.yc(10,G,3,0,"ng-template",2),S.Tb(11,"div",3),S.Tb(12,"p"),S.Ac(13,"The maximum number of moves the assistant will try to solve."),S.Sb(),S.Tb(14,"div",5),S.Tb(15,"button",6),S.ac("click",function(){return t.assistLevel=t.assistLevel-t.assistLevelStep}),S.Tb(16,"mat-icon"),S.Ac(17,"chevron_left"),S.Sb(),S.Sb(),S.Tb(18,"button",6),S.ac("click",function(){return t.assistLevel=t.assistLevel+t.assistLevelStep}),S.Tb(19,"mat-icon"),S.Ac(20,"chevron_right"),S.Sb(),S.Sb(),S.Tb(21,"mat-slider",7),S.ac("ngModelChange",function(e){return t.assistLevel=e}),S.Sb(),S.Ac(22),S.fc(23,"number"),S.Sb(),S.Sb(),S.Sb(),S.Tb(24,"mat-tab"),S.yc(25,K,3,0,"ng-template",2),S.Tb(26,"div",3),S.Tb(27,"div"),S.Tb(28,"mat-slide-toggle",4),S.ac("change",function(e){return t.settings.set({deckUseSvg:!!e.checked})}),S.Ac(29," Use SVG "),S.Sb(),S.Sb(),S.Tb(30,"div",5),S.Tb(31,"mat-slide-toggle",4),S.ac("change",function(e){return t.settings.set({enableRipples:!!e.checked})}),S.Ac(32," Enable Ripples "),S.Sb(),S.Sb(),S.Tb(33,"div",5),S.Tb(34,"mat-slide-toggle",4),S.ac("change",function(e){return t.settings.set({enableWinAnimation:!!e.checked})}),S.Ac(35," Enable Victory Animation "),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Tb(36,"mat-tab"),S.yc(37,q,3,0,"ng-template",2),S.Tb(38,"div",3),S.Tb(39,"div"),S.Tb(40,"mat-icon",8),S.Ac(41,"table_chart"),S.Sb(),S.Ac(42,"Layout: "),S.Tb(43,"span"),S.Ac(44,"horizontal"),S.Sb(),S.Ac(45," or "),S.Tb(46,"span"),S.Ac(47,"vertical"),S.Sb(),S.Ac(48,". "),S.Tb(49,"mat-button-toggle-group",9),S.Tb(50,"mat-button-toggle",10),S.ac("click",function(){return t.settings.set({view:"sidenav"})}),S.Tb(51,"mat-icon"),S.Ac(52,"stay_current_landscape"),S.Sb(),S.Sb(),S.Tb(53,"mat-button-toggle",11),S.ac("click",function(){return t.settings.set({view:"sandwich"})}),S.Tb(54,"mat-icon"),S.Ac(55,"stay_current_portrait"),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Tb(56,"div",5),S.Tb(57,"mat-icon",8),S.Ac(58,"aspect_ratio"),S.Sb(),S.Ac(59,"Aspect ratio. The playground width divided by its height. "),S.Tb(60,"mat-slider",12),S.ac("ngModelChange",function(e){return t.aspectRatio=e}),S.Sb(),S.Ac(61),S.fc(62,"number"),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Ob(63,"mat-divider"),S.Tb(64,"mat-dialog-actions",13),S.Tb(65,"button",14),S.ac("click",function(){return t.settings.restoreDefaults()}),S.Tb(66,"mat-icon"),S.Ac(67,"settings_backup_restore"),S.Sb(),S.Tb(68,"label"),S.Ac(69,"RESET"),S.Sb(),S.Sb(),S.Tb(70,"button",15),S.Tb(71,"mat-icon"),S.Ac(72,"close"),S.Sb(),S.Tb(73,"label"),S.Ac(74,"CLOSE"),S.Sb(),S.Sb(),S.Sb()),2&e&&(S.Bb(7),S.kc("checked",t.settings.state.enableSound),S.Bb(8),S.kc("disabled",t.assistLevelMin>=t.assistLevel),S.Bb(3),S.kc("disabled",t.assistLevel>=t.assistLevelMax),S.Bb(3),S.kc("displayWith",t.assistLevelLabel)("min",t.assistLevelMin)("max",t.assistLevelMax)("step",t.assistLevelStep)("ngModel",t.assistLevel)("color",t.assistLevelColor()),S.Bb(1),S.Cc(" ",S.hc(23,24,t.settings.state.assistLevel,"1.0-0")," "),S.Bb(6),S.kc("checked",t.settings.state.deckUseSvg),S.Bb(3),S.kc("checked",t.settings.state.enableRipples),S.Bb(3),S.kc("checked",t.settings.state.enableWinAnimation),S.Bb(9),S.Fb("text-selected","sidenav"===t.settings.state.view),S.Bb(3),S.Fb("text-selected","sandwich"===t.settings.state.view),S.Bb(3),S.kc("value",t.settings.state.view),S.Bb(11),S.kc("displayWith",t.aspectRatioLabel)("min",t.aspectRatioMin)("max",t.aspectRatioMax)("step",t.aspectRatioStep)("ngModel",t.aspectRatio),S.Bb(1),S.Cc(" ",S.hc(62,27,t.settings.state.aspectRatio,"1.3-3")," "))},directives:[D.h,D.e,j.b,j.a,j.c,F.a,U.a,X.a,H.a,h.i,h.l,W.b,W.a,z.a,D.c,D.d],pipes:[d.e],styles:[".pad-top[_ngcontent-%COMP%], .tab-content[_ngcontent-%COMP%]{padding-top:16px}.tab-content[_ngcontent-%COMP%]{margin-left:10px;min-height:12.75rem}@media (min-aspect-ratio:8/5){.tab-content[_ngcontent-%COMP%]{min-height:9rem}}.margin-right-8[_ngcontent-%COMP%]{margin-right:8px}span.text-selected[_ngcontent-%COMP%]{font-weight:500}"]}),Q),V=o("0MNC");function $(e,t){1&e&&(S.dc(),S.Tb(0,"svg",6),S.Ob(1,"path",7),S.Ob(2,"path",8),S.Sb())}function ee(e,t){1&e&&(S.Rb(0),S.dc(),S.Tb(1,"svg",6),S.Ob(2,"path",7),S.Ob(3,"path",11),S.Sb(),S.Qb())}function te(e,t){if(1&e){var n=S.Ub();S.Tb(0,"button",9),S.ac("click",function(){S.rc(n);var e=t.$implicit;return S.ec().changeOrder(e)}),S.yc(1,ee,4,0,"ng-container",10),S.Sb()}if(2&e){var i=t.$implicit,a=S.ec(),r=S.pc(1);S.Fb("sandwich-button-move-down",a.order[1]>a.order[i])("sandwich-button-move-up",a.order[i]>a.order[1]),S.Bb(1),S.kc("ngIf",a.order[1]>a.order[i])("ngIfElse",r)}}function ne(e,t){1&e&&S.Pb(0)}var ie=function(){return{$implicit:0}};function ae(e,t){if(1&e&&(S.Tb(0,"div",12),S.ic(1,1),S.yc(2,ne,1,0,"ng-container",13),S.Sb()),2&e){var n=S.ec(),i=S.pc(3);S.vc("order",n.order[0]),S.Bb(2),S.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",S.lc(4,ie))}}function re(e,t){1&e&&S.Pb(0)}var ce=function(){return{$implicit:2}};function oe(e,t){if(1&e&&(S.Tb(0,"div",14),S.ic(1,2),S.yc(2,re,1,0,"ng-container",13),S.Sb()),2&e){var n=S.ec(),i=S.pc(3);S.vc("order",n.order[2]),S.Bb(2),S.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",S.lc(4,ce))}}var se=[[["","appSandwichContent",""]],[["","appSandwichHeader",""]],[["","appSandwichFooter",""]]],le=["[appSandwichContent]","[appSandwichHeader]","[appSandwichFooter]"],ue=[5,7,11,15,19,21];function de(e,t){return Math.floor(ue[e]/Math.pow(3,2-t))%3}var fe,he,be=((fe=function(){function e(){c(this,e),this.order=[0,1,2],this._sandwichOrder=0,this.sandwichOrderChange=new S.n,this.hideHeader=!1,this.hideFooter=!1}return s(e,[{key:"sandwichOrder",get:function(){return this._sandwichOrder},set:function(e){this._sandwichOrder!==e&&e>=0&&e<ue.length&&(this._sandwichOrder=e,this.order[0]=de(e,0),this.order[1]=de(e,1),this.order[2]=de(e,2))}},{key:"ngOnInit",value:function(){}},{key:"changeOrder",value:function(e){var t=n(this.order),i=t[e];if(i>t[1])for(var a=t.length;a-- >0;)t[a]===i?t[a]=i-1:t[a]===i-1&&(t[a]=i);else if(i<t[1])for(var r=t.length;r-- >0;)t[r]===i?t[r]=i+1:t[r]===i+1&&(t[r]=i);this.sandwichOrderChange.emit(ue.indexOf(3*(3*t[0]+t[1])+t[2]))}}]),e}()).\u0275fac=function(e){return new(e||fe)},fe.\u0275cmp=S.Hb({type:fe,selectors:[["app-sandwich"]],inputs:{sandwichOrder:"sandwichOrder",hideHeader:"hideHeader",hideFooter:"hideFooter"},outputs:{sandwichOrderChange:"sandwichOrderChange"},ngContentSelectors:le,decls:9,vars:4,consts:[["arrowUpward",""],["moveButton",""],[1,"sandwich-container"],["class","sandwich-header",3,"order",4,"ngIf"],[1,"sandwich-content"],["class","sandwich-footer",3,"order",4,"ngIf"],["height","24","width","24"],["d","M0 0h24v24H0V0z","fill","none"],["d","M6 6h4v4h4V6h4l-6-4zM2 15h20v-4H2v4zm2-3h2v2H4v-2z","fill","currentColor"],["mat-icon-button","",3,"click"],[4,"ngIf","ngIfElse"],["d","M18 18h-4v-4h-4v4H6l6 4zM2 13h20V9H2v4zm2-3h2v2H4v-2z","fill","currentColor"],[1,"sandwich-header"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"sandwich-footer"]],template:function(e,t){1&e&&(S.jc(se),S.yc(0,$,3,0,"ng-template",null,0,S.zc),S.yc(2,te,2,6,"ng-template",null,1,S.zc),S.Tb(4,"div",2),S.yc(5,ae,3,5,"div",3),S.Tb(6,"div",4),S.ic(7),S.Sb(),S.yc(8,oe,3,5,"div",5),S.Sb()),2&e&&(S.Bb(5),S.kc("ngIf",!t.hideHeader),S.Bb(1),S.vc("order",t.order[1]),S.Bb(2),S.kc("ngIf",!t.hideFooter))},directives:[d.l,U.a,d.q],styles:["div.sandwich-container[_ngcontent-%COMP%]{align-items:stretch;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start}div.sandwich-footer[_ngcontent-%COMP%], div.sandwich-header[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;position:relative}div.sandwich-content[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:0}.sandwich-button-move-down[_ngcontent-%COMP%], .sandwich-button-move-up[_ngcontent-%COMP%]{color:#bccfe0;position:absolute;right:0}.sandwich-button-move-down[_ngcontent-%COMP%]:hover, .sandwich-button-move-up[_ngcontent-%COMP%]:hover{color:#fff}.sandwich-button-move-down[_ngcontent-%COMP%]{bottom:0}.sandwich-button-move-up[_ngcontent-%COMP%]{top:0}"]}),fe),ge=o("/t3+"),pe=o("voYn"),ve=o("STbY"),me=o("MutI"),_e=((he=function(e){u(n,e);var t=f(n);function n(e){var i;return c(this,n),(i=t.call(this))._gameService=e,i.minDeal=0,i.maxDeal=2147483648,i.digitCount=i.maxDeal.toString(10).length,i.listItem=!1,i.dealLabel="",i.isMenuOpened=!1,i}return s(n,[{key:"ngOnInit",value:function(){var e=this;this._addSubscription(this._gameService.subscribe(function(t){e.deal=t.deal,e.dealLabel="#"+(e.deal>=0?Object(pe.c)(e.deal.toString(10),e.digitCount,"0"):Object(pe.c)("",e.digitCount,"#"))}))}},{key:"setDeal",value:function(e){e>=this.minDeal&&e<=this.maxDeal&&(this._gameService.deal=e)}},{key:"setRandomDeal",value:function(){this.setDeal(Object(L.k)(this.minDeal,this.maxDeal,this.deal))}}]),n}(E)).\u0275fac=function(e){return new(e||he)(S.Nb(O.a))},he.\u0275cmp=S.Hb({type:he,selectors:[["app-freecell-deal-menu"]],inputs:{listItem:"listItem"},features:[S.yb],decls:22,vars:7,consts:[["xPosition","before"],["appMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["mat-button","",3,"matMenuTriggerFor","menuOpened","menuClosed"]],template:function(e,t){if(1&e&&(S.Tb(0,"mat-menu",0,1),S.Tb(2,"button",2),S.ac("click",function(){return t.setDeal(t.deal+1)}),S.Tb(3,"mat-icon"),S.Ac(4,"navigate_next"),S.Sb(),S.Tb(5,"span"),S.Ac(6,"Next"),S.Sb(),S.Sb(),S.Tb(7,"button",2),S.ac("click",function(){return t.setDeal(t.deal-1)}),S.Tb(8,"mat-icon"),S.Ac(9,"navigate_before"),S.Sb(),S.Tb(10,"span"),S.Ac(11,"Previous"),S.Sb(),S.Sb(),S.Tb(12,"button",3),S.ac("click",function(){return t.setRandomDeal()}),S.Tb(13,"mat-icon"),S.Ac(14,"casino"),S.Sb(),S.Tb(15,"span"),S.Ac(16,"Random"),S.Sb(),S.Sb(),S.Sb(),S.Tb(17,"button",4),S.ac("menuOpened",function(){return t.isMenuOpened=!0})("menuClosed",function(){return t.isMenuOpened=!1}),S.Tb(18,"label"),S.Ac(19),S.Sb(),S.Tb(20,"mat-icon"),S.Ac(21),S.Sb(),S.Sb()),2&e){var n=S.pc(1);S.Bb(2),S.kc("disabled",t.deal>=t.maxDeal),S.Bb(5),S.kc("disabled",t.minDeal>=t.deal),S.Bb(10),S.Fb("mat-list-item",t.listItem),S.kc("matMenuTriggerFor",n),S.Bb(2),S.Bc(t.dealLabel),S.Bb(2),S.Bc(t.isMenuOpened?"remove":"expand_more")}},directives:[ve.a,ve.b,X.a,U.a,me.b,ve.d],styles:[""]}),he),ke=o("bv9b");function ye(e,t){1&e&&S.Ob(0,"mat-progress-bar",6)}function Se(e,t){if(1&e){var n=S.Ub();S.Tb(0,"button",2),S.ac("click",function(){return S.rc(n),S.ec().actionService.undo()}),S.Tb(1,"mat-icon"),S.Ac(2,"undo"),S.Sb(),S.Tb(3,"label"),S.Ac(4,"UNDO"),S.Sb(),S.Sb(),S.Tb(5,"button",2),S.ac("click",function(){return S.rc(n),S.ec().actionService.redo()}),S.Tb(6,"mat-icon"),S.Ac(7,"redo"),S.Sb(),S.Tb(8,"label"),S.Ac(9,"REDO"),S.Sb(),S.Sb(),S.Tb(10,"button",3),S.ac("click",function(){return S.rc(n),S.ec().actionService.playNext()}),S.Tb(11,"mat-icon"),S.Ac(12,"emoji_objects"),S.Sb(),S.Tb(13,"label"),S.Ac(14,"AUTO"),S.Sb(),S.Sb(),S.Tb(15,"button",4),S.ac("click",function(){return S.rc(n),S.ec().actionService.assist()}),S.Tb(16,"mat-icon"),S.Ac(17,"assistant"),S.Sb(),S.Tb(18,"label"),S.Ac(19,"ASSIST"),S.Sb(),S.yc(20,ye,1,0,"mat-progress-bar",5),S.Sb()}if(2&e){var i=S.ec();S.kc("disabled",!i.actionService.state.canUndo),S.Bb(5),S.kc("disabled",!i.actionService.state.canRedo),S.Bb(5),S.kc("disabled",!i.actionService.state.nextMove),S.Bb(5),S.kc("disabled",!i.actionService.state.canAssist),S.Bb(5),S.kc("ngIf",i.actionService.state.assistRequest)}}function Te(e,t){1&e&&S.Ob(0,"mat-progress-bar",6)}function we(e,t){if(1&e){var n=S.Ub();S.Rb(0),S.Tb(1,"button",7),S.ac("click",function(){return S.rc(n),S.ec().actionService.undo()}),S.Tb(2,"mat-icon"),S.Ac(3,"undo"),S.Sb(),S.Sb(),S.Tb(4,"button",7),S.ac("click",function(){return S.rc(n),S.ec().actionService.redo()}),S.Tb(5,"mat-icon"),S.Ac(6,"redo"),S.Sb(),S.Sb(),S.Tb(7,"button",8),S.ac("click",function(){return S.rc(n),S.ec().actionService.playNext()}),S.Tb(8,"mat-icon"),S.Ac(9,"emoji_objects"),S.Sb(),S.Sb(),S.Tb(10,"button",9),S.ac("click",function(){return S.rc(n),S.ec().actionService.assist()}),S.Tb(11,"mat-icon"),S.Ac(12,"assistant"),S.Sb(),S.yc(13,Te,1,0,"mat-progress-bar",5),S.Sb(),S.Qb()}if(2&e){var i=S.ec();S.Bb(1),S.kc("disabled",!i.actionService.state.canUndo),S.Bb(3),S.kc("disabled",!i.actionService.state.canRedo),S.Bb(3),S.kc("disabled",!i.actionService.state.nextMove),S.Bb(3),S.kc("disabled",!i.actionService.state.canAssist),S.Bb(3),S.kc("ngIf",i.actionService.state.assistRequest)}}var Ce,Oe=((Ce=function(){function e(t){c(this,e),this.actionService=t,this.noLabel=!1}return s(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ce)(S.Nb(m.a))},Ce.\u0275cmp=S.Hb({type:Ce,selectors:[["app-freecell-action-buttons"]],inputs:{noLabel:"noLabel"},decls:3,vars:2,consts:[["buttons",""],[4,"ngIf","ngIfElse"],["mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","accent",3,"disabled","click"],["mat-stroked-button","","color","warn",3,"disabled","click"],["mode","indeterminate","color","warn","style","position: absolute; left: 0; bottom: 0",4,"ngIf"],["mode","indeterminate","color","warn",2,"position","absolute","left","0","bottom","0"],["mat-icon-button","",3,"disabled","click"],["mat-icon-button","","color","accent",3,"disabled","click"],["mat-icon-button","","color","warn",3,"disabled","click"]],template:function(e,t){if(1&e&&(S.yc(0,Se,21,5,"ng-template",null,0,S.zc),S.yc(2,we,14,5,"ng-container",1)),2&e){var n=S.pc(1);S.Bb(2),S.kc("ngIf",t.noLabel)("ngIfElse",n)}},directives:[d.l,U.a,X.a,ke.a],styles:[""]}),Ce),Ae=o("lPNG"),Me=o("WxrP"),Le=o("kmnG"),Ee=o("d3UM"),Be=o("FKr1");function Pe(e,t){1&e&&(S.Tb(0,"mat-icon",4),S.Ac(1,"emoji_events"),S.Sb())}function xe(e,t){if(1&e&&(S.Tb(0,"mat-option",2),S.Tb(1,"div",5),S.Ac(2),S.Tb(3,"span"),S.Ac(4),S.Sb(),S.Ac(5,"\xa0\u2192\xa0 "),S.Tb(6,"span"),S.Ac(7),S.Sb(),S.Ac(8,"\xa0 "),S.Tb(9,"span"),S.Ac(10),S.Sb(),S.Sb(),S.Sb()),2&e){var n=t.$implicit,i=t.index;S.kc("value",i),S.Bb(2),S.Cc(" ",i+1,".\xa0 "),S.Bb(1),S.Db(n.cardClass),S.Bb(1),S.Bc(n.cardName),S.Bb(2),S.Db(n.takerClass),S.Bb(1),S.Bc(n.takerName),S.Bb(2),S.Db(n.outcomeClass),S.Bb(1),S.Bc(n.outcomeName)}}var Ne,Re=["danger-critical","danger-extreme","danger-very-high","danger-high","danger-moderate","danger-low","danger-very-low"],Ie=((Ne=function(e){u(n,e);var t=f(n);function n(e){var i;return c(this,n),(i=t.call(this))._gameService=e,i.items=[],i.selection=-1,i.isSolved=!1,i.cards={},i.onMoveCallback=function(e,t,n,a){var r=i.items[a]||{};if(t!==r.giver||n!==r.taker){if(r.card=e.getCard(n,-1),r.giver=t,r.taker=n,r.outcome=e.countEmpty(),r.cardName=i.cards[r.card].cardName,r.cardClass=i.cards[r.card].className,r.outcome===e.PILE_NUM+e.CELL_NUM?(i.isSolved=!0,r.outcomeName="solved!"):r.outcomeName="free "+r.outcome,r.outcomeClass=Re[Math.min(r.outcome,Re.length-1)],e.getLine(n).length>1){var c=e.getCard(n,-2);r.takerName=i.cards[c].cardName,r.takerClass=i.cards[c].className}else r.takerName=function(e,t){return e.isBase(t)?"base":e.isPile(t)?"pile":e.isCell(t)?"cell":"unknown index:"+t}(e,n),r.takerClass="";i.items[a]=r}else"solved!"===r.outcomeName&&(i.isSolved=!0)},i}return s(n,[{key:"ngOnInit",value:function(){for(var e=this,t=0;t<Ae.a;t++)this.cards[t]={className:"history-item-"+Object(Ae.i)(t),cardName:Object(Ae.f)(t)};this._addSubscription(this._gameService.subscribe(function(t){var n;(e._gameService.isFirstChange||t.deal!==(null===(n=e._gameService.previousState)||void 0===n?void 0:n.deal))&&(e.isSolved=!1,e.items.length=0),t.path&&(e.isSolved=!1,Object(Me.b)(t,e.onMoveCallback),e.items.splice(t.path.length/2)),e.selection=t.mark-1}))}},{key:"setSelection",value:function(e){this.selection!==e&&e<=this.items.length&&e>=-1&&(this._gameService.mark=e+1)}}]),n}(E)).\u0275fac=function(e){return new(e||Ne)(S.Nb(O.a))},Ne.\u0275cmp=S.Hb({type:Ne,selectors:[["app-freecell-history"]],features:[S.yb],decls:8,vars:4,consts:[["color","accent",4,"ngIf"],[3,"value","valueChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["color","accent"],[1,"history-item"]],template:function(e,t){1&e&&(S.Tb(0,"mat-form-field"),S.Tb(1,"mat-label"),S.yc(2,Pe,2,0,"mat-icon",0),S.Ac(3," Game History: "),S.Sb(),S.Tb(4,"mat-select",1),S.ac("valueChange",function(e){return t.setSelection(e)}),S.Tb(5,"mat-option",2),S.Ac(6,"Start"),S.Sb(),S.yc(7,xe,11,11,"mat-option",3),S.Sb(),S.Sb()),2&e&&(S.Bb(2),S.kc("ngIf",t.isSolved),S.Bb(2),S.kc("value",t.selection),S.Bb(1),S.kc("value",-1),S.Bb(2),S.kc("ngForOf",t.items))},directives:[Le.b,Le.f,d.l,Ee.a,Be.h,d.k,X.a],styles:["div.history-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.history-item-diamonds[_ngcontent-%COMP%], .history-item-hearts[_ngcontent-%COMP%]{color:red}.history-item-clubs[_ngcontent-%COMP%], .history-item-spades[_ngcontent-%COMP%]{color:#000}.danger-critical[_ngcontent-%COMP%], .danger-extreme[_ngcontent-%COMP%], .danger-high[_ngcontent-%COMP%], .danger-low[_ngcontent-%COMP%], .danger-moderate[_ngcontent-%COMP%], .danger-very-high[_ngcontent-%COMP%], .danger-very-low[_ngcontent-%COMP%]{min-width:4em;padding-left:.25em;padding-right:.25em}.danger-very-low[_ngcontent-%COMP%]{background-color:#bbee90}.danger-low[_ngcontent-%COMP%]{background-color:#bbdd85}.danger-moderate[_ngcontent-%COMP%]{background-color:#bbcc80}.danger-high[_ngcontent-%COMP%]{background-color:#ffee30}.danger-very-high[_ngcontent-%COMP%]{background-color:#fc0}.danger-extreme[_ngcontent-%COMP%]{background-color:#ff9920}.danger-critical[_ngcontent-%COMP%]{background-color:#ff5540}"]}),Ne);function De(e,t){if(1&e&&S.Ob(0,"app-freecell-action-buttons",11),2&e){var n=S.ec();S.kc("noLabel",n.noLabel)}}function je(e,t){1&e&&(S.Tb(0,"div",12),S.Ob(1,"app-freecell-history"),S.Sb())}function Fe(e,t){if(1&e){var n=S.Ub();S.Tb(0,"button",13),S.ac("click",function(){S.rc(n);var e=S.ec();return e.settings.set({enableDarkMode:!e.settings.state.enableDarkMode})}),S.Tb(1,"mat-icon"),S.Ac(2),S.Sb(),S.Sb(),S.Tb(3,"button",14),S.ac("click",function(){return S.rc(n),S.ec().settingsChange.emit()}),S.Tb(4,"mat-icon"),S.Ac(5,"settings"),S.Sb(),S.Sb()}if(2&e){var i=S.ec();S.Bb(2),S.Bc(i.settings.state.enableDarkMode?"brightness_3":"brightness_7")}}function Ue(e,t){1&e&&S.Pb(0)}function Xe(e,t){1&e&&S.Pb(0)}function He(e,t){if(1&e&&(S.yc(0,Ue,1,0,"ng-container",15),S.Ob(1,"span",16),S.yc(2,Xe,1,0,"ng-container",15)),2&e){S.ec();var n=S.pc(3),i=S.pc(5);S.kc("ngTemplateOutlet",n),S.Bb(2),S.kc("ngTemplateOutlet",i)}}function We(e,t){1&e&&S.Pb(0)}function ze(e,t){if(1&e&&(S.Ob(0,"span",16),S.yc(1,We,1,0,"ng-container",15),S.Ob(2,"span",16)),2&e){S.ec();var n=S.pc(1);S.Bb(1),S.kc("ngTemplateOutlet",n)}}function Ye(e,t){1&e&&S.Pb(0)}function Ge(e,t){1&e&&S.Pb(0)}function Ke(e,t){1&e&&S.Pb(0)}function qe(e,t){if(1&e&&(S.yc(0,Ye,1,0,"ng-container",15),S.yc(1,Ge,1,0,"ng-container",15),S.yc(2,Ke,1,0,"ng-container",15)),2&e){S.ec();var n=S.pc(3),i=S.pc(9),a=S.pc(5);S.kc("ngTemplateOutlet",n),S.Bb(1),S.kc("ngTemplateOutlet",i),S.Bb(1),S.kc("ngTemplateOutlet",a)}}function Qe(e,t){1&e&&S.Pb(0)}function Je(e,t){if(1&e&&(S.Rb(0),S.yc(1,Qe,1,0,"ng-container",15),S.Qb()),2&e){S.ec();var n=S.pc(11);S.Bb(1),S.kc("ngTemplateOutlet",n)}}function Ze(e,t){1&e&&S.Pb(0)}function Ve(e,t){if(1&e&&(S.Rb(0),S.yc(1,Ze,1,0,"ng-container",15),S.Qb()),2&e){S.ec();var n=S.pc(9);S.Bb(1),S.kc("ngTemplateOutlet",n)}}function $e(e,t){1&e&&S.Pb(0)}function et(e,t){if(1&e&&(S.Tb(0,"mat-toolbar-row"),S.yc(1,$e,1,0,"ng-container",15),S.Sb()),2&e){S.ec();var n=S.pc(9);S.Bb(1),S.kc("ngTemplateOutlet",n)}}function tt(e,t){1&e&&S.Pb(0)}function nt(e,t){if(1&e&&(S.Tb(0,"mat-toolbar",17),S.yc(1,tt,1,0,"ng-container",15),S.Sb()),2&e){S.ec();var n=S.pc(7);S.Bb(1),S.kc("ngTemplateOutlet",n)}}var it,at=["*"],rt=V.b.XSmall,ct=V.b.Small,ot=V.b.Large,st=V.b.XLarge,lt=((it=function(e){u(n,e);var t=f(n);function n(e,i){var a;return c(this,n),(a=t.call(this)).settings=i,a.settingsChange=new S.n,a.noLabel=!1,a.rowNum=3,a._addSubscription(e.observe([rt,ct,ot,st]).subscribe(function(e){a.noLabel=e.breakpoints[rt]||e.breakpoints[ct],a.rowNum=e.breakpoints[rt]?3:e.breakpoints[ot]||e.breakpoints[st]?1:2})),a}return s(n,[{key:"ngOnInit",value:function(){}}]),n}(E)).\u0275fac=function(e){return new(e||it)(S.Nb(V.a),S.Nb(A.a))},it.\u0275cmp=S.Hb({type:it,selectors:[["app-freecell-sandwich"]],outputs:{settingsChange:"settingsChange"},features:[S.yb],ngContentSelectors:at,decls:23,vars:6,consts:[["actionButtons",""],["history",""],["settingsButtons",""],["toolbarRow3",""],["toolbarRow2",""],["toolbarRow1",""],[3,"sandwichOrder","hideFooter","sandwichOrderChange"],["appSandwichHeader","","color","primary"],[2,"margin-right","20px"],[4,"ngIf"],["appSandwichFooter","","color","primary",4,"ngIf"],[3,"noLabel"],[1,"mat-typography","padding-top-half-rem"],["mat-icon-button","",3,"click"],["mat-icon-button","",2,"margin-right","40px",3,"click"],[4,"ngTemplateOutlet"],[1,"flex-space-filler-1"],["appSandwichFooter","","color","primary"]],template:function(e,t){1&e&&(S.jc(),S.yc(0,De,1,1,"ng-template",null,0,S.zc),S.yc(2,je,2,0,"ng-template",null,1,S.zc),S.yc(4,Fe,6,1,"ng-template",null,2,S.zc),S.yc(6,He,3,2,"ng-template",null,3,S.zc),S.yc(8,ze,3,1,"ng-template",null,4,S.zc),S.yc(10,qe,3,3,"ng-template",null,5,S.zc),S.Tb(12,"app-sandwich",6),S.ac("sandwichOrderChange",function(e){return t.settings.set({sandwichOrder:e})}),S.Tb(13,"mat-toolbar",7),S.Tb(14,"mat-toolbar-row"),S.Tb(15,"span"),S.Ac(16,"Freecell"),S.Sb(),S.Ob(17,"app-freecell-deal-menu",8),S.yc(18,Je,2,1,"ng-container",9),S.yc(19,Ve,2,1,"ng-container",9),S.Sb(),S.yc(20,et,2,1,"mat-toolbar-row",9),S.Sb(),S.ic(21,0,["appSandwichContent",""]),S.yc(22,nt,2,1,"mat-toolbar",10),S.Sb()),2&e&&(S.Bb(12),S.kc("sandwichOrder",t.settings.state.sandwichOrder)("hideFooter",2>t.rowNum),S.Bb(6),S.kc("ngIf",1===t.rowNum),S.Bb(1),S.kc("ngIf",2===t.rowNum),S.Bb(1),S.kc("ngIf",t.rowNum>=3),S.Bb(2),S.kc("ngIf",t.rowNum>1))},directives:[be,ge.a,ge.c,_e,d.l,Oe,Ie,U.a,X.a,d.q],styles:[".padding-top-half-rem[_ngcontent-%COMP%]{padding-top:.5rem}"]}),it),ut=o("XhcP");function dt(e,t){1&e&&S.Ac(0," Loading stuff...\n")}function ft(e,t){if(1&e){var n=S.Ub();S.Tb(0,"mat-slide-toggle",17),S.ac("change",function(e){return S.rc(n),S.ec(2).settings.set({sidenavModeSide:!!e.checked})}),S.Sb()}if(2&e){var i=S.ec(2);S.kc("checked",i.settings.state.sidenavModeSide)}}function ht(e,t){1&e&&S.Ob(0,"mat-progress-bar",18)}function bt(e,t){if(1&e){var n=S.Ub();S.Tb(0,"button",19),S.ac("click",function(){return S.rc(n),S.ec(2).settings.set({sidenavClosed:!1})}),S.Tb(1,"mat-icon"),S.Ac(2,"double_arrow"),S.Sb(),S.Sb()}if(2&e){var i=S.ec(2);S.Fb("sidenav-open-button-active",!i.sidenavOpened)}}function gt(e,t){if(1&e){var n=S.Ub();S.Tb(0,"div",2),S.Tb(1,"mat-sidenav-container",3),S.Tb(2,"mat-sidenav",4),S.ac("closedStart",function(){return S.rc(n),S.ec().settings.set({sidenavClosed:!0})})("openedChange",function(e){return S.rc(n),S.ec().sidenavOpened=e}),S.Tb(3,"mat-toolbar",5),S.Tb(4,"button",6),S.ac("click",function(){return S.rc(n),S.ec().settings.set({sidenavClosed:!0})}),S.Tb(5,"mat-icon"),S.Ac(6,"close"),S.Sb(),S.Sb(),S.Ob(7,"span",7),S.Tb(8,"span"),S.Ac(9,"Freecell"),S.Sb(),S.Ob(10,"span",7),S.yc(11,ft,1,1,"mat-slide-toggle",8),S.Sb(),S.Tb(12,"mat-action-list"),S.Ob(13,"app-freecell-deal-menu",9),S.Tb(14,"div",10),S.Ac(15,"Actions:"),S.Sb(),S.Tb(16,"button",11),S.ac("click",function(){return S.rc(n),S.ec().actionService.undo()}),S.Tb(17,"mat-icon",12),S.Ac(18,"undo"),S.Sb(),S.Ac(19," UNDO "),S.Sb(),S.Tb(20,"button",11),S.ac("click",function(){return S.rc(n),S.ec().actionService.redo()}),S.Tb(21,"mat-icon",12),S.Ac(22,"redo"),S.Sb(),S.Ac(23," REDO "),S.Sb(),S.Tb(24,"button",11),S.ac("click",function(){return S.rc(n),S.ec().actionService.playNext()}),S.Tb(25,"mat-icon",12),S.Ac(26,"emoji_objects"),S.Sb(),S.Tb(27,"span"),S.Ac(28,"AUTO"),S.Sb(),S.Sb(),S.Tb(29,"button",11),S.ac("click",function(){return S.rc(n),S.ec().actionService.assist()}),S.Tb(30,"mat-icon",12),S.Ac(31,"assistant"),S.Sb(),S.Tb(32,"span"),S.Ac(33,"ASSIST"),S.Sb(),S.yc(34,ht,1,0,"mat-progress-bar",13),S.Sb(),S.Sb(),S.Tb(35,"div",14),S.Ob(36,"app-freecell-history"),S.Sb(),S.Ob(37,"span",7),S.Ob(38,"mat-divider"),S.Tb(39,"mat-action-list"),S.Tb(40,"button",15),S.ac("click",function(){S.rc(n);var e=S.ec();return e.settings.set({enableDarkMode:!e.settings.state.enableDarkMode})}),S.Tb(41,"mat-icon"),S.Ac(42),S.Sb(),S.Tb(43,"span"),S.Ac(44,"THEME"),S.Sb(),S.Sb(),S.Tb(45,"button",15),S.ac("click",function(){return S.rc(n),S.ec().settingsChange.emit()}),S.Tb(46,"mat-icon"),S.Ac(47,"settings"),S.Sb(),S.Tb(48,"span"),S.Ac(49,"SETTINGS"),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Tb(50,"mat-sidenav-content"),S.ic(51),S.yc(52,bt,3,2,"button",16),S.Sb(),S.Sb(),S.Sb()}if(2&e){var i=t.ngIf,a=S.ec();S.Bb(2),S.kc("mode",!a.settings.state.sidenavModeSide||i.breakpoints[a.BP_XS]?"over":"side")("opened",!a.settings.state.sidenavClosed),S.Bb(9),S.kc("ngIf",!i.breakpoints[a.BP_XS]),S.Bb(2),S.kc("listItem",!0),S.Bb(3),S.kc("disabled",!a.actionService.state.canUndo),S.Bb(1),S.kc("ngClass",a.actionService.state.canUndo?"mat-primary":"disabled-color"),S.Bb(3),S.kc("disabled",!a.actionService.state.canRedo),S.Bb(1),S.kc("ngClass",a.actionService.state.canRedo?"mat-primary":"disabled-color"),S.Bb(3),S.kc("disabled",!a.actionService.state.nextMove),S.Bb(1),S.kc("ngClass",a.actionService.state.nextMove?"mat-accent":"disabled-color"),S.Bb(4),S.kc("disabled",!a.actionService.state.canAssist),S.Bb(1),S.kc("ngClass",a.actionService.state.canAssist?"mat-warn":"disabled-color"),S.Bb(4),S.kc("ngIf",a.actionService.state.assistRequest),S.Bb(8),S.Bc(a.settings.state.enableDarkMode?"brightness_3":"brightness_7"),S.Bb(10),S.kc("ngIf",a.settings.state.sidenavClosed)}}var pt,vt=["*"],mt=V.b.XSmall,_t=V.b.Small,kt=V.b.Medium,yt=V.b.Large,St=V.b.XLarge,Tt=((pt=function(){function e(t,n,i){c(this,e),this.actionService=t,this.settings=n,this.settingsChange=new S.n,this.BP_XS=mt,this.BP_SM=_t,this.BP_MD=kt,this.BP_LG=yt,this.BP_XL=St,this.sidenavOpened=!1,this.breakpoints$=i.observe([mt,_t,kt,yt,St])}return s(e,[{key:"isXSmall",value:function(e){return e.breakpoints[V.b.XSmall]}},{key:"getSideNavMode",value:function(e){return e.breakpoints[mt]?"over":"side"}}]),e}()).\u0275fac=function(e){return new(e||pt)(S.Nb(m.a),S.Nb(A.a),S.Nb(V.a))},pt.\u0275cmp=S.Hb({type:pt,selectors:[["app-freecell-sidenav"]],outputs:{settingsChange:"settingsChange"},ngContentSelectors:vt,decls:4,vars:3,consts:[["loading",""],["class","freecell-container",4,"ngIf"],[1,"freecell-container"],[1,"freecell-sidenav-container"],[3,"mode","opened","closedStart","openedChange"],["color","primary",1,"freecell-toolbar"],["mat-icon-button","",3,"click"],[1,"flex-space-filler-1"],["color","primary",3,"checked","change",4,"ngIf"],[3,"listItem"],["mat-subheader",""],["mat-list-item","",3,"disabled","click"],[3,"ngClass"],["mode","indeterminate","color","warn",4,"ngIf"],[2,"padding","1em"],["mat-list-item","",3,"click"],["class","sidenav-open-button","mat-icon-button","","color","primary",3,"sidenav-open-button-active","click",4,"ngIf"],["color","primary",3,"checked","change"],["mode","indeterminate","color","warn"],["mat-icon-button","","color","primary",1,"sidenav-open-button",3,"click"]],template:function(e,t){1&e&&(S.jc(),S.yc(0,dt,1,0,"ng-template",null,0,S.zc),S.yc(2,gt,53,15,"div",1),S.fc(3,"async")),2&e&&(S.Bb(2),S.kc("ngIf",S.gc(3,1,t.breakpoints$)))},directives:[d.l,ut.b,ut.a,ge.a,U.a,X.a,me.a,_e,me.d,me.b,d.j,Ie,z.a,ut.c,F.a,ke.a],pipes:[d.b],styles:["button.sidenav-open-button[_ngcontent-%COMP%]{left:-64px;position:absolute;top:1px;transition:left 2s 1s}button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-12px}@media (min-width:600px) and (max-width:959.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-9px}}@media (min-width:960px) and (max-width:1279.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-6px}}@media (min-width:1280px) and (max-width:1919.99px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:-3px}}@media (min-width:1920px){button.sidenav-open-button.sidenav-open-button-active[_ngcontent-%COMP%]{left:0}}.freecell-container[_ngcontent-%COMP%]{bottom:0;display:flex;flex-direction:column;left:0;position:absolute;right:0;top:0}.freecell-sidenav-container[_ngcontent-%COMP%]{flex:1}"]}),pt);function wt(e,t){1&e&&S.ic(0)}function Ct(e,t){if(1&e){var n=S.Ub();S.Tb(0,"app-freecell-sandwich",4),S.ac("settingsChange",function(){return S.rc(n),S.ec().openSettingsDialog()}),S.Pb(1,3),S.Sb()}if(2&e){S.ec();var i=S.pc(1);S.Bb(1),S.kc("ngTemplateOutlet",i)}}function Ot(e,t){if(1&e){var n=S.Ub();S.Tb(0,"app-freecell-sidenav",4),S.ac("settingsChange",function(){return S.rc(n),S.ec().openSettingsDialog()}),S.Pb(1,3),S.Sb()}if(2&e){S.ec();var i=S.pc(1);S.Bb(1),S.kc("ngTemplateOutlet",i)}}var At,Mt=["*"],Lt=((At=function(){function e(t,n){c(this,e),this.settings=t,this.dialog=n}return s(e,[{key:"ngOnInit",value:function(){}},{key:"openSettingsDialog",value:function(){this.dialog.open(Z,{maxHeight:"100vh"})}}]),e}()).\u0275fac=function(e){return new(e||At)(S.Nb(A.a),S.Nb(D.b))},At.\u0275cmp=S.Hb({type:At,selectors:[["app-freecell-view"]],ngContentSelectors:Mt,decls:7,vars:1,consts:[["portal",""],["sandwich",""],["sidenav",""],[3,"ngTemplateOutlet"],[3,"settingsChange"]],template:function(e,t){if(1&e&&(S.jc(),S.yc(0,wt,1,0,"ng-template",null,0,S.zc),S.yc(2,Ct,2,1,"ng-template",null,1,S.zc),S.yc(4,Ot,2,1,"ng-template",null,2,S.zc),S.Pb(6,3)),2&e){var n=S.pc(3),i=S.pc(5);S.Bb(6),S.kc("ngTemplateOutlet","sidenav"===t.settings.state.view?i:n)}},directives:[d.q,lt,Tt],styles:[""]}),At);function Et(e,t,n){return e+(t-e)*n}var Bt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;c(this,e),this.basis=t,this.itemWidth=a,this.itemHeight=r,this.deltaWidth=n,this.deltaHeight=i/2,this.cellStartX=n,this.cellStartY=this.deltaHeight,this.cellEndX=this.cellStartX+t.CELL_NUM*(a+n)-n,this.cellEndY=this.cellStartY+r,this.baseStartX=this.cellEndX+n,this.baseStartY=this.cellStartY,this.baseEndX=this.baseStartX+t.BASE_NUM*(a+n)-n,this.baseEndY=this.cellEndY,this.pileStartX=n,this.pileStartY=this.cellEndY+this.deltaHeight,this.pileEndX=this.pileStartX+t.PILE_NUM*(a+n)-n,this.pileEndY=this.pileStartY+4.5*r}return s(e,[{key:"width",get:function(){return this.deltaWidth+Math.max(this.baseEndX,this.cellEndX,this.pileEndX)}},{key:"height",get:function(){return this.deltaHeight+Math.max(this.baseEndY,this.cellEndY,this.pileEndY)}},{key:"getCellX",value:function(e){return Et(this.cellStartX,this.cellEndX-this.itemWidth,e/(this.basis.CELL_NUM-1))}},{key:"getCellY",value:function(e){return this.cellStartY}},{key:"getBaseX",value:function(e){return Et(this.baseStartX,this.baseEndX-this.itemWidth,e/(this.basis.BASE_NUM-1))}},{key:"getBaseY",value:function(e){return this.baseStartY}},{key:"getPileX",value:function(e){return Et(this.pileStartX,this.pileEndX-this.itemWidth,e/(this.basis.PILE_NUM-1))}},{key:"getPileY",value:function(e){return this.pileStartY}},{key:"getSpotPosition",value:function(e){var t=this.basis;return t.isBase(e)?{x:this.getBaseX(e-=t.BASE_START),y:this.getBaseY(e)}:t.isCell(e)?{x:this.getCellX(e-=t.CELL_START),y:this.getCellY(e)}:t.isPile(e)?{x:this.getPileX(e-=t.PILE_START),y:this.getPileY(e)}:{x:0,y:0}}},{key:"getCardPosition",value:function(e,t,n){var i=this.basis,a=this.getSpotPosition(e);if(i.isPile(e)&&n>0){var r=Math.min((this.pileEndY-this.pileStartY-this.itemHeight)/(n-1),.4*this.itemHeight);a.y+=r*t}return a}}]),e}();function Pt(e,t){if(1&e&&(S.Tb(0,"div"),S.Tb(1,"p"),S.Ac(2),S.Sb(),S.Tb(3,"p"),S.Ac(4),S.Sb(),S.Tb(5,"p"),S.Ac(6),S.Sb(),S.Sb()),2&e){var n=S.ec();S.Bb(2),S.Cc("DEAL: ",n.deal,""),S.Bb(2),S.Cc("MARK: ",n.mark,""),S.Bb(2),S.Cc("PATH: ",n.path,"")}}var xt,Nt=((xt=function(e){u(n,e);var t=f(n);function n(e,i,a){var r;return c(this,n),(r=t.call(this))._router=e,r._route=i,r._gameService=a,r.debug=!1,r._lock=!1,r}return s(n,[{key:"_update",value:function(e){var t=this,n=e.path||"",i=parseInt(e.deal,10);(isNaN(i)||i<0)&&(i=-1);var a=parseInt(e.mark,10);(isNaN(a)||a<0||a+a>n.length)&&(a=Math.floor(n.length/2)),i!==this.deal||n!==this.path||a!==this.mark?(this.deal=i,this.path=n,this.mark=a,this._lock=!0,Promise.resolve().then(function(){var e=t._gameService.state;e.deal===i&&e.path===n&&e.mark===a||t._gameService.set(i,n,a)}).finally(function(){return t._lock=!1})):this._lock=!1}},{key:"ngOnInit",value:function(){var e=this;this._lock=!0,this._addSubscription(this._gameService.subscribe(function(t){e._lock||e.deal===t.deal&&e.path===t.path&&e.mark===t.mark||(e.deal=t.deal,e.path=t.path,e.mark=t.mark,e.updateAddressBar(t.deal,t.path,t.mark))})),this._addSubscription(this._route.queryParams.subscribe(function(t){return e._update(t)}))}},{key:"updateAddressBar",value:function(e,t,n){return t?"number"==typeof n&&n+n===t.length&&(n=void 0):(t=void 0,n=void 0),this._router.navigate(["."],{relativeTo:this._route,queryParams:{deal:e,path:t,mark:n}})}}]),n}(E)).\u0275fac=function(e){return new(e||xt)(S.Nb(g.b),S.Nb(g.a),S.Nb(O.a))},xt.\u0275cmp=S.Hb({type:xt,selectors:[["app-freecell-router"]],inputs:{debug:"debug"},features:[S.yb],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&S.yc(0,Pt,7,3,"div",0),2&e&&S.kc("ngIf",t.debug)},directives:[d.l],styles:[""]}),xt),Rt=o("zh6y"),It=o("dqHA"),Dt=["spot"];function jt(e,t){if(1&e){var n=S.Ub();S.Tb(0,"div",3,4),S.ac("click",function(){S.rc(n);var e=t.index,i=S.ec();return i.selectionChange.emit(i.selection===e?-1:e)}),S.Sb()}if(2&e){var i=t.$implicit,a=t.index,r=S.ec();S.Fb("freecell_selection",r.selection===a),S.kc("ngClass",i.ngClass)("ngStyle",i.ngStyle)("matRippleDisabled",!r.settings.state.enableRipples)}}function Ft(e,t){1&e&&(S.Rb(0),S.Ob(1,"object",5),S.Qb())}var Ut,Xt,Ht,Wt,zt=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],Yt=["[appFreecellBackground]","[appFreecellForeground]"],Gt=((Ht=function(){function e(t,n){c(this,e),this.settings=t,this.action=n,this.selection=-1,this.selectionChange=new S.n,this.touchChange=new S.n,this.spots=[]}return s(e,[{key:"layout",set:function(e){this.spots=function(e){var t=[];if(e)for(var n=e.basis,i=e.itemWidth,a=e.itemHeight,r=Object(L.m)(i,e.width),c=Object(L.m)(a,e.height),o=0;o<n.DESK_SIZE;o++){var s=e.getSpotPosition(o),l={ngStyle:{transform:"translate(".concat(Object(L.m)(s.x,i),", ").concat(Object(L.m)(s.y,a),")"),width:r,height:c},ngClass:{}};n.isBase(o)?(l.ngClass.freecell_base=!0,l.ngClass["freecell_"+Object(Ae.i)(o-n.BASE_START)]=!0):n.isCell(o)?l.ngClass.freecell_cell=!0:n.isPile(o)&&(l.ngClass.freecell_pile=!0),t.push(l)}return t}(e)}},{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ht)(S.Nb(A.a),S.Nb(m.a))},Ht.\u0275cmp=S.Hb({type:Ht,selectors:[["app-freecell-playground"]],viewQuery:function(e,t){var n;1&e&&S.Fc(Dt,1),2&e&&S.oc(n=S.bc())&&(t.spotList=n)},inputs:{layout:"layout",selection:"selection"},outputs:{selectionChange:"selectionChange",touchChange:"touchChange"},ngContentSelectors:Yt,decls:5,vars:6,consts:[[1,"freecell_deck",3,"touchstart","touchend","touchcancel","touchmove"],["class","freecell_spot","matRipple","",3,"freecell_selection","ngClass","ngStyle","matRippleDisabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],["matRipple","",1,"freecell_spot",3,"ngClass","ngStyle","matRippleDisabled","click"],["spot",""],["type","image/svg+xml","data",S.Ec(e||(Ut=["./assets/freecell/fireworks.svg"],Xt||(Xt=Ut.slice(0)),e=Object.freeze(Object.defineProperties(Ut,{raw:{value:Object.freeze(Xt)}})))),1,"freecell-fireworks"]],template:function(e,t){1&e&&(S.jc(zt),S.Tb(0,"div",0),S.ac("touchstart",function(e){return t.touchChange.emit({type:"DragStart",event:e})})("touchend",function(e){return t.touchChange.emit({type:"DragStop",event:e})})("touchcancel",function(e){return t.touchChange.emit({type:"DragStop",event:e})})("touchmove",function(e){return t.touchChange.emit({type:"DragMove",event:e})}),S.ic(1),S.yc(2,jt,2,5,"div",1),S.ic(3,1),S.yc(4,Ft,2,0,"ng-container",2),S.Sb()),2&e&&(S.Fb("use-svg-background",t.settings.state.deckUseSvg)("freecell_deck_solved",t.action.state.solved&&t.settings.state.enableWinAnimation),S.Bb(2),S.kc("ngForOf",t.spots),S.Bb(2),S.kc("ngIf",t.action.state.solved&&t.settings.state.enableWinAnimation))},directives:[d.k,d.l,Be.l,d.j,d.m],styles:[".freecell_deck{background:#cfe url(bg-desk.09c80cb5354cc50b5181.jpg) repeat;height:100%;position:relative;width:100%}.freecell_card,.freecell_spot{background-color:transparent;background-image:url(cards_3.f425b6710669dbc8105a.png);background-repeat:no-repeat;background-size:900% 900%;cursor:pointer;position:absolute}@media (min-width:600px) and (max-width:1279.99px){.freecell_card,.freecell_spot{background-image:url(cards_2.70d80d7fff9de7d2572a.png)}}@media (max-width:599.99px){.freecell_card,.freecell_spot{background-image:url(cards_1.6288bccad84dee6dc98e.png)}}div.use-svg-background .freecell_card,div.use-svg-background .freecell_spot{background-image:url(cards.ebd91e0b7d767203a0cd.svg)}.freecell_spot.freecell_selection{outline-color:#eed;outline-style:dotted;outline-width:medium}.freecell_spot.freecell_selection.freecell_base{outline-color:#bb11a1}.freecell_spot.freecell_selection.freecell_cell{outline-color:#3e8181}.freecell_spot.freecell_pile{background-position:14.84375% 99.21875%}.freecell_spot.freecell_base.freecell_spades{background-position:57.03125% 85.15625%}.freecell_spot.freecell_base.freecell_diamonds{background-position:71.09375% 85.15625%}.freecell_spot.freecell_base.freecell_clubs{background-position:85.15625% 85.15625%}.freecell_spot.freecell_base.freecell_hearts{background-position:99.21875% 85.15625%}.freecell_spot.freecell_cell{background-position:.78125% 99.21875%}.freecell_card.freecell_Ace.freecell_spades{background-position:.78125% .78125%}.freecell_card.freecell_Ace.freecell_diamonds{background-position:14.84375% .78125%}.freecell_card.freecell_Ace.freecell_clubs{background-position:28.90625% .78125%}.freecell_card.freecell_Ace.freecell_hearts{background-position:42.96875% .78125%}.freecell_card.freecell_Two.freecell_spades{background-position:57.03125% .78125%}.freecell_card.freecell_Two.freecell_diamonds{background-position:71.09375% .78125%}.freecell_card.freecell_Two.freecell_clubs{background-position:85.15625% .78125%}.freecell_card.freecell_Two.freecell_hearts{background-position:99.21875% .78125%}.freecell_card.freecell_Three.freecell_spades{background-position:.78125% 14.84375%}.freecell_card.freecell_Three.freecell_diamonds{background-position:14.84375% 14.84375%}.freecell_card.freecell_Three.freecell_clubs{background-position:28.90625% 14.84375%}.freecell_card.freecell_Three.freecell_hearts{background-position:42.96875% 14.84375%}.freecell_card.freecell_Four.freecell_spades{background-position:57.03125% 14.84375%}.freecell_card.freecell_Four.freecell_diamonds{background-position:71.09375% 14.84375%}.freecell_card.freecell_Four.freecell_clubs{background-position:85.15625% 14.84375%}.freecell_card.freecell_Four.freecell_hearts{background-position:99.21875% 14.84375%}.freecell_card.freecell_Five.freecell_spades{background-position:.78125% 28.90625%}.freecell_card.freecell_Five.freecell_diamonds{background-position:14.84375% 28.90625%}.freecell_card.freecell_Five.freecell_clubs{background-position:28.90625% 28.90625%}.freecell_card.freecell_Five.freecell_hearts{background-position:42.96875% 28.90625%}.freecell_card.freecell_Six.freecell_spades{background-position:57.03125% 28.90625%}.freecell_card.freecell_Six.freecell_diamonds{background-position:71.09375% 28.90625%}.freecell_card.freecell_Six.freecell_clubs{background-position:85.15625% 28.90625%}.freecell_card.freecell_Six.freecell_hearts{background-position:99.21875% 28.90625%}.freecell_card.freecell_Seven.freecell_spades{background-position:.78125% 42.96875%}.freecell_card.freecell_Seven.freecell_diamonds{background-position:14.84375% 42.96875%}.freecell_card.freecell_Seven.freecell_clubs{background-position:28.90625% 42.96875%}.freecell_card.freecell_Seven.freecell_hearts{background-position:42.96875% 42.96875%}.freecell_card.freecell_Eight.freecell_spades{background-position:57.03125% 42.96875%}.freecell_card.freecell_Eight.freecell_diamonds{background-position:71.09375% 42.96875%}.freecell_card.freecell_Eight.freecell_clubs{background-position:85.15625% 42.96875%}.freecell_card.freecell_Eight.freecell_hearts{background-position:99.21875% 42.96875%}.freecell_card.freecell_Nine.freecell_spades{background-position:.78125% 57.03125%}.freecell_card.freecell_Nine.freecell_diamonds{background-position:14.84375% 57.03125%}.freecell_card.freecell_Nine.freecell_clubs{background-position:28.90625% 57.03125%}.freecell_card.freecell_Nine.freecell_hearts{background-position:42.96875% 57.03125%}.freecell_card.freecell_Ten.freecell_spades{background-position:57.03125% 57.03125%}.freecell_card.freecell_Ten.freecell_diamonds{background-position:71.09375% 57.03125%}.freecell_card.freecell_Ten.freecell_clubs{background-position:85.15625% 57.03125%}.freecell_card.freecell_Ten.freecell_hearts{background-position:99.21875% 57.03125%}.freecell_card.freecell_Jack.freecell_spades{background-position:.78125% 71.09375%}.freecell_card.freecell_Jack.freecell_diamonds{background-position:14.84375% 71.09375%}.freecell_card.freecell_Jack.freecell_clubs{background-position:28.90625% 71.09375%}.freecell_card.freecell_Jack.freecell_hearts{background-position:42.96875% 71.09375%}.freecell_card.freecell_Queen.freecell_spades{background-position:57.03125% 71.09375%}.freecell_card.freecell_Queen.freecell_diamonds{background-position:71.09375% 71.09375%}.freecell_card.freecell_Queen.freecell_clubs{background-position:85.15625% 71.09375%}.freecell_card.freecell_Queen.freecell_hearts{background-position:99.21875% 71.09375%}.freecell_card.freecell_King.freecell_spades{background-position:.78125% 85.15625%}.freecell_card.freecell_King.freecell_diamonds{background-position:14.84375% 85.15625%}.freecell_card.freecell_King.freecell_clubs{background-position:28.90625% 85.15625%}.freecell_card.freecell_King.freecell_hearts{background-position:42.96875% 85.15625%}@-webkit-keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@keyframes animation-card{0%{left:0;top:0}25%{left:-4%;top:4%}50%{left:4%;top:4%}75%{left:-4%;top:-4%}to{left:0;top:0}}@-webkit-keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}@keyframes animation-spot{0%{opacity:1}25%{opacity:0}75%{opacity:0}to{opacity:1}}.freecell_deck_solved .freecell_card{-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-name:animation-card;animation-name:animation-card;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}.freecell_deck_solved .freecell_card.freecell_Ace{-webkit-animation-delay:1.7s;animation-delay:1.7s;-webkit-animation-duration:1.6s;animation-duration:1.6s}.freecell_deck_solved .freecell_card.freecell_Two{-webkit-animation-delay:1.6s;animation-delay:1.6s;-webkit-animation-duration:1.8s;animation-duration:1.8s}.freecell_deck_solved .freecell_card.freecell_Three{-webkit-animation-delay:1.5s;animation-delay:1.5s;-webkit-animation-duration:2s;animation-duration:2s}.freecell_deck_solved .freecell_card.freecell_Four{-webkit-animation-delay:1.4s;animation-delay:1.4s;-webkit-animation-duration:2.2s;animation-duration:2.2s}.freecell_deck_solved .freecell_card.freecell_Five{-webkit-animation-delay:1.3s;animation-delay:1.3s;-webkit-animation-duration:2.4s;animation-duration:2.4s}.freecell_deck_solved .freecell_card.freecell_Six{-webkit-animation-delay:1.2s;animation-delay:1.2s;-webkit-animation-duration:2.6s;animation-duration:2.6s}.freecell_deck_solved .freecell_card.freecell_Seven{-webkit-animation-delay:1.1s;animation-delay:1.1s;-webkit-animation-duration:2.8s;animation-duration:2.8s}.freecell_deck_solved .freecell_card.freecell_Eight{-webkit-animation-delay:1s;animation-delay:1s;-webkit-animation-duration:3s;animation-duration:3s}.freecell_deck_solved .freecell_card.freecell_Nine{-webkit-animation-delay:.9s;animation-delay:.9s;-webkit-animation-duration:3.2s;animation-duration:3.2s}.freecell_deck_solved .freecell_card.freecell_Ten{-webkit-animation-delay:.8s;animation-delay:.8s;-webkit-animation-duration:3.4s;animation-duration:3.4s}.freecell_deck_solved .freecell_card.freecell_Jack{-webkit-animation-delay:.7s;animation-delay:.7s;-webkit-animation-duration:3.6s;animation-duration:3.6s}.freecell_deck_solved .freecell_card.freecell_Queen{-webkit-animation-delay:.6s;animation-delay:.6s;-webkit-animation-duration:3.8s;animation-duration:3.8s}.freecell_deck_solved .freecell_card.freecell_King{-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s}.freecell_deck_solved .freecell_spot{-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-duration:4s;animation-duration:4s;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-name:animation-spot;animation-name:animation-spot;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}.freecell-fireworks{background-color:transparent;height:100%;width:100%}.app-dark-theme .freecell_deck{background:teal url(bg-desk-dark.be1fcb326a55804c8741.jpg) repeat}.app-dark-theme .freecell_spot.freecell_selection.freecell_cell{outline-color:#aaecec}"],encapsulation:2}),Ht),Kt=o("g/AF"),qt=((Wt=function(){function e(){c(this,e),this.userGesture=new S.n}return s(e,[{key:"handle",value:function(e){this.userGesture.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||Wt)},Wt.\u0275dir=S.Ib({type:Wt,selectors:[["","appGesture",""]],hostBindings:function(e,t){1&e&&S.ac("keydown",function(e){return t.handle(e)},!1,S.qc)("touchstart",function(e){return t.handle(e)},!1,S.qc)("mousedown",function(e){return t.handle(e)},!1,S.qc)("click",function(e){return t.handle(e)},!1,S.qc)},outputs:{userGesture:"userGesture"}}),Wt),Qt=["cards"];function Jt(e,t){if(1&e){var n=S.Ub();S.Tb(0,"div",5),S.ac("userGesture",function(e){return S.rc(n),S.ec().activateOnGesture(e)}),S.Sb()}}function Zt(e,t){if(1&e){var n=S.Ub();S.Tb(0,"div",6,7),S.ac("mousedown",function(e){S.rc(n);var i=t.index;return S.ec().onMouseDown(e,i)}),S.Sb()}if(2&e){var i=t.$implicit,a=S.ec();S.kc("matRippleDisabled",!a.settings.state.enableRipples)("ngClass",i.ngClass)("ngStyle",i.ngStyle)}}var Vt=[[["","appFreecellBackground",""]],[["","appFreecellForeground",""]]],$t=["[appFreecellBackground]","[appFreecellForeground]"],en=["transition_deal","transition_norm","transition_fast"];function tn(e,t){var n,a=i(en);try{for(a.s();!(n=a.n()).done;){var r=n.value;e[r]=r===t}}catch(c){a.e(c)}finally{a.f()}}function nn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"px";return"translate(".concat(e).concat(n,", ").concat(t).concat(n,")")}var an,rn=((an=function(e){u(a,e);var n=f(a);function a(e,t,i,r,o){var s;return c(this,a),(s=n.call(this)).settings=e,s.soundService=t,s._renderer=i,s._playService=r,s._gameService=o,s._dragListener=new It.a,s._emptySpotCount=0,s.lineChange=new S.n,s.cards=[],s.spotSelection=-1,s}return s(a,[{key:"layout",get:function(){return this._layout},set:function(e){this._layout!==e&&(this._layout=e,this.layout&&(this.cards=this.createCards(),this.onDeal()))}},{key:"isTouchDisabled",get:function(){return!(this.settings.state.inputMode&A.b.Touch)}},{key:"isMouseDisabled",get:function(){return!(this.settings.state.inputMode&A.b.Mouse)}},{key:"ngOnInit",value:function(){var e=this;this._addSubscription(this._gameService.subscribe(function(t){var n;e.layout&&(e._gameService.isFirstChange||t.deal!==(null===(n=e._gameService.previousState)||void 0===n?void 0:n.deal)?e.onDeal():e.onCardMove())})),this._addSubscription(this._dragListener.dragChange.subscribe(function(t){switch(t){case"DragStart":e._onDragStart();break;case"DragMove":e._onDragMove();break;case"DragStop":e._onDragStop()}}))}},{key:"trackByIndex",value:function(e){return e}},{key:"getTransforms",value:function(e){for(var t=100,n=[],i=this.cardList.toArray(),a=i[e[0]].nativeElement.parentElement.getBoundingClientRect(),r=i[e[0]].nativeElement.getBoundingClientRect(),c=r.left-a.left,o=r.top-a.top,s=r.height/3,l=e.length;l-- >0;){var u=Math.round((c+0*l)*t)/t,d=Math.round((o+s*l)*t)/t;n[l]={x:u,y:d}}return n}},{key:"onTouch",value:function(e){var t=e.type,n=e.event;if(!this.isTouchDisabled)switch(t){case"DragStart":if(n.targetTouches.length>0){var i=n.targetTouches[0],a=this.getCardIndex(i.clientX,i.clientY);if(a>=0){var r=this._gameService.game,c=r.asTablaeu(a),o=this.getTransforms(c);this._dragListener.touchStart(n,{game:r,tableau:c,transforms:o})}}break;case"DragMove":this._dragListener.isTouchDragging&&this._dragListener.touchMove(n);break;case"DragStop":this._dragListener.isTouchDragging&&this._dragListener.stop(n)}}},{key:"onMouseDown",value:function(e,t){if(!this.isMouseDisabled&&(this._playService.stop(),0===e.button)){var n=this._gameService.game,i=n.asTablaeu(t),a=this.getTransforms(i);this._dragListener.mouseStart(e,this._renderer,{game:n,tableau:i,transforms:a})}}},{key:"_onDragStart",value:function(){this._playService.stop();for(var e=this._dragListener.data,t=e.tableau,n=e.transforms,i=t.length;i-- >0;){var a=this.cards[t[i]];a.ngStyle.zIndex+=Ae.a,a.ngStyle.transform=nn(n[i].x,n[i].y),a.ngClass.grabbing=!0,tn(a.ngClass)}}},{key:"_onDragMove",value:function(){for(var e=this._dragListener.data,t=e.tableau,n=e.transforms,i=this._dragListener.pageDeltaX,a=this._dragListener.pageDeltaY,r=t.length;r-- >0;){var c=this.cards[t[r]];c.ngClass.dragging=!0,c.ngStyle.transform=nn(n[r].x+i,n[r].y+a)}(Math.abs(i)>4||Math.abs(a)>4)&&(this._dragListener.data.dragged=!0)}},{key:"_onDragStop",value:function(){var e,t=this._dragListener.data,n=t.game,a=t.tableau,r=t.dragged,c=i(a);try{for(c.s();!(e=c.n()).done;){var o=e.value,s=this.cards[o];s.ngStyle.zIndex-=Ae.a,s.ngStyle.transform=this.getCardTransform(n,n.toLine(o),o),delete s.ngClass.grabbing,delete s.ngClass.dragging,tn(s.ngClass,"transition_fast")}}catch(f){c.e(f)}finally{c.f()}if(r){var l=this.getDestination(n,a);if(l>=0){var u=n.toLine(a[0]);u!==l&&this.lineChange.emit({source:u,destination:l,tableau:a})}}else{var d=n.toLine(a[0]);this.lineChange.emit({source:d,destination:this.spotSelection>=0?this.spotSelection:void 0,tableau:a})}}},{key:"onDeal",value:function(){this.spotSelection=-1;var e=this._gameService.game;this._emptySpotCount=Math.max(e.CELL_NUM,e.countEmpty());for(var t=e.DESK_SIZE;t-- >0;){var n,a=i(e.getLine(t));try{for(a.s();!(n=a.n()).done;){var r=n.value;this.bringToFront(r)}}catch(c){a.e(c)}finally{a.f()}this.updateLine(e,t,"transition_deal")}this.updateZIndex(),this.soundService.play("deal")}},{key:"updateZIndex",value:function(){if(this.cards.length>1)for(var e=1,t=this.cards[0].list.head;t;t=t.next)this.cards[t.card].ngStyle.zIndex=e++}},{key:"bringToFront",value:function(e){var t=this.cards[e],n=t.list;n&&n.tail&&n.tail!==t&&Object(Rt.a)(n.tail,t)}},{key:"onCardMove",value:function(){this.spotSelection=-1;var e=this._gameService.state,t=this._gameService.previousState||e,n=t.path.substring(0,2*t.mark),a=e.path.substring(0,2*e.mark),r=new Set,c=Object(Kt.a)(n,a),o=[];t.mark>c&&(Object(Me.c)(t,function(e,t,n,i){i>=c&&(r.add(t),r.add(n),o.push(e.getCard(n,-1)))}),o.reverse()),e.mark>c&&Object(Me.c)(e,function(e,t,n,i){i>=c&&(r.add(t),r.add(n),o.push(e.getCard(n,-1)))});for(var s=0,l=o;s<l.length;s++){var u=l[s];this.bringToFront(u)}this.updateZIndex();var d,f=r.size>2?"transition_fast":"transition_norm",h=this._gameService.game,b=i(r.keys());try{for(b.s();!(d=b.n()).done;){var g=d.value;this.updateLine(h,g,f)}}catch(v){b.e(v)}finally{b.f()}"transition_fast"===f?this.soundService.play("shuffle"):"transition_norm"===f&&this.soundService.play("card");var p=h.countEmpty();p>this._emptySpotCount&&(this._emptySpotCount=p,this.soundService.play("victory"))}},{key:"createCards",value:function(){var e=[],n=this.layout;if(n){for(var i=Object(L.m)(n.itemWidth,n.width),a=Object(L.m)(n.itemHeight,n.height),r=0;r<Ae.a;r++){var c,o={card:r,ngStyle:{width:i,height:a,zIndex:r},ngClass:(c={freecell_card:!0},t(c,"freecell_"+Object(Ae.i)(r),!0),t(c,"freecell_"+Object(Ae.g)(r),!0),c)};e.push(o)}Object(Rt.b).apply(void 0,e)}return e}},{key:"getCardTransform",value:function(e,t,n){var i=this.layout.getCardPosition(t,e.toSpot(n),e.getLine(t).length);return"translate(".concat(Object(L.m)(i.x,this.layout.itemWidth),", ").concat(Object(L.m)(i.y,this.layout.itemHeight),")")}},{key:"updateLine",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"transition_norm",r=i(e.getLine(t));try{for(r.s();!(n=r.n()).done;){var c=n.value,o=this.cards[c];o.ngStyle.transform=this.getCardTransform(e,t,c),tn(o.ngClass,a)}}catch(s){r.e(s)}finally{r.f()}}},{key:"getDestination",value:function(e,t){var n,i=0,a=-1;if(t.length>0&&this.cardList){for(var r=this.cardList.toArray(),c=r[t[0]].nativeElement.getBoundingClientRect(),o=r.length;o-- >0;)if(t.indexOf(o)<0){var s=r[o].nativeElement.getBoundingClientRect(),l=Object(L.j)(c,s);l>i&&(i=l,a=e.toLine(o))}if(null===(n=this.playground)||void 0===n?void 0:n.spotList)for(var u=this.playground.spotList.toArray(),d=u.length;d-- >0;){var f=u[d].nativeElement.getBoundingClientRect(),h=Object(L.j)(c,f);h>i&&(i=h,a=d)}}return a}},{key:"getCardIndex",value:function(e,t){var n=-1;if(this.cardList)for(var i=this.cardList.toArray(),a=i.length;a-- >0;){var r=i[a].nativeElement.getBoundingClientRect();r.left<=e&&e<=r.right&&r.top<=t&&t<=r.bottom&&(n<0||this.cards[n].ngStyle.zIndex<this.cards[a].ngStyle.zIndex)&&(n=a)}return n}},{key:"activateOnGesture",value:function(e){e.isTrusted&&this.soundService.activate()}}]),a}(E)).\u0275fac=function(e){return new(e||an)(S.Nb(A.a),S.Nb(N),S.Nb(S.F),S.Nb(_.a),S.Nb(O.a))},an.\u0275cmp=S.Hb({type:an,selectors:[["app-freecell-deck"]],viewQuery:function(e,t){var n;1&e&&(S.Fc(Gt,1),S.Fc(Qt,1)),2&e&&(S.oc(n=S.bc())&&(t.playground=n.first),S.oc(n=S.bc())&&(t.cardList=n))},inputs:{layout:"layout"},outputs:{lineChange:"lineChange"},features:[S.yb],ngContentSelectors:$t,decls:7,vars:5,consts:[["appGesture","",3,"userGesture",4,"ngIf"],[3,"layout","selection","selectionChange","touchChange"],["appFreecellBackground",""],["appFreecellForeground",""],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],["appGesture","",3,"userGesture"],["matRipple","",3,"matRippleDisabled","ngClass","ngStyle","mousedown"],["cards",""]],template:function(e,t){1&e&&(S.jc(Vt),S.yc(0,Jt,1,0,"div",0),S.Tb(1,"app-freecell-playground",1),S.ac("selectionChange",function(e){return t.spotSelection=e})("touchChange",function(e){return t.onTouch(e)}),S.Rb(2,2),S.ic(3),S.Qb(),S.Rb(4,3),S.yc(5,Zt,2,3,"div",4),S.ic(6,1),S.Qb(),S.Sb()),2&e&&(S.kc("ngIf",t.soundService.enabled&&!t.soundService.activated),S.Bb(1),S.kc("layout",t.layout)("selection",t.spotSelection),S.Bb(4),S.kc("ngForOf",t.cards)("ngForTrackBy",t.trackByIndex))},directives:[d.l,Gt,d.k,qt,Be.l,d.j,d.m],styles:[".freecell_card.transition_deal[_ngcontent-%COMP%]{transition:transform 1.5s cubic-bezier(.6,-.5,.25,1.5)}.freecell_card.transition_norm[_ngcontent-%COMP%]{transition:transform .5s ease-out}.freecell_card.transition_fast[_ngcontent-%COMP%]{transition:transform .25s linear}.freecell_card.grabbing[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing;transition:transform .15s ease-in-out}.freecell_card.grabbing.dragging[_ngcontent-%COMP%]{opacity:.75;transition:none}"]}),an);function cn(e,t){if(1&e){var n=S.Ub();S.Tb(0,"app-freecell-deck",4),S.ac("lineChange",function(e){return S.rc(n),S.ec().onLineChange(e)}),S.Rb(1,5),S.ic(2),S.Qb(),S.Sb()}if(2&e){var i=S.ec();S.kc("layout",i.layout)}}var on,sn,ln,un=["*"],dn=((on=function(e){u(n,e);var t=f(n);function n(e,i,a,r){var o;return c(this,n),(o=t.call(this)).settings=e,o._gameService=i,o._playService=a,o._addSubscription(r.subscribe(function(e){return o.layout=new Bt(r.basis)})),o}return s(n,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){l(b(n.prototype),"ngOnDestroy",this).call(this)}},{key:"onLineChange",value:function(e){var t=this;this._playService.stop();var n=this._gameService.game,i="";(i=void 0===e.destination?n.solveFor(e.tableau,e.source):n.getBestPath(e.tableau,e.destination))&&(this._gameService.move(i.charCodeAt(0),i.charCodeAt(1)),(i=i.substring(2))&&this._playService.play(function(){return t._gameService.move(i.charCodeAt(0),i.charCodeAt(1)),(i=i.substring(2)).length>0}))}}]),n}(E)).\u0275fac=function(e){return new(e||on)(S.Nb(A.a),S.Nb(O.a),S.Nb(_.a),S.Nb(k.a))},on.\u0275cmp=S.Hb({type:on,selectors:[["app-freecell-main"]],features:[S.yb],ngContentSelectors:un,decls:5,vars:3,consts:[[1,"freecell-content"],[1,"freecell-content-outer"],[1,"freecell-content-inner"],[3,"layout","lineChange",4,"ngIf"],[3,"layout","lineChange"],["appFreecellBackground",""]],template:function(e,t){1&e&&(S.jc(),S.Ob(0,"app-freecell-router"),S.Tb(1,"div",0),S.Tb(2,"div",1),S.Tb(3,"div",2),S.yc(4,cn,3,1,"app-freecell-deck",3),S.Sb(),S.Sb(),S.Sb()),2&e&&(S.Bb(1),S.vc("padding-top",100*t.settings.state.aspectRatio,"%"),S.Bb(3),S.kc("ngIf",t.layout))},directives:[Nt,d.l,rn],styles:[".freecell-content[_ngcontent-%COMP%]{overflow:hidden;position:relative;width:100%}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]{bottom:0;left:0;padding:1px;position:absolute;right:0;top:0}.freecell-content[_ngcontent-%COMP%]   .freecell-content-outer[_ngcontent-%COMP%]   .freecell-content-inner[_ngcontent-%COMP%]{height:100%;width:100%}"]}),on),fn=[{path:"",component:(sn=function(e){u(n,e);var t=f(n);function n(e,i,a,r){var o;c(this,n),(o=t.call(this)).settings=e,o.info="".concat(R.a," ver.").concat(R.b),e.subscribe(function(t){var n,i=null===(n=e.previousState)||void 0===n?void 0:n.enableDarkMode,a=t.enableDarkMode;i!==a&&(a?r.getContainerElement().classList.add("app-dark-theme"):r.getContainerElement().classList.remove("app-dark-theme"))});var s=a.snapshot.queryParams;return(void 0===s.deal||isNaN(parseInt(s.deal,10)))&&i.navigate(["."],{relativeTo:a,queryParams:{deal:Date.now()%2147483648}}),o}return s(n,[{key:"ngOnInit",value:function(){}}]),n}(E),sn.\u0275fac=function(e){return new(e||sn)(S.Nb(A.a),S.Nb(g.b),S.Nb(g.a),S.Nb(I.e))},sn.\u0275cmp=S.Hb({type:sn,selectors:[["app-freecell-demo"]],features:[S.yb],decls:4,vars:3,consts:[[1,"version-info"]],template:function(e,t){1&e&&(S.Tb(0,"app-freecell-view"),S.Tb(1,"app-freecell-main"),S.Tb(2,"div",0),S.Ac(3),S.Sb(),S.Sb(),S.Sb()),2&e&&(S.Fb("app-dark-theme",t.settings.state.enableDarkMode),S.Bb(3),S.Bc(t.info))},directives:[Lt,dn],styles:[".version-info[_ngcontent-%COMP%]{bottom:0;font-size:small;position:absolute;right:0}"]}),sn)}],hn=((ln=function e(){c(this,e)}).\u0275fac=function(e){return new(e||ln)},ln.\u0275mod=S.Lb({type:ln}),ln.\u0275inj=S.Kb({providers:[m.a,_.a,k.a,C,N,O.a,A.a],imports:[[g.c.forChild(fn),d.c,h.d,p.a,v.a],g.c]}),ln)},RDYl:function(e){e.exports=JSON.parse('{"a":"freecell-demo","b":"0.2.3"}')},WxrP:function(e,a,r){"use strict";r.d(a,"b",function(){return k}),r.d(a,"c",function(){return y}),r.d(a,"a",function(){return S});var o=r("g/AF"),d=r("Bd3B"),h=r("lPNG"),g=r("2MXh"),p=function(e){u(n,e);var t=f(n);function n(e,i,a){var r;c(this,n),(r=t.call(this,e,i,a)).desk=[];for(var o=0;o<r.DESK_SIZE;o++)r.desk.push([]);return r}return s(n,[{key:"toArray",value:function(){return Object(d.a)(this.desk)}},{key:"clear",value:function(){for(var e=this.desk.length;e-- >0;)this.desk[e].length=0}},{key:"addCard",value:function(e,t){this.desk[e].push(t)}},{key:"getCard",value:function(e,t){var n=this.desk[e];return t<0&&(t=n.length+t),t>=0&&t<n.length?n[t]:-1}},{key:"getLine",value:function(e){return this.desk[e]}},{key:"getTableauAt",value:function(e){var t=[],n=this.desk[e],i=n.length;if(i>0)for(t.push(n[i-1]);--i>0&&Object(h.e)(n[i-1],n[i])&&Object(h.h)(n[i-1])>0;)t.push(n[i-1]);return t.reverse(),t}},{key:"countEmptyCells",value:function(){for(var e=0,t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmptyPiles",value:function(){for(var e=0,t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}},{key:"isSolved",value:function(){for(var e=this.BASE_START;e<this.BASE_END;e++)if(this.desk[e].length<h.b)return!1;return!0}},{key:"countEmpty",value:function(){return this.countEmptyCells()+this.countEmptyPiles()}},{key:"getEmptyCell",value:function(){for(var e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getEmptyPile",value:function(){for(var e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getBase",value:function(e){for(var t=Object(h.j)(e),n=Object(h.h)(e),i=0;i<this.BASE_NUM;i++)if(Object(h.j)(i)===t&&this.desk[i+this.BASE_START].length===n)return i+this.BASE_START;return-1}},{key:"deal",value:function(e){var t=Object(h.d)(e);this.clear();for(var n=0;n<t.length;n++)this.addCard(this.PILE_START+n%this.PILE_NUM,t[n]);return t}},{key:"isMoveValid",value:function(e,t){if(e===t)return!1;if(e<0||e>=this.DESK_SIZE)return!1;if(t<0||t>=this.DESK_SIZE)return!1;var n=this.desk[e].length;if(n<=0)return!1;var i=this.desk[t].length;if(this.isCell(t))return 0===i;var a=this.desk[e][n-1];if(this.isPile(t))return 0===i||Object(h.e)(this.desk[t][i-1],a);if(this.isBase(t)){var r=Object(h.j)(a),c=Object(h.h)(a);return Object(h.j)(t-this.BASE_START)===r&&i===c}return!1}},{key:"moveCard",value:function(e,t){this.addCard(t,this.desk[e].pop())}},{key:"getMoves",value:function(){for(var e=[],t=this.DESK_SIZE;t-- >0;)for(var n=t;n-- >0;)this.isMoveValid(t,n)&&e.push({giver:t,taker:n}),this.isMoveValid(n,t)&&e.push({giver:n,taker:t});return e}}]),n}(g.a),v=function e(t){c(this,e),this.success=t},m=function(e){u(a,e);var t=f(a);function a(e,n,i,r){var o;return c(this,a),(o=t.call(this,e,n,i)).desk=r,o.cardToWatch=-1,o.searchTime=500,o.done=new Set,o.buffers=[[],[]],o.iteration=0,o.path="",o.onMove=function(e,t,n){},o}return s(a,[{key:"doneSize",get:function(){return this.done.size}},{key:"stop",value:function(e){throw new v(e)}},{key:"getAllPaths",value:function(){return this.buffers[this.iteration%2]}},{key:"getPath",value:function(){var e=this.buffers[this.iteration%2];return e[e.length-1]}},{key:"clear",value:function(){this.done.clear(),this.buffers[0].length=0,this.buffers[1].length=0,this.iteration=0,this.path=""}},{key:"prepare",value:function(){this.clear(),this.done.add(this.toKey()),this.buffers[0][0]=""}},{key:"nextIteration",value:function(){var e=this.buffers[this.iteration%2];if(this.iteration++,e.length<=0)return!1;var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.skipForward(a),this.findMoves(),this.skipBackward()}}catch(r){n.e(r)}finally{n.f()}return e.length=0,this.buffers[this.iteration%2].length>0}},{key:"solve",value:function(){this.prepare();var e=Date.now();try{for(;this.nextIteration();)Date.now()-e>this.searchTime&&this.stop(!1)}catch(t){if(t instanceof v)return t.success;throw t}return!1}},{key:"skipForward",value:function(e){for(var t=0;t<e.length;t+=2)this.desk[e.charCodeAt(t+1)].push(this.desk[e.charCodeAt(t)].pop());this.path=e}},{key:"skipBackward",value:function(){for(var e=this.path,t=e.length;t>0;t-=2)this.desk[e.charCodeAt(t-2)].push(this.desk[e.charCodeAt(t-1)].pop())}},{key:"move",value:function(e,t,n){this.desk[n].push(this.desk[t].pop());var i=this.toKey();this.done.has(i)||(this.done.add(i),this.buffers[this.iteration%2].push(this.path+String.fromCharCode(t,n)),!(this.cardToWatch<0||this.cardToWatch===e)||this.cardFilter&&!this.cardFilter[e]||this.destinationFilter&&!this.destinationFilter[n]||this.onMove(e,t,n)),this.desk[t].push(this.desk[n].pop())}},{key:"findMoves",value:function(){for(var e=this.cardFilter,t=this.getEmptyCell(),n=this.getEmptyPile(),i=0;i<this.DESK_SIZE;i++){var a=this.desk[i];if(a.length>0){var r=a[a.length-1];if(!e||e[r]){if(!this.isBase(i)){var c=this.getBase(r);c>=0&&this.move(r,i,c)}for(var o=this.PILE_START;o<this.PILE_END;o++)if(o!==i){var s=this.desk[o];s.length>0&&Object(h.e)(s[s.length-1],r)&&this.move(r,i,o)}t>=0&&(this.isCell(i)||this.move(r,i,t)),n>=0&&(!this.isPile(i)||a.length>1)&&this.move(r,i,n)}}}}},{key:"baseToString",value:function(){for(var e="",t=this.BASE_START;t<this.BASE_END;t++)e+=String.fromCharCode(this.desk[t].length);return e}},{key:"pileToString",value:function(){for(var e=[],t=this.PILE_START;t<this.PILE_END;t++)e.push(String.fromCharCode.apply(String,n(this.desk[t])));return e.sort(),e.join(String.fromCharCode(h.a))}},{key:"toKey",value:function(){return this.baseToString()+this.pileToString()}},{key:"getEmptyCell",value:function(){for(var e=this.CELL_START;e<this.CELL_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"getEmptyPile",value:function(){for(var e=this.PILE_START;e<this.PILE_END;e++)if(0===this.desk[e].length)return e;return-1}},{key:"countEmptyCells",value:function(){for(var e=0,t=this.CELL_START;t<this.CELL_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmptyPiles",value:function(){for(var e=0,t=this.PILE_START;t<this.PILE_END;t++)0===this.desk[t].length&&e++;return e}},{key:"countEmpty",value:function(){return this.countEmptyCells()+this.countEmptyPiles()}},{key:"countCardsInBases",value:function(){for(var e=0,t=this.BASE_START;t<this.BASE_END;t++)e+=this.desk[t].length;return e}},{key:"getBase",value:function(e){for(var t=Object(h.j)(e),n=Object(h.h)(e),i=this.BASE_START+t;i<this.BASE_END;i+=h.c)if(this.desk[i].length===n)return i;return-1}}]),a}(g.a),_=function(e){u(i,e);var n=f(i);function i(e,t,a){var r;return c(this,i),(r=n.call(this,e,t,a)).lineMap=[],r.spotMap=[],r}return s(i,[{key:"toLine",value:function(e){return this.lineMap[e]}},{key:"toSpot",value:function(e){return this.spotMap[e]}},{key:"clear",value:function(){l(b(i.prototype),"clear",this).call(this),this.lineMap.length=0,this.spotMap.length=0}},{key:"addCard",value:function(e,t){l(b(i.prototype),"addCard",this).call(this,e,t),this.lineMap[t]=e,this.spotMap[t]=this.getLine(e).length-1}},{key:"asTablaeu",value:function(e){var t=this.getTableauAt(this.lineMap[e]),n=t.indexOf(e);return n<0?t=[e]:n>0&&t.splice(0,n),t}},{key:"getBestPath",value:function(e,n){if(e.length<=0)return"";var i=e[e.length-1],a=this.lineMap[i];if(this.getCard(a,-1)!==i)return"";if(1===e.length)return this.isMoveValid(a,n)?String.fromCharCode(a,n):"";var r=new m(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray());if(r.cardToWatch=i,r.cardFilter=e.reduce(function(e,t){return e[t]=!0,e},{}),r.destinationFilter=t({},n,!0),this.isPile(n)&&0===this.getLine(n).length)for(var c=this.PILE_START;c<this.PILE_END;c++)0===this.getLine(c).length&&(r.destinationFilter[c]=!0);if(r.onMove=function(t,n,i){Object(d.b)(r.desk[i],e)&&r.stop(!0)},r.solve()){var o=r.getPath(),s=o.charCodeAt(o.length-1);return s!==n&&(o=function(e,t,n){for(var i=[],a=0;a<e.length;a++){var r=e.charCodeAt(a);r===n?r=t:r===t&&(r=n),i.push(r)}return String.fromCharCode.apply(String,i)}(o,n,s)),o}return""}},{key:"solveFor",value:function(e,n){if(this.getLine(n).length<=0)return"";if(e.length<=0)return"";var i=e[e.length-1];if(this.getCard(n,-1)!==i)return"";var a=new m(this.PILE_NUM,this.CELL_NUM,this.BASE_NUM,this.toArray()),r="",c=0;return a.cardToWatch=this.getCard(n,-1),a.cardFilter=t({},a.cardToWatch,!0),a.onMove=function(){r||(r=a.getPath(),c=1)},a.findMoves(),r?(this.isBase(r.charCodeAt(1))||e.length>1&&(a.cardFilter=e.reduce(function(e,t){return e[t]=!0,e},{}),a.onMove=function(t,i,o){if(o!==n){var s=Object(d.e)(a.desk[o],e);Object(d.e)(a.desk[n],e,0,s)+s===e.length&&c<s&&(r=a.getPath(),(c=s)===e.length&&a.stop(!0))}},a.solve()),r):r}}]),i}(p);function k(e,t,n){var i=new _(e.pile,e.cell,e.base);i.deal(e.deal);for(var a=0;a+1<e.path.length;a+=2){var r=Object(o.c)(e.path,a),c=Object(o.c)(e.path,a+1);if(!i.isMoveValid(r,c)){n&&n(i,r,c,a/2);break}i.moveCard(r,c),t&&t(i,r,c,a/2)}return i}function y(e,t,n){return k(Object.assign(Object.assign({},e),{path:e.path.substring(0,2*e.mark)}),t,n)}function S(e){var t="";return k(e,function(e,n,i,a){t=Object(o.b)(t,t.length/2,n,i)},function(t,n,i,a){console.warn("Invalid subpath:",e.path.substring(a+a))}),t}},afNV:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){u(n,e);var t=f(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return c(this,n),(e=t.call(this,i))._subscriptions=a,e}return s(n,[{key:"_addSubscription",value:function(e){this._subscriptions.push(e)}},{key:"ngOnDestroy",value:function(){this._subscriptions.forEach(function(e){return e.unsubscribe()})}}]),n}(n("SeXe").a)},dkWW:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fKvJ"),a=n("fXoL"),r=function(){var e=function(e){u(n,e);var t=f(n);function n(){return c(this,n),t.call(this,200)}return n}(i.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e}()},"g/AF":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return o});var i=n("voYn"),a=n("dPmG");function r(e,t){return Math.floor(Object(i.a)(e,t).length/2)}function c(e,t){return Object(a.e)(e.charCodeAt(t))}function o(e,t,n,i){return t>0&&i===function(e,t){return c(e,t+t-2)}(e,t)&&n===function(e,t){return c(e,t+t-1)}(e,t)?e.substring(0,t+t-2):e.substring(0,t+t)+function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.c)(t)}(n,i)}},jZWl:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return d});var i=n("SeXe"),a=n("2MXh"),r=n("fXoL"),o={base:4,cell:4,pile:8},d=function(){var e=function(e){u(n,e);var t=f(n);function n(){var e;return c(this,n),(e=t.call(this,o))._basis=new a.a(o.pile,o.cell,o.base),e}return s(n,[{key:"basis",get:function(){return this._basis}},{key:"_validate",value:function(e){return e.base>0&&e.cell>0&&e.pile>0&&(e=l(b(n.prototype),"_validate",this).call(this,e))?(this._basis=new a.a(e.pile,e.cell,e.base),e):null}},{key:"set",value:function(e){return this._set(e)}}]),n}(i.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Jb({token:e,factory:e.\u0275fac}),e}()},lPNG:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"h",function(){return u}),n.d(t,"j",function(){return d}),n.d(t,"f",function(){return f}),n.d(t,"i",function(){return h}),n.d(t,"g",function(){return b}),n.d(t,"d",function(){return g}),n.d(t,"e",function(){return p}),Array.from("SDCH");var i=["\u2660","\u2666","\u2663","\u2665"],a=["spades","diamonds","clubs","hearts"],r=(Array.from("A23456789TJQK"),["A","2","3","4","5","6","7","8","9","10","J","Q","K"]),c=["Ace","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Jack","Queen","King"],o="SDCH".length,s="A23456789TJQK".length,l=o*s;function u(e){return Math.floor(e/o)}function d(e){return e%o}function f(e){return r[u(e)]+i[d(e)]}function h(e){return a[d(e)]}function b(e){return c[u(e)]}function g(e){for(var t=[],n=0;n<l;n++)t[n]=n;if(e>=0)for(var i=0;i<l;i++){var a=(e=(1103515245*e+12345)%2147483648)%l;if(i!==a){var r=t[i];t[i]=t[a],t[a]=r}}return t}function p(e,t){return u(e)===u(t)+1&&d(e)%2!=d(t)%2}},tt9D:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return g}),n.d(t,"a",function(){return v});var i=n("SeXe"),a=n("fXoL"),r=["sidenav","sandwich"],o=function(e){return e[e.Mouse=1]="Mouse",e[e.Touch=2]="Touch",e[e.Keyboard=4]="Keyboard",e[e.All=7]="All",e}({}),d={view:r[0],aspectRatio:.56,sandwichOrder:0,sidenavModeSide:!0,sidenavClosed:!0,deckUseSvg:!1,enableSound:!1,enableRipples:!0,enableWinAnimation:!0,enableDarkMode:!1,assistLevel:1e6,inputMode:o.All},h={aspectRatio:.4,assistLevel:2e4,sandwichOrder:0,inputMode:1},g={aspectRatio:.7,assistLevel:2e6,sandwichOrder:5,inputMode:o.All},p="[FreecellSettingsState]",v=function(){var e=function(e){u(n,e);var t=f(n);function n(){var e;return c(this,n),(e=t.call(this,d)).loadLocal(p,d),e}return s(n,[{key:"restoreDefaults",value:function(){this.set(d)}},{key:"_validate",value:function(e){r.indexOf(e.view)<0&&(e.view=d.view);for(var t=0,i=Object.keys(h);t<i.length;t++){var a=i[t];e[a]=Math.max(h[a],Math.min(g[a],e[a]))}return l(b(n.prototype),"_validate",this).call(this,e)}},{key:"set",value:function(e){var t=this._set(e);return t&&this.saveLocal(p),t}}]),n}(i.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e}()}}])}();
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{C9RU:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),a=n("tk/3"),s=n("3Pt+"),o=n("tyNb"),r=n("hctd"),c=n("pKmL"),l=n("fXoL"),u=n("Bd3B"),m=n("fKvJ"),d=n("voYn"),p=n("bgvp"),h=n("dPmG");function g(t,e){return{name:"addition",operator:{name:"plus",notation:"+"},first:{name:"augend",value:t},second:{name:"addend",value:e},result:{name:"sum",value:t+e}}}function b(t){const e=Object(h.d)(0,t+1),n=Object(h.d)(0,t+1);return e+n>t?e>n?g(e-n,n):g(e,n-e):g(e,n)}function f(t,e){return{name:"subtraction",operator:{name:"minus",notation:"-"},first:{name:"minuend",value:t},second:{name:"subtrahend",value:e},result:{name:"difference",value:t-e}}}function x(t){const e=Object(h.d)(0,t+1),n=Object(h.d)(0,t+1);return e>n?f(e,n):f(n,e)}function v(t,e){const n=Object(h.d)(1,t+1),i=Object(h.d)(1,Math.min(t,Math.floor(e/n))+1);return{name:"division",operator:{name:"divide",notation:":"},first:{name:"dividend",value:a=i*n},second:{name:"divisor",value:s=Math.random()<.5?i:n},result:{name:"quotient",value:a/s}};var a,s}function C(t,e){return{name:"multiplication",operator:{name:"multiply",notation:"\xb7"},first:{name:"multiplier",value:t},second:{name:"multiplicand",value:e},result:{name:"product",value:t*e}}}function P(t,e){const n=Object(h.d)(1,t+1),i=Object(h.d)(1,Math.min(t,Math.floor(e/n))+1);return Math.random()<.5?C(i,n):C(n,i)}function T(t,e){return"first"===e?`? ${t.operator.notation} ${t.second.value} = ${t.result.value}`:"second"===e?`${t.first.value} ${t.operator.notation} ? = ${t.result.value}`:"result"===e?`${t.first.value} ${t.operator.notation} ${t.second.value} = ?`:`${t.first.value} ${t.operator.notation} ${t.second.value} = ${t.result.value}`}var w=n("0IaG"),y=n("bTqV");const O=[[["","appContentSvg",""]],"*"],M=["[appContentSvg]","*"];let k=(()=>{class t{constructor(){this.rowNum=41,this.colNum=34}get width(){return 24*this.colNum}get height(){return 24*this.rowNum}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-squared-paper"]],inputs:{rowNum:"rowNum",colNum:"colNum"},ngContentSelectors:M,decls:11,vars:6,consts:[[1,"squared-paper"],[1,"squared-paper-bg"],["id","patternSquaredPaper","x","0","y","0","width","24","height","24","patternUnits","userSpaceOnUse"],["fill","none","stroke","#00f","stroke-width",".25","d","M0 0h24v24H0z"],["width","100%","height","100%","fill","url(#patternSquaredPaper)"],["transform","scale(24)"],[1,"squared-paper-fg"]],template:function(t,e){1&t&&(l.lc(O),l.Ub(0,"div",0),l.Ub(1,"div",1),l.fc(),l.Ub(2,"svg"),l.Ub(3,"defs"),l.Ub(4,"pattern",2),l.Pb(5,"path",3),l.Tb(),l.Tb(),l.Pb(6,"rect",4),l.Ub(7,"g",5),l.kc(8),l.Tb(),l.Tb(),l.Tb(),l.ec(),l.Ub(9,"div",6),l.kc(10,1),l.Tb(),l.Tb()),2&t&&(l.yc("width",e.width,"px")("height",e.height,"px"),l.Bb(2),l.Cb("width",e.width)("height",e.height))},styles:[".squared-paper[_ngcontent-%COMP%]{position:relative;background-color:#f5f5f5;font-family:Fira Mono,monospace;font-weight:500;font-size:20px;line-height:24px}.squared-paper-bg[_ngcontent-%COMP%]{width:100%;height:100%}.squared-paper-fg[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0}.squared-paper-col-3[_ngcontent-%COMP%], .squared-paper-col-12[_ngcontent-%COMP%], .squared-paper-col-15[_ngcontent-%COMP%], .squared-paper-col-30[_ngcontent-%COMP%]{display:inline-block}.squared-paper-col-3[_ngcontent-%COMP%]{width:72px}.squared-paper-col-12[_ngcontent-%COMP%]{width:288px}.squared-paper-col-15[_ngcontent-%COMP%]{width:360px}.squared-paper-col-30[_ngcontent-%COMP%]{width:720px}"]}),t})();function _(t,e){if(1&t){const t=l.Vb();l.fc(),l.ec(),l.Ub(0,"div",14),l.cc("click",(function(){return l.tc(t),l.gc().setAnimation("simple-addition-animate-augend")})),l.Bc(1),l.Tb()}if(2&t){const t=l.gc();l.yc("transform",t.augendTransform),l.Bb(1),l.Cc(t.augendText)}}function I(t,e){if(1&t){const t=l.Vb();l.fc(),l.ec(),l.Ub(0,"div",15),l.cc("click",(function(){return l.tc(t),l.gc().setAnimation("simple-addition-animate-addend")})),l.Bc(1),l.Tb()}if(2&t){const t=l.gc();l.yc("transform",t.addendTransform),l.Bb(1),l.Cc(t.addendText)}}function B(t,e){if(1&t){const t=l.Vb();l.fc(),l.ec(),l.Ub(0,"div",16),l.cc("click",(function(){return l.tc(t),l.gc().setAnimation("simple-addition-animate-sum")})),l.Bc(1),l.Tb()}if(2&t){const t=l.gc();l.yc("transform",t.sumTransform),l.Bb(1),l.Dc("",t.sumText," ")}}function S(t,e){if(1&t){const t=l.Vb();l.fc(),l.ec(),l.Ub(0,"div",17),l.cc("click",(function(){return l.tc(t),l.gc().setAnimation("simple-addition-animate-sum-ones")})),l.Bc(1,"\u0435\u0434\u0438\u043d\u0438\u0446\u044b "),l.Tb()}if(2&t){const t=l.gc();l.yc("transform",t.sumOnesTransform)}}function U(t,e){if(1&t){const t=l.Vb();l.fc(),l.ec(),l.Ub(0,"div",17),l.cc("click",(function(){return l.tc(t),l.gc().setAnimation("simple-addition-animate-sum-tens")})),l.Bc(1,"\u0434\u0435\u0441\u044f\u0442\u043a\u0438 "),l.Tb()}if(2&t){const t=l.gc();l.yc("transform",t.sumTensTransform)}}function $(t,e){return`translate(${24*(2+t)}px, ${24*(2+e)}px)`}function V(t){const e=+t;return isNaN(e)?0:e}let N=(()=>{class t{constructor(){this.augend=0,this.addend=0,this.hiddenTerm=-1,this.rowNum=4,this.animationName="",this.reset()}ngOnChanges(t){this.update()}ngOnInit(){}setAnimation(t){this.animationName=t?t===this.animationName?t+" simple-addition-animation-restart":t:""}reset(){this.augendPath=this.addendPath=this.sumPath=this.sumTensPath=this.sumOnesPath="M0 0z",this.rowNum=4,this.augendTransform=this.addendTransform=this.sumTransform=this.sumOnesTransform=this.sumTensTransform=""}update(){this.reset();const t=V(this.augend),e=V(this.addend),n=t+e,i=t%10,a=e%10,s=n%10,o=Math.floor(t/10),r=Math.floor(e/10),c=Math.floor(n/10);if(t>0){const t=i,e=o;e>0?(this.augendPath=t>0?`M0 0h10v${e}h${t-10}v1h${-t}z`:`M0 0h10v${e}h-10z`,this.augendTransform=$(5,(t>5?0:-.5)+e/2)):(this.augendPath=`M0 0h${t}v1h${-t}v-1z`,this.augendTransform=$(t/2,0))}if(e>0){const t=Math.min(e,10-i),n=(e-t)%10,a=Math.floor((e-t)/10);if(this.addendPath=`M${i} ${o}h${t}v${a+1}`,a>0)this.addendTransform=$(5,o+(a+(t>5?0:1)+(n>5?1:0))/2);else{const e=t+n-10;if(e>=2)this.addendTransform=$(n-e/2,o+.5);else if(t>n)this.addendTransform=$(i+t/2,o);else{const t=Math.max(n/2,n-1);this.addendTransform=$(t,o+1)}}this.addendPath+=n>0?`h${n-10}v1h${-n}v${-a-1}h${10-t}z`:a>0?`h-10v${-a}h${10-t}z`:`h${-t}z`}if(n>0){const t=c;if(this.sumTransform=$(t<10?11:10,t+1),t>0){this.rowNum+=t;const e=(t-2)/2;this.sumTensPath=`M10 0a.5 .5 0 0 1 .5 .5v${e}a.5 .5 0 0 0 .5 .5a.5 .5 0 0 0 -.5 .5v${e}a.5 .5 0 0 1 -.5 .5m1 ${-1-e}h.5v${e+2}m-.1 -.4l.1 .4 .1 -.4`,this.sumTensTransform=$(11.5,Math.floor(e))}const e=s;if(e>0){this.rowNum+=3;const n=(e-2)/2;this.sumOnesPath=`M0 ${t+1}a.5 .5 0 0 0 .5 .5h${n}a.5 .5 0 0 1 .5 .5a.5 .5 0 0 1 .5 -.5h${n}a.5 .5 0 0 0 .5 -.5m${-1-n} 1v.5h${13.5+n-e}v-.5m-.1 .4l.1 -.4 .1 .4`,this.sumOnesTransform=$(n,t+3)}this.sumPath=t>0?e>0?`M0 0h10v${t}h${e-10}v1h${-e}z`:`M0 0h10v${t}h-10z`:`M0 0h${e}v1h${-e}v-1z`}this.augendText=0===this.hiddenTerm?"?":(10*o+i).toString(),this.addendText=1===this.hiddenTerm?"?":(10*r+a).toString(),this.sumText=2===this.hiddenTerm?"?":(10*c+s).toString()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-simple-addition"]],inputs:{augend:"augend",addend:"addend",hiddenTerm:"hiddenTerm"},features:[l.zb],decls:15,vars:12,consts:[["colNum","18",3,"rowNum"],["appContentSvg","",3,"ngClass"],["transform","translate(2 2)"],["stroke-width","0.1"],["id","augendPath","fill","#00f1","stroke","#008e"],["id","addendPath","fill","#f001","stroke","#800e"],["id","sumPath","fill","none","stroke","#080e","stroke-width","0.2","stroke-dasharray","40","stroke-dashoffset","40"],["fill","none","stroke","#444b","stroke-width","0.1"],["id","sumTensPath"],["id","sumOnesPath"],["class","simple-addition-box simple-addition-augend",3,"transform","click",4,"ngIf"],["class","simple-addition-box simple-addition-addend",3,"transform","click",4,"ngIf"],["class","simple-addition-box simple-addition-sum",3,"transform","click",4,"ngIf"],["class","simple-addition-box simple-addition-info",3,"transform","click",4,"ngIf"],[1,"simple-addition-box","simple-addition-augend",3,"click"],[1,"simple-addition-box","simple-addition-addend",3,"click"],[1,"simple-addition-box","simple-addition-sum",3,"click"],[1,"simple-addition-box","simple-addition-info",3,"click"]],template:function(t,e){1&t&&(l.Ub(0,"app-squared-paper",0),l.fc(),l.Ub(1,"svg",1),l.Ub(2,"g",2),l.Ub(3,"g",3),l.Pb(4,"path",4),l.Pb(5,"path",5),l.Tb(),l.Pb(6,"path",6),l.Ub(7,"g",7),l.Pb(8,"path",8),l.Pb(9,"path",9),l.Tb(),l.Tb(),l.Tb(),l.zc(10,_,2,3,"div",10),l.zc(11,I,2,3,"div",11),l.zc(12,B,2,3,"div",12),l.zc(13,S,2,2,"div",13),l.zc(14,U,2,2,"div",13),l.Tb()),2&t&&(l.mc("rowNum",e.rowNum),l.Bb(1),l.mc("ngClass",e.animationName),l.Bb(3),l.Cb("d",e.augendPath),l.Bb(1),l.Cb("d",e.addendPath),l.Bb(1),l.Cb("d",e.sumPath),l.Bb(2),l.Cb("d",e.sumTensPath),l.Bb(1),l.Cb("d",e.sumOnesPath),l.Bb(1),l.mc("ngIf",e.augendTransform),l.Bb(1),l.mc("ngIf",e.addendTransform),l.Bb(1),l.mc("ngIf",e.sumTransform),l.Bb(1),l.mc("ngIf",e.sumOnesTransform),l.Bb(1),l.mc("ngIf",e.sumTensTransform))},directives:[k,i.j,i.l],styles:[".simple-addition-box[_ngcontent-%COMP%]{position:absolute;left:-12px;top:0;background-color:rgba(34,34,34,.13);border-radius:12px;min-width:24px;text-align:center;cursor:pointer;transition:box-shadow .3s ease-in-out}.simple-addition-box[_ngcontent-%COMP%]:hover{box-shadow:2px 2px 4px rgba(0,0,0,.53)}.simple-addition-augend[_ngcontent-%COMP%]{color:rgba(0,0,136,.93);background-color:rgba(0,0,136,.13)}.simple-addition-addend[_ngcontent-%COMP%]{color:rgba(136,0,0,.93);background-color:rgba(136,0,0,.13)}.simple-addition-sum[_ngcontent-%COMP%]{min-width:48px;color:rgba(34,34,34,.93);background-color:rgba(34,34,34,.13);letter-spacing:12px;padding-left:12px;left:-6px;text-align:right}.simple-addition-info[_ngcontent-%COMP%]{padding-left:6px;padding-right:6px}@-webkit-keyframes animationTerm{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@keyframes animationTerm{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@-webkit-keyframes animationTermRestart{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@keyframes animationTermRestart{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}.simple-addition-animate-addend[_ngcontent-%COMP%]   #addendPath[_ngcontent-%COMP%], .simple-addition-animate-augend[_ngcontent-%COMP%]   #augendPath[_ngcontent-%COMP%], .simple-addition-animate-sum[_ngcontent-%COMP%]   #sumPath[_ngcontent-%COMP%], .simple-addition-animate-sum-ones[_ngcontent-%COMP%]   #sumOnesPath[_ngcontent-%COMP%], .simple-addition-animate-sum-tens[_ngcontent-%COMP%]   #sumTensPath[_ngcontent-%COMP%]{-webkit-animation:animationTerm 4s linear 1;animation:animationTerm 4s linear 1}.simple-addition-animate-addend.simple-addition-animation-restart[_ngcontent-%COMP%]   #addendPath[_ngcontent-%COMP%], .simple-addition-animate-augend.simple-addition-animation-restart[_ngcontent-%COMP%]   #augendPath[_ngcontent-%COMP%], .simple-addition-animate-sum-ones.simple-addition-animation-restart[_ngcontent-%COMP%]   #sumOnesPath[_ngcontent-%COMP%], .simple-addition-animate-sum-tens.simple-addition-animation-restart[_ngcontent-%COMP%]   #sumTensPath[_ngcontent-%COMP%], .simple-addition-animate-sum.simple-addition-animation-restart[_ngcontent-%COMP%]   #sumPath[_ngcontent-%COMP%]{-webkit-animation-name:animationTermRestart;animation-name:animationTermRestart}"]}),t})();function z(t,e){if(1&t){const t=l.Vb();l.fc(),l.ec(),l.Ub(0,"div",9),l.cc("click",(function(){return l.tc(t),l.gc().setAnimation("simple-multiplication-animate-multiplier")})),l.Bc(1),l.Tb()}if(2&t){const t=l.gc();l.yc("transform",t.multiplierTransform),l.Bb(1),l.Dc(" ",t.multiplierText,"")}}function q(t,e){if(1&t){const t=l.Vb();l.fc(),l.ec(),l.Ub(0,"div",10),l.cc("click",(function(){return l.tc(t),l.gc().setAnimation("simple-multiplication-animate-multiplicand")})),l.Bc(1),l.Tb()}if(2&t){const t=l.gc();l.yc("transform",t.multiplicandTransform),l.Bb(1),l.Dc(" ",t.multiplicandText,"")}}function F(t,e){if(1&t){const t=l.Vb();l.fc(),l.ec(),l.Ub(0,"div",11),l.cc("click",(function(){return l.tc(t),l.gc().setAnimation("simple-multiplication-animate-product")})),l.Bc(1),l.Tb()}if(2&t){const t=l.gc();l.yc("transform",t.productTransform),l.Bb(1),l.Dc("",t.productText," ")}}function A(t,e){return function(t,e){return`translate(${24*t}px, ${24*e}px)`}(t+2,e+2)}function R(t){const e=+t;return isNaN(e)?0:e}let L=(()=>{class t{constructor(){this.multiplier=0,this.multiplicand=0,this.hiddenTerm=-1,this.colNum=4,this.rowNum=4,this.animationName="",this.clear()}setAnimation(t){this.animationName=t?t===this.animationName?t+" simple-multiplication-animation-restart":t:""}ngOnInit(){}ngOnChanges(t){this.clear();const e=R(this.multiplier),n=R(this.multiplicand),i=e*n;i>0&&(this.productPath=`M0 0h${e}v${n}h${-e}z`,this.productText=2===this.hiddenTerm?"?":""+i,this.productTransform=A(e/2,n/2),this.multiplierPath=`M0 ${n}a.5 .5 0 0 0 .5 .5h${e/2-1}a.5 .5 0 0 1 .5 .5a.5 .5 0 0 1 .5 -.5h${e/2-1}a.5 .5 0 0 0 .5 -.5`,this.multiplierText=0===this.hiddenTerm?"?":""+e,this.multiplierTransform=A(e/2,n+1.5),this.multiplicandPath=`M${e} 0a.5 .5 0 0 1 .5 .5v${n/2-1}a.5 .5 0 0 0 .5 .5a.5 .5 0 0 0 -.5 .5v${n/2-1}a.5 .5 0 0 1 -.5 .5`,this.multiplicandText=1===this.hiddenTerm?"?":""+n,this.multiplicandTransform=A(e+1.5,n/2),this.colNum+=e+1,this.rowNum+=n+1)}clear(){this.multiplierPath=this.multiplicandPath=this.productPath="M0 0z",this.multiplierText=this.multiplierTransform=this.multiplicandText=this.multiplicandTransform=this.productText=this.productTransform=void 0,this.colNum=4,this.rowNum=4}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-simple-multiplication"]],inputs:{multiplier:"multiplier",multiplicand:"multiplicand",hiddenTerm:"hiddenTerm"},features:[l.zb],decls:9,vars:9,consts:[[3,"rowNum","colNum"],["appContentSvg","",3,"ngClass"],["transform","translate(2 2)"],["id","productPath","fill","#0f04","stroke","#444e","stroke-width","0.1"],["id","multiplierPath","fill","none","stroke","#444e","stroke-width","0.1"],["id","multiplicandPath","fill","none","stroke","#444e","stroke-width","0.1"],["class","simple-multiplication-box simple-multiplication-multiplier",3,"transform","click",4,"ngIf"],["class","simple-multiplication-box simple-multiplication-multiplicand",3,"transform","click",4,"ngIf"],["class","simple-multiplication-box simple-multiplication-product",3,"transform","click",4,"ngIf"],[1,"simple-multiplication-box","simple-multiplication-multiplier",3,"click"],[1,"simple-multiplication-box","simple-multiplication-multiplicand",3,"click"],[1,"simple-multiplication-box","simple-multiplication-product",3,"click"]],template:function(t,e){1&t&&(l.Ub(0,"app-squared-paper",0),l.fc(),l.Ub(1,"svg",1),l.Ub(2,"g",2),l.Pb(3,"path",3),l.Pb(4,"path",4),l.Pb(5,"path",5),l.Tb(),l.Tb(),l.zc(6,z,2,3,"div",6),l.zc(7,q,2,3,"div",7),l.zc(8,F,2,3,"div",8),l.Tb()),2&t&&(l.mc("rowNum",e.rowNum)("colNum",e.colNum),l.Bb(1),l.mc("ngClass",e.animationName),l.Bb(2),l.Cb("d",e.productPath),l.Bb(1),l.Cb("d",e.multiplierPath),l.Bb(1),l.Cb("d",e.multiplicandPath),l.Bb(1),l.mc("ngIf",e.multiplierText),l.Bb(1),l.mc("ngIf",e.multiplicandText),l.Bb(1),l.mc("ngIf",e.productText))},directives:[k,i.j,i.l],styles:[".simple-multiplication-box[_ngcontent-%COMP%]{position:absolute;left:-12px;top:-12px;background-color:rgba(34,34,34,.13);border-radius:12px;min-width:24px;text-align:center;cursor:pointer;transition:box-shadow .3s ease-in-out}.simple-multiplication-box[_ngcontent-%COMP%]:hover{box-shadow:2px 2px 4px rgba(0,0,0,.53)}.simple-multiplication-product[_ngcontent-%COMP%]{color:rgba(68,68,68,.93);background-color:rgba(34,34,34,.13)}.simple-multiplication-multiplier[_ngcontent-%COMP%]{color:rgba(136,0,136,.93);background-color:rgba(136,0,136,.13)}.simple-multiplication-multiplicand[_ngcontent-%COMP%]{color:rgba(221,17,51,.93);background-color:rgba(221,17,51,.13)}@-webkit-keyframes animationTerm{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@keyframes animationTerm{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@-webkit-keyframes animationTermRestart{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}@keyframes animationTermRestart{0%{stroke-dasharray:40;stroke-dashoffset:40;fill-opacity:0}to{stroke-dasharray:40;stroke-dashoffset:0}}.simple-multiplication-animate-multiplicand[_ngcontent-%COMP%]   #multiplicandPath[_ngcontent-%COMP%], .simple-multiplication-animate-multiplier[_ngcontent-%COMP%]   #multiplierPath[_ngcontent-%COMP%], .simple-multiplication-animate-product[_ngcontent-%COMP%]   #productPath[_ngcontent-%COMP%]{-webkit-animation:animationTerm 4s linear 1;animation:animationTerm 4s linear 1}.simple-multiplication-animate-multiplicand.simple-multiplication-animation-restart[_ngcontent-%COMP%]   #multiplicandPath[_ngcontent-%COMP%], .simple-multiplication-animate-multiplier.simple-multiplication-animation-restart[_ngcontent-%COMP%]   #multiplierPath[_ngcontent-%COMP%], .simple-multiplication-animate-product.simple-multiplication-animation-restart[_ngcontent-%COMP%]   #productPath[_ngcontent-%COMP%]{-webkit-animation-name:animationTermRestart;animation-name:animationTermRestart}"]}),t})();function j(t,e){if(1&t&&l.Pb(0,"app-simple-addition",5),2&t){const t=l.gc();l.mc("augend",t.firstTermValue)("addend",t.secondTermValue)("hiddenTerm",t.hiddenTerm)}}function E(t,e){if(1&t&&l.Pb(0,"app-simple-multiplication",6),2&t){const t=l.gc();l.mc("multiplier",t.firstTermValue)("multiplicand",t.secondTermValue)("hiddenTerm",t.hiddenTerm)}}let D=(()=>{class t{constructor(t){this.item=t,this.title="",this.content="",this.contentType=null,this.firstTermValue=0,this.secondTermValue=0,this.hiddenTerm=-1}ngOnInit(){const t=this.item.inputIndex,e=this.item.expression;if(this.title=T(e,t),"addition"===e.name){this.firstTermValue=e.first.value,this.secondTermValue=e.second.value,this.content=function(t,e){return"first"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043f\u0435\u0440\u0432\u043e\u0435 \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0438\u0437 \u0441\u0443\u043c\u043c\u044b \u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0432\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u043e\u0435.":"second"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0432\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0438\u0437 \u0441\u0443\u043c\u043c\u044b \u0432\u044b\u0447\u0435\u0441\u0442\u044c \u043f\u0435\u0440\u0432\u043e\u0435 \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u043e\u0435.":"result"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0441\u0443\u043c\u043c\u0443 (?), \u043d\u0430\u0434\u043e \u0441\u043b\u043e\u0436\u0438\u0442\u044c \u043f\u0435\u0440\u0432\u043e\u0435 \u0438 \u0432\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u044b\u0435.":`\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0441\u0443\u043c\u043c\u0443 (${t.result.value}), \u043d\u0430\u0434\u043e \u0441\u043b\u043e\u0436\u0438\u0442\u044c \u043f\u0435\u0440\u0432\u043e\u0435 (${t.first.value}) \u0438 \u0432\u0442\u043e\u0440\u043e\u0435 (${t.second.value}) \u0441\u043b\u0430\u0433\u0430\u0435\u043c\u044b\u0435.`}(e,t),this.contentType="addition";const n=function(t,e){const{first:n,second:i,result:a}=t,s=i.value===a.value,o=n.value===a.value;return s&&o?"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u043e\u043b\u044c \u043d\u0435 \u043f\u0440\u0438\u0431\u0430\u0432\u043b\u044f\u0439, \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f!":s&&"first"===e||o&&"second"===e?`\u041a\u0430\u043a\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u0438\u0431\u0430\u0432\u0438\u0442\u044c \u043a \u0447\u0438\u0441\u043b\u0443 ${a.value} \u0447\u0442\u043e\u0431\u044b \u043e\u043d\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c?`:s&&"first"!==e?"\u0415\u0441\u043b\u0438 \u043a \u043d\u0443\u043b\u044e \u043f\u0440\u0438\u0431\u0430\u0432\u0438\u0442\u044c \u0447\u0438\u0441\u043b\u043e, \u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f \u0442\u043e \u0436\u0435 \u0441\u0430\u043c\u043e\u0435 \u0447\u0438\u0441\u043b\u043e.":o&&"second"!==e?"\u0415\u0441\u043b\u0438 \u043a \u043b\u044e\u0431\u043e\u043c\u0443 \u0447\u0438\u0441\u043b\u0443 \u043f\u0440\u0438\u0431\u0430\u0432\u0438\u0442\u044c 0 \u0442\u043e \u044d\u0442\u043e \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e, \u0447\u0442\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043a \u043d\u0435\u043c\u0443 \u043d\u0435 \u043f\u0440\u0438\u0431\u0430\u0432\u0438\u0442\u044c!":null}(e,t);n?(this.content=n,this.hiddenTerm=-1):this.hiddenTerm="first"===t?0:"second"===t?1:2}else if("subtraction"===e.name){this.firstTermValue=e.result.value,this.secondTermValue=e.second.value,this.contentType="addition",this.content=function(t,e){return"first"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u043c\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0441\u043b\u043e\u0436\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c \u0438 \u0432\u044b\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0435.":"second"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0432\u044b\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0438\u0437 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u043c\u043e\u0433\u043e \u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c.":"result"===e?"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c (?), \u043d\u0430\u0434\u043e \u0438\u0437 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u043c\u043e\u0433\u043e \u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0432\u044b\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0435.":`\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c (${t.result.value}), \u043d\u0430\u0434\u043e \u0438\u0437 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u043c\u043e\u0433\u043e (${t.first.value}) \u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0432\u044b\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0435 (${t.second.value}).`}(e,t);const n=function(t,e){const{first:n,second:i,result:a}=t;return n.value===i.value?0===n.value?"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u043e\u043b\u044c \u043d\u0435 \u043e\u0442\u043d\u0438\u043c\u0430\u0439, \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f!":"\u0420\u0430\u0437\u043d\u043e\u0441\u0442\u044c \u0434\u0432\u0443\u0445 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0445 \u0447\u0438\u0441\u0435\u043b \u0432\u0441\u0435\u0433\u0434\u0430 \u0440\u0430\u0432\u043d\u0430 \u043d\u0443\u043b\u044e.":0===i.value?"second"===e?`\u041a\u0430\u043a\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043d\u0443\u0436\u043d\u043e \u043e\u0442\u043d\u044f\u0442\u044c \u043e\u0442 \u0447\u0438\u0441\u043b\u0430 ${a.value} \u0447\u0442\u043e\u0431\u044b \u043e\u043d\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c?`:"\u041f\u0440\u0438 \u0432\u044b\u0447\u0438\u0442\u0430\u043d\u0438\u0438 \u043d\u0443\u043b\u044f \u0438\u0437 \u043b\u044e\u0431\u043e\u0433\u043e \u0447\u0438\u0441\u043b\u0430 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f \u044d\u0442\u043e \u0441\u0430\u043c\u043e\u0435 \u0447\u0438\u0441\u043b\u043e!":null}(e,t);n?(this.content=n,this.hiddenTerm=-1):this.hiddenTerm="first"===t?2:"second"===t?1:0}else"multiplication"===e.name?(this.firstTermValue=e.first.value,this.secondTermValue=e.second.value,this.contentType="multiplication",this.content=function(t,e){return"first"===e?`\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043f\u0435\u0440\u0432\u044b\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (?), \u043d\u0430\u0434\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 (${t.result.value}) \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (${t.second.value}).`:"second"===e?`\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0432\u0442\u043e\u0440\u043e\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (?), \u043d\u0430\u0434\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 (${t.result.value}) \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u044b\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (${t.first.value}).`:"result"===e?`\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0447\u0438\u0441\u0435\u043b (?), \u043d\u0430\u0434\u043e \u043f\u0435\u0440\u0432\u044b\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (${t.first.value}) \u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c (${t.second.value}).`:"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0447\u0438\u0441\u0435\u043b, \u043d\u0430\u0434\u043e \u043f\u0435\u0440\u0432\u044b\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c \u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c."}(e,t),this.hiddenTerm="first"===t?0:"second"===t?1:2):"division"===e.name&&(this.firstTermValue=e.result.value,this.secondTermValue=e.second.value,this.contentType="multiplication",this.content=function(t,e){return"first"===e?`\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0434\u0435\u043b\u0438\u043c\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0447\u0430\u0441\u0442\u043d\u043e\u0435 (${t.result.value}) \u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u043d\u0430 \u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c (${t.second.value}).`:"second"===e?`\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c (?), \u043d\u0430\u0434\u043e \u0434\u0435\u043b\u0438\u043c\u043e\u0435 (${t.first.value}) \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u0447\u0430\u0441\u0442\u043d\u043e\u0435 (${t.result.value}).`:"result"===e?`\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0447\u0430\u0441\u0442\u043d\u043e\u0435 (?), \u043d\u0430\u0434\u043e \u0434\u0435\u043b\u0438\u043c\u043e\u0435 (${t.first.value}) \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c (${t.second.value}).`:"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u0447\u0430\u0441\u0442\u043d\u043e\u0435, \u043d\u0430\u0434\u043e \u0434\u0435\u043b\u0438\u043c\u043e\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c."}(e,t),this.hiddenTerm="first"===t?2:"second"===t?1:0)}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(w.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-math-expression-dialog"]],decls:10,vars:4,consts:[["mat-dialog-title",""],[3,"augend","addend","hiddenTerm",4,"ngIf"],[3,"multiplier","multiplicand","hiddenTerm",4,"ngIf"],["align","end"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""],[3,"augend","addend","hiddenTerm"],[3,"multiplier","multiplicand","hiddenTerm"]],template:function(t,e){1&t&&(l.Ub(0,"h2",0),l.Bc(1),l.Tb(),l.Ub(2,"mat-dialog-content"),l.Ub(3,"p"),l.Bc(4),l.Tb(),l.zc(5,j,1,3,"app-simple-addition",1),l.zc(6,E,1,3,"app-simple-multiplication",2),l.Tb(),l.Ub(7,"mat-dialog-actions",3),l.Ub(8,"button",4),l.Bc(9,"\u041f\u043e\u043d\u044f\u0442\u043d\u043e!"),l.Tb(),l.Tb()),2&t&&(l.Bb(1),l.Cc(e.title),l.Bb(3),l.Cc(e.content),l.Bb(1),l.mc("ngIf",e.hiddenTerm>=0&&"addition"===e.contentType),l.Bb(1),l.mc("ngIf",e.hiddenTerm>=0&&"multiplication"===e.contentType))},directives:[w.g,w.e,i.l,w.c,y.a,w.d,N,L],styles:[""]}),t})();var K=n("NFeN"),Y=n("jhN1");function G(t,e){if(1&t){const t=l.Vb();l.Ub(0,"button",1),l.cc("click",(function(){l.tc(t);const n=e.index;return l.gc().selectionChange.emit(n)})),l.Bc(1),l.Tb()}if(2&t){const t=e.$implicit;l.Bb(1),l.Cc(t)}}let J=(()=>{class t{constructor(){this.buttonNames=[],this.selectionChange=new l.n}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-numpad"]],inputs:{buttonNames:"buttonNames"},outputs:{selectionChange:"selectionChange"},decls:1,vars:1,consts:[["type","button","mat-button","",3,"click",4,"ngFor","ngForOf"],["type","button","mat-button","",3,"click"]],template:function(t,e){1&t&&l.zc(0,G,2,1,"button",0),2&t&&l.mc("ngForOf",e.buttonNames)},directives:[i.k,y.a],styles:[".mat-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]{color:inherit}"]}),t})();const Q=["itemInputs"];function X(t,e){1&t&&(l.Ub(0,"span",14),l.Bc(1,"\u2714"),l.Tb())}function H(t,e){if(1&t){const t=l.Vb();l.Ub(0,"label",15),l.cc("click",(function(){l.tc(t);const e=l.gc().index;return l.gc().noteRequest.emit(e)})),l.Bc(1,"\u2217"),l.Tb()}}function W(t,e){if(1&t&&(l.Sb(0),l.Ub(1,"span",17),l.Bc(2),l.Tb(),l.Ub(3,"span",19),l.Bc(4,"="),l.Tb(),l.Rb()),2&t){const t=l.gc(2).$implicit;l.Bb(1),l.mc("title",t.expression.second.name),l.Bb(1),l.Cc(t.expression.second.value)}}function Z(t,e){if(1&t&&(l.Ub(0,"label",16),l.Ub(1,"span",17),l.Bc(2),l.Tb(),l.Ub(3,"span",17),l.Bc(4),l.Tb(),l.zc(5,W,5,2,"ng-container",18),l.Tb()),2&t){const t=l.gc().$implicit;l.mc("for",t.inputName),l.Bb(1),l.mc("title",t.expression.first.name),l.Bb(1),l.Cc(t.expression.first.value),l.Bb(1),l.mc("title",t.expression.operator.name),l.Bb(1),l.Cc(t.expression.operator.notation),l.Bb(1),l.mc("ngIf","second"!==t.inputIndex)}}function tt(t,e){if(1&t&&(l.Sb(0),l.Ub(1,"span",17),l.Bc(2),l.Tb(),l.Ub(3,"span",17),l.Bc(4),l.Tb(),l.Rb()),2&t){const t=l.gc(2).$implicit;l.Bb(1),l.mc("title",t.expression.operator.name),l.Bb(1),l.Cc(t.expression.operator.notation),l.Bb(1),l.mc("title",t.expression.second.name),l.Bb(1),l.Cc(t.expression.second.value)}}function et(t,e){if(1&t&&(l.Ub(0,"label",16),l.zc(1,tt,5,4,"ng-container",18),l.Ub(2,"span",19),l.Bc(3,"="),l.Tb(),l.Ub(4,"span",17),l.Bc(5),l.Tb(),l.Tb()),2&t){const t=l.gc().$implicit;l.mc("for",t.inputName),l.Bb(1),l.mc("ngIf","second"!==t.inputIndex),l.Bb(3),l.mc("title",t.expression.result.name),l.Bb(1),l.Cc(t.expression.result.value)}}function nt(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",4),l.Ub(1,"div",5),l.Ub(2,"span",6),l.zc(3,X,2,0,"span",7),l.zc(4,H,2,0,"label",8),l.Tb(),l.Tb(),l.Ub(5,"div",9),l.Ub(6,"div",10),l.zc(7,Z,6,6,"label",11),l.Ub(8,"input",12,13),l.cc("ngModelChange",(function(n){l.tc(t);const i=e.$implicit,a=e.index,s=l.gc();return i.inputValue=n,s.itemChange.emit(a)}))("keyup.Enter",(function(){l.tc(t);const n=e.index;return l.gc().onInputEnter(n)}))("focus",(function(n){l.tc(t);const i=e.index,a=l.gc(),s=l.rc(1);return a.onInputFocus(n,s,i)})),l.Tb(),l.zc(10,et,6,4,"label",11),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit,n=l.gc();l.Bb(3),l.mc("ngIf",t.isChecked&&t.isValid),l.Bb(1),l.mc("ngIf",t.hasNote),l.Bb(3),l.mc("ngIf","first"!==t.inputIndex),l.Bb(1),l.Fb("invalid",t.isChecked&&!t.isValid),l.mc("id",t.inputName)("name",t.inputName)("readonly",!n.active||t.isReadonly)("ngModel",t.inputValue),l.Cb("maxlength",t.inputLength),l.Bb(2),l.mc("ngIf","result"!==t.inputIndex)}}function it(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",23),l.Ub(1,"app-numpad",24),l.cc("selectionChange",(function(e){return l.tc(t),l.gc(2).onInputNext(e)})),l.Tb(),l.Tb()}if(2&t){const t=l.gc(2);l.Bb(1),l.mc("buttonNames",t.buttons)}}function at(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",20),l.Ub(1,"div",21),l.cc("click",(function(){l.tc(t);const e=l.gc();return e.showKeyboard=!e.showKeyboard})),l.Ub(2,"mat-icon"),l.Bc(3),l.Tb(),l.Tb(),l.zc(4,it,2,1,"div",22),l.Tb()}if(2&t){const t=l.gc();l.yc("transform",t.keyboardTransform),l.Bb(3),l.Cc(t.toggleKeyboardIcon),l.Bb(1),l.mc("ngIf",t.showKeyboard)}}let st=(()=>{class t{constructor(){this.active=!0,this.itemChange=new l.n,this.noteRequest=new l.n,this.buttons=["1","2","3","4","5","6","7","8","9","0","\u2190","OK"],this.showKeyboard=!1,this.keyboardTransform="",this.inputIndex=-1}get toggleKeyboardIcon(){return this.showKeyboard?"keyboard_hide":"keyboard"}ngAfterViewInit(){this.nextItemRequestFocus(0)}ngOnChanges(t){const e=t.items;e&&(this.keyboardTransform="",this.inputIndex=-1,e.firstChange||setTimeout(()=>{this.nextItemRequestFocus(0)},100))}ngOnInit(){}onInputEnter(t){if(t>=0&&t<this.items.length){const e=this.items[t].inputValue;if(e&&!isNaN(+e))return this.nextItemRequestFocus(t+1)}return!0}onInputFocus(t,e,n){this.inputIndex=n;const i=t.target;if(e&&i){const t=e.getBoundingClientRect(),n=i.getBoundingClientRect();this.keyboardTransform=`translate(${n.left-t.left}px, ${n.bottom-t.top}px)`}}onInputNext(t){const e=this.buttons[t];if(isNaN(+e))"\u2190"===e?this.onInputBack():"OK"===e&&(this.showKeyboard=this.onInputEnter(this.inputIndex));else if(this.inputIndex>=0&&this.inputIndex<this.items.length){const t=this.items[this.inputIndex];(!t.isReadonly||t.inputValue.length<t.inputLength)&&(t.inputValue=t.inputValue+e,this.itemChange.emit(this.inputIndex))}}onInputBack(){if(this.inputIndex>=0&&this.inputIndex<this.items.length){const t=this.items[this.inputIndex],e=t.inputValue.length;!t.isReadonly&&e>0&&(t.inputValue=t.inputValue.substring(0,e-1),this.itemChange.emit(this.inputIndex))}}nextItemRequestFocus(t){const e=this.inputList.toArray(),n=e.length;for(let i=0;i<n;i++){const a=e[(t+i)%n].nativeElement;if(a&&!a.value)return setTimeout(()=>{a.focus()}),!0}return!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-math-input-group"]],viewQuery:function(t,e){var n;1&t&&l.Fc(Q,!0),2&t&&l.qc(n=l.dc())&&(e.inputList=n)},inputs:{active:"active",items:"items"},outputs:{itemChange:"itemChange",noteRequest:"noteRequest"},features:[l.zb],decls:4,vars:2,consts:[[1,"math-input-group"],["main",""],["class","math-input-group-item",4,"ngFor","ngForOf"],["class","math-input-group-keyboard",3,"transform",4,"ngIf"],[1,"math-input-group-item"],[1,"math-input-group-col-20"],[1,"math-input-group-item-pref"],["class","math-input-group-mark",4,"ngIf"],["class","math-input-group-note",3,"click",4,"ngIf"],[1,"math-input-group-col-80"],[1,"math-input-group-item-main"],[3,"for",4,"ngIf"],["type","text","placeholder","?","autocomplete","off",3,"id","name","readonly","ngModel","ngModelChange","keyup.Enter","focus"],["itemInputs",""],[1,"math-input-group-mark"],[1,"math-input-group-note",3,"click"],[3,"for"],[3,"title"],[4,"ngIf"],["title","equals"],[1,"math-input-group-keyboard"],[1,"math-input-group-keyboard-icon",3,"click"],["class","math-input-group-keyboard-dial",4,"ngIf"],[1,"math-input-group-keyboard-dial"],[3,"buttonNames","selectionChange"]],template:function(t,e){1&t&&(l.Ub(0,"div",0,1),l.zc(2,nt,11,11,"div",2),l.zc(3,at,5,4,"div",3),l.Tb()),2&t&&(l.Bb(2),l.mc("ngForOf",e.items),l.Bb(1),l.mc("ngIf",e.active&&e.keyboardTransform))},directives:[i.k,i.l,s.b,s.e,s.i,s.l,K.a,J],styles:['.math-input-group[_ngcontent-%COMP%]{position:relative;margin-right:96px}.math-input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font:inherit;letter-spacing:inherit;border:none;background-color:transparent;margin-left:-6px;margin-right:6px;padding:0 0 0 6px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="1"][_ngcontent-%COMP%]{width:18px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="2"][_ngcontent-%COMP%]{width:42px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="3"][_ngcontent-%COMP%]{width:66px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="4"][_ngcontent-%COMP%]{width:90px}.math-input-group[_ngcontent-%COMP%]   input[maxlength="5"][_ngcontent-%COMP%]{width:114px}.math-input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{letter-spacing:normal;outline:thin dashed #00f;background-color:#fed}.math-input-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{-webkit-text-decoration:solid red line-through;text-decoration:solid red line-through}.math-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}.math-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{text-shadow:1px 1px 2px #cba}.math-input-group[_ngcontent-%COMP%]   .math-input-group-item[_ngcontent-%COMP%]{display:inline-block;width:50%;margin-bottom:24px}.math-input-group[_ngcontent-%COMP%]   .math-input-group-col-20[_ngcontent-%COMP%]{display:inline-block;width:20%}.math-input-group[_ngcontent-%COMP%]   .math-input-group-col-80[_ngcontent-%COMP%]{display:inline-block;width:80%}.math-input-group[_ngcontent-%COMP%]   .math-input-group-mark[_ngcontent-%COMP%]{color:red}.math-input-group[_ngcontent-%COMP%]   .math-input-group-note[_ngcontent-%COMP%]{color:#008}.math-input-group[_ngcontent-%COMP%]   .math-input-group-item-pref[_ngcontent-%COMP%]{margin-left:24px}.math-input-group[_ngcontent-%COMP%]   .math-input-group-item-main[_ngcontent-%COMP%], .math-input-group[_ngcontent-%COMP%]   .math-input-group-item-pref[_ngcontent-%COMP%]{letter-spacing:12px;padding-left:6px}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard[_ngcontent-%COMP%]{position:absolute;top:0;left:0;transition:transform .6s ease-in-out}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard-icon[_ngcontent-%COMP%]{cursor:pointer;height:24px;color:#bbf;transition:color .6s ease-in-out}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard-icon[_ngcontent-%COMP%]:hover{color:#008}.math-input-group[_ngcontent-%COMP%]   .math-input-group-keyboard-dial[_ngcontent-%COMP%]{position:relative;border:1px solid #bbf;border-radius:4px;padding:2px;top:-24px;left:24px;width:192px;color:#008;background-color:#ddf;box-shadow:2px 2px 4px #888}']}),t})(),ot=(()=>{class t{constructor(t){this._ref=t}ngAfterViewInit(){setTimeout(()=>{var t;const e=null===(t=this._ref)||void 0===t?void 0:t.nativeElement;e&&e.focus()})}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(l.l))},t.\u0275dir=l.Jb({type:t,selectors:[["","appFocus",""]]}),t})();var rt=n("STbY");const ct=["menuButton"];function lt(t,e){if(1&t&&(l.Ub(0,"button",14),l.Ub(1,"mat-icon"),l.Bc(2,"face"),l.Tb(),l.Tb()),2&t){const t=l.gc();l.mc("disabled",!("active"===t.primeStatus&&t.canPrimeSubmit))}}function ut(t,e){if(1&t){const t=l.Vb();l.Ub(0,"mat-icon",15),l.cc("click",(function(){l.tc(t);const e=l.gc();return e.victoryAnimation=!e.victoryAnimation})),l.Tb()}if(2&t){const t=l.gc();l.Fb("animate",t.victoryAnimation),l.mc("ngClass",t.victoryClass)}}function mt(t,e){if(1&t){const t=l.Vb();l.Sb(0),l.Ub(1,"button",16,17),l.Ub(3,"mat-icon"),l.Bc(4,"face"),l.Tb(),l.Tb(),l.Ub(5,"mat-menu",18,19),l.Ub(7,"button",20),l.cc("click",(function(){return l.tc(t),l.gc().onRefresh()})),l.Ub(8,"mat-icon",21),l.Bc(9,"refresh"),l.Tb(),l.Ub(10,"span"),l.Bc(11),l.Tb(),l.Tb(),l.Tb(),l.Rb()}if(2&t){const t=l.rc(6),e=l.gc();l.Bb(1),l.mc("matMenuTriggerFor",t),l.Bb(10),l.Cc(e.refreshButtonLabel)}}function dt(t,e){if(1&t&&(l.Ub(0,"span",22),l.Bc(1),l.Tb()),2&t){const t=l.gc();l.Bb(1),l.Cc(t.scoreMessage)}}function pt(t,e){if(1&t){const t=l.Vb();l.Ub(0,"form",5,23),l.cc("ngSubmit",(function(){l.tc(t);const e=l.rc(1);return l.gc().onExtraSubmit(e)})),l.Ub(2,"div",7),l.Bc(3),l.Tb(),l.Ub(4,"app-math-input-group",24),l.cc("itemChange",(function(e){return l.tc(t),l.gc().onExtraItemChange(e)}))("noteRequest",(function(e){return l.tc(t),l.gc().requestNoteFor(e)})),l.Tb(),l.Ub(5,"div",9),l.Ub(6,"button",25),l.Ub(7,"mat-icon"),l.Bc(8,"child_care"),l.Tb(),l.Tb(),l.Ub(9,"label"),l.Bc(10),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.gc();l.Bb(3),l.Cc(t.extraMessage),l.Bb(1),l.mc("items",t.extraItems)("active","active"===t.extraStatus),l.Bb(2),l.mc("disabled","active"!==t.extraStatus),l.Bb(3),l.Cb("for","done"===t.extraStatus?"onPrimeSubmitButton":"onExtraSubmitButton"),l.Bb(1),l.Cc(t.extraSubmitLabel)}}function ht(t){return t.replace(/[^0-9]/g,"")}const gt=["first","second","result"],bt="[School.Math.Grade-3.Mental-math]";let ft=(()=>{class t{constructor(t,e,n,i){var a,s;this._dialog=i,this.primeMessage="\u041d\u0430\u0439\u0434\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f.",this.extraMessage="\u0420\u0430\u0431\u043e\u0442\u0430 \u043d\u0430\u0434 \u043e\u0448\u0438\u0431\u043a\u0430\u043c\u0438:",this.canPrimeSubmit=!1,this.scoreMessage="",this.score=0,this.autoplay=new m.a,this.todayVictories=0,this.victoryAnimation=!1,this.expressionTypes=["a","s","m","d"],e.addSvgIcon("icon_sun",n.bypassSecurityTrustResourceUrl("assets/school/sun.svg"));const o=null===(a=t)||void 0===a?void 0:a.snapshot.queryParams.mode;if(o){const t=o.match(/([asmdASMD][0-9]*)/g);(null===(s=t)||void 0===s?void 0:s.length)>0&&(this.expressionTypes=t)}}init(){this.autoplay.stop(),this.canPrimeSubmit=!1,this.score=0,this.scoreMessage="",this.primeStatus="active",this.primeItems=[],this.extraStatus=void 0,this.extraItems=void 0;for(let t=0;t<100&&this.primeItems.length<10;t++){const t=Object(u.c)(this.expressionTypes);let e=+t.substring(1);switch(e=e?Math.max(Math.min(e,100),10):100,t[0]){case"a":this._addPrimeItem(b(e));break;case"s":this._addPrimeItem(x(e));break;case"m":this._addPrimeItem(P(10,e));break;case"d":this._addPrimeItem(v(10,e));break;case"A":this._addPrimeItem(b(e),"result");break;case"S":this._addPrimeItem(x(e),"result");break;case"M":this._addPrimeItem(P(10,e),"result");break;case"D":this._addPrimeItem(v(10,e),"result")}}}_addPrimeItem(t,e){const n=T(t);if(!this.primeItems.find(t=>T(t.expression)===n)){const n="mathExpression"+this.primeItems.length,i="",a=e||Object(u.c)(gt),s=t[a].value.toString().length;this.primeItems.push({inputName:n,inputValue:i,inputIndex:a,inputLength:s,expression:t})}}ngOnInit(){this.init();const t=localStorage.getItem(bt);if(t){const e=JSON.parse(t);if(e){const t=e[Object(p.a)("YYYY-MM-DD")];"number"==typeof t&&t>this.todayVictories&&(this.todayVictories=t,this.victoryClass="step"+Math.min(5,this.todayVictories))}}}ngOnDestroy(){this.autoplay.stop()}onRefresh(){this.init()}getPrimeSubmitStatus(){if("active"!==this.primeStatus)return!1;for(const t of this.primeItems)if(!t.inputValue||isNaN(+t.inputValue))return!1;return!0}get primeSubmitLabel(){switch(this.primeStatus){case"active":return this.canPrimeSubmit?"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043c?":"?";case"validation":return"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c...";case"done":return"\u041e\u0446\u0435\u043d\u043a\u0430: "}}get extraSubmitLabel(){switch(this.extraStatus){case"active":return"?";case"validation":return"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u044e...";case"done":return"!"}}get refreshButtonLabel(){return this.score>=1?"\u0415\u0449\u0451 \u0440\u0430\u0437?":"\u041f\u0435\u0440\u0435\u0438\u0433\u0440\u0430\u0442\u044c!"}getScore(){let t=0;for(const e of this.primeItems)e.isValid&&t++;return t/this.primeItems.length}onPrimeChecked(){this.primeStatus="done",this.victoryAnimation=!1,this.scoreMessage="",this.score=this.getScore()}onPrimeEnded(){const t=this.primeItems.filter(t=>!t.isValid).map(t=>Object.assign(Object.assign({},t),{isChecked:!1,inputValue:"",inputName:t.inputName+"Extra",hasNote:!0}));if(t.length>0)this.extraItems=t,this.extraStatus="active";else{this.todayVictories++,this.victoryClass="step"+Math.min(5,this.todayVictories),this.victoryAnimation=!0;try{const t=Object(p.a)("YYYY-MM-DD");localStorage.setItem(bt,JSON.stringify({[t]:this.todayVictories}))}catch(e){console.warn("localStorage error:",e)}}}onExtraSubmit(t){this.extraStatus="validation";const e=this.extraItems;let n=0;this.autoplay.timeout=200,this.autoplay.play(()=>{for(;n<e.length;){const t=e[n++];if(!t.isChecked&&t.inputValue){t.expression[t.inputIndex].value===+t.inputValue?(t.isValid=t.isChecked=t.isReadonly=!0,t.hasNote=!1):t.inputValue="";break}}return!(n>=e.length&&(e.find(t=>!t.isChecked)?this.extraStatus="active":(this.extraStatus="done",this.requestMenuButtonFocus()),1))})}onPrimeSubmit(t){if(!this.getPrimeSubmitStatus())return void console.warn("Cannot submit:",t.value);this.primeStatus="validation";const e=this.primeItems;let n=0;this.autoplay.timeout=250,this.autoplay.play(()=>{if(n<e.length){const t=e[n++];t.isChecked=!0,t.isValid=t.expression[t.inputIndex].value===+t.inputValue}if(n>=e.length){this.onPrimeChecked();const t=function(t){if(1===t){const t=["","\u0417\u0434\u043e\u0440\u043e\u0432\u043e!","\u041f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u043e!","\u041e\u0442\u043b\u0438\u0447\u043d\u043e!","\u041c\u043e\u043b\u043e\u0434\u0435\u0446!","\u0423\u043c\u043d\u0438\u0446\u0430!","\u0423\u043c\u043d\u0438\u0447\u043a\u0430!!!","\u0425\u0432\u0430\u043b\u044e!","\u0411\u0440\u0430\u0432\u043e!","\u0422\u0430\u043b\u0430\u043d\u0442!","\u041f\u0440\u0435\u0432\u043e\u0441\u0445\u043e\u0434\u043d\u043e!","\u0422\u0430\u043a \u0434\u0435\u0440\u0436\u0430\u0442\u044c!","\u0417\u0430\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e!","\u0427\u0443\u0434\u0435\u0441\u043d\u043e!"];return"5+ "+Object(u.c)(t)}if(t>=.98)return"5+";if(t>.9)return"5";if(t>.8)return"5-";if(t>.7)return"4";if(t>.6)return"4-";if(t>.5)return"3";if(t>.4)return"3-";if(t>.3)return"2";if(t>=.2)return"2-";{const t=["","","","","\u041f\u043b\u043e\u0445\u043e.","\u041e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u0435\u043b\u044c\u043d\u043e.","\u0423\u0436\u0430\u0441\u043d\u043e.","\u0423\u0436\u0430\u0441!","\u0411\u0435\u0437\u043e\u0431\u0440\u0430\u0437\u043d\u043e!","\u041e\u0439 \u043a\u0430\u043a \u043f\u043b\u043e\u0445\u043e!","\u041d\u0435\u043a\u0440\u0430\u0441\u0438\u0432\u043e.","\u042f \u0432 \u0448\u043e\u043a\u0435!","\u0416\u0443\u0442\u044c!","\u0412\u0437\u0433\u043b\u044f\u043d\u0438 \u043a\u0430\u043a \u043d\u0435\u0445\u043e\u0440\u043e\u0448\u043e."];return"1 "+Object(u.c)(t)}}(this.score);return this.autoplay.timeout=100,this.autoplay.play(()=>{const e=Object(d.a)(this.scoreMessage,t);return this.scoreMessage=e.length<t.length?t.substring(0,e.length+1):t,this.scoreMessage!==t||(this.onPrimeEnded(),!1)}),!1}return!0})}onPrimeItemChange(t){const e=this.primeItems[t];if(e){const t=ht(e.inputValue).substring(0,e.inputLength);t!==e.inputValue?(this.canPrimeSubmit=!1,setTimeout(()=>{e.inputValue=t,this.canPrimeSubmit=this.getPrimeSubmitStatus()},100)):this.canPrimeSubmit=this.getPrimeSubmitStatus()}}onExtraItemChange(t){const e=this.extraItems[t];if(e){const t=ht(e.inputValue).substring(0,e.inputLength);t!==e.inputValue&&setTimeout(()=>{e.inputValue=t},100)}}requestMenuButtonFocus(){setTimeout(()=>{var t;const e=null===(t=this.menuButtonRef)||void 0===t?void 0:t.nativeElement;e&&e.focus()})}requestNoteFor(t){const e=this.extraItems[t];e&&this._dialog.open(D,{data:Object.assign({},e)})}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(o.a),l.Ob(K.c),l.Ob(Y.b),l.Ob(w.b))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-mental-math"]],viewQuery:function(t,e){var n;1&t&&l.Fc(ct,!0,l.l),2&t&&l.qc(n=l.dc())&&(e.menuButtonRef=n.first)},decls:18,vars:9,consts:[["formPrimeSubmitButton",""],["appContentSvg",""],["x1","30","x2","30","y1","0","y2","41","stroke-width","0.1","stroke","#f00","fill","none"],[2,"position","absolute","right","0","top","0"],["class","mental-math-trophy","svgIcon","icon_sun",3,"ngClass","animate","click",4,"ngIf"],[3,"ngSubmit"],["formPrime","ngForm"],[1,"mental-math-topic"],[3,"items","active","itemChange"],[1,"mental-math-submit"],[4,"ngIf","ngIfElse"],["for","onPrimeSubmitButton"],["class","mental-math-teacher",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["id","onPrimeSubmitButton","mat-icon-button","","color","primary","aria-label","submission button","type","submit",3,"disabled"],["svgIcon","icon_sun",1,"mental-math-trophy",3,"ngClass","click"],["id","onPrimeSubmitButton","mat-icon-button","","color","warn","aria-label","refresh button","type","button","appFocus","",3,"matMenuTriggerFor"],["menuButton",""],["yPosition","above"],["menu","matMenu"],["mat-menu-item","","type","button",3,"click"],["color","primary"],[1,"mental-math-teacher"],["formExtra","ngForm"],[3,"items","active","itemChange","noteRequest"],["id","onExtraSubmitButton","mat-icon-button","","color","primary","aria-label","submission button","type","submit",3,"disabled"]],template:function(t,e){if(1&t){const t=l.Vb();l.zc(0,lt,3,1,"ng-template",null,0,l.Ac),l.Ub(2,"app-squared-paper"),l.fc(),l.Ub(3,"svg",1),l.Pb(4,"line",2),l.Tb(),l.ec(),l.Ub(5,"div",3),l.zc(6,ut,1,3,"mat-icon",4),l.Tb(),l.Ub(7,"form",5,6),l.cc("ngSubmit",(function(){l.tc(t);const n=l.rc(8);return e.onPrimeSubmit(n)})),l.Ub(9,"div",7),l.Bc(10),l.Tb(),l.Ub(11,"app-math-input-group",8),l.cc("itemChange",(function(t){return e.onPrimeItemChange(t)})),l.Tb(),l.Ub(12,"div",9),l.zc(13,mt,12,2,"ng-container",10),l.Ub(14,"label",11),l.Bc(15),l.Tb(),l.zc(16,dt,2,1,"span",12),l.Tb(),l.Tb(),l.zc(17,pt,11,6,"form",13),l.Tb()}if(2&t){const t=l.rc(1);l.Bb(6),l.mc("ngIf",e.todayVictories>0),l.Bb(4),l.Cc(e.primeMessage),l.Bb(1),l.mc("items",e.primeItems)("active","active"===e.primeStatus),l.Bb(2),l.mc("ngIf","done"===e.primeStatus)("ngIfElse",t),l.Bb(2),l.Cc(e.primeSubmitLabel),l.Bb(1),l.mc("ngIf","done"===e.primeStatus),l.Bb(1),l.mc("ngIf",e.extraItems)}},directives:[k,i.l,s.m,s.j,s.k,st,y.a,K.a,i.j,ot,rt.c,rt.d,rt.a],styles:[".mental-math-submit[_ngcontent-%COMP%]{height:72px}.mental-math-submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:4px}.mental-math-submit[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;vertical-align:top;margin-left:6px}.mental-math-submit[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{text-shadow:1px 1px 2px #cba}.mental-math-topic[_ngcontent-%COMP%]{margin:24px 96px 24px 0;padding-left:6px;text-indent:48px}.mental-math-trophy[_ngcontent-%COMP%]{display:block;width:96px;height:96px}.mental-math-teacher[_ngcontent-%COMP%]{font-family:Pacifico,cursive;font-weight:400;font-size:32px;color:red;letter-spacing:normal;vertical-align:top}"]}),t})();var xt=n("FKr1");function vt(t,e){1&t&&(l.fc(),l.Pb(0,"path")),2&t&&l.Cb("d",e.$implicit.path||"M0 0z")}function Ct(t,e){if(1&t){const t=l.Vb();l.Ub(0,"span",8),l.cc("click",(function(){l.tc(t);const n=e.index,i=l.gc().index;return l.gc().onSelect(n,i)})),l.Bc(1),l.Tb()}if(2&t){const t=e.$implicit;l.Bb(1),l.Cc(t)}}function Pt(t,e){if(1&t&&(l.Ub(0,"div"),l.zc(1,Ct,2,1,"span",7),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.mc("ngForOf",t)}}let Tt=(()=>{class t{constructor(){this.showFrame=!0,this.activeSelection=-1,this.selectionList=[],this.selectionChange=new l.n,this.letters=[]}set letters(t){this._letters=t;const e=t.length,n=e>0?t[0].length:0;this.colNum=2+n,this.rowNum=2+e,this.pathFrame=function(t,e){const n=t>2?"q.5 -1 1 0".repeat(t-2):"h-2",i=t>2?"q-.5 1-1 0".repeat(t-2):"h 2";return`M0 1q-2-3 1-1${n}q 3-2 1 1${e>2?"q 1 .5 0 1".repeat(e-2):"v-2"}q 2 3-1 1${i}q-3 2-1-1${e>2?"q-1-.5 0-1".repeat(e-2):"v 2"}z`}(n,e)}get letters(){return this._letters}ngOnInit(){}onSelect(t,e){const n=this.selectionList[this.activeSelection];n&&(n.segment&&n.segment.x1===t&&n.segment.x2===t&&n.segment.y1===e&&n.segment.y2===e?(n.segment=void 0,n.path=void 0):(n.segment=function(t,e,n){if(n&&function(t,e,n){return(e-t.x1)*(t.y2-t.y1)==(n-t.y1)*(t.x2-t.x1)}(n,t,e)){const{x1:i,x2:a,y1:s,y2:o}=n;if(t===i&&i===a)return e<s?{x1:i,x2:a,y1:e,y2:o}:{x1:i,x2:a,y1:s,y2:e};if(e===s&&s===o)return t<i?{y1:s,y2:o,x1:t,x2:a}:{y1:s,y2:o,x1:i,x2:t};if(Math.abs(t-i)===Math.abs(e-s))return t<i?{x1:t,x2:a,y1:e,y2:o}:{x1:i,x2:t,y1:s,y2:e}}return{x1:t,y1:e,x2:t,y2:e}}(t,e,n.segment),n.path=function(t){const{x1:e,y1:n,x2:i,y2:a}=t,s=i-e,o=a-n;let r=0,c=0,l="";return s>0?0===o?(r=e+.5+.354,c=n+.146,l="a.2 .2 0 0 0 .3 0a.5 .5 0 0 1 .7 0".repeat(s-1)+"a.2 .2 0 0 0 .3 0a.5 .5 0 1 1 0 .7"+"a.2 .2 0 0 0-.3 0a.5 .5 0 0 1-.7 0".repeat(s-1)+"a.2 .2 0 0 0-.3 0a.5 .5 0 1 1 0-.7"):s===o?(r=e+1,c=n+.5,l="a.5 .5 0 0 0 .5 .5a.5 .5 0 0 1 .5 .5".repeat(s-1)+"a.5 .5 0 0 0 .5 .5a.5 .5 0 1 1-.5 .5"+"a.5 .5 0 0 0-.5-.5a.5 .5 0 0 1-.5-.5".repeat(s-1)+"a.5 .5 0 0 0-.5-.5a.5 .5 0 1 1 .5-.5"):s===-o&&(r=e+.5,c=n,l="a.5 .5 0 0 0 .5-.5a.5 .5 0 0 1 .5-.5".repeat(s-1)+"a.5 .5 0 0 0 .5-.5a.5 .5 0 1 1 .5 .5"+"a.5 .5 0 0 0-.5 .5a.5 .5 0 0 1-.5 .5".repeat(s-1)+"a.5 .5 0 0 0-.5 .5a.5 .5 0 1 1-.5-.5"):0===s&&(o>0?(r=e+1-.146,c=n+.5+.354,l="a.2 .2 0 0 0 0 .3a.5 .5 0 0 1 0 .7".repeat(o-1)+"a.2 .2 0 0 0 0 .3a.5 .5 0 1 1-.7 0"+"a.2 .2 0 0 0 0-.3a.5 .5 0 0 1 0-.7".repeat(o-1)+"a.2 .2 0 0 0 0-.3a.5 .5 0 1 1 .7 0"):0===o&&(r=e+.5,c=n,l="a.5 .5 0 0 1 0 1a.5 .5 0 0 1 0 -1")),`M${r} ${c}${l}z`}(n.segment)),this.selectionChange.emit(n))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-letter-board"]],inputs:{letters:"letters",showFrame:"showFrame",activeSelection:"activeSelection",selectionList:"selectionList"},outputs:{selectionChange:"selectionChange"},decls:8,vars:7,consts:[[3,"colNum","rowNum"],["appContentSvg",""],["transform","translate(1 1)"],[1,"letter-board-frame"],[1,"letter-board-selections"],[4,"ngFor","ngForOf"],[1,"letter-board"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,e){1&t&&(l.Ub(0,"app-squared-paper",0),l.fc(),l.Ub(1,"svg",1),l.Ub(2,"g",2),l.Pb(3,"path",3),l.Ub(4,"g",4),l.zc(5,vt,1,1,"path",5),l.Tb(),l.Tb(),l.Tb(),l.ec(),l.Ub(6,"div",6),l.zc(7,Pt,2,1,"div",5),l.Tb(),l.Tb()),2&t&&(l.mc("colNum",e.colNum)("rowNum",e.rowNum),l.Bb(3),l.Fb("letter-board-frame-active",e.showFrame),l.Cb("d",e.pathFrame),l.Bb(2),l.mc("ngForOf",e.selectionList),l.Bb(2),l.mc("ngForOf",e.letters))},directives:[k,i.k],styles:[".letter-board[_ngcontent-%COMP%]{margin-left:24px;margin-top:24px}.letter-board[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;text-align:center;width:24px;min-width:24px;max-width:24px}.letter-board[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{box-shadow:2px 2px 4px rgba(0,0,0,.53);outline:2px outset rgba(0,0,136,.53);color:#008}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:rgba(68,68,68,.93);stroke-width:.1px}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+1){fill:rgba(255,0,0,.27)}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+2){fill:rgba(0,255,0,.27)}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+3){fill:rgba(0,0,255,.27)}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+4){fill:rgba(255,255,0,.27)}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+5){fill:rgba(0,255,255,.27)}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+6){fill:rgba(255,0,255,.27)}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+7){fill:rgba(136,0,0,.27)}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+8){fill:rgba(0,136,0,.27)}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n+9){fill:rgba(0,0,136,.27)}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-of-type(10n){fill:rgba(136,0,136,.27)}.letter-board-selections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:last-of-type{fill:hsla(0,0%,93.3%,.93);stroke:rgba(221,0,221,.53)}path.letter-board-frame[_ngcontent-%COMP%]{stroke:none;fill:transparent;transition:fill 2s linear}path.letter-board-frame.letter-board-frame-active[_ngcontent-%COMP%]{fill:rgba(0,136,0,.53)}"]}),t})();const wt=["main"],yt=["*"];function Ot(t,e){1&t&&(l.Ub(0,"div"),l.Bc(1,"Loading..."),l.Tb())}function Mt(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",10),l.cc("click",(function(){l.tc(t);const n=e.$implicit;return l.gc(3).onAnswerClick(n)})),l.Ub(1,"span"),l.Bc(2),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit,n=e.last,i=l.gc(3);l.yc("transform",i.getSvgAnswerLayout(t).translate)("width",i.getSvgAnswerLayout(t).width)("height",i.getSvgAnswerLayout(t).height)("line-height",i.getSvgAnswerLayout(t).height),l.Fb("word-search-game-answer-next",n),l.Bb(2),l.Cc(t.value)}}function kt(t,e){if(1&t&&(l.Ub(0,"div",8),l.zc(1,Mt,3,11,"div",9),l.Tb()),2&t){const t=l.gc(2);l.Bb(1),l.mc("ngForOf",t.answers)("ngForTrackBy",t.trackByIndex)}}function _t(t,e){if(1&t&&l.zc(0,kt,2,2,"div",7),2&t){const t=l.gc(),e=l.rc(1);l.mc("ngIf",t.gameSvg)("ngIfElse",e)}}function It(t,e){1&t&&(l.Ub(0,"mat-icon",11),l.Bc(1," emoji_events"),l.Tb())}function Bt(t,e){if(1&t){const t=l.Vb();l.Ub(0,"app-word-search-game-svg",17),l.cc("itemChange",(function(e){return l.tc(t),l.gc(2).onQuestionClick(e)})),l.Tb()}if(2&t){const t=l.gc(2);l.Fb("word-search-game-svg-done",t.isDone),l.mc("game",t.gameSvg)}}function St(t,e){if(1&t){const t=l.Vb();l.Ub(0,"li",10),l.cc("click",(function(){l.tc(t);const n=e.$implicit;return l.gc(3).onQuestionClick(n.value)})),l.Ub(1,"mat-icon",5),l.Bc(2,"volume_up"),l.Tb(),l.Ub(3,"span"),l.Bc(4),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit;l.Bb(4),l.Cc(t.value)}}function Ut(t,e){if(1&t){const t=l.Vb();l.Ub(0,"li",10),l.cc("click",(function(){l.tc(t);const n=e.$implicit;return l.gc(3).onAnswerClick(n)})),l.Ub(1,"span"),l.Bc(2),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit,n=e.last;l.yc("transform",t.transform),l.Fb("word-search-game-answer-next",n)("word-search-game-answer-last",t.isLast),l.Bb(2),l.Cc(t.value)}}function $t(t,e){if(1&t&&(l.Ub(0,"div",18),l.Ub(1,"ul",19),l.zc(2,St,5,1,"li",20),l.Tb(),l.Ub(3,"ul",8),l.zc(4,Ut,3,7,"li",21),l.Tb(),l.Tb()),2&t){const t=l.gc(2);l.Bb(2),l.mc("ngForOf",t.questions)("ngForTrackBy",t.trackByIndex),l.Bb(2),l.mc("ngForOf",t.answers)("ngForTrackBy",t.trackByIndex)}}function Vt(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",12),l.zc(1,Bt,1,3,"app-word-search-game-svg",13),l.Ub(2,"div",14),l.Ub(3,"app-letter-board",15),l.cc("selectionChange",(function(e){return l.tc(t),l.gc().onSelectionChange(e)})),l.Tb(),l.Tb(),l.zc(4,$t,5,4,"div",16),l.Tb()}if(2&t){const t=l.gc(),e=l.rc(3);l.Fb("word-search-game-svg",!!t.gameSvg),l.Bb(1),l.mc("ngIf",t.gameSvg),l.Bb(1),l.yc("transform",null==t.gameSVGLayout?null:t.gameSVGLayout.board.translate),l.Bb(1),l.mc("showFrame",t.isDone)("letters",t.letters)("selectionList",t.answers)("activeSelection",t.activeAnswerIndex),l.Bb(1),l.mc("ngIf",!t.hasSvg)("ngIfElse",e)}}const Nt="word-search-game-svg";let zt=(()=>{class t{constructor(t){this._r2=t,this.itemChange=new l.n,this.width=0,this.height=0}ngAfterViewInit(){const t=this.game;if(t){const e=this.mainRef.nativeElement;e&&setTimeout(()=>{const n=function(t){let e=1024,n=768;if(t){const i=t.split(/[\s,]+/gm).map(t=>+t),a=i[2]-i[0],s=i[3]-i[1];a>0&&(e=a),s>0&&(n=s)}return{width:e,height:n}}(t.getAttribute("viewBox"));this.width=n.width,this.height=n.height,t.querySelectorAll(`g.${Nt}-questions > path`).forEach(t=>{const e=t.id.substring(t.tagName.length);t.onclick=()=>this.itemChange.emit(e)}),this._r2.appendChild(e,t)})}}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(l.E))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-word-search-game-svg"]],viewQuery:function(t,e){var n;1&t&&l.Fc(wt,!0,l.l),2&t&&l.qc(n=l.dc())&&(e.mainRef=n.first)},inputs:{game:"game"},outputs:{itemChange:"itemChange"},ngContentSelectors:yt,decls:3,vars:4,consts:[[2,"position","relative"],["main",""]],template:function(t,e){1&t&&(l.lc(),l.Ub(0,"div",0,1),l.kc(2),l.Tb()),2&t&&l.yc("width",e.width,"px")("height",e.height,"px")},encapsulation:2}),t})();function qt(t){return`translateY(${-1-t}50%)`}function Ft(t,e){const n={},i=t.querySelector(e);if(i){const t=i.getAttribute("x"),e=i.getAttribute("y"),a=i.getAttribute("width"),s=i.getAttribute("height");n.translate=`translate(${t||"0"}px, ${e||"0"}px)`,n.width=a?a+"px":"inherit",n.height=s?s+"px":"inherit"}return n}function At(t,e,n){const i={};for(const a of n)i[a.answerValue]=Ft(t,e+a.value);return i}let Rt=(()=>{class t{constructor(t,e,n,i){this._route=t,this._http=e,this._iconRegistry=n,this._sanitizer=i}get isDone(){return this.questions&&this.answers&&this.answers.length>this.questions.length}get activeAnswerIndex(){return this.answers?this.answers.length-1:-1}ngOnInit(){const t=this._route.snapshot.queryParams,e=t.game;if(e){const n="assets/school/english/word-search-game/"+e+"/";this._http.get(n+"data.json").subscribe(i=>{this.mission=i.mission;const a=+t.index,s=a>0&&a<=i.puzzles.length?i.puzzles[a-1]:Object(u.c)(i.puzzles),o=i.blank||" ";if(this.letters=function(t,e,n){return function(t,e){if(e)return t.split(e);{const e=Math.floor(Math.sqrt(t.length)),n=Array(e);for(let i=0;i<e;i++)n[i]=t.substring(i*e,(i+1)*e);return n}}(t,n).map(t=>t.split("").map(e))}(s,t=>t===o?Object(d.c)(i.letters):t,i.liner),this.questions=Object.keys(i.answers).map((t,e)=>{const a=i.answers[t],s="string"==typeof a?a:a[0],o=new Audio;return o.src=n+"audio/"+s+".mp3",{index:e,value:s,answerValue:t,answerIndex:-1,audio:o}}),this.answers=[],this._nextAnswer(),this.name=e,i.hasSvg){this.hasSvg=!0;const t=this._sanitizer.bypassSecurityTrustResourceUrl(n+"data.svg");this._iconRegistry.getSvgIconFromUrl(t).subscribe(t=>{var e,n;this.gameSvg=t,this.gameSVGLayout=(n=this.questions,{board:Ft(e=t,`rect.${Nt}-board`),prompt:Ft(e,`rect.${Nt}-prompt`),answers:At(e,`rect#${Nt}-answer`,n)})})}})}}_nextAnswer(){const t=this.answers.length;this.answers.push({index:t,value:"",transform:qt(t)})}onAnswerClick(t){const e=this.answers[this.activeAnswerIndex];t===e?(e.segment=void 0,e.path=void 0,e.value=""):(e.segment=t.segment,e.path=t.path,e.value=t.value)}onQuestionClick(t){const e=this.questions.find(e=>e.value===t);if(e){e.audio.load(),e.audio.play();const t=e.answerIndex>=0?e.answerIndex:this.activeAnswerIndex;t>=0&&this.onAnswerClick(this.answers[t])}}onSelectionChange(t){if(t.segment){const{x1:e,y1:n,x2:i,y2:a}=t.segment,s=i-e,o=a-n,r=Math.max(Math.abs(s),Math.abs(o));t.value=this.letters[n][e];for(let l=1;l<=r;l++)t.value+=this.letters[n+o*l/r][e+s*l/r];const c=this.questions.find(e=>e.answerIndex<0&&e.answerValue===t.value);c&&(c.answerIndex=t.index,t.isLast=c.index+1===this.questions.length,t.transform=`translateY(${c.index-t.index}00%)`,this._nextAnswer())}else t.value=""}trackByIndex(t){return t}getSvgAnswerLayout(t){return t.index===this.activeAnswerIndex?this.gameSVGLayout.prompt:this.gameSVGLayout.answers[t.value]}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(o.a),l.Ob(a.a),l.Ob(K.c),l.Ob(Y.b))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-word-search-game"]],decls:12,vars:3,consts:[["templateLoadSvg",""],["templateGameSvg",""],[1,"word-search-game-title"],["color","accent","style","vertical-align: text-top; transform: translate(-10px, -10px)",4,"ngIf"],[1,"word-search-game-info"],["color","primary"],["class","word-search-game",3,"word-search-game-svg",4,"ngIf"],["class","word-search-game-answers",4,"ngIf","ngIfElse"],[1,"word-search-game-answers"],["matRipple","",3,"word-search-game-answer-next","transform","width","height","line-height","click",4,"ngFor","ngForOf","ngForTrackBy"],["matRipple","",3,"click"],["color","accent",2,"vertical-align","text-top","transform","translate(-10px, -10px)"],[1,"word-search-game"],[3,"word-search-game-svg-done","game","itemChange",4,"ngIf"],[1,"word-search-game-board"],[3,"showFrame","letters","selectionList","activeSelection","selectionChange"],["class","word-search-game-plan",4,"ngIf","ngIfElse"],[3,"game","itemChange"],[1,"word-search-game-plan"],[1,"word-search-game-questions"],["matRipple","",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["matRipple","",3,"word-search-game-answer-next","word-search-game-answer-last","transform","click",4,"ngFor","ngForOf","ngForTrackBy"]],template:function(t,e){1&t&&(l.zc(0,Ot,2,0,"ng-template",null,0,l.Ac),l.zc(2,_t,1,2,"ng-template",null,1,l.Ac),l.Ub(4,"h2",2),l.Bc(5," Word Search Puzzle "),l.zc(6,It,2,0,"mat-icon",3),l.Tb(),l.Ub(7,"p",4),l.Ub(8,"mat-icon",5),l.Bc(9,"info"),l.Tb(),l.Bc(10),l.Tb(),l.zc(11,Vt,5,11,"div",6)),2&t&&(l.Bb(6),l.mc("ngIf",e.isDone),l.Bb(4),l.Dc(" ",e.mission,"\n"),l.Bb(1),l.mc("ngIf",e.letters))},directives:[i.l,K.a,i.k,xt.m,Tt,zt],styles:[".word-search-game-title[_ngcontent-%COMP%]{padding-left:72px;padding-top:12px}.word-search-game-info[_ngcontent-%COMP%]{padding-left:24px}.word-search-game[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:flex-start;align-content:flex-start}.word-search-game-board[_ngcontent-%COMP%]{padding-left:24px;padding-bottom:24px}.word-search-game-plan[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:24px;margin-bottom:24px;padding-top:48px;border:1px solid #ddf;border-top:none;border-radius:0 0 6px 6px;background:linear-gradient(#eef,#eae)}.word-search-game-plan[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;font-size:20px}.word-search-game-plan[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;min-height:24px;max-height:24px;height:24px;display:flex;flex-direction:row;align-items:center;padding-left:12px;padding-right:0;background-color:rgba(153,153,255,.13)}.word-search-game-questions[_ngcontent-%COMP%]{margin:0;min-width:119px}.word-search-game-questions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#63b;background-color:rgba(153,153,255,.27)}.word-search-game-questions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-of-type{border-radius:0 0 0 6px}.word-search-game-answers[_ngcontent-%COMP%]{min-width:167px;margin:0 0 -24px;font-size:20px}.word-search-game-answers[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{transition:all 2s cubic-bezier(.5,-.5,.25,1.5)}.word-search-game-answers[_ngcontent-%COMP%]   li.word-search-game-answer-last[_ngcontent-%COMP%]{border-radius:0 0 6px 0}.word-search-game-answers[_ngcontent-%COMP%]   li.word-search-game-answer-next[_ngcontent-%COMP%]{letter-spacing:4.8px;padding-left:0;padding-right:0;background-color:hsla(0,0%,100%,0)}.word-search-game.word-search-game-svg[_ngcontent-%COMP%]{position:relative}.word-search-game.word-search-game-svg[_ngcontent-%COMP%]   .word-search-game-board[_ngcontent-%COMP%]{padding:0;position:absolute;left:0;top:0}.word-search-game.word-search-game-svg[_ngcontent-%COMP%]   .word-search-game-answers[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:pointer;position:absolute;left:0;top:0;text-align:center;transition:all 2s cubic-bezier(.5,-.5,.25,1.5);letter-spacing:0;background-color:#eef;border-radius:12px}.word-search-game.word-search-game-svg[_ngcontent-%COMP%]   .word-search-game-answers[_ngcontent-%COMP%] > div.word-search-game-answer-next[_ngcontent-%COMP%]{letter-spacing:4.8px;background-color:rgba(0,0,0,.13);border-radius:0}"]}),t})();n.d(e,"SchoolModule",(function(){return jt}));const Lt=[{path:"mental-math",component:ft},{path:"word-puzzle",component:Rt},{path:"",component:ft}];let jt=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[o.c.forChild(Lt),i.c,s.d,a.b,r.a,c.a],o.c]}),t})()}}]);
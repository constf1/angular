!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,(function(e){return t[e]}).bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s="OqOn")}({OqOn:function(t,e,s){"use strict";s.r(e),Array.from("SDCH");const i=(Array.from("A23456789TJQK"),"SDCH".length),r="A23456789TJQK".length,h=i*r;function n(t){return Math.floor(t/i)}function o(t){return t%i}class a{constructor(t){this.success=t}}class l extends class{constructor(t,e,s){this.PILE_NUM=t,this.CELL_NUM=e,this.BASE_NUM=s,this.PILE_START=0,this.DESK_SIZE=t+e+s,this.PILE_END=this.BASE_START=this.PILE_START+this.PILE_NUM,this.BASE_END=this.CELL_START=this.BASE_START+this.BASE_NUM,this.CELL_END=this.CELL_START+this.CELL_NUM}isPile(t){return t>=this.PILE_START&&t<this.PILE_END}isBase(t){return t>=this.BASE_START&&t<this.BASE_END}isCell(t){return t>=this.CELL_START&&t<this.CELL_END}getSpotName(t){return this.isBase(t)?"base "+(t-this.BASE_START):this.isPile(t)?"pile "+(t-this.PILE_START):this.isCell(t)?"cell "+(t-this.CELL_START):"unknown "+t}}{constructor(t,e,s,i){super(t,e,s),this.desk=i,this.cardToWatch=-1,this.searchTime=500,this.done=new Set,this.buffers=[[],[]],this.iteration=0,this.path="",this.onMove=(t,e,s)=>{}}get doneSize(){return this.done.size}stop(t){throw new a(t)}getAllPaths(){return this.buffers[this.iteration%2]}getPath(){const t=this.buffers[this.iteration%2];return t[t.length-1]}clear(){this.done.clear(),this.buffers[0].length=0,this.buffers[1].length=0,this.iteration=0,this.path=""}prepare(){this.clear(),this.done.add(this.toKey()),this.buffers[0][0]=""}nextIteration(){const t=this.buffers[this.iteration%2];if(this.iteration++,t.length<=0)return!1;try{for(const e of t)this.skipForward(e),this.findMoves(),this.skipBackward()}catch(e){return!1}return t.length=0,this.buffers[this.iteration%2].length>0}solve(){this.prepare();const t=Date.now();try{for(let e;(e=this.buffers[this.iteration%2]).length>0;){this.iteration++;for(const t of e)this.skipForward(t),this.findMoves(),this.skipBackward();e.length=0,Date.now()-t>this.searchTime&&(console.log(`Oops! Search timeout on ${this.iteration} iteration!`),this.stop(!1))}}catch(e){if(e instanceof a)return e.success;throw e}finally{console.log("Searched: "+this.done.size+". Time (ms): "+(Date.now()-t))}return!1}skipForward(t){for(let e=0;e<t.length;e+=2)this.desk[t.charCodeAt(e+1)].push(this.desk[t.charCodeAt(e)].pop());this.path=t}skipBackward(){const t=this.path;for(let e=t.length;e>0;e-=2)this.desk[t.charCodeAt(e-2)].push(this.desk[t.charCodeAt(e-1)].pop())}move(t,e,s){this.desk[s].push(this.desk[e].pop());const i=this.toKey();this.done.has(i)||(this.done.add(i),this.buffers[this.iteration%2].push(this.path+String.fromCharCode(e,s)),!(this.cardToWatch<0||this.cardToWatch===t)||this.cardFilter&&!this.cardFilter[t]||this.destinationFilter&&!this.destinationFilter[s]||this.onMove(t,e,s)),this.desk[e].push(this.desk[s].pop())}findMoves(){const t=this.cardFilter,e=this.getEmptyCell(),s=this.getEmptyPile();for(let a=0;a<this.DESK_SIZE;a++){const l=this.desk[a];if(l.length>0){const u=l[l.length-1];if(!t||t[u]){if(!this.isBase(a)){const t=this.getBase(u);t>=0&&this.move(u,a,t)}for(let t=this.PILE_START;t<this.PILE_END;t++)if(t!==a){const e=this.desk[t];e.length>0&&(h=u,n(i=e[e.length-1])===(n(h)+1)%r&&o(i)%2!=o(h)%2)&&this.move(u,a,t)}e>=0&&(this.isCell(a)||this.move(u,a,e)),s>=0&&(!this.isPile(a)||l.length>1)&&this.move(u,a,s)}}}var i,h}baseToString(){let t="";for(let e=this.BASE_START;e<this.BASE_END;e++)t+=String.fromCharCode(this.desk[e].length);return t}pileToString(){const t=[];for(let e=this.PILE_START;e<this.PILE_END;e++)t.push(String.fromCharCode(...this.desk[e]));return t.sort(),t.join(String.fromCharCode(h))}toKey(){return this.baseToString()+this.pileToString()}getEmptyCell(){for(let t=this.CELL_START;t<this.CELL_END;t++)if(0===this.desk[t].length)return t;return-1}getEmptyPile(){for(let t=this.PILE_START;t<this.PILE_END;t++)if(0===this.desk[t].length)return t;return-1}countEmptyCells(){let t=0;for(let e=this.CELL_START;e<this.CELL_END;e++)0===this.desk[e].length&&t++;return t}countEmptyPiles(){let t=0;for(let e=this.PILE_START;e<this.PILE_END;e++)0===this.desk[e].length&&t++;return t}countEmpty(){return this.countEmptyCells()+this.countEmptyPiles()}countCardsInBases(){let t=0;for(let e=this.BASE_START;e<this.BASE_END;e++)t+=this.desk[e].length;return t}getBase(t){const e=o(t),s=n(t);for(let r=this.BASE_START+e;r<this.BASE_END;r+=i)if(this.desk[r].length===s)return r;return-1}}const u=new class{constructor(t){this.timeout=t}get ended(){return void 0===this.timerID}stop(){this.timerID&&(clearTimeout(this.timerID),this.timerID=void 0)}play(t){this.stop(),this.timerID=setTimeout(()=>{this.timerID=void 0,t()&&this.play(t)},this.timeout)}}(1);addEventListener("message",t=>{const e=t.data,s=e.requestId;if(s){const t=e.desk,i=new l(t.pile,t.cell,t.base,t.desk),r=i.countEmpty(),h=i.countCardsInBases();i.onMove=(t,n,o)=>{const a=i.countEmpty();let l=!1;if((a>r||a===r&&i.countCardsInBases()>h)&&(l=!0),l||i.doneSize>e.searchThreshold){const t={requestId:s,path:l?i.getPath():""};postMessage(t),i.stop(l)}},i.prepare(),u.play(()=>i.nextIteration())}else u.stop()})}});